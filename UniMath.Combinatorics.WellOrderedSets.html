<!DOCTYPE html>
<html>
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
	<link href="coqdoc.css" rel="stylesheet" type="text/css"/>
	<script src="https://code.jquery.com/jquery-1.11.0.min.js" type="text/javascript"></script>
	<script src="./proofs-toggle.js" type="text/javascript"></script>
	<style>
		div.proofcomment {
			font-style: italic;
		}
	</style>
	<title>Documentation</title>
</head>
<body>
<div id="page">
<div id="main">
<h1 class="libtitle">Library UniMath.Combinatorics.WellOrderedSets</h1>

<div class="code">

<br/>
</div>

<div class="doc">
<a name="lab361"></a><h1 class="section">Well Ordered Sets</h1>

<div class="paragraph"> </div>

 In this file our goal is to prove Zorn's Lemma and Zermelo's Well-Ordering Theorem. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="var">UniMath.MoreFoundations.All</span>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="var">UniMath.Combinatorics.OrderedSets</span>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="var">UniMath.MoreFoundations.DecidablePropositions</span>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="var">UniMath.MoreFoundations.Propositions</span>.<br/>

<br/>
<span class="id" title="keyword">Local Open</span> <span class="id" title="keyword">Scope</span> <span class="id" title="var">logic</span>.<br/>
<span class="id" title="keyword">Local Open</span> <span class="id" title="keyword">Scope</span> <span class="id" title="var">prop</span>.<br/>
<span class="id" title="keyword">Local Open</span> <span class="id" title="keyword">Scope</span> <span class="id" title="tactic">set</span>.<br/>
<span class="id" title="keyword">Local Open</span> <span class="id" title="keyword">Scope</span> <span class="id" title="var">subtype</span>.<br/>
<span class="id" title="keyword">Local Open</span> <span class="id" title="keyword">Scope</span> <span class="id" title="var">poset</span>.<br/>

<br/>
<span class="id" title="keyword">Delimit</span> <span class="id" title="keyword">Scope</span> <span class="id" title="var">tosubset</span> <span class="id" title="keyword">with</span> <span class="id" title="var">tosubset</span>. <span class="id" title="keyword">Local Open</span> <span class="id" title="keyword">Scope</span> <span class="id" title="var">tosubset</span>.<br/>

<br/>
<span class="id" title="keyword">Delimit</span> <span class="id" title="keyword">Scope</span> <span class="id" title="var">wosubset</span> <span class="id" title="keyword">with</span> <span class="id" title="var">wosubset</span>. <span class="id" title="keyword">Local Open</span> <span class="id" title="keyword">Scope</span> <span class="id" title="var">wosubset</span>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab362"></a><h2 class="section">Totally ordered subsets of a set</h2>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">TotalOrdering</span> (<span class="id" title="var">S</span>:<span class="id" title="var">hSet</span>) : <span class="id" title="var">hSet</span> := ∑ (<span class="id" title="var">R</span> : <span class="id" title="var">hrel_set</span> <span class="id" title="var">S</span>), <span class="id" title="var">hProp_to_hSet</span> (<span class="id" title="var">isTotalOrder</span> <span class="id" title="var">R</span>).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">TOSubset_set</span> (<span class="id" title="var">X</span>:<span class="id" title="var">hSet</span>) : <span class="id" title="var">hSet</span> := ∑ (<span class="id" title="var">S</span>:<span class="id" title="var">subtype_set</span> <span class="id" title="var">X</span>), <span class="id" title="var">TotalOrdering</span> (<span class="id" title="var">carrier_set</span> <span class="id" title="var">S</span>).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">TOSubset</span> (<span class="id" title="var">X</span>:<span class="id" title="var">hSet</span>) : <span class="id" title="var">UU</span> := <span class="id" title="var">TOSubset_set</span> <span class="id" title="var">X</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">TOSubset_to_subtype</span> {<span class="id" title="var">X</span>:<span class="id" title="var">hSet</span>} : <span class="id" title="var">TOSubset</span> <span class="id" title="var">X</span> -&gt; <span class="id" title="var">hsubtype</span> <span class="id" title="var">X</span><br/>
&nbsp;&nbsp;:= <span class="id" title="var">pr1</span>.<br/>

<br/>
<span class="id" title="keyword">Coercion</span> <span class="id" title="var">TOSubset_to_subtype</span> : <span class="id" title="var">TOSubset</span> &gt;-&gt; <span class="id" title="var">hsubtype</span>.<br/>

<br/>
<span class="id" title="keyword">Local</span> <span class="id" title="keyword">Definition</span> <span class="id" title="var">TOSrel</span> {<span class="id" title="var">X</span>:<span class="id" title="var">hSet</span>} (<span class="id" title="var">S</span> : <span class="id" title="var">TOSubset</span> <span class="id" title="var">X</span>) : <span class="id" title="var">hrel</span> (<span class="id" title="var">carrier_set</span> <span class="id" title="var">S</span>) := <span class="id" title="var">pr12</span> <span class="id" title="var">S</span>.<br/>

<br/>
<span class="id" title="keyword">Notation</span> &quot;s ≤ s'" := (<span class="id" title="var">TOSrel</span> <span class="id" title="var">_</span> <span class="id" title="var">s</span> <span class="id" title="var">s'</span>) : <span class="id" title="var">tosubset</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">TOtotal</span> {<span class="id" title="var">X</span>:<span class="id" title="var">hSet</span>} (<span class="id" title="var">S</span> : <span class="id" title="var">TOSubset</span> <span class="id" title="var">X</span>) : <span class="id" title="var">isTotalOrder</span> (<span class="id" title="var">TOSrel</span> <span class="id" title="var">S</span>) := <span class="id" title="var">pr22</span> <span class="id" title="var">S</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">TOtot</span> {<span class="id" title="var">X</span>:<span class="id" title="var">hSet</span>} (<span class="id" title="var">S</span> : <span class="id" title="var">TOSubset</span> <span class="id" title="var">X</span>) : <span class="id" title="var">istotal</span> (<span class="id" title="var">TOSrel</span> <span class="id" title="var">S</span>) := <span class="id" title="var">pr222</span> <span class="id" title="var">S</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">TOanti</span> {<span class="id" title="var">X</span>:<span class="id" title="var">hSet</span>} (<span class="id" title="var">S</span> : <span class="id" title="var">TOSubset</span> <span class="id" title="var">X</span>) : <span class="id" title="var">isantisymm</span> (<span class="id" title="var">TOSrel</span> <span class="id" title="var">S</span>) := <span class="id" title="var">pr2</span> (<span class="id" title="var">pr122</span> <span class="id" title="var">S</span>).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">TOrefl</span> {<span class="id" title="var">X</span>:<span class="id" title="var">hSet</span>} (<span class="id" title="var">S</span> : <span class="id" title="var">TOSubset</span> <span class="id" title="var">X</span>) : <span class="id" title="var">isrefl</span> (<span class="id" title="var">TOSrel</span> <span class="id" title="var">S</span>) := <span class="id" title="var">pr211</span> (<span class="id" title="var">pr22</span> <span class="id" title="var">S</span>).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">TOeq_to_refl</span> {<span class="id" title="var">X</span>:<span class="id" title="var">hSet</span>} (<span class="id" title="var">S</span> : <span class="id" title="var">TOSubset</span> <span class="id" title="var">X</span>) : ∀ <span class="id" title="var">s</span> <span class="id" title="var">t</span> : <span class="id" title="var">carrier_set</span> <span class="id" title="var">S</span>, <span class="id" title="var">s</span> = <span class="id" title="var">t</span> ⇒ <span class="id" title="var">s</span> ≤ <span class="id" title="var">t</span>.<br/>
<a class="proof" href="#">Show proof.</a><br/><div class="proof">
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">s</span> <span class="id" title="var">t</span> <span class="id" title="var">e</span>. <span class="id" title="tactic">induction</span> <span class="id" title="var">e</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">TOrefl</span>.<br/>
</div>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">TOeq_to_refl_1</span> {<span class="id" title="var">X</span>:<span class="id" title="var">hSet</span>} (<span class="id" title="var">S</span> : <span class="id" title="var">TOSubset</span> <span class="id" title="var">X</span>) : ∀ <span class="id" title="var">s</span> <span class="id" title="var">t</span> : <span class="id" title="var">carrier_set</span> <span class="id" title="var">S</span>, <span class="id" title="var">pr1</span> <span class="id" title="var">s</span> = <span class="id" title="var">pr1</span> <span class="id" title="var">t</span> ⇒ <span class="id" title="var">s</span> ≤ <span class="id" title="var">t</span>.<br/>
<a class="proof" href="#">Show proof.</a><br/><div class="proof">
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">s</span> <span class="id" title="var">t</span> <span class="id" title="var">e</span>. <span class="id" title="tactic">induction</span> (<span class="id" title="var">subtypeEquality_prop</span> <span class="id" title="var">e</span>). <span class="id" title="tactic">apply</span> <span class="id" title="var">TOrefl</span>.<br/>
</div>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">TOtrans</span> {<span class="id" title="var">X</span>:<span class="id" title="var">hSet</span>} (<span class="id" title="var">S</span> : <span class="id" title="var">TOSubset</span> <span class="id" title="var">X</span>) : <span class="id" title="var">istrans</span> (<span class="id" title="var">TOSrel</span> <span class="id" title="var">S</span>).<br/>
<a class="proof" href="#">Show proof.</a><br/><div class="proof">
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">pr2</span> <span class="id" title="var">S</span>).<br/>
</div>

<br/>
<span class="id" title="keyword">Local</span> <span class="id" title="keyword">Lemma</span> <span class="id" title="var">h1''</span> {<span class="id" title="var">X</span>:<span class="id" title="var">hSet</span>} {<span class="id" title="var">S</span>:<span class="id" title="var">TOSubset</span> <span class="id" title="var">X</span>} {<span class="id" title="var">r</span> <span class="id" title="var">s</span> <span class="id" title="var">t</span> <span class="id" title="var">u</span>:<span class="id" title="var">S</span>} : (<span class="id" title="var">r</span> ≤ <span class="id" title="var">t</span> -&gt; <span class="id" title="var">pr1</span> <span class="id" title="var">r</span> = <span class="id" title="var">pr1</span> <span class="id" title="var">s</span> -&gt; <span class="id" title="var">pr1</span> <span class="id" title="var">t</span> = <span class="id" title="var">pr1</span> <span class="id" title="var">u</span> -&gt; <span class="id" title="var">s</span> ≤ <span class="id" title="var">u</span>)%<span class="id" title="var">tosubset</span>.<br/>
<a class="proof" href="#">Show proof.</a><br/><div class="proof">
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">le</span> <span class="id" title="var">p</span> <span class="id" title="var">q</span>. <span class="id" title="tactic">induction</span> (<span class="id" title="var">subtypeEquality_prop</span> <span class="id" title="var">p</span>). <span class="id" title="tactic">induction</span> (<span class="id" title="var">subtypeEquality_prop</span> <span class="id" title="var">q</span>). <span class="id" title="tactic">exact</span> <span class="id" title="var">le</span>.<br/>
</div>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">tosub_order_compat</span> {<span class="id" title="var">X</span>:<span class="id" title="var">hSet</span>} {<span class="id" title="var">S</span> <span class="id" title="var">T</span> : <span class="id" title="var">TOSubset</span> <span class="id" title="var">X</span>} (<span class="id" title="var">le</span> : <span class="id" title="var">S</span> ⊆ <span class="id" title="var">T</span>) : <span class="id" title="var">hProp</span><br/>
&nbsp;&nbsp;:= ∀ <span class="id" title="var">s</span> <span class="id" title="var">s'</span> : <span class="id" title="var">S</span>, <span class="id" title="var">s</span> ≤ <span class="id" title="var">s'</span> ⇒ <span class="id" title="var">subtype_inc</span> <span class="id" title="var">le</span> <span class="id" title="var">s</span> ≤ <span class="id" title="var">subtype_inc</span> <span class="id" title="var">le</span> <span class="id" title="var">s'</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">tosub_le</span> (<span class="id" title="var">X</span>:<span class="id" title="var">hSet</span>) (<span class="id" title="var">S</span> <span class="id" title="var">T</span> : <span class="id" title="var">TOSubset</span> <span class="id" title="var">X</span>) : <span class="id" title="var">hProp</span><br/>
&nbsp;&nbsp;:= (∑ <span class="id" title="var">le</span> : <span class="id" title="var">S</span> ⊆ <span class="id" title="var">T</span>, <span class="id" title="var">tosub_order_compat</span> <span class="id" title="var">le</span>)%<span class="id" title="var">prop</span>.<br/>

<br/>
<span class="id" title="keyword">Notation</span> &quot;S ≼ T" := (<span class="id" title="var">tosub_le</span> <span class="id" title="var">_</span> <span class="id" title="var">S</span> <span class="id" title="var">T</span>) (<span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 70) : <span class="id" title="var">tosubset</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">sub_initial</span> {<span class="id" title="var">X</span>:<span class="id" title="var">hSet</span>} {<span class="id" title="var">S</span> : <span class="id" title="var">hsubtype</span> <span class="id" title="var">X</span>} {<span class="id" title="var">T</span> : <span class="id" title="var">TOSubset</span> <span class="id" title="var">X</span>} (<span class="id" title="var">le</span> : <span class="id" title="var">S</span> ⊆ <span class="id" title="var">T</span>) : <span class="id" title="var">hProp</span><br/>
&nbsp;&nbsp;:= ∀ (<span class="id" title="var">s</span> <span class="id" title="var">t</span> : <span class="id" title="var">X</span>) (<span class="id" title="var">Ss</span> : <span class="id" title="var">S</span> <span class="id" title="var">s</span>) (<span class="id" title="var">Tt</span> : <span class="id" title="var">T</span> <span class="id" title="var">t</span>), <span class="id" title="var">TOSrel</span> <span class="id" title="var">T</span> (<span class="id" title="var">t</span>,,<span class="id" title="var">Tt</span>) (<span class="id" title="var">s</span>,,<span class="id" title="var">le</span> <span class="id" title="var">s</span> <span class="id" title="var">Ss</span>) ⇒ <span class="id" title="var">S</span> <span class="id" title="var">t</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">same_induced_ordering</span> {<span class="id" title="var">X</span>:<span class="id" title="var">hSet</span>} {<span class="id" title="var">S</span> <span class="id" title="var">T</span> : <span class="id" title="var">TOSubset</span> <span class="id" title="var">X</span>} {<span class="id" title="var">B</span> : <span class="id" title="var">hsubtype</span> <span class="id" title="var">X</span>} (<span class="id" title="var">BS</span> : <span class="id" title="var">B</span> ⊆ <span class="id" title="var">S</span>) (<span class="id" title="var">BT</span> : <span class="id" title="var">B</span> ⊆ <span class="id" title="var">T</span>)<br/>
&nbsp;&nbsp;:= ∀ <span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">B</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">subtype_inc</span> <span class="id" title="var">BS</span> <span class="id" title="var">x</span> ≤ <span class="id" title="var">subtype_inc</span> <span class="id" title="var">BS</span> <span class="id" title="var">y</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;⇔<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">subtype_inc</span> <span class="id" title="var">BT</span> <span class="id" title="var">x</span> ≤ <span class="id" title="var">subtype_inc</span> <span class="id" title="var">BT</span> <span class="id" title="var">y</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">common_initial</span> {<span class="id" title="var">X</span>:<span class="id" title="var">hSet</span>} (<span class="id" title="var">B</span> : <span class="id" title="var">hsubtype</span> <span class="id" title="var">X</span>) (<span class="id" title="var">S</span> <span class="id" title="var">T</span> : <span class="id" title="var">TOSubset</span> <span class="id" title="var">X</span>) : <span class="id" title="var">hProp</span><br/>
&nbsp;&nbsp;:= (∑ (<span class="id" title="var">BS</span> : <span class="id" title="var">B</span> ⊆ <span class="id" title="var">S</span>) (<span class="id" title="var">BT</span> : <span class="id" title="var">B</span> ⊆ <span class="id" title="var">T</span>), <span class="id" title="var">sub_initial</span> <span class="id" title="var">BS</span> ∧ <span class="id" title="var">sub_initial</span> <span class="id" title="var">BT</span> ∧ <span class="id" title="var">same_induced_ordering</span> <span class="id" title="var">BS</span> <span class="id" title="var">BT</span>)%<span class="id" title="var">prop</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">max_common_initial</span> {<span class="id" title="var">X</span>:<span class="id" title="var">hSet</span>} (<span class="id" title="var">S</span> <span class="id" title="var">T</span> : <span class="id" title="var">TOSubset</span> <span class="id" title="var">X</span>) : <span class="id" title="var">hsubtype</span> <span class="id" title="var">X</span><br/>
&nbsp;&nbsp;:= <span class="id" title="var">λ</span> <span class="id" title="var">x</span>, ∃ (<span class="id" title="var">B</span> : <span class="id" title="var">hsubtype</span> <span class="id" title="var">X</span>), <span class="id" title="var">B</span> <span class="id" title="var">x</span> ∧ <span class="id" title="var">common_initial</span> <span class="id" title="var">B</span> <span class="id" title="var">S</span> <span class="id" title="var">T</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">max_common_initial_is_max</span> {<span class="id" title="var">X</span>:<span class="id" title="var">hSet</span>} (<span class="id" title="var">S</span> <span class="id" title="var">T</span> : <span class="id" title="var">TOSubset</span> <span class="id" title="var">X</span>) (<span class="id" title="var">A</span> : <span class="id" title="var">hsubtype</span> <span class="id" title="var">X</span>) :<br/>
&nbsp;&nbsp;<span class="id" title="var">common_initial</span> <span class="id" title="var">A</span> <span class="id" title="var">S</span> <span class="id" title="var">T</span> -&gt; <span class="id" title="var">A</span> ⊆ <span class="id" title="var">max_common_initial</span> <span class="id" title="var">S</span> <span class="id" title="var">T</span>.<br/>
<a class="proof" href="#">Show proof.</a><br/><div class="proof">
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">c</span> <span class="id" title="var">x</span> <span class="id" title="var">Ax</span>. <span class="id" title="tactic">exact</span> (<span class="id" title="var">hinhpr</span> (<span class="id" title="var">A</span>,,<span class="id" title="var">Ax</span>,,<span class="id" title="var">c</span>)).<br/>
</div>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">max_common_initial_is_sub</span> {<span class="id" title="var">X</span>:<span class="id" title="var">hSet</span>} (<span class="id" title="var">S</span> <span class="id" title="var">T</span> : <span class="id" title="var">TOSubset</span> <span class="id" title="var">X</span>) :<br/>
&nbsp;&nbsp;<span class="id" title="var">max_common_initial</span> <span class="id" title="var">S</span> <span class="id" title="var">T</span> ⊆ <span class="id" title="var">S</span><br/>
&nbsp;&nbsp;∧<br/>
&nbsp;&nbsp;<span class="id" title="var">max_common_initial</span> <span class="id" title="var">S</span> <span class="id" title="var">T</span> ⊆ <span class="id" title="var">T</span>.<br/>
<a class="proof" href="#">Show proof.</a><br/><div class="proof">
&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">x</span> <span class="id" title="var">m</span>. <span class="id" title="tactic">apply</span> (<span class="id" title="var">squash_to_hProp</span> <span class="id" title="var">m</span>); <span class="id" title="tactic">intros</span> [<span class="id" title="var">B</span> [<span class="id" title="var">Bx</span> [<span class="id" title="var">BS</span> [<span class="id" title="var">_</span> <span class="id" title="var">_</span>]]]]; <span class="id" title="tactic">clear</span> <span class="id" title="var">m</span>. <span class="id" title="tactic">exact</span> (<span class="id" title="var">BS</span> <span class="id" title="var">_</span> <span class="id" title="var">Bx</span>).<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">x</span> <span class="id" title="var">m</span>. <span class="id" title="tactic">apply</span> (<span class="id" title="var">squash_to_hProp</span> <span class="id" title="var">m</span>); <span class="id" title="tactic">intros</span> [<span class="id" title="var">B</span> [<span class="id" title="var">Bx</span> [<span class="id" title="var">_</span> [<span class="id" title="var">BT</span> <span class="id" title="var">_</span>]]]]; <span class="id" title="tactic">clear</span> <span class="id" title="var">m</span>. <span class="id" title="tactic">exact</span> (<span class="id" title="var">BT</span> <span class="id" title="var">_</span> <span class="id" title="var">Bx</span>).<br/>
</div>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">max_common_initial_is_common_initial</span> {<span class="id" title="var">X</span>:<span class="id" title="var">hSet</span>} (<span class="id" title="var">S</span> <span class="id" title="var">T</span> : <span class="id" title="var">TOSubset</span> <span class="id" title="var">X</span>) :<br/>
&nbsp;&nbsp;<span class="id" title="var">common_initial</span> (<span class="id" title="var">max_common_initial</span> <span class="id" title="var">S</span> <span class="id" title="var">T</span>) <span class="id" title="var">S</span> <span class="id" title="var">T</span>.<br/>
<a class="proof" href="#">Show proof.</a><br/><div class="proof">
&nbsp;&nbsp;<span class="id" title="tactic">exists</span> (<span class="id" title="var">pr1</span> (<span class="id" title="var">max_common_initial_is_sub</span> <span class="id" title="var">S</span> <span class="id" title="var">T</span>)).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">exists</span> (<span class="id" title="var">pr2</span> (<span class="id" title="var">max_common_initial_is_sub</span> <span class="id" title="var">S</span> <span class="id" title="var">T</span>)).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;{ <span class="id" title="tactic">intros</span> <span class="id" title="var">x</span> <span class="id" title="var">s</span> <span class="id" title="var">M</span> <span class="id" title="var">Ss</span> <span class="id" title="var">le</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">squash_to_hProp</span> <span class="id" title="var">M</span>); <span class="id" title="tactic">intros</span> [<span class="id" title="var">B</span> [<span class="id" title="var">Bx</span> [<span class="id" title="var">BS</span> [<span class="id" title="var">BT</span> [<span class="id" title="var">BSi</span> [<span class="id" title="var">BTi</span> <span class="id" title="var">BST</span>]]]]]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">sub_initial</span> <span class="id" title="tactic">in</span> <span class="id" title="var">BSi</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">hinhpr</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="var">B</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> (<span class="id" title="var">BSi</span> <span class="id" title="var">x</span> <span class="id" title="var">s</span> <span class="id" title="var">Bx</span> <span class="id" title="var">Ss</span>). <span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> (<span class="id" title="var">h1''</span> <span class="id" title="var">le</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">exact</span> (<span class="id" title="var">BS</span>,,<span class="id" title="var">BT</span>,,<span class="id" title="var">BSi</span>,,<span class="id" title="var">BTi</span>,,<span class="id" title="var">BST</span>). }<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;{ <span class="id" title="tactic">intros</span> <span class="id" title="var">x</span> <span class="id" title="var">t</span> <span class="id" title="var">M</span> <span class="id" title="var">Tt</span> <span class="id" title="var">le</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">squash_to_hProp</span> <span class="id" title="var">M</span>); <span class="id" title="tactic">intros</span> [<span class="id" title="var">B</span> [<span class="id" title="var">Bx</span> [<span class="id" title="var">BS</span> [<span class="id" title="var">BT</span> [<span class="id" title="var">BSi</span> [<span class="id" title="var">BTi</span> <span class="id" title="var">BST</span>]]]]]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">sub_initial</span> <span class="id" title="tactic">in</span> <span class="id" title="var">BSi</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">hinhpr</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="var">B</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> (<span class="id" title="var">BTi</span> <span class="id" title="var">x</span> <span class="id" title="var">t</span> <span class="id" title="var">Bx</span> <span class="id" title="var">Tt</span>). <span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> (<span class="id" title="var">h1''</span> <span class="id" title="var">le</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">exact</span> (<span class="id" title="var">BS</span>,,<span class="id" title="var">BT</span>,,<span class="id" title="var">BSi</span>,,<span class="id" title="var">BTi</span>,,<span class="id" title="var">BST</span>). }<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;{ <span class="id" title="tactic">intros</span> <span class="id" title="var">le</span>. <span class="id" title="tactic">induction</span> <span class="id" title="var">x</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">x</span> <span class="id" title="var">xm</span>], <span class="id" title="var">y</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">y</span> <span class="id" title="var">ym</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">squash_to_hProp</span> <span class="id" title="var">xm</span>); <span class="id" title="tactic">intros</span> [<span class="id" title="var">B</span> [<span class="id" title="var">Bx</span> [<span class="id" title="var">BS</span> [<span class="id" title="var">BT</span> [<span class="id" title="var">BSi</span> [<span class="id" title="var">BTi</span> <span class="id" title="var">BST</span>]]]]]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">squash_to_hProp</span> <span class="id" title="var">ym</span>); <span class="id" title="tactic">intros</span> [<span class="id" title="var">C</span> [<span class="id" title="var">Cy</span> [<span class="id" title="var">CS</span> [<span class="id" title="var">CT</span> [<span class="id" title="var">CSi</span> [<span class="id" title="var">CTi</span> <span class="id" title="var">CST</span>]]]]]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">Cx</span> : <span class="id" title="var">C</span> <span class="id" title="var">x</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">apply</span> (<span class="id" title="var">CSi</span> <span class="id" title="var">y</span> <span class="id" title="var">x</span> <span class="id" title="var">Cy</span> (<span class="id" title="var">BS</span> <span class="id" title="var">x</span> <span class="id" title="var">Bx</span>)). <span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> (<span class="id" title="var">h1''</span> <span class="id" title="var">le</span>). }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">Q</span> := <span class="id" title="var">pr1</span> (<span class="id" title="var">CST</span> (<span class="id" title="var">x</span>,,<span class="id" title="var">Cx</span>) (<span class="id" title="var">y</span>,,<span class="id" title="var">Cy</span>))); <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Q</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">E</span> : <span class="id" title="var">subtype_inc</span> <span class="id" title="var">CS</span> (<span class="id" title="var">x</span>,, <span class="id" title="var">Cx</span>) ≤ <span class="id" title="var">subtype_inc</span> <span class="id" title="var">CS</span> (<span class="id" title="var">y</span>,, <span class="id" title="var">Cy</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> (<span class="id" title="var">h1''</span> <span class="id" title="var">le</span>). }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">clear</span> <span class="id" title="var">le</span>. <span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> (<span class="id" title="var">h1''</span> (<span class="id" title="var">Q</span> <span class="id" title="var">E</span>)). }<br/>
&nbsp;&nbsp;{ <span class="id" title="tactic">intros</span> <span class="id" title="var">le</span>. <span class="id" title="tactic">induction</span> <span class="id" title="var">x</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">x</span> <span class="id" title="var">xm</span>], <span class="id" title="var">y</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">y</span> <span class="id" title="var">ym</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">squash_to_hProp</span> <span class="id" title="var">xm</span>); <span class="id" title="tactic">intros</span> [<span class="id" title="var">B</span> [<span class="id" title="var">Bx</span> [<span class="id" title="var">BS</span> [<span class="id" title="var">BT</span> [<span class="id" title="var">BSi</span> [<span class="id" title="var">BTi</span> <span class="id" title="var">BST</span>]]]]]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">squash_to_hProp</span> <span class="id" title="var">ym</span>); <span class="id" title="tactic">intros</span> [<span class="id" title="var">C</span> [<span class="id" title="var">Cy</span> [<span class="id" title="var">CS</span> [<span class="id" title="var">CT</span> [<span class="id" title="var">CSi</span> [<span class="id" title="var">CTi</span> <span class="id" title="var">CST</span>]]]]]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">Cx</span> : <span class="id" title="var">C</span> <span class="id" title="var">x</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">apply</span> (<span class="id" title="var">CTi</span> <span class="id" title="var">y</span> <span class="id" title="var">x</span> <span class="id" title="var">Cy</span> (<span class="id" title="var">BT</span> <span class="id" title="var">x</span> <span class="id" title="var">Bx</span>)). <span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> (<span class="id" title="var">h1''</span> <span class="id" title="var">le</span>). }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">Q</span> := <span class="id" title="var">pr2</span> (<span class="id" title="var">CST</span> (<span class="id" title="var">x</span>,,<span class="id" title="var">Cx</span>) (<span class="id" title="var">y</span>,,<span class="id" title="var">Cy</span>))); <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Q</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">E</span> : <span class="id" title="var">subtype_inc</span> <span class="id" title="var">CT</span> (<span class="id" title="var">x</span>,, <span class="id" title="var">Cx</span>) ≤ <span class="id" title="var">subtype_inc</span> <span class="id" title="var">CT</span> (<span class="id" title="var">y</span>,, <span class="id" title="var">Cy</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> (<span class="id" title="var">h1''</span> <span class="id" title="var">le</span>). }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">clear</span> <span class="id" title="var">le</span>. <span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> (<span class="id" title="var">h1''</span> (<span class="id" title="var">Q</span> <span class="id" title="var">E</span>)). }<br/>
</div>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">tosub_fidelity</span> {<span class="id" title="var">X</span>:<span class="id" title="var">hSet</span>} {<span class="id" title="var">S</span> <span class="id" title="var">T</span>:<span class="id" title="var">TOSubset</span> <span class="id" title="var">X</span>} (<span class="id" title="var">le</span> : <span class="id" title="var">S</span> ≼ <span class="id" title="var">T</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">s</span> <span class="id" title="var">s'</span> : <span class="id" title="var">S</span>) : <span class="id" title="var">s</span> ≤ <span class="id" title="var">s'</span> ⇔ <span class="id" title="var">subtype_inc</span> (<span class="id" title="var">pr1</span> <span class="id" title="var">le</span>) <span class="id" title="var">s</span> ≤ <span class="id" title="var">subtype_inc</span> (<span class="id" title="var">pr1</span> <span class="id" title="var">le</span>) <span class="id" title="var">s'</span>.<br/>
<a class="proof" href="#">Show proof.</a><br/><div class="proof">
&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;{ <span class="id" title="tactic">exact</span> (<span class="id" title="var">pr2</span> <span class="id" title="var">le</span> <span class="id" title="var">s</span> <span class="id" title="var">s'</span>). }<br/>
&nbsp;&nbsp;{ <span class="id" title="tactic">intro</span> <span class="id" title="var">l</span>. <span class="id" title="tactic">apply</span> (<span class="id" title="var">squash_to_hProp</span> (<span class="id" title="var">TOtot</span> <span class="id" title="var">S</span> <span class="id" title="var">s</span> <span class="id" title="var">s'</span>)). <span class="id" title="tactic">intros</span> [<span class="id" title="var">c</span>|<span class="id" title="var">c</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">exact</span> <span class="id" title="var">c</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> (<span class="id" title="var">TOeq_to_refl</span> <span class="id" title="var">S</span> <span class="id" title="var">s</span> <span class="id" title="var">s'</span>). <span class="id" title="tactic">assert</span> (<span class="id" title="var">k</span> := <span class="id" title="var">pr2</span> <span class="id" title="var">le</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">c</span>); <span class="id" title="tactic">clear</span> <span class="id" title="var">c</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">k'</span> := <span class="id" title="var">TOanti</span> <span class="id" title="var">T</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">l</span> <span class="id" title="var">k</span>); <span class="id" title="tactic">clear</span> <span class="id" title="var">k</span> <span class="id" title="var">l</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">subtypeEquality_prop</span>. <span class="id" title="tactic">exact</span> (<span class="id" title="var">maponpaths</span> <span class="id" title="var">pr1</span> <span class="id" title="var">k'</span>). }<br/>
</div>

<br/>
</div>

<div class="doc">
<a name="lab363"></a><h3 class="section">Adding a point on top of a totally ordered subset</h3>

<div class="paragraph"> </div>

 We proceed directly.  An indirect way would be to form the corresponding totally ordered
    set, add a point to it, set up an equivalence between that and the union of our subset and
    the new point (assuming decidability of equality), and transport the ordering along the
    equivalence. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">TOSubset_plus_point_rel</span> {<span class="id" title="var">X</span>:<span class="id" title="var">hSet</span>} (<span class="id" title="var">S</span>:<span class="id" title="var">TOSubset</span> <span class="id" title="var">X</span>) (<span class="id" title="var">z</span>:<span class="id" title="var">X</span>) (<span class="id" title="var">nSz</span> : ¬ <span class="id" title="var">S</span> <span class="id" title="var">z</span>) :<br/>
&nbsp;&nbsp;<span class="id" title="var">hrel</span> (<span class="id" title="var">carrier_set</span> (<span class="id" title="var">subtype_plus</span> <span class="id" title="var">S</span> <span class="id" title="var">z</span>)).<br/>
<a class="proof" href="#">Show proof.</a><br/><div class="proof">
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> [<span class="id" title="var">s</span> <span class="id" title="var">i</span>] [<span class="id" title="var">t</span> <span class="id" title="var">j</span>]. <span class="id" title="tactic">unfold</span> <span class="id" title="var">subtype_plus</span> <span class="id" title="tactic">in</span> <span class="id" title="var">i</span>,<span class="id" title="var">j</span>. <span class="id" title="tactic">change</span> <span class="id" title="var">hPropset</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">use</span> (<span class="id" title="var">squash_to_hSet_2'</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">i</span> <span class="id" title="var">j</span>); <span class="id" title="tactic">clear</span> <span class="id" title="var">i</span> <span class="id" title="var">j</span>.<br/>
&nbsp;&nbsp;{ <span class="id" title="tactic">intros</span> [<span class="id" title="var">Ss</span>|<span class="id" title="var">ezs</span>] [<span class="id" title="var">St</span>|<span class="id" title="var">ezt</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">exact</span> (<span class="id" title="var">TOSrel</span> <span class="id" title="var">S</span> (<span class="id" title="var">s</span>,,<span class="id" title="var">Ss</span>) (<span class="id" title="var">t</span>,,<span class="id" title="var">St</span>)). } { <span class="id" title="tactic">exact</span> <span class="id" title="var">htrue</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">exact</span> <span class="id" title="var">hfalse</span>. }                    { <span class="id" title="tactic">exact</span> <span class="id" title="var">htrue</span>. } }<br/>
&nbsp;&nbsp;{ <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">intros</span> [<span class="id" title="var">Ss</span>|<span class="id" title="var">ezs</span>] [<span class="id" title="var">Ss'</span>|<span class="id" title="var">ezs'</span>] [<span class="id" title="var">St</span>|<span class="id" title="var">ezt</span>]. <span class="id" title="tactic">repeat</span> <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">now</span> <span class="id" title="var">induction_hProp</span> <span class="id" title="var">Ss</span> <span class="id" title="var">Ss'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <span class="id" title="var">fromempty</span>. <span class="id" title="tactic">induction</span> <span class="id" title="var">ezs'</span>. <span class="id" title="tactic">exact</span> (<span class="id" title="var">nSz</span> <span class="id" title="var">Ss</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <span class="id" title="var">fromempty</span>. <span class="id" title="tactic">induction</span> <span class="id" title="var">ezs</span>. <span class="id" title="tactic">exact</span> (<span class="id" title="var">nSz</span> <span class="id" title="var">Ss'</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">reflexivity</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">intros</span> [<span class="id" title="var">Ss</span>|<span class="id" title="var">ezs</span>] [<span class="id" title="var">St</span>|<span class="id" title="var">ezt</span>] [<span class="id" title="var">St'</span>|<span class="id" title="var">ezt'</span>]. <span class="id" title="tactic">repeat</span> <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">now</span> <span class="id" title="var">induction_hProp</span> <span class="id" title="var">St</span> <span class="id" title="var">St'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <span class="id" title="var">fromempty</span>. <span class="id" title="tactic">induction</span> <span class="id" title="var">ezt'</span>. <span class="id" title="tactic">exact</span> (<span class="id" title="var">nSz</span> <span class="id" title="var">St</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <span class="id" title="var">fromempty</span>. <span class="id" title="tactic">induction</span> <span class="id" title="var">ezt</span>. <span class="id" title="tactic">exact</span> (<span class="id" title="var">nSz</span> <span class="id" title="var">St'</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <span class="id" title="var">fromempty</span>. <span class="id" title="tactic">induction</span> <span class="id" title="var">ezt'</span>. <span class="id" title="tactic">exact</span> (<span class="id" title="var">nSz</span> <span class="id" title="var">St</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <span class="id" title="var">fromempty</span>. <span class="id" title="tactic">induction</span> <span class="id" title="var">ezt</span>. <span class="id" title="tactic">exact</span> (<span class="id" title="var">nSz</span> <span class="id" title="var">St'</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">reflexivity</span>. } }<br/>
</div>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">isTotalOrder_TOSubset_plus_point</span> {<span class="id" title="var">X</span>:<span class="id" title="var">hSet</span>} (<span class="id" title="var">S</span>:<span class="id" title="var">TOSubset</span> <span class="id" title="var">X</span>) (<span class="id" title="var">z</span>:<span class="id" title="var">X</span>) (<span class="id" title="var">nSz</span> : ¬ <span class="id" title="var">S</span> <span class="id" title="var">z</span>) :<br/>
&nbsp;&nbsp;<span class="id" title="var">isTotalOrder</span> (<span class="id" title="var">TOSubset_plus_point_rel</span> <span class="id" title="var">S</span> <span class="id" title="var">z</span> <span class="id" title="var">nSz</span>).<br/>
<a class="proof" href="#">Show proof.</a><br/><div class="proof">
&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;{ <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{                         <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> [<span class="id" title="var">w</span> <span class="id" title="var">Ww</span>] [<span class="id" title="var">x</span> <span class="id" title="var">Wx</span>] [<span class="id" title="var">y</span> <span class="id" title="var">Wy</span>] <span class="id" title="var">wx</span> <span class="id" title="var">xy</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">squash_to_hProp</span> <span class="id" title="var">Wy</span>); <span class="id" title="tactic">intros</span> [<span class="id" title="var">Sy</span>|<span class="id" title="var">ezy</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">induction</span> (<span class="id" title="var">ishinh_irrel</span> (<span class="id" title="var">ii1</span> <span class="id" title="var">Sy</span>) <span class="id" title="var">Wy</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">squash_to_hProp</span> <span class="id" title="var">Ww</span>); <span class="id" title="tactic">intros</span> [<span class="id" title="var">Sw</span>|<span class="id" title="var">ezw</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">induction</span> (<span class="id" title="var">ishinh_irrel</span> (<span class="id" title="var">ii1</span> <span class="id" title="var">Sw</span>) <span class="id" title="var">Ww</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">squash_to_hProp</span> <span class="id" title="var">Wx</span>); <span class="id" title="tactic">intros</span> [<span class="id" title="var">Sx</span>|<span class="id" title="var">ezx</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">induction</span> (<span class="id" title="var">ishinh_irrel</span> (<span class="id" title="var">ii1</span> <span class="id" title="var">Sx</span>) <span class="id" title="var">Wx</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">change</span> (<span class="id" title="var">hProptoType</span> (<span class="id" title="var">TOSrel</span> <span class="id" title="var">S</span> (<span class="id" title="var">w</span>,,<span class="id" title="var">Sw</span>) (<span class="id" title="var">x</span>,,<span class="id" title="var">Sx</span>))) <span class="id" title="tactic">in</span> <span class="id" title="var">wx</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">change</span> (<span class="id" title="var">hProptoType</span> (<span class="id" title="var">TOSrel</span> <span class="id" title="var">S</span> (<span class="id" title="var">x</span>,,<span class="id" title="var">Sx</span>) (<span class="id" title="var">y</span>,,<span class="id" title="var">Sy</span>))) <span class="id" title="tactic">in</span> <span class="id" title="var">xy</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">change</span> (<span class="id" title="var">hProptoType</span> (<span class="id" title="var">TOSrel</span> <span class="id" title="var">S</span> (<span class="id" title="var">w</span>,,<span class="id" title="var">Sw</span>) (<span class="id" title="var">y</span>,,<span class="id" title="var">Sy</span>))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exact</span> (<span class="id" title="var">TOtrans</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">wx</span> <span class="id" title="var">xy</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">induction</span> <span class="id" title="var">ezx</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> (<span class="id" title="var">ishinh_irrel</span> (<span class="id" title="var">ii2</span> (<span class="id" title="var">idpath</span> <span class="id" title="var">z</span>)) <span class="id" title="var">Wx</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">change</span> <span class="id" title="var">empty</span> <span class="id" title="tactic">in</span> <span class="id" title="var">xy</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exact</span> (<span class="id" title="var">fromempty</span> <span class="id" title="var">xy</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">induction</span> <span class="id" title="var">ezw</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> (<span class="id" title="var">ishinh_irrel</span> (<span class="id" title="var">ii2</span> (<span class="id" title="var">idpath</span> <span class="id" title="var">z</span>)) <span class="id" title="var">Ww</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">change</span> <span class="id" title="var">hfalse</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">squash_to_hProp</span> <span class="id" title="var">Wx</span>); <span class="id" title="tactic">intros</span> [<span class="id" title="var">Sx</span>|<span class="id" title="var">ezx</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">induction</span> (<span class="id" title="var">ishinh_irrel</span> (<span class="id" title="var">ii1</span> <span class="id" title="var">Sx</span>) <span class="id" title="var">Wx</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">change</span> (<span class="id" title="var">hProptoType</span> (<span class="id" title="var">TOSrel</span> <span class="id" title="var">S</span> (<span class="id" title="var">x</span>,,<span class="id" title="var">Sx</span>) (<span class="id" title="var">y</span>,,<span class="id" title="var">Sy</span>))) <span class="id" title="tactic">in</span> <span class="id" title="var">xy</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">change</span> <span class="id" title="var">empty</span> <span class="id" title="tactic">in</span> <span class="id" title="var">wx</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exact</span> <span class="id" title="var">wx</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">induction</span> <span class="id" title="var">ezx</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> (<span class="id" title="var">ishinh_irrel</span> (<span class="id" title="var">ii2</span> (<span class="id" title="var">idpath</span> <span class="id" title="var">z</span>)) <span class="id" title="var">Wx</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">change</span> <span class="id" title="var">unit</span> <span class="id" title="tactic">in</span> <span class="id" title="var">wx</span>; <span class="id" title="tactic">change</span> <span class="id" title="var">empty</span> <span class="id" title="tactic">in</span> <span class="id" title="var">xy</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exact</span> <span class="id" title="var">xy</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">induction</span> <span class="id" title="var">ezy</span>. <span class="id" title="tactic">apply</span> (<span class="id" title="var">squash_to_hProp</span> <span class="id" title="var">Ww</span>); <span class="id" title="tactic">intros</span> [<span class="id" title="var">Sw</span>|<span class="id" title="var">ezw</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">induction</span> (<span class="id" title="var">ishinh_irrel</span> (<span class="id" title="var">ii1</span> <span class="id" title="var">Sw</span>) <span class="id" title="var">Ww</span>), (<span class="id" title="var">ishinh_irrel</span> (<span class="id" title="var">ii2</span> (<span class="id" title="var">idpath</span> <span class="id" title="var">z</span>)) <span class="id" title="var">Wy</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exact</span> <span class="id" title="var">tt</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">induction</span> <span class="id" title="var">ezw</span>, (<span class="id" title="var">ishinh_irrel</span> (<span class="id" title="var">ii2</span> (<span class="id" title="var">idpath</span> <span class="id" title="var">z</span>)) <span class="id" title="var">Wy</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> (<span class="id" title="var">ishinh_irrel</span> (<span class="id" title="var">ii2</span> (<span class="id" title="var">idpath</span> <span class="id" title="var">z</span>)) <span class="id" title="var">Ww</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exact</span> <span class="id" title="var">tt</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{                         <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> [<span class="id" title="var">x</span> <span class="id" title="var">Wx</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">squash_to_hProp</span> <span class="id" title="var">Wx</span>); <span class="id" title="tactic">intros</span> [<span class="id" title="var">Sx</span>|<span class="id" title="var">ezx</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">induction</span> (<span class="id" title="var">ishinh_irrel</span> (<span class="id" title="var">ii1</span> <span class="id" title="var">Sx</span>) <span class="id" title="var">Wx</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">change</span> (<span class="id" title="var">hProptoType</span> (<span class="id" title="var">TOSrel</span> <span class="id" title="var">S</span> (<span class="id" title="var">x</span>,,<span class="id" title="var">Sx</span>) (<span class="id" title="var">x</span>,,<span class="id" title="var">Sx</span>))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">TOrefl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">induction</span> <span class="id" title="var">ezx</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> (<span class="id" title="var">ishinh_irrel</span> (<span class="id" title="var">ii2</span> (<span class="id" title="var">idpath</span> <span class="id" title="var">z</span>)) <span class="id" title="var">Wx</span>); <span class="id" title="tactic">change</span> <span class="id" title="var">unit</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exact</span> <span class="id" title="var">tt</span>. } }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{                           <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> [<span class="id" title="var">x</span> <span class="id" title="var">Wx</span>] [<span class="id" title="var">y</span> <span class="id" title="var">Wy</span>] <span class="id" title="var">xy</span> <span class="id" title="var">yx</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">eqset_to_path</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">squash_to_hProp</span> <span class="id" title="var">Wx</span>); <span class="id" title="tactic">intros</span> [<span class="id" title="var">Sx</span>|<span class="id" title="var">ezx</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">induction</span> (<span class="id" title="var">ishinh_irrel</span> (<span class="id" title="var">ii1</span> <span class="id" title="var">Sx</span>) <span class="id" title="var">Wx</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">squash_to_hProp</span> <span class="id" title="var">Wy</span>); <span class="id" title="tactic">intros</span> [<span class="id" title="var">Sy</span>|<span class="id" title="var">ezy</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">induction</span> (<span class="id" title="var">ishinh_irrel</span> (<span class="id" title="var">ii1</span> <span class="id" title="var">Sy</span>) <span class="id" title="var">Wy</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">change</span> (<span class="id" title="var">hProptoType</span> (<span class="id" title="var">TOSrel</span> <span class="id" title="var">S</span> (<span class="id" title="var">x</span>,,<span class="id" title="var">Sx</span>) (<span class="id" title="var">y</span>,,<span class="id" title="var">Sy</span>))) <span class="id" title="tactic">in</span> <span class="id" title="var">xy</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">change</span> (<span class="id" title="var">hProptoType</span> (<span class="id" title="var">TOSrel</span> <span class="id" title="var">S</span> (<span class="id" title="var">y</span>,,<span class="id" title="var">Sy</span>) (<span class="id" title="var">x</span>,,<span class="id" title="var">Sx</span>))) <span class="id" title="tactic">in</span> <span class="id" title="var">yx</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">subtypeEquality_prop</span>; <span class="id" title="tactic">change</span> (<span class="id" title="var">x</span>=<span class="id" title="var">y</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exact</span> (<span class="id" title="var">maponpaths</span> <span class="id" title="var">pr1</span> (<span class="id" title="var">TOanti</span> <span class="id" title="var">S</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">xy</span> <span class="id" title="var">yx</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">induction</span> <span class="id" title="var">ezy</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> (<span class="id" title="var">ishinh_irrel</span> (<span class="id" title="var">ii2</span> (<span class="id" title="var">idpath</span> <span class="id" title="var">z</span>)) <span class="id" title="var">Wy</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">change</span> <span class="id" title="var">unit</span> <span class="id" title="tactic">in</span> <span class="id" title="var">xy</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">change</span> <span class="id" title="var">empty</span> <span class="id" title="tactic">in</span> <span class="id" title="var">yx</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">subtypeEquality_prop</span>; <span class="id" title="tactic">change</span> (<span class="id" title="var">x</span>=<span class="id" title="var">z</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exact</span> (<span class="id" title="var">fromempty</span> <span class="id" title="var">yx</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">induction</span> <span class="id" title="var">ezx</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> (<span class="id" title="var">ishinh_irrel</span> (<span class="id" title="var">ii2</span> (<span class="id" title="var">idpath</span> <span class="id" title="var">z</span>)) <span class="id" title="var">Wx</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">squash_to_hProp</span> <span class="id" title="var">Wy</span>); <span class="id" title="tactic">intros</span> [<span class="id" title="var">Sy</span>|<span class="id" title="var">ezy</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">induction</span> (<span class="id" title="var">ishinh_irrel</span> (<span class="id" title="var">ii1</span> <span class="id" title="var">Sy</span>) <span class="id" title="var">Wy</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">change</span> <span class="id" title="var">unit</span> <span class="id" title="tactic">in</span> <span class="id" title="var">yx</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">change</span> <span class="id" title="var">empty</span> <span class="id" title="tactic">in</span> <span class="id" title="var">xy</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">subtypeEquality_prop</span>; <span class="id" title="tactic">change</span> (<span class="id" title="var">z</span>=<span class="id" title="var">y</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exact</span> (<span class="id" title="var">fromempty</span> <span class="id" title="var">xy</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">induction</span> <span class="id" title="var">ezy</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">subtypeEquality_prop</span>; <span class="id" title="tactic">change</span> (<span class="id" title="var">z</span>=<span class="id" title="var">z</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>. } }<br/>
&nbsp;&nbsp;{                             <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> [<span class="id" title="var">x</span> <span class="id" title="var">Wx</span>] [<span class="id" title="var">y</span> <span class="id" title="var">Wy</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">squash_to_hProp</span> <span class="id" title="var">Wx</span>); <span class="id" title="tactic">intros</span> [<span class="id" title="var">Sx</span>|<span class="id" title="var">ezx</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">induction</span> (<span class="id" title="var">ishinh_irrel</span> (<span class="id" title="var">ii1</span> <span class="id" title="var">Sx</span>) <span class="id" title="var">Wx</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">squash_to_hProp</span> <span class="id" title="var">Wy</span>); <span class="id" title="tactic">intros</span> [<span class="id" title="var">Sy</span>|<span class="id" title="var">ezy</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">induction</span> (<span class="id" title="var">ishinh_irrel</span> (<span class="id" title="var">ii1</span> <span class="id" title="var">Sy</span>) <span class="id" title="var">Wy</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">generalize</span> (<span class="id" title="var">TOtot</span> <span class="id" title="var">S</span> (<span class="id" title="var">x</span>,,<span class="id" title="var">Sx</span>) (<span class="id" title="var">y</span>,,<span class="id" title="var">Sy</span>)); <span class="id" title="tactic">apply</span> <span class="id" title="var">hinhfun</span>; <span class="id" title="tactic">intros</span> [<span class="id" title="var">xy</span>|<span class="id" title="var">yx</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">apply</span> <span class="id" title="var">ii1</span>. <span class="id" title="tactic">exact</span> <span class="id" title="var">xy</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">apply</span> <span class="id" title="var">ii2</span>. <span class="id" title="tactic">exact</span> <span class="id" title="var">yx</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">induction</span> <span class="id" title="var">ezy</span>. <span class="id" title="tactic">induction</span> (<span class="id" title="var">ishinh_irrel</span> (<span class="id" title="var">ii2</span> (<span class="id" title="var">idpath</span> <span class="id" title="var">z</span>)) <span class="id" title="var">Wy</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">change</span> (<span class="id" title="var">htrue</span> ∨ <span class="id" title="var">hfalse</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exact</span> (<span class="id" title="var">hinhpr</span> (<span class="id" title="var">ii1</span> <span class="id" title="var">tt</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">induction</span> <span class="id" title="var">ezx</span>. <span class="id" title="tactic">induction</span> (<span class="id" title="var">ishinh_irrel</span> (<span class="id" title="var">ii2</span> (<span class="id" title="var">idpath</span> <span class="id" title="var">z</span>)) <span class="id" title="var">Wx</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">squash_to_hProp</span> <span class="id" title="var">Wy</span>); <span class="id" title="tactic">intros</span> [<span class="id" title="var">Sy</span>|<span class="id" title="var">ezy</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">induction</span> (<span class="id" title="var">ishinh_irrel</span> (<span class="id" title="var">ii1</span> <span class="id" title="var">Sy</span>) <span class="id" title="var">Wy</span>); <span class="id" title="tactic">change</span> (<span class="id" title="var">hfalse</span> ∨ <span class="id" title="var">htrue</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exact</span> (<span class="id" title="var">hinhpr</span> (<span class="id" title="var">ii2</span> <span class="id" title="var">tt</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">induction</span> <span class="id" title="var">ezy</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> (<span class="id" title="var">ishinh_irrel</span> (<span class="id" title="var">ii2</span> (<span class="id" title="var">idpath</span> <span class="id" title="var">z</span>)) <span class="id" title="var">Wy</span>); <span class="id" title="tactic">change</span> (<span class="id" title="var">htrue</span> ∨ <span class="id" title="var">htrue</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exact</span> (<span class="id" title="var">hinhpr</span> (<span class="id" title="var">ii2</span> <span class="id" title="var">tt</span>)). }<br/>
</div>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">TOSubset_plus_point</span> {<span class="id" title="var">X</span>:<span class="id" title="var">hSet</span>} (<span class="id" title="var">S</span>:<span class="id" title="var">TOSubset</span> <span class="id" title="var">X</span>) (<span class="id" title="var">z</span>:<span class="id" title="var">X</span>) (<span class="id" title="var">nSz</span> : ¬ <span class="id" title="var">S</span> <span class="id" title="var">z</span>) : <span class="id" title="var">TOSubset</span> <span class="id" title="var">X</span><br/>
&nbsp;&nbsp;:=  <span class="id" title="var">subtype_plus</span> <span class="id" title="var">S</span> <span class="id" title="var">z</span>,,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">TOSubset_plus_point_rel</span> <span class="id" title="var">S</span> <span class="id" title="var">z</span> <span class="id" title="var">nSz</span>,,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">isTotalOrder_TOSubset_plus_point</span> <span class="id" title="var">S</span> <span class="id" title="var">z</span> <span class="id" title="var">nSz</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">TOSubset_plus_point_incl</span> {<span class="id" title="var">X</span>:<span class="id" title="var">hSet</span>} (<span class="id" title="var">S</span>:<span class="id" title="var">TOSubset</span> <span class="id" title="var">X</span>) (<span class="id" title="var">z</span>:<span class="id" title="var">X</span>) (<span class="id" title="var">nSz</span> : ¬ <span class="id" title="var">S</span> <span class="id" title="var">z</span>) :<br/>
&nbsp;&nbsp;<span class="id" title="var">S</span> ⊆ <span class="id" title="var">TOSubset_plus_point</span> <span class="id" title="var">S</span> <span class="id" title="var">z</span> <span class="id" title="var">nSz</span>.<br/>
<a class="proof" href="#">Show proof.</a><br/><div class="proof">
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">subtype_plus_incl</span>.<br/>
</div>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">TOSubset_plus_point_le</span> {<span class="id" title="var">X</span>:<span class="id" title="var">hSet</span>} (<span class="id" title="var">S</span>:<span class="id" title="var">TOSubset</span> <span class="id" title="var">X</span>) (<span class="id" title="var">z</span>:<span class="id" title="var">X</span>) (<span class="id" title="var">nSz</span> : ¬ <span class="id" title="var">S</span> <span class="id" title="var">z</span>) :<br/>
&nbsp;&nbsp;<span class="id" title="var">S</span> ≼ <span class="id" title="var">TOSubset_plus_point</span> <span class="id" title="var">S</span> <span class="id" title="var">z</span> <span class="id" title="var">nSz</span>.<br/>
<a class="proof" href="#">Show proof.</a><br/><div class="proof">
&nbsp;&nbsp;<span class="id" title="var">use</span> <span class="id" title="var">tpair</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <span class="id" title="var">TOSubset_plus_point_incl</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">s</span> <span class="id" title="var">t</span> <span class="id" title="var">le</span>. <span class="id" title="tactic">exact</span> <span class="id" title="var">le</span>.<br/>
</div>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">TOSubset_plus_point_initial</span> {<span class="id" title="var">X</span>:<span class="id" title="var">hSet</span>} (<span class="id" title="var">S</span>:<span class="id" title="var">TOSubset</span> <span class="id" title="var">X</span>) (<span class="id" title="var">z</span>:<span class="id" title="var">X</span>) (<span class="id" title="var">nSz</span> : ¬ <span class="id" title="var">S</span> <span class="id" title="var">z</span>) :<br/>
&nbsp;&nbsp;<span class="id" title="var">sub_initial</span> (<span class="id" title="var">TOSubset_plus_point_incl</span> <span class="id" title="var">S</span> <span class="id" title="var">z</span> <span class="id" title="var">nSz</span>).<br/>
<a class="proof" href="#">Show proof.</a><br/><div class="proof">
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">s</span> <span class="id" title="var">t</span> <span class="id" title="var">Ss</span> <span class="id" title="var">Tt</span> <span class="id" title="var">le</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">squash_to_hProp</span> <span class="id" title="var">Tt</span>); <span class="id" title="tactic">intros</span> [<span class="id" title="var">St</span>|<span class="id" title="var">ezt</span>].<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">exact</span> <span class="id" title="var">St</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">induction</span> <span class="id" title="var">ezt</span>, (<span class="id" title="var">ishinh_irrel</span> (<span class="id" title="var">ii2</span> (<span class="id" title="var">idpath</span> <span class="id" title="var">z</span>)) <span class="id" title="var">Tt</span>); <span class="id" title="tactic">change</span> <span class="id" title="var">empty</span> <span class="id" title="tactic">in</span> <span class="id" title="var">le</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exact</span> (<span class="id" title="var">fromempty</span> <span class="id" title="var">le</span>).<br/>
</div>

<br/>
</div>

<div class="doc">
<a name="lab364"></a><h2 class="section">Well ordered subsets of a set</h2>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">hasSmallest</span> {<span class="id" title="var">X</span> : <span class="id" title="var">UU</span>} (<span class="id" title="var">R</span> : <span class="id" title="var">hrel</span> <span class="id" title="var">X</span>) : <span class="id" title="var">hProp</span><br/>
&nbsp;&nbsp;:= ∀ <span class="id" title="var">S</span> : <span class="id" title="var">hsubtype</span> <span class="id" title="var">X</span>, (∃ <span class="id" title="var">x</span>, <span class="id" title="var">S</span> <span class="id" title="var">x</span>) ⇒ ∃ <span class="id" title="var">x</span>:<span class="id" title="var">X</span>, <span class="id" title="var">S</span> <span class="id" title="var">x</span> ∧ ∀ <span class="id" title="var">y</span>:<span class="id" title="var">X</span>, <span class="id" title="var">S</span> <span class="id" title="var">y</span> ⇒ <span class="id" title="var">R</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">isWellOrder</span> {<span class="id" title="var">X</span> : <span class="id" title="var">hSet</span>} (<span class="id" title="var">R</span> : <span class="id" title="var">hrel</span> <span class="id" title="var">X</span>) : <span class="id" title="var">hProp</span> := <span class="id" title="var">isTotalOrder</span> <span class="id" title="var">R</span> ∧ <span class="id" title="var">hasSmallest</span> <span class="id" title="var">R</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">WellOrdering</span> (<span class="id" title="var">S</span>:<span class="id" title="var">hSet</span>) : <span class="id" title="var">hSet</span> := ∑ (<span class="id" title="var">R</span> : <span class="id" title="var">hrel_set</span> <span class="id" title="var">S</span>), <span class="id" title="var">hProp_to_hSet</span> (<span class="id" title="var">isWellOrder</span> <span class="id" title="var">R</span>).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">WOSubset_set</span> (<span class="id" title="var">X</span>:<span class="id" title="var">hSet</span>) : <span class="id" title="var">hSet</span> := ∑ (<span class="id" title="var">S</span>:<span class="id" title="var">subtype_set</span> <span class="id" title="var">X</span>), <span class="id" title="var">WellOrdering</span> (<span class="id" title="var">carrier_set</span> <span class="id" title="var">S</span>).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">WOSubset</span> (<span class="id" title="var">X</span>:<span class="id" title="var">hSet</span>) : <span class="id" title="var">UU</span> := <span class="id" title="var">WOSubset_set</span> <span class="id" title="var">X</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">WOSubset_to_subtype</span> {<span class="id" title="var">X</span>:<span class="id" title="var">hSet</span>} : <span class="id" title="var">WOSubset</span> <span class="id" title="var">X</span> -&gt; <span class="id" title="var">hsubtype</span> <span class="id" title="var">X</span><br/>
&nbsp;&nbsp;:= <span class="id" title="var">pr1</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">WOSrel</span> {<span class="id" title="var">X</span>:<span class="id" title="var">hSet</span>} (<span class="id" title="var">S</span> : <span class="id" title="var">WOSubset</span> <span class="id" title="var">X</span>)<br/>
&nbsp;&nbsp;: <span class="id" title="var">hrel</span> (<span class="id" title="var">carrier_set</span> (<span class="id" title="var">WOSubset_to_subtype</span> <span class="id" title="var">S</span>))<br/>
&nbsp;&nbsp;:= <span class="id" title="var">pr12</span> <span class="id" title="var">S</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">WOStotal</span> {<span class="id" title="var">X</span>:<span class="id" title="var">hSet</span>} (<span class="id" title="var">S</span> : <span class="id" title="var">WOSubset</span> <span class="id" title="var">X</span>) : <span class="id" title="var">isTotalOrder</span> (<span class="id" title="var">WOSrel</span> <span class="id" title="var">S</span>) := <span class="id" title="var">pr122</span> <span class="id" title="var">S</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">WOSubset_to_TOSubset</span> {<span class="id" title="var">X</span>:<span class="id" title="var">hSet</span>} : <span class="id" title="var">WOSubset</span> <span class="id" title="var">X</span> -&gt; <span class="id" title="var">TOSubset</span> <span class="id" title="var">X</span><br/>
&nbsp;&nbsp;:= <span class="id" title="var">λ</span> <span class="id" title="var">S</span>, <span class="id" title="var">WOSubset_to_subtype</span> <span class="id" title="var">S</span>,, <span class="id" title="var">WOSrel</span> <span class="id" title="var">S</span>,, <span class="id" title="var">WOStotal</span> <span class="id" title="var">S</span>.<br/>

<br/>
<span class="id" title="keyword">Coercion</span> <span class="id" title="var">WOSubset_to_TOSubset</span> : <span class="id" title="var">WOSubset</span> &gt;-&gt; <span class="id" title="var">TOSubset</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">WOSwo</span> {<span class="id" title="var">X</span>:<span class="id" title="var">hSet</span>} (<span class="id" title="var">S</span> : <span class="id" title="var">WOSubset</span> <span class="id" title="var">X</span>) : <span class="id" title="var">WellOrdering</span> (<span class="id" title="var">carrier_set</span> <span class="id" title="var">S</span>) := <span class="id" title="var">pr2</span> <span class="id" title="var">S</span>.<br/>

<br/>
<span class="id" title="keyword">Notation</span> &quot;s ≤ s'" := (<span class="id" title="var">WOSrel</span> <span class="id" title="var">_</span> <span class="id" title="var">s</span> <span class="id" title="var">s'</span>) : <span class="id" title="var">wosubset</span>.<br/>

<br/>
<span class="id" title="keyword">Local</span> <span class="id" title="keyword">Definition</span> <span class="id" title="var">lt</span> {<span class="id" title="var">X</span>:<span class="id" title="var">hSet</span>} {<span class="id" title="var">S</span> : <span class="id" title="var">WOSubset</span> <span class="id" title="var">X</span>} (<span class="id" title="var">s</span> <span class="id" title="var">s'</span> : <span class="id" title="var">S</span>) := ¬ (<span class="id" title="var">s'</span> ≤ <span class="id" title="var">s</span>)%<span class="id" title="var">wosubset</span>.<br/>

<br/>
<span class="id" title="keyword">Notation</span> &quot;s &lt; s'" := (<span class="id" title="var">lt</span> <span class="id" title="var">s</span> <span class="id" title="var">s'</span>) : <span class="id" title="var">wosubset</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">WOS_hasSmallest</span> {<span class="id" title="var">X</span>:<span class="id" title="var">hSet</span>} (<span class="id" title="var">S</span> : <span class="id" title="var">WOSubset</span> <span class="id" title="var">X</span>) : <span class="id" title="var">hasSmallest</span> (<span class="id" title="var">WOSrel</span> <span class="id" title="var">S</span>)<br/>
&nbsp;&nbsp;:= <span class="id" title="var">pr222</span> <span class="id" title="var">S</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">wo_lt_to_le</span> {<span class="id" title="var">X</span>:<span class="id" title="var">hSet</span>} {<span class="id" title="var">S</span> : <span class="id" title="var">WOSubset</span> <span class="id" title="var">X</span>} (<span class="id" title="var">s</span> <span class="id" title="var">s'</span> : <span class="id" title="var">S</span>) : <span class="id" title="var">s</span> &lt; <span class="id" title="var">s'</span> -&gt; <span class="id" title="var">s</span> ≤ <span class="id" title="var">s'</span>.<br/>
<a class="proof" href="#">Show proof.</a><br/><div class="proof">
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">lt</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">lt</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">squash_to_hProp</span> (<span class="id" title="var">TOtot</span> <span class="id" title="var">S</span> <span class="id" title="var">s</span> <span class="id" title="var">s'</span>)); <span class="id" title="tactic">intros</span> [<span class="id" title="var">c</span>|<span class="id" title="var">c</span>].<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">exact</span> <span class="id" title="var">c</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">exact</span> (<span class="id" title="var">fromempty</span> (<span class="id" title="var">lt</span> <span class="id" title="var">c</span>)).<br/>
</div>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">wosub_le</span> (<span class="id" title="var">X</span>:<span class="id" title="var">hSet</span>) : <span class="id" title="var">hrel</span> (<span class="id" title="var">WOSubset</span> <span class="id" title="var">X</span>)<br/>
&nbsp;&nbsp;:= (<span class="id" title="var">λ</span> <span class="id" title="var">S</span> <span class="id" title="var">T</span> : <span class="id" title="var">WOSubset</span> <span class="id" title="var">X</span>, ∑ (<span class="id" title="var">le</span> : <span class="id" title="var">S</span> ⊆ <span class="id" title="var">T</span>), <span class="id" title="var">tosub_order_compat</span> <span class="id" title="var">le</span> ∧ <span class="id" title="var">sub_initial</span> <span class="id" title="var">le</span>)%<span class="id" title="var">prop</span>.<br/>

<br/>
<span class="id" title="keyword">Notation</span> &quot;S ≼ T" := (<span class="id" title="var">wosub_le</span> <span class="id" title="var">_</span> <span class="id" title="var">S</span> <span class="id" title="var">T</span>) (<span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 70) : <span class="id" title="var">wosubset</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">wosub_le_inc</span> {<span class="id" title="var">X</span>:<span class="id" title="var">hSet</span>} {<span class="id" title="var">S</span> <span class="id" title="var">T</span> : <span class="id" title="var">WOSubset</span> <span class="id" title="var">X</span>} : <span class="id" title="var">S</span> ≼ <span class="id" title="var">T</span> -&gt; <span class="id" title="var">S</span> ⊆ <span class="id" title="var">T</span> := <span class="id" title="var">pr1</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">wosub_le_comp</span> {<span class="id" title="var">X</span>:<span class="id" title="var">hSet</span>} {<span class="id" title="var">S</span> <span class="id" title="var">T</span> : <span class="id" title="var">WOSubset</span> <span class="id" title="var">X</span>} (<span class="id" title="var">le</span> : <span class="id" title="var">S</span> ≼ <span class="id" title="var">T</span>) : <span class="id" title="var">tosub_order_compat</span> (<span class="id" title="var">pr1</span> <span class="id" title="var">le</span>)<br/>
&nbsp;&nbsp;:= <span class="id" title="var">pr12</span> <span class="id" title="var">le</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">wosub_le_subi</span> {<span class="id" title="var">X</span>:<span class="id" title="var">hSet</span>} {<span class="id" title="var">S</span> <span class="id" title="var">T</span> : <span class="id" title="var">WOSubset</span> <span class="id" title="var">X</span>} (<span class="id" title="var">le</span> : <span class="id" title="var">S</span> ≼ <span class="id" title="var">T</span>) : <span class="id" title="var">sub_initial</span> (<span class="id" title="var">pr1</span> <span class="id" title="var">le</span>)<br/>
&nbsp;&nbsp;:= <span class="id" title="var">pr22</span> <span class="id" title="var">le</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">wosub_le_isrefl</span> {<span class="id" title="var">X</span>:<span class="id" title="var">hSet</span>} : <span class="id" title="var">isrefl</span> (<span class="id" title="var">wosub_le</span> <span class="id" title="var">X</span>).<br/>
<a class="proof" href="#">Show proof.</a><br/><div class="proof">
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">S</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">use</span> <span class="id" title="var">tpair</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">intros</span> <span class="id" title="var">x</span> <span class="id" title="var">xinS</span>. <span class="id" title="tactic">exact</span> <span class="id" title="var">xinS</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">intros</span> <span class="id" title="var">s</span> <span class="id" title="var">s'</span> <span class="id" title="var">le</span>. <span class="id" title="tactic">exact</span> <span class="id" title="var">le</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">intros</span> <span class="id" title="var">s</span> <span class="id" title="var">s'</span> <span class="id" title="var">Ss</span> <span class="id" title="var">Ss'</span> <span class="id" title="var">le</span>. <span class="id" title="tactic">exact</span> <span class="id" title="var">Ss'</span>.<br/>
</div>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">wosub_equal</span> {<span class="id" title="var">X</span>:<span class="id" title="var">hSet</span>} : <span class="id" title="var">hrel</span> (<span class="id" title="var">WOSubset</span> <span class="id" title="var">X</span>) := <span class="id" title="var">λ</span> <span class="id" title="var">S</span> <span class="id" title="var">T</span>, <span class="id" title="var">S</span> ≼ <span class="id" title="var">T</span> ∧ <span class="id" title="var">T</span> ≼ <span class="id" title="var">S</span>.<br/>

<br/>
<span class="id" title="keyword">Notation</span> &quot;S ≣ T" := (<span class="id" title="var">wosub_equal</span> <span class="id" title="var">S</span> <span class="id" title="var">T</span>) (<span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 70) : <span class="id" title="var">wosubset</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">wosub_comparable</span> {<span class="id" title="var">X</span>:<span class="id" title="var">hSet</span>} : <span class="id" title="var">hrel</span> (<span class="id" title="var">WOSubset</span> <span class="id" title="var">X</span>) := <span class="id" title="var">λ</span> <span class="id" title="var">S</span> <span class="id" title="var">T</span>, <span class="id" title="var">S</span> ≼ <span class="id" title="var">T</span> ∨ <span class="id" title="var">T</span> ≼ <span class="id" title="var">S</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">hasSmallest_WOSubset_plus_point</span> {<span class="id" title="var">X</span>:<span class="id" title="var">hSet</span>} (<span class="id" title="var">S</span>:<span class="id" title="var">WOSubset</span> <span class="id" title="var">X</span>) (<span class="id" title="var">z</span>:<span class="id" title="var">X</span>) (<span class="id" title="var">nSz</span> : ¬ <span class="id" title="var">S</span> <span class="id" title="var">z</span>) :<br/>
&nbsp;&nbsp;<span class="id" title="var">LEM</span> ⇒ <span class="id" title="var">hasSmallest</span> (<span class="id" title="var">TOSrel</span> (<span class="id" title="var">TOSubset_plus_point</span> <span class="id" title="var">S</span> <span class="id" title="var">z</span> <span class="id" title="var">nSz</span>)).<br/>
<a class="proof" href="#">Show proof.</a><br/><div class="proof">
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">lem</span> <span class="id" title="var">T</span> <span class="id" title="var">ne</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">S'</span> := <span class="id" title="var">TOSubset_plus_point</span> <span class="id" title="var">S</span> <span class="id" title="var">z</span> <span class="id" title="var">nSz</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">S'z</span> := <span class="id" title="var">subtype_plus_has_point</span> <span class="id" title="var">S</span> <span class="id" title="var">z</span> : <span class="id" title="var">S'</span> <span class="id" title="var">z</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">z'</span> := (<span class="id" title="var">z</span>,,<span class="id" title="var">S'z</span>) : <span class="id" title="var">carrier</span> <span class="id" title="var">S'</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">j</span> := <span class="id" title="var">TOSubset_plus_point_incl</span> <span class="id" title="var">S</span> <span class="id" title="var">z</span> <span class="id" title="var">nSz</span>). <span class="id" title="tactic">fold</span> <span class="id" title="var">S'</span> <span class="id" title="tactic">in</span> <span class="id" title="var">j</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">jmap</span> := <span class="id" title="var">subtype_inc</span> <span class="id" title="var">j</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">SiT</span> := <span class="id" title="var">λ</span> <span class="id" title="var">s</span>:<span class="id" title="var">S</span>, <span class="id" title="var">T</span> (<span class="id" title="var">subtype_inc</span> <span class="id" title="var">j</span> <span class="id" title="var">s</span>)).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> (<span class="id" title="var">lem</span> (∃ <span class="id" title="var">s</span>, <span class="id" title="var">SiT</span> <span class="id" title="var">s</span>)) <span class="id" title="keyword">as</span> [<span class="id" title="var">q</span>|<span class="id" title="var">q</span>].<br/>
&nbsp;&nbsp;- <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">SiTmin</span> := <span class="id" title="var">WOS_hasSmallest</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">q</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">squash_to_hProp</span> <span class="id" title="var">SiTmin</span>); <span class="id" title="tactic">clear</span> <span class="id" title="var">SiTmin</span>; <span class="id" title="tactic">intros</span> [<span class="id" title="var">m</span> [<span class="id" title="var">SiTm</span> <span class="id" title="var">min</span>]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">hinhpr</span>. <span class="id" title="tactic">set</span> (<span class="id" title="var">m'</span> := <span class="id" title="var">jmap</span> <span class="id" title="var">m</span>). <span class="id" title="tactic">exists</span> <span class="id" title="var">m'</span>. <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">exact</span> <span class="id" title="var">SiTm</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">intros</span> [<span class="id" title="var">t</span> <span class="id" title="var">S't</span>] <span class="id" title="var">Tt</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">squash_to_hProp</span> <span class="id" title="var">S't</span>); <span class="id" title="tactic">intros</span> [<span class="id" title="var">St</span>|<span class="id" title="var">etz</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">induction</span> (<span class="id" title="var">ishinh_irrel</span> (<span class="id" title="var">ii1</span> <span class="id" title="var">St</span>) <span class="id" title="var">S't</span>); <span class="id" title="tactic">change</span> (<span class="id" title="var">m</span> ≤ (<span class="id" title="var">t</span>,,<span class="id" title="var">St</span>)). <span class="id" title="tactic">exact</span> (<span class="id" title="var">min</span> (<span class="id" title="var">t</span>,,<span class="id" title="var">St</span>) <span class="id" title="var">Tt</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">induction</span> <span class="id" title="var">etz</span>; <span class="id" title="tactic">induction</span> (<span class="id" title="var">ishinh_irrel</span> (<span class="id" title="var">ii2</span> (<span class="id" title="var">idpath</span> <span class="id" title="var">z</span>)) <span class="id" title="var">S't</span>); <span class="id" title="tactic">change</span> <span class="id" title="var">unit</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exact</span> <span class="id" title="var">tt</span>.<br/>
&nbsp;&nbsp;- <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">hinhpr</span>. <span class="id" title="tactic">exists</span> <span class="id" title="var">z'</span>. <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">squash_to_hProp</span> <span class="id" title="var">ne</span>); <span class="id" title="tactic">clear</span> <span class="id" title="var">ne</span>; <span class="id" title="tactic">intros</span> [[<span class="id" title="var">t</span> <span class="id" title="var">SiTt</span>] <span class="id" title="var">Tt</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">squash_to_hProp</span> <span class="id" title="var">SiTt</span>); <span class="id" title="tactic">intros</span> [<span class="id" title="var">St</span>|<span class="id" title="var">ezt</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">apply</span> <span class="id" title="var">fromempty</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">q</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">hinhpr</span>. <span class="id" title="tactic">exists</span> (<span class="id" title="var">t</span>,,<span class="id" title="var">St</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">change</span> (<span class="id" title="var">T</span> (<span class="id" title="var">t</span>,, <span class="id" title="var">j</span> <span class="id" title="var">t</span> <span class="id" title="var">St</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> (<span class="id" title="var">proofirrelevance_hProp</span> <span class="id" title="var">_</span> <span class="id" title="var">SiTt</span> (<span class="id" title="var">j</span> <span class="id" title="var">t</span> <span class="id" title="var">St</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exact</span> <span class="id" title="var">Tt</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">induction</span> <span class="id" title="var">ezt</span>. <span class="id" title="tactic">unfold</span> <span class="id" title="var">z'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> (<span class="id" title="var">proofirrelevance_hProp</span> <span class="id" title="var">_</span> <span class="id" title="var">SiTt</span> <span class="id" title="var">S'z</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exact</span> <span class="id" title="var">Tt</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> [<span class="id" title="var">t</span> <span class="id" title="var">S't</span>] <span class="id" title="var">Tt</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">squash_to_hProp</span> <span class="id" title="var">S't</span>); <span class="id" title="tactic">intros</span> [<span class="id" title="var">St</span>|<span class="id" title="var">ezt</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">apply</span> <span class="id" title="var">fromempty</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">q</span>; <span class="id" title="tactic">clear</span> <span class="id" title="var">q</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">hinhpr</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> (<span class="id" title="var">t</span>,,<span class="id" title="var">St</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">change</span> (<span class="id" title="var">T</span> (<span class="id" title="var">t</span>,, <span class="id" title="var">j</span> <span class="id" title="var">t</span> <span class="id" title="var">St</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> (<span class="id" title="var">proofirrelevance_hProp</span> <span class="id" title="var">_</span> <span class="id" title="var">S't</span> (<span class="id" title="var">j</span> <span class="id" title="var">t</span> <span class="id" title="var">St</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exact</span> <span class="id" title="var">Tt</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">induction</span> <span class="id" title="var">ezt</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">change</span> (<span class="id" title="var">TOSrel</span> <span class="id" title="var">S'</span> (<span class="id" title="var">z</span>,,<span class="id" title="var">S'z</span>) (<span class="id" title="var">z</span>,,<span class="id" title="var">S't</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> (<span class="id" title="var">proofirrelevance_hProp</span> <span class="id" title="var">_</span> <span class="id" title="var">S'z</span> <span class="id" title="var">S't</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exact</span> (<span class="id" title="var">TOrefl</span> <span class="id" title="var">S'</span> <span class="id" title="var">_</span>).<br/>
</div>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">WOSubset_plus_point</span> {<span class="id" title="var">X</span>:<span class="id" title="var">hSet</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">S</span>:<span class="id" title="var">WOSubset</span> <span class="id" title="var">X</span>) (<span class="id" title="var">z</span>:<span class="id" title="var">X</span>) (<span class="id" title="var">nSz</span> : ¬ <span class="id" title="var">S</span> <span class="id" title="var">z</span>) : <span class="id" title="var">LEM</span> -&gt; <span class="id" title="var">WOSubset</span> <span class="id" title="var">X</span><br/>
&nbsp;&nbsp;:= <span class="id" title="var">λ</span> <span class="id" title="var">lem</span>, <span class="id" title="var">subtype_plus</span> <span class="id" title="var">S</span> <span class="id" title="var">z</span>,,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">TOSrel</span> (<span class="id" title="var">TOSubset_plus_point</span> <span class="id" title="var">S</span> <span class="id" title="var">z</span> <span class="id" title="var">nSz</span>),,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">TOtotal</span> (<span class="id" title="var">TOSubset_plus_point</span> <span class="id" title="var">S</span> <span class="id" title="var">z</span> <span class="id" title="var">nSz</span>),,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">hasSmallest_WOSubset_plus_point</span> <span class="id" title="var">S</span> <span class="id" title="var">z</span> <span class="id" title="var">nSz</span> <span class="id" title="var">lem</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">wosub_univalence_map</span> {<span class="id" title="var">X</span>:<span class="id" title="var">hSet</span>} (<span class="id" title="var">S</span> <span class="id" title="var">T</span> : <span class="id" title="var">WOSubset</span> <span class="id" title="var">X</span>) : (<span class="id" title="var">S</span> = <span class="id" title="var">T</span>) -&gt; (<span class="id" title="var">S</span> ≣ <span class="id" title="var">T</span>).<br/>
<a class="proof" href="#">Show proof.</a><br/><div class="proof">
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">e</span>. <span class="id" title="tactic">induction</span> <span class="id" title="var">e</span>. <span class="id" title="tactic">unfold</span> <span class="id" title="var">wosub_equal</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">simple</span> <span class="id" title="tactic">refine</span> ((<span class="id" title="var">λ</span> <span class="id" title="var">L</span>, <span class="id" title="var">dirprodpair</span> <span class="id" title="var">L</span> <span class="id" title="var">L</span>) <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;<span class="id" title="var">use</span> <span class="id" title="var">tpair</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">intros</span> <span class="id" title="var">x</span> <span class="id" title="var">s</span>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">intros</span> <span class="id" title="var">s</span> <span class="id" title="var">s'</span> <span class="id" title="var">le</span>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">intros</span> <span class="id" title="var">s</span> <span class="id" title="var">t</span> <span class="id" title="var">Ss</span> <span class="id" title="var">St</span> <span class="id" title="var">le</span>. <span class="id" title="tactic">assumption</span>.<br/>
</div>

<br/>
<span class="id" title="keyword">Theorem</span> <span class="id" title="var">wosub_univalence</span> {<span class="id" title="var">X</span>:<span class="id" title="var">hSet</span>} (<span class="id" title="var">S</span> <span class="id" title="var">T</span> : <span class="id" title="var">WOSubset</span> <span class="id" title="var">X</span>) : (<span class="id" title="var">S</span> = <span class="id" title="var">T</span>) ≃ (<span class="id" title="var">S</span> ≣ <span class="id" title="var">T</span>).<br/>
<a class="proof" href="#">Show proof.</a><br/><div class="proof">
&nbsp;&nbsp;<span class="id" title="tactic">simple</span> <span class="id" title="tactic">refine</span> (<span class="id" title="var">remakeweq</span> <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;{ <span class="id" title="tactic">unfold</span> <span class="id" title="var">wosub_equal</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">intermediate_weq</span> (<span class="id" title="var">S</span> ╝ <span class="id" title="var">T</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <span class="id" title="var">total2_paths_equiv</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">intermediate_weq</span> (∑ <span class="id" title="var">e</span> : <span class="id" title="var">S</span> ≡ <span class="id" title="var">T</span>, <span class="id" title="var">S</span> ≼ <span class="id" title="var">T</span> ∧ <span class="id" title="var">T</span> ≼ <span class="id" title="var">S</span>)%<span class="id" title="var">prop</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <span class="id" title="var">weqbandf</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">apply</span> <span class="id" title="var">hsubtype_univalence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">intro</span> <span class="id" title="var">p</span>. <span class="id" title="tactic">induction</span> <span class="id" title="var">S</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">S</span> <span class="id" title="var">v</span>], <span class="id" title="var">T</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">T</span> <span class="id" title="var">w</span>]. <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">p</span>. <span class="id" title="tactic">induction</span> <span class="id" title="var">p</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">change</span> (<span class="id" title="var">v</span>=<span class="id" title="var">w</span> ≃ (<span class="id" title="var">S</span>,, <span class="id" title="var">v</span> ≼ <span class="id" title="var">S</span>,, <span class="id" title="var">w</span> ∧ <span class="id" title="var">S</span>,, <span class="id" title="var">w</span> ≼ <span class="id" title="var">S</span>,, <span class="id" title="var">v</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">v</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">v</span> <span class="id" title="var">i</span>], <span class="id" title="var">w</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">w</span> <span class="id" title="var">j</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">intermediate_weq</span> (<span class="id" title="var">v</span>=<span class="id" title="var">w</span>)%<span class="id" title="keyword">type</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">apply</span> <span class="id" title="var">subtypeInjectivity</span>. <span class="id" title="tactic">change</span> (<span class="id" title="var">isPredicate</span> (<span class="id" title="var">λ</span> <span class="id" title="var">R</span> : <span class="id" title="var">hrel</span> (<span class="id" title="var">carrier_set</span> <span class="id" title="var">S</span>), <span class="id" title="var">isWellOrder</span> <span class="id" title="var">R</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">R</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">propproperty</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">weqimplimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">intros</span> <span class="id" title="var">p</span>. <span class="id" title="tactic">induction</span> <span class="id" title="var">p</span>. <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="var">use</span> <span class="id" title="var">tpair</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">intros</span> <span class="id" title="var">s</span>. <span class="id" title="tactic">change</span> (<span class="id" title="var">S</span> <span class="id" title="var">s</span> → <span class="id" title="var">S</span> <span class="id" title="var">s</span>). <span class="id" title="tactic">exact</span> (<span class="id" title="var">idfun</span> <span class="id" title="var">_</span>). }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">intros</span> <span class="id" title="var">s</span> <span class="id" title="var">s'</span> <span class="id" title="var">le</span>. <span class="id" title="tactic">exact</span> <span class="id" title="var">le</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">intros</span> <span class="id" title="var">s</span> <span class="id" title="var">t</span> <span class="id" title="var">Ss</span> <span class="id" title="var">St</span> <span class="id" title="var">le</span>. <span class="id" title="tactic">exact</span> <span class="id" title="var">St</span>. } } }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="var">use</span> <span class="id" title="var">tpair</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">intros</span> <span class="id" title="var">s</span>. <span class="id" title="tactic">change</span> (<span class="id" title="var">S</span> <span class="id" title="var">s</span> → <span class="id" title="var">S</span> <span class="id" title="var">s</span>). <span class="id" title="tactic">exact</span> (<span class="id" title="var">idfun</span> <span class="id" title="var">_</span>). }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">intros</span> <span class="id" title="var">s</span> <span class="id" title="var">s'</span> <span class="id" title="var">le</span>. <span class="id" title="tactic">exact</span> <span class="id" title="var">le</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">intros</span> <span class="id" title="var">s</span> <span class="id" title="var">t</span> <span class="id" title="var">Ss</span> <span class="id" title="var">St</span> <span class="id" title="var">le</span>. <span class="id" title="tactic">exact</span> <span class="id" title="var">St</span>. } } } }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">unfold</span> <span class="id" title="var">WOSrel</span>. <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">intros</span> [[<span class="id" title="var">a</span> [<span class="id" title="var">b</span> <span class="id" title="var">_</span>]] [<span class="id" title="var">d</span> [<span class="id" title="var">e</span> <span class="id" title="var">_</span>]]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">triv</span> : ∏ (<span class="id" title="var">f</span>:∏ <span class="id" title="var">x</span> : <span class="id" title="var">X</span>, <span class="id" title="var">S</span> <span class="id" title="var">x</span> → <span class="id" title="var">S</span> <span class="id" title="var">x</span>) (<span class="id" title="var">x</span>:<span class="id" title="var">carrier_set</span> <span class="id" title="var">S</span>), <span class="id" title="var">subtype_inc</span> <span class="id" title="var">f</span> <span class="id" title="var">x</span> = <span class="id" title="var">x</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">intros</span> <span class="id" title="var">f</span> <span class="id" title="var">s</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">subtypeEquality_prop</span>. <span class="id" title="tactic">reflexivity</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">funextfun</span>; <span class="id" title="tactic">intros</span> <span class="id" title="var">s</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">funextfun</span>; <span class="id" title="tactic">intros</span> <span class="id" title="var">t</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">hPropUnivalence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">intros</span> <span class="id" title="var">le</span>. <span class="id" title="tactic">assert</span> (<span class="id" title="var">q</span> := <span class="id" title="var">b</span> <span class="id" title="var">s</span> <span class="id" title="var">t</span> <span class="id" title="var">le</span>). <span class="id" title="tactic">rewrite</span> 2 <span class="id" title="var">triv</span> <span class="id" title="tactic">in</span> <span class="id" title="var">q</span>. <span class="id" title="tactic">exact</span> <span class="id" title="var">q</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">intros</span> <span class="id" title="var">le</span>. <span class="id" title="tactic">assert</span> (<span class="id" title="var">q</span> := <span class="id" title="var">e</span> <span class="id" title="var">s</span> <span class="id" title="var">t</span> <span class="id" title="var">le</span>). <span class="id" title="tactic">rewrite</span> 2 <span class="id" title="var">triv</span> <span class="id" title="tactic">in</span> <span class="id" title="var">q</span>. <span class="id" title="tactic">exact</span> <span class="id" title="var">q</span>. } }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">apply</span> <span class="id" title="var">setproperty</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">apply</span> <span class="id" title="var">propproperty</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <span class="id" title="var">weqimplimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">intros</span> <span class="id" title="var">k</span>. <span class="id" title="tactic">split</span> ; <span class="id" title="tactic">apply</span> <span class="id" title="var">k</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">intros</span> <span class="id" title="var">c</span>. <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">intros</span> <span class="id" title="var">x</span>. <span class="id" title="tactic">exact</span> (<span class="id" title="var">wosub_le_inc</span> (<span class="id" title="var">pr1</span> <span class="id" title="var">c</span>) <span class="id" title="var">x</span>,,<span class="id" title="var">wosub_le_inc</span> (<span class="id" title="var">pr2</span> <span class="id" title="var">c</span>) <span class="id" title="var">x</span>). }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">exact</span> <span class="id" title="var">c</span>. } }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">apply</span> <span class="id" title="var">propproperty</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">apply</span> <span class="id" title="var">propproperty</span>. } }<br/>
&nbsp;&nbsp;{ <span class="id" title="tactic">apply</span> <span class="id" title="var">wosub_univalence_map</span>. }<br/>
&nbsp;&nbsp;{ <span class="id" title="tactic">intros</span> <span class="id" title="var">e</span>. <span class="id" title="tactic">induction</span> <span class="id" title="var">e</span>. <span class="id" title="tactic">reflexivity</span>. }<br/>
</div>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">wosub_univalence_compute</span> {<span class="id" title="var">X</span>:<span class="id" title="var">hSet</span>} (<span class="id" title="var">S</span> <span class="id" title="var">T</span> : <span class="id" title="var">WOSubset</span> <span class="id" title="var">X</span>) (<span class="id" title="var">e</span> : <span class="id" title="var">S</span> = <span class="id" title="var">T</span>) :<br/>
&nbsp;&nbsp;<span class="id" title="var">wosub_univalence</span> <span class="id" title="var">S</span> <span class="id" title="var">T</span> <span class="id" title="var">e</span> = <span class="id" title="var">wosub_univalence_map</span> <span class="id" title="var">S</span> <span class="id" title="var">T</span> <span class="id" title="var">e</span>.<br/>
<a class="proof" href="#">Show proof.</a><br/><div class="proof">
&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
</div>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">wosub_inc</span> {<span class="id" title="var">X</span>:<span class="id" title="var">hSet</span>} {<span class="id" title="var">S</span> <span class="id" title="var">T</span> : <span class="id" title="var">WOSubset</span> <span class="id" title="var">X</span>} : (<span class="id" title="var">S</span> ≼ <span class="id" title="var">T</span>) -&gt; <span class="id" title="var">S</span> -&gt; <span class="id" title="var">T</span>.<br/>
<a class="proof" href="#">Show proof.</a><br/><div class="proof">
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">le</span> <span class="id" title="var">s</span>. <span class="id" title="tactic">exact</span> (<span class="id" title="var">subtype_inc</span> (<span class="id" title="var">pr1</span> <span class="id" title="var">le</span>) <span class="id" title="var">s</span>).<br/>
</div>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">wosub_fidelity</span> {<span class="id" title="var">X</span>:<span class="id" title="var">hSet</span>} {<span class="id" title="var">S</span> <span class="id" title="var">T</span>:<span class="id" title="var">WOSubset</span> <span class="id" title="var">X</span>} (<span class="id" title="var">le</span> : <span class="id" title="var">S</span> ≼ <span class="id" title="var">T</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">s</span> <span class="id" title="var">s'</span> : <span class="id" title="var">S</span>) : <span class="id" title="var">s</span> ≤ <span class="id" title="var">s'</span> ⇔ <span class="id" title="var">wosub_inc</span> <span class="id" title="var">le</span> <span class="id" title="var">s</span> ≤ <span class="id" title="var">wosub_inc</span> <span class="id" title="var">le</span> <span class="id" title="var">s'</span>.<br/>
<a class="proof" href="#">Show proof.</a><br/><div class="proof">
&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">Srel</span> := <span class="id" title="var">WOSrel</span> <span class="id" title="var">S</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">Stot</span> : <span class="id" title="var">istotal</span> <span class="id" title="var">Srel</span>).<br/>
&nbsp;&nbsp;{ <span class="id" title="tactic">apply</span> (<span class="id" title="var">WOSwo</span> <span class="id" title="var">S</span>). }<br/>
&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">Trel</span> := <span class="id" title="var">WOSrel</span> <span class="id" title="var">T</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">Tanti</span> : <span class="id" title="var">isantisymm</span> <span class="id" title="var">Trel</span>).<br/>
&nbsp;&nbsp;{ <span class="id" title="tactic">apply</span> (<span class="id" title="var">WOSwo</span> <span class="id" title="var">T</span>). }<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;{ <span class="id" title="tactic">intro</span> <span class="id" title="var">l</span>. <span class="id" title="tactic">exact</span> (<span class="id" title="var">wosub_le_comp</span> <span class="id" title="var">le</span> <span class="id" title="var">s</span> <span class="id" title="var">s'</span> <span class="id" title="var">l</span>). }<br/>
&nbsp;&nbsp;{ <span class="id" title="tactic">intro</span> <span class="id" title="var">l</span>. <span class="id" title="tactic">apply</span> (<span class="id" title="var">squash_to_hProp</span> (<span class="id" title="var">Stot</span> <span class="id" title="var">s</span> <span class="id" title="var">s'</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">change</span> ((<span class="id" title="var">s</span> ≤ <span class="id" title="var">s'</span>) ⨿ (<span class="id" title="var">s'</span> ≤ <span class="id" title="var">s</span>) → <span class="id" title="var">s</span> ≤ <span class="id" title="var">s'</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intro</span> <span class="id" title="var">c</span>. <span class="id" title="tactic">induction</span> <span class="id" title="var">c</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">c</span>|<span class="id" title="var">c</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">exact</span> <span class="id" title="var">c</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">induction</span> <span class="id" title="var">le</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">le</span> [<span class="id" title="var">com</span> <span class="id" title="var">ini</span>]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">k</span> := <span class="id" title="var">com</span> <span class="id" title="var">s'</span> <span class="id" title="var">s</span> <span class="id" title="var">c</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">k'</span> := <span class="id" title="var">Tanti</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">l</span> <span class="id" title="var">k</span>); <span class="id" title="tactic">clear</span> <span class="id" title="var">k</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">p</span> : <span class="id" title="var">s</span> = <span class="id" title="var">s'</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">apply</span> <span class="id" title="var">subtypeEquality_prop</span>. <span class="id" title="tactic">exact</span> (<span class="id" title="var">maponpaths</span> <span class="id" title="var">pr1</span> <span class="id" title="var">k'</span>). }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">p</span>. <span class="id" title="tactic">apply</span> (<span class="id" title="var">pr2</span> <span class="id" title="var">S</span>).  }<br/>
</div>

<br/>
<span class="id" title="keyword">Local</span> <span class="id" title="keyword">Lemma</span> <span class="id" title="var">h1</span> {<span class="id" title="var">X</span>} {<span class="id" title="var">S</span>:<span class="id" title="var">WOSubset</span> <span class="id" title="var">X</span>} {<span class="id" title="var">s</span> <span class="id" title="var">t</span> <span class="id" title="var">u</span>:<span class="id" title="var">S</span>} : <span class="id" title="var">s</span> = <span class="id" title="var">t</span> -&gt; <span class="id" title="var">t</span> ≤ <span class="id" title="var">u</span> -&gt; <span class="id" title="var">s</span> ≤ <span class="id" title="var">u</span>.<br/>
<a class="proof" href="#">Show proof.</a><br/><div class="proof">
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">p</span> <span class="id" title="var">le</span>. <span class="id" title="tactic">induction</span> <span class="id" title="var">p</span>. <span class="id" title="tactic">exact</span> <span class="id" title="var">le</span>.<br/>
</div>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">wosub_le_isPartialOrder</span> <span class="id" title="var">X</span> : <span class="id" title="var">isPartialOrder</span> (<span class="id" title="var">wosub_le</span> <span class="id" title="var">X</span>).<br/>
<a class="proof" href="#">Show proof.</a><br/><div class="proof">
&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">S</span> <span class="id" title="var">T</span> <span class="id" title="var">U</span> <span class="id" title="var">i</span> <span class="id" title="var">j</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> (<span class="id" title="var">pr11</span> (<span class="id" title="var">subtype_containment_isPartialOrder</span> <span class="id" title="var">X</span>) <span class="id" title="var">S</span> <span class="id" title="var">T</span> <span class="id" title="var">U</span> (<span class="id" title="var">pr1</span> <span class="id" title="var">i</span>) (<span class="id" title="var">pr1</span> <span class="id" title="var">j</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">intros</span> <span class="id" title="var">s</span> <span class="id" title="var">s'</span> <span class="id" title="var">l</span>. <span class="id" title="tactic">exact</span> (<span class="id" title="var">wosub_le_comp</span> <span class="id" title="var">j</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> (<span class="id" title="var">wosub_le_comp</span> <span class="id" title="var">i</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">l</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">intros</span> <span class="id" title="var">s</span> <span class="id" title="var">u</span> <span class="id" title="var">Ss</span> <span class="id" title="var">Uu</span> <span class="id" title="var">l</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">change</span> (<span class="id" title="var">hProptoType</span> ((<span class="id" title="var">u</span>,,<span class="id" title="var">Uu</span>) ≤ <span class="id" title="var">subtype_inc</span> (<span class="id" title="var">pr1</span> <span class="id" title="var">j</span>) (<span class="id" title="var">subtype_inc</span> (<span class="id" title="var">pr1</span> <span class="id" title="var">i</span>) (<span class="id" title="var">s</span>,,<span class="id" title="var">Ss</span>)))) <span class="id" title="tactic">in</span> <span class="id" title="var">l</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">uinT</span> := <span class="id" title="var">u</span> ,, <span class="id" title="var">wosub_le_subi</span> <span class="id" title="var">j</span> <span class="id" title="var">s</span> <span class="id" title="var">u</span> (<span class="id" title="var">pr1</span> <span class="id" title="var">i</span> <span class="id" title="var">s</span> <span class="id" title="var">Ss</span>) <span class="id" title="var">Uu</span> <span class="id" title="var">l</span> : <span class="id" title="var">T</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">p</span> : <span class="id" title="var">subtype_inc</span> (<span class="id" title="var">pr1</span> <span class="id" title="var">j</span>) <span class="id" title="var">uinT</span> = <span class="id" title="var">u</span>,,<span class="id" title="var">Uu</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> <span class="id" title="var">subtypeEquality_prop</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">q</span> := <span class="id" title="var">h1</span> <span class="id" title="var">p</span> <span class="id" title="var">l</span> : <span class="id" title="var">subtype_inc</span> (<span class="id" title="var">pr1</span> <span class="id" title="var">j</span>) <span class="id" title="var">uinT</span> ≤ <span class="id" title="var">subtype_inc</span> (<span class="id" title="var">pr1</span> <span class="id" title="var">j</span>) (<span class="id" title="var">subtype_inc</span> (<span class="id" title="var">pr1</span> <span class="id" title="var">i</span>) (<span class="id" title="var">s</span>,,<span class="id" title="var">Ss</span>))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">r</span> := <span class="id" title="var">pr2</span> (<span class="id" title="var">wosub_fidelity</span> <span class="id" title="var">j</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>) <span class="id" title="var">q</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">b</span> := <span class="id" title="var">wosub_le_subi</span> <span class="id" title="var">i</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">r</span>); <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">b</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exact</span> <span class="id" title="var">b</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <span class="id" title="var">wosub_le_isrefl</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">S</span> <span class="id" title="var">T</span> <span class="id" title="var">i</span> <span class="id" title="var">j</span>. <span class="id" title="tactic">apply</span> (<span class="id" title="var">invmap</span> (<span class="id" title="var">wosub_univalence</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>)). <span class="id" title="tactic">exact</span> (<span class="id" title="var">i</span>,,<span class="id" title="var">j</span>).<br/>
</div>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">WosubPoset</span> (<span class="id" title="var">X</span>:<span class="id" title="var">hSet</span>) : <span class="id" title="var">Poset</span>.<br/>
<a class="proof" href="#">Show proof.</a><br/><div class="proof">
&nbsp;&nbsp;<span class="id" title="tactic">exists</span> (<span class="id" title="var">WOSubset_set</span> <span class="id" title="var">X</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">exists</span> (<span class="id" title="var">λ</span> <span class="id" title="var">S</span> <span class="id" title="var">T</span>, <span class="id" title="var">S</span> ≼ <span class="id" title="var">T</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">exact</span> (<span class="id" title="var">wosub_le_isPartialOrder</span> <span class="id" title="var">X</span>).<br/>
</div>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">wosub_le_smaller</span> {<span class="id" title="var">X</span>:<span class="id" title="var">hSet</span>} (<span class="id" title="var">S</span> <span class="id" title="var">T</span>:<span class="id" title="var">WOSubset</span> <span class="id" title="var">X</span>) : <span class="id" title="var">hProp</span> := (<span class="id" title="var">S</span> ≼ <span class="id" title="var">T</span>) ∧ (∃ <span class="id" title="var">t</span>:<span class="id" title="var">T</span>, <span class="id" title="var">t</span> ∉ <span class="id" title="var">S</span>).<br/>

<br/>
<span class="id" title="keyword">Notation</span> &quot;S ≺ T" := (<span class="id" title="var">wosub_le_smaller</span> <span class="id" title="var">S</span> <span class="id" title="var">T</span>) (<span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 70) : <span class="id" title="var">wosubset</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">upto</span> {<span class="id" title="var">X</span>:<span class="id" title="var">hSet</span>} {<span class="id" title="var">S</span>:<span class="id" title="var">WOSubset</span> <span class="id" title="var">X</span>} (<span class="id" title="var">s</span>:<span class="id" title="var">S</span>) : <span class="id" title="var">hsubtype</span> <span class="id" title="var">X</span><br/>
&nbsp;&nbsp;:= (<span class="id" title="var">λ</span> <span class="id" title="var">x</span>, ∑ <span class="id" title="var">h</span>:<span class="id" title="var">S</span> <span class="id" title="var">x</span>, (<span class="id" title="var">x</span>,,<span class="id" title="var">h</span>) &lt; <span class="id" title="var">s</span>)%<span class="id" title="var">prop</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">upto_eqn</span> {<span class="id" title="var">X</span>:<span class="id" title="var">hSet</span>} {<span class="id" title="var">S</span> <span class="id" title="var">T</span>:<span class="id" title="var">WOSubset</span> <span class="id" title="var">X</span>} (<span class="id" title="var">x</span>:<span class="id" title="var">X</span>) (<span class="id" title="var">Sx</span> : <span class="id" title="var">S</span> <span class="id" title="var">x</span>) (<span class="id" title="var">Tx</span> : <span class="id" title="var">T</span> <span class="id" title="var">x</span>) :<br/>
&nbsp;&nbsp;<span class="id" title="var">S</span> ≼ <span class="id" title="var">T</span> -&gt; <span class="id" title="var">upto</span> (<span class="id" title="var">x</span>,,<span class="id" title="var">Sx</span>) = <span class="id" title="var">upto</span> (<span class="id" title="var">x</span>,,<span class="id" title="var">Tx</span>).<br/>
<a class="proof" href="#">Show proof.</a><br/><div class="proof">
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">ST</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">invmap</span> (<span class="id" title="var">hsubtype_univalence</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>)).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">y</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> [<span class="id" title="var">Sy</span> <span class="id" title="var">lt</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> (<span class="id" title="var">pr1</span> <span class="id" title="var">ST</span> <span class="id" title="var">y</span> <span class="id" title="var">Sy</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">generalize</span> <span class="id" title="var">lt</span>; <span class="id" title="tactic">clear</span> <span class="id" title="var">lt</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">negf</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">le'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">pr2</span> (<span class="id" title="var">wosub_fidelity</span> <span class="id" title="var">ST</span> (<span class="id" title="var">x</span>,, <span class="id" title="var">Sx</span>) (<span class="id" title="var">y</span>,, <span class="id" title="var">Sy</span>))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> (<span class="id" title="var">h1''</span> (<span class="id" title="var">S</span> := <span class="id" title="var">T</span>) <span class="id" title="var">le'</span>).<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> [<span class="id" title="var">Ty</span> <span class="id" title="var">lt</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">Q</span> := <span class="id" title="var">wosub_le_subi</span> <span class="id" title="var">ST</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">Sx</span> <span class="id" title="var">Ty</span>); <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Q</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">e</span> : <span class="id" title="var">pr1</span> <span class="id" title="var">ST</span> <span class="id" title="var">x</span> <span class="id" title="var">Sx</span> = <span class="id" title="var">Tx</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">apply</span> <span class="id" title="var">propproperty</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">e</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">Sy</span> := <span class="id" title="var">Q</span> (<span class="id" title="var">wo_lt_to_le</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">lt</span>) : <span class="id" title="var">S</span> <span class="id" title="var">y</span>); <span class="id" title="tactic">clear</span> <span class="id" title="var">Q</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="var">Sy</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">generalize</span> <span class="id" title="var">lt</span>; <span class="id" title="tactic">clear</span> <span class="id" title="var">lt</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">negf</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">le'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> (<span class="id" title="var">h1''</span> (<span class="id" title="var">wosub_le_comp</span> <span class="id" title="var">ST</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">le'</span>)).<br/>
</div>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">isInterval</span> {<span class="id" title="var">X</span>:<span class="id" title="var">hSet</span>} (<span class="id" title="var">S</span>:<span class="id" title="var">hsubtype</span> <span class="id" title="var">X</span>) (<span class="id" title="var">T</span>:<span class="id" title="var">WOSubset</span> <span class="id" title="var">X</span>) (<span class="id" title="var">le</span> : <span class="id" title="var">S</span> ⊆ <span class="id" title="var">T</span>) :<br/>
&nbsp;&nbsp;<span class="id" title="var">LEM</span> -&gt; <span class="id" title="var">sub_initial</span> <span class="id" title="var">le</span> -&gt; <span class="id" title="var">T</span> ⊈ <span class="id" title="var">S</span> -&gt; ∃ <span class="id" title="var">t</span>:<span class="id" title="var">T</span>, <span class="id" title="var">S</span> ≡ <span class="id" title="var">upto</span> <span class="id" title="var">t</span>.<br/>
<a class="proof" href="#">Show proof.</a><br/><div class="proof">
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">lem</span> <span class="id" title="var">ini</span> <span class="id" title="var">ne</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">R</span> := <span class="id" title="var">WOSrel</span> <span class="id" title="var">T</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">min</span> := <span class="id" title="var">WOS_hasSmallest</span> <span class="id" title="var">T</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">U</span> := (<span class="id" title="var">λ</span> <span class="id" title="var">t</span>:<span class="id" title="var">T</span>, <span class="id" title="var">t</span> ∉ <span class="id" title="var">S</span>) : <span class="id" title="var">hsubtype</span> (<span class="id" title="var">carrier</span> <span class="id" title="var">T</span>)). &nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">neU</span> : <span class="id" title="var">nonempty</span> (<span class="id" title="var">carrier</span> <span class="id" title="var">U</span>)).<br/>
&nbsp;&nbsp;{ <span class="id" title="tactic">apply</span> (<span class="id" title="var">squash_to_hProp</span> <span class="id" title="var">ne</span>); <span class="id" title="tactic">intros</span> [<span class="id" title="var">x</span> [<span class="id" title="var">Tx</span> <span class="id" title="var">nSx</span>]]. <span class="id" title="tactic">apply</span> <span class="id" title="var">hinhpr</span>. <span class="id" title="tactic">exact</span> ((<span class="id" title="var">x</span>,,<span class="id" title="var">Tx</span>),,<span class="id" title="var">nSx</span>). }<br/>
&nbsp;&nbsp;<span class="id" title="tactic">clear</span> <span class="id" title="var">ne</span>. <span class="id" title="tactic">assert</span> (<span class="id" title="var">minU</span> := <span class="id" title="var">min</span> <span class="id" title="var">U</span> <span class="id" title="var">neU</span>); <span class="id" title="tactic">clear</span> <span class="id" title="var">min</span> <span class="id" title="var">neU</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">squash_to_hProp</span> <span class="id" title="var">minU</span>); <span class="id" title="tactic">clear</span> <span class="id" title="var">minU</span>; <span class="id" title="tactic">intros</span> [<span class="id" title="var">u</span> [<span class="id" title="var">Uu</span> <span class="id" title="var">minu</span>]].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">hinhpr</span>. <span class="id" title="tactic">exists</span> <span class="id" title="var">u</span>. <span class="id" title="tactic">intro</span> <span class="id" title="var">y</span>. <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intro</span> <span class="id" title="var">Sy</span>. <span class="id" title="tactic">change</span> (∑ <span class="id" title="var">Ty</span> : <span class="id" title="var">T</span> <span class="id" title="var">y</span>, <span class="id" title="var">neg</span> (<span class="id" title="var">u</span> ≤ <span class="id" title="var">y</span>,, <span class="id" title="var">Ty</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> (<span class="id" title="var">le</span> <span class="id" title="var">y</span> <span class="id" title="var">Sy</span>). <span class="id" title="tactic">intro</span> <span class="id" title="var">ules</span>. <span class="id" title="var">use</span> <span class="id" title="var">Uu</span>. <span class="id" title="tactic">exact</span> (<span class="id" title="var">ini</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">ules</span>).<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intro</span> <span class="id" title="var">yltu</span>. <span class="id" title="tactic">induction</span> <span class="id" title="var">yltu</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">yinT</span> <span class="id" title="var">yltu</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">proof_by_contradiction</span> <span class="id" title="var">lem</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intro</span> <span class="id" title="var">bc</span>. <span class="id" title="var">use</span> <span class="id" title="var">yltu</span>. <span class="id" title="var">now</span> <span class="id" title="var">use</span> <span class="id" title="var">minu</span>.<br/>
</div>

<br/>
</div>

<div class="doc">
<a name="lab365"></a><h2 class="section">The union of a chain of totally ordered subsets</h2>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">is_wosubset_chain</span> {<span class="id" title="var">X</span> : <span class="id" title="var">hSet</span>} {<span class="id" title="var">I</span> : <span class="id" title="var">UU</span>} (<span class="id" title="var">S</span> : <span class="id" title="var">I</span> → <span class="id" title="var">WOSubset</span> <span class="id" title="var">X</span>)<br/>
&nbsp;&nbsp;:= ∀ <span class="id" title="var">i</span> <span class="id" title="var">j</span> : <span class="id" title="var">I</span>, <span class="id" title="var">wosub_comparable</span> (<span class="id" title="var">S</span> <span class="id" title="var">i</span>) (<span class="id" title="var">S</span> <span class="id" title="var">j</span>).<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">common_index</span> {<span class="id" title="var">X</span> : <span class="id" title="var">hSet</span>} {<span class="id" title="var">I</span> : <span class="id" title="var">UU</span>} {<span class="id" title="var">S</span> : <span class="id" title="var">I</span> → <span class="id" title="var">WOSubset</span> <span class="id" title="var">X</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">chain</span> : <span class="id" title="var">is_wosubset_chain</span> <span class="id" title="var">S</span>) (<span class="id" title="var">i</span> : <span class="id" title="var">I</span>) (<span class="id" title="var">x</span> : <span class="id" title="var">carrier_set</span> (⋃ (<span class="id" title="var">λ</span> <span class="id" title="var">i</span>, <span class="id" title="var">S</span> <span class="id" title="var">i</span>))) :<br/>
&nbsp;&nbsp;&nbsp;∃ <span class="id" title="var">j</span>, <span class="id" title="var">S</span> <span class="id" title="var">i</span> ≼ <span class="id" title="var">S</span> <span class="id" title="var">j</span> ∧ <span class="id" title="var">S</span> <span class="id" title="var">j</span> (<span class="id" title="var">pr1</span> <span class="id" title="var">x</span>).<br/>
<a class="proof" href="#">Show proof.</a><br/><div class="proof">
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">x</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">x</span> <span class="id" title="var">xinU</span>]. <span class="id" title="tactic">apply</span> (<span class="id" title="var">squash_to_hProp</span> <span class="id" title="var">xinU</span>); <span class="id" title="tactic">intros</span> [<span class="id" title="var">k</span> <span class="id" title="var">xinSk</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">change</span> (∃ <span class="id" title="var">j</span> : <span class="id" title="var">I</span>, <span class="id" title="var">S</span> <span class="id" title="var">i</span> ≼ <span class="id" title="var">S</span> <span class="id" title="var">j</span> ∧ <span class="id" title="var">S</span> <span class="id" title="var">j</span> <span class="id" title="var">x</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">squash_to_hProp</span> (<span class="id" title="var">chain</span> <span class="id" title="var">i</span> <span class="id" title="var">k</span>)). <span class="id" title="tactic">intros</span> <span class="id" title="var">c</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">hinhpr</span>. <span class="id" title="tactic">induction</span> <span class="id" title="var">c</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">c</span>|<span class="id" title="var">c</span>].<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">exists</span> <span class="id" title="var">k</span>. <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">exact</span> <span class="id" title="var">c</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">exact</span> <span class="id" title="var">xinSk</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">exists</span> <span class="id" title="var">i</span>. <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <span class="id" title="var">wosub_le_isrefl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">exact</span> (<span class="id" title="var">pr1</span> <span class="id" title="var">c</span> <span class="id" title="var">x</span> <span class="id" title="var">xinSk</span>).<br/>
</div>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">common_index2</span> {<span class="id" title="var">X</span> : <span class="id" title="var">hSet</span>} {<span class="id" title="var">I</span> : <span class="id" title="var">UU</span>} {<span class="id" title="var">S</span> : <span class="id" title="var">I</span> → <span class="id" title="var">WOSubset</span> <span class="id" title="var">X</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">chain</span> : <span class="id" title="var">is_wosubset_chain</span> <span class="id" title="var">S</span>) (<span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">carrier_set</span> (⋃ (<span class="id" title="var">λ</span> <span class="id" title="var">i</span>, <span class="id" title="var">S</span> <span class="id" title="var">i</span>))) :<br/>
&nbsp;&nbsp;&nbsp;∃ <span class="id" title="var">i</span>, <span class="id" title="var">S</span> <span class="id" title="var">i</span> (<span class="id" title="var">pr1</span> <span class="id" title="var">x</span>) ∧ <span class="id" title="var">S</span> <span class="id" title="var">i</span> (<span class="id" title="var">pr1</span> <span class="id" title="var">y</span>).<br/>
<a class="proof" href="#">Show proof.</a><br/><div class="proof">
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">x</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">x</span> <span class="id" title="var">j</span>], <span class="id" title="var">y</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">y</span> <span class="id" title="var">k</span>]. <span class="id" title="tactic">change</span> (∃ <span class="id" title="var">i</span>, <span class="id" title="var">S</span> <span class="id" title="var">i</span> <span class="id" title="var">x</span> ∧ <span class="id" title="var">S</span> <span class="id" title="var">i</span> <span class="id" title="var">y</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">squash_to_hProp</span> <span class="id" title="var">j</span>). <span class="id" title="tactic">clear</span> <span class="id" title="var">j</span>. <span class="id" title="tactic">intros</span> [<span class="id" title="var">j</span> <span class="id" title="var">s</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">squash_to_hProp</span> <span class="id" title="var">k</span>). <span class="id" title="tactic">clear</span> <span class="id" title="var">k</span>. <span class="id" title="tactic">intros</span> [<span class="id" title="var">k</span> <span class="id" title="var">t</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">squash_to_hProp</span> (<span class="id" title="var">chain</span> <span class="id" title="var">j</span> <span class="id" title="var">k</span>)). <span class="id" title="tactic">clear</span> <span class="id" title="var">chain</span>. <span class="id" title="tactic">intros</span> [<span class="id" title="var">c</span>|<span class="id" title="var">c</span>].<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <span class="id" title="var">hinhpr</span>. <span class="id" title="tactic">exists</span> <span class="id" title="var">k</span>. <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">exact</span> (<span class="id" title="var">pr1</span> <span class="id" title="var">c</span> <span class="id" title="var">x</span> <span class="id" title="var">s</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">exact</span> <span class="id" title="var">t</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <span class="id" title="var">hinhpr</span>. <span class="id" title="tactic">exists</span> <span class="id" title="var">j</span>. <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">exact</span> <span class="id" title="var">s</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">exact</span> (<span class="id" title="var">pr1</span> <span class="id" title="var">c</span> <span class="id" title="var">y</span> <span class="id" title="var">t</span>).<br/>
</div>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">common_index3</span> {<span class="id" title="var">X</span> : <span class="id" title="var">hSet</span>} {<span class="id" title="var">I</span> : <span class="id" title="var">UU</span>} {<span class="id" title="var">S</span> : <span class="id" title="var">I</span> → <span class="id" title="var">WOSubset</span> <span class="id" title="var">X</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">chain</span> : <span class="id" title="var">is_wosubset_chain</span> <span class="id" title="var">S</span>) (<span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">z</span> : <span class="id" title="var">carrier_set</span> (⋃ (<span class="id" title="var">λ</span> <span class="id" title="var">i</span>, <span class="id" title="var">S</span> <span class="id" title="var">i</span>))) :<br/>
&nbsp;&nbsp;&nbsp;∃ <span class="id" title="var">i</span>, <span class="id" title="var">S</span> <span class="id" title="var">i</span> (<span class="id" title="var">pr1</span> <span class="id" title="var">x</span>) ∧ <span class="id" title="var">S</span> <span class="id" title="var">i</span> (<span class="id" title="var">pr1</span> <span class="id" title="var">y</span>) ∧ <span class="id" title="var">S</span> <span class="id" title="var">i</span> (<span class="id" title="var">pr1</span> <span class="id" title="var">z</span>).<br/>
<a class="proof" href="#">Show proof.</a><br/><div class="proof">
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">x</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">x</span> <span class="id" title="var">j</span>], <span class="id" title="var">y</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">y</span> <span class="id" title="var">k</span>], <span class="id" title="var">z</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">z</span> <span class="id" title="var">l</span>]. <span class="id" title="tactic">change</span> (∃ <span class="id" title="var">i</span>, <span class="id" title="var">S</span> <span class="id" title="var">i</span> <span class="id" title="var">x</span> ∧ <span class="id" title="var">S</span> <span class="id" title="var">i</span> <span class="id" title="var">y</span> ∧ <span class="id" title="var">S</span> <span class="id" title="var">i</span> <span class="id" title="var">z</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">squash_to_hProp</span> <span class="id" title="var">j</span>). <span class="id" title="tactic">clear</span> <span class="id" title="var">j</span>. <span class="id" title="tactic">intros</span> [<span class="id" title="var">j</span> <span class="id" title="var">s</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">squash_to_hProp</span> <span class="id" title="var">k</span>). <span class="id" title="tactic">clear</span> <span class="id" title="var">k</span>. <span class="id" title="tactic">intros</span> [<span class="id" title="var">k</span> <span class="id" title="var">t</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">squash_to_hProp</span> <span class="id" title="var">l</span>). <span class="id" title="tactic">clear</span> <span class="id" title="var">l</span>. <span class="id" title="tactic">intros</span> [<span class="id" title="var">l</span> <span class="id" title="var">u</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">squash_to_hProp</span> (<span class="id" title="var">chain</span> <span class="id" title="var">j</span> <span class="id" title="var">k</span>)). <span class="id" title="tactic">intros</span> [<span class="id" title="var">c</span>|<span class="id" title="var">c</span>].<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> (<span class="id" title="var">squash_to_hProp</span> (<span class="id" title="var">chain</span> <span class="id" title="var">k</span> <span class="id" title="var">l</span>)). <span class="id" title="tactic">clear</span> <span class="id" title="var">chain</span>. <span class="id" title="tactic">intros</span> [<span class="id" title="var">d</span>|<span class="id" title="var">d</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <span class="id" title="var">hinhpr</span>. <span class="id" title="tactic">exists</span> <span class="id" title="var">l</span>. <span class="id" title="tactic">repeat</span> <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">exact</span> (<span class="id" title="var">pr1</span> <span class="id" title="var">d</span> <span class="id" title="var">x</span> (<span class="id" title="var">pr1</span> <span class="id" title="var">c</span> <span class="id" title="var">x</span> <span class="id" title="var">s</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">exact</span> (<span class="id" title="var">pr1</span> <span class="id" title="var">d</span> <span class="id" title="var">y</span> <span class="id" title="var">t</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">exact</span> <span class="id" title="var">u</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <span class="id" title="var">hinhpr</span>. <span class="id" title="tactic">exists</span> <span class="id" title="var">k</span>. <span class="id" title="tactic">repeat</span> <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">exact</span> (<span class="id" title="var">pr1</span> <span class="id" title="var">c</span> <span class="id" title="var">x</span> <span class="id" title="var">s</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">exact</span> <span class="id" title="var">t</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">exact</span> (<span class="id" title="var">pr1</span> <span class="id" title="var">d</span> <span class="id" title="var">z</span> <span class="id" title="var">u</span>).<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> (<span class="id" title="var">squash_to_hProp</span> (<span class="id" title="var">chain</span> <span class="id" title="var">j</span> <span class="id" title="var">l</span>)). <span class="id" title="tactic">clear</span> <span class="id" title="var">chain</span>. <span class="id" title="tactic">intros</span> [<span class="id" title="var">d</span>|<span class="id" title="var">d</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <span class="id" title="var">hinhpr</span>. <span class="id" title="tactic">exists</span> <span class="id" title="var">l</span>. <span class="id" title="tactic">repeat</span> <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">exact</span> (<span class="id" title="var">pr1</span> <span class="id" title="var">d</span> <span class="id" title="var">x</span> <span class="id" title="var">s</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">exact</span> (<span class="id" title="var">pr1</span> <span class="id" title="var">d</span> <span class="id" title="var">y</span> (<span class="id" title="var">pr1</span> <span class="id" title="var">c</span> <span class="id" title="var">y</span> <span class="id" title="var">t</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">exact</span> <span class="id" title="var">u</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <span class="id" title="var">hinhpr</span>. <span class="id" title="tactic">exists</span> <span class="id" title="var">j</span>. <span class="id" title="tactic">repeat</span> <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">exact</span> <span class="id" title="var">s</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">exact</span> (<span class="id" title="var">pr1</span> <span class="id" title="var">c</span> <span class="id" title="var">y</span> <span class="id" title="var">t</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">exact</span> (<span class="id" title="var">pr1</span> <span class="id" title="var">d</span> <span class="id" title="var">z</span> <span class="id" title="var">u</span>).<br/>
</div>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">chain_union_prelim_eq0</span> {<span class="id" title="var">X</span> : <span class="id" title="var">hSet</span>} {<span class="id" title="var">I</span> : <span class="id" title="var">UU</span>} {<span class="id" title="var">S</span> : <span class="id" title="var">I</span> → <span class="id" title="var">WOSubset</span> <span class="id" title="var">X</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">chain</span> : <span class="id" title="var">is_wosubset_chain</span> <span class="id" title="var">S</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">X</span>) (<span class="id" title="var">i</span> <span class="id" title="var">j</span>: <span class="id" title="var">I</span>) (<span class="id" title="var">xi</span> : <span class="id" title="var">S</span> <span class="id" title="var">i</span> <span class="id" title="var">x</span>) (<span class="id" title="var">xj</span> : <span class="id" title="var">S</span> <span class="id" title="var">j</span> <span class="id" title="var">x</span>) (<span class="id" title="var">yi</span> : <span class="id" title="var">S</span> <span class="id" title="var">i</span> <span class="id" title="var">y</span>) (<span class="id" title="var">yj</span> : <span class="id" title="var">S</span> <span class="id" title="var">j</span> <span class="id" title="var">y</span>) :<br/>
&nbsp;&nbsp;<span class="id" title="var">WOSrel</span> (<span class="id" title="var">S</span> <span class="id" title="var">i</span>) (<span class="id" title="var">x</span> ,, <span class="id" title="var">xi</span>) (<span class="id" title="var">y</span> ,, <span class="id" title="var">yi</span>) = <span class="id" title="var">WOSrel</span> (<span class="id" title="var">S</span> <span class="id" title="var">j</span>) (<span class="id" title="var">x</span> ,, <span class="id" title="var">xj</span>) (<span class="id" title="var">y</span> ,, <span class="id" title="var">yj</span>).<br/>
<a class="proof" href="#">Show proof.</a><br/><div class="proof">
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">weqlogeq</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">squash_to_hProp</span> (<span class="id" title="var">chain</span> <span class="id" title="var">i</span> <span class="id" title="var">j</span>)). <span class="id" title="tactic">intros</span> [<span class="id" title="var">c</span>|<span class="id" title="var">c</span>].<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">intro</span> <span class="id" title="var">l</span>. <span class="id" title="tactic">assert</span> (<span class="id" title="var">q</span> := <span class="id" title="var">wosub_le_comp</span> <span class="id" title="var">c</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">l</span>); <span class="id" title="tactic">clear</span> <span class="id" title="var">l</span>. <span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> (<span class="id" title="var">h1''</span> <span class="id" title="var">q</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">intro</span> <span class="id" title="var">l</span>. <span class="id" title="tactic">apply</span> (<span class="id" title="var">pr2</span> ((<span class="id" title="var">wosub_fidelity</span> <span class="id" title="var">c</span>) (<span class="id" title="var">x</span>,,<span class="id" title="var">xi</span>) (<span class="id" title="var">y</span>,,<span class="id" title="var">yi</span>))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> (@<span class="id" title="var">h1''</span> <span class="id" title="var">X</span> (<span class="id" title="var">S</span> <span class="id" title="var">j</span>) <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">l</span>).<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">intro</span> <span class="id" title="var">l</span>. <span class="id" title="tactic">apply</span> (<span class="id" title="var">pr2</span> ((<span class="id" title="var">wosub_fidelity</span> <span class="id" title="var">c</span>) (<span class="id" title="var">x</span>,,<span class="id" title="var">xj</span>) (<span class="id" title="var">y</span>,,<span class="id" title="var">yj</span>))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> (@<span class="id" title="var">h1''</span> <span class="id" title="var">X</span> (<span class="id" title="var">S</span> <span class="id" title="var">i</span>) <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">l</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">intro</span> <span class="id" title="var">l</span>. <span class="id" title="tactic">assert</span> (<span class="id" title="var">q</span> := <span class="id" title="var">wosub_le_comp</span> <span class="id" title="var">c</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">l</span>); <span class="id" title="tactic">clear</span> <span class="id" title="var">l</span>. <span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> (<span class="id" title="var">h1''</span> <span class="id" title="var">q</span>).<br/>
</div>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">chain_union_rel</span> {<span class="id" title="var">X</span> : <span class="id" title="var">hSet</span>} {<span class="id" title="var">I</span> : <span class="id" title="var">UU</span>} {<span class="id" title="var">S</span> : <span class="id" title="var">I</span> → <span class="id" title="var">WOSubset</span> <span class="id" title="var">X</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">chain</span> : <span class="id" title="var">is_wosubset_chain</span> <span class="id" title="var">S</span>) :<br/>
&nbsp;&nbsp;<span class="id" title="var">hrel</span> (<span class="id" title="var">carrier_set</span> (⋃ (<span class="id" title="var">λ</span> <span class="id" title="var">i</span>, <span class="id" title="var">S</span> <span class="id" title="var">i</span>))).<br/>
<a class="proof" href="#">Show proof.</a><br/><div class="proof">
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">change</span> (<span class="id" title="var">hPropset</span>). <span class="id" title="tactic">simple</span> <span class="id" title="tactic">refine</span> (<span class="id" title="var">squash_to_hSet</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> (<span class="id" title="var">common_index2</span> <span class="id" title="var">chain</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>)).<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> [<span class="id" title="var">i</span> [<span class="id" title="var">s</span> <span class="id" title="var">t</span>]]. <span class="id" title="tactic">exact</span> (<span class="id" title="var">WOSrel</span> (<span class="id" title="var">S</span> <span class="id" title="var">i</span>) (<span class="id" title="var">pr1</span> <span class="id" title="var">x</span>,,<span class="id" title="var">s</span>) (<span class="id" title="var">pr1</span> <span class="id" title="var">y</span>,,<span class="id" title="var">t</span>)).<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">i</span> <span class="id" title="var">j</span>. <span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> <span class="id" title="var">chain_union_prelim_eq0</span>.<br/>
</div>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">chain_union_rel_eqn</span> {<span class="id" title="var">X</span> : <span class="id" title="var">hSet</span>} {<span class="id" title="var">I</span> : <span class="id" title="var">UU</span>} {<span class="id" title="var">S</span> : <span class="id" title="var">I</span> → <span class="id" title="var">WOSubset</span> <span class="id" title="var">X</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">chain</span> : <span class="id" title="var">is_wosubset_chain</span> <span class="id" title="var">S</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">carrier_set</span> (⋃ (<span class="id" title="var">λ</span> <span class="id" title="var">i</span>, <span class="id" title="var">S</span> <span class="id" title="var">i</span>)))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">i</span> (<span class="id" title="var">s</span> : <span class="id" title="var">S</span> <span class="id" title="var">i</span> (<span class="id" title="var">pr1</span> <span class="id" title="var">x</span>)) (<span class="id" title="var">t</span> : <span class="id" title="var">S</span> <span class="id" title="var">i</span> (<span class="id" title="var">pr1</span> <span class="id" title="var">y</span>)) :<br/>
&nbsp;&nbsp;<span class="id" title="var">chain_union_rel</span> <span class="id" title="var">chain</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> = <span class="id" title="var">WOSrel</span> (<span class="id" title="var">S</span> <span class="id" title="var">i</span>) (<span class="id" title="var">pr1</span> <span class="id" title="var">x</span>,,<span class="id" title="var">s</span>) (<span class="id" title="var">pr1</span> <span class="id" title="var">y</span>,,<span class="id" title="var">t</span>).<br/>
<a class="proof" href="#">Show proof.</a><br/><div class="proof">
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">chain_union_rel</span>. <span class="id" title="tactic">generalize</span> (<span class="id" title="var">common_index2</span> <span class="id" title="var">chain</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>); <span class="id" title="tactic">intro</span> <span class="id" title="var">h</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">e</span> : <span class="id" title="var">hinhpr</span> (<span class="id" title="var">i</span>,,<span class="id" title="var">s</span>,,<span class="id" title="var">t</span>) = <span class="id" title="var">h</span>).<br/>
&nbsp;&nbsp;{ <span class="id" title="tactic">apply</span> <span class="id" title="var">propproperty</span>. }<br/>
&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">induction</span> <span class="id" title="var">e</span>.<br/>
</div>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">chain_union_rel_istrans</span> {<span class="id" title="var">X</span> : <span class="id" title="var">hSet</span>} {<span class="id" title="var">I</span> : <span class="id" title="var">UU</span>} {<span class="id" title="var">S</span> : <span class="id" title="var">I</span> → <span class="id" title="var">WOSubset</span> <span class="id" title="var">X</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">chain</span> : <span class="id" title="var">is_wosubset_chain</span> <span class="id" title="var">S</span>) :<br/>
&nbsp;&nbsp;<span class="id" title="var">istrans</span> (<span class="id" title="var">chain_union_rel</span> <span class="id" title="var">chain</span>).<br/>
<a class="proof" href="#">Show proof.</a><br/><div class="proof">
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">z</span> <span class="id" title="var">l</span> <span class="id" title="var">m</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">squash_to_hProp</span> (<span class="id" title="var">common_index3</span> <span class="id" title="var">chain</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">z</span>)); <span class="id" title="tactic">intros</span> [<span class="id" title="var">i</span> [<span class="id" title="var">r</span> [<span class="id" title="var">s</span> <span class="id" title="var">t</span>]]].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">p</span> := <span class="id" title="var">chain_union_rel_eqn</span> <span class="id" title="var">chain</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">i</span> <span class="id" title="var">r</span> <span class="id" title="var">s</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">q</span> := <span class="id" title="var">chain_union_rel_eqn</span> <span class="id" title="var">chain</span> <span class="id" title="var">y</span> <span class="id" title="var">z</span> <span class="id" title="var">i</span> <span class="id" title="var">s</span> <span class="id" title="var">t</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">e</span> := <span class="id" title="var">chain_union_rel_eqn</span> <span class="id" title="var">chain</span> <span class="id" title="var">x</span> <span class="id" title="var">z</span> <span class="id" title="var">i</span> <span class="id" title="var">r</span> <span class="id" title="var">t</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">p</span> <span class="id" title="tactic">in</span> <span class="id" title="var">l</span>; <span class="id" title="tactic">clear</span> <span class="id" title="var">p</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">q</span> <span class="id" title="tactic">in</span> <span class="id" title="var">m</span>; <span class="id" title="tactic">clear</span> <span class="id" title="var">q</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">e</span>; <span class="id" title="tactic">clear</span> <span class="id" title="var">e</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">tot</span> : <span class="id" title="var">istrans</span> (<span class="id" title="var">WOSrel</span> (<span class="id" title="var">S</span> <span class="id" title="var">i</span>))).<br/>
&nbsp;&nbsp;{ <span class="id" title="tactic">apply</span> (<span class="id" title="var">pr2</span> (<span class="id" title="var">S</span> <span class="id" title="var">i</span>)). }<br/>
&nbsp;&nbsp;<span class="id" title="tactic">exact</span> (<span class="id" title="var">tot</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">l</span> <span class="id" title="var">m</span>).<br/>
</div>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">chain_union_rel_isrefl</span> {<span class="id" title="var">X</span> : <span class="id" title="var">hSet</span>} {<span class="id" title="var">I</span> : <span class="id" title="var">UU</span>} {<span class="id" title="var">S</span> : <span class="id" title="var">I</span> → <span class="id" title="var">WOSubset</span> <span class="id" title="var">X</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">chain</span> : <span class="id" title="var">is_wosubset_chain</span> <span class="id" title="var">S</span>) :<br/>
&nbsp;&nbsp;<span class="id" title="var">isrefl</span> (<span class="id" title="var">chain_union_rel</span> <span class="id" title="var">chain</span>).<br/>
<a class="proof" href="#">Show proof.</a><br/><div class="proof">
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">x</span>. <span class="id" title="tactic">apply</span> (<span class="id" title="var">squash_to_hProp</span> (<span class="id" title="var">pr2</span> <span class="id" title="var">x</span>)). <span class="id" title="tactic">intros</span> [<span class="id" title="var">i</span> <span class="id" title="var">r</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">p</span> := <span class="id" title="var">chain_union_rel_eqn</span> <span class="id" title="var">chain</span> <span class="id" title="var">x</span> <span class="id" title="var">x</span> <span class="id" title="var">i</span> <span class="id" title="var">r</span> <span class="id" title="var">r</span>). <span class="id" title="tactic">rewrite</span> <span class="id" title="var">p</span>; <span class="id" title="tactic">clear</span> <span class="id" title="var">p</span>. <span class="id" title="tactic">apply</span> (<span class="id" title="var">pr2</span> (<span class="id" title="var">S</span> <span class="id" title="var">i</span>)).<br/>
</div>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">chain_union_rel_isantisymm</span> {<span class="id" title="var">X</span> : <span class="id" title="var">hSet</span>} {<span class="id" title="var">I</span> : <span class="id" title="var">UU</span>} {<span class="id" title="var">S</span> : <span class="id" title="var">I</span> → <span class="id" title="var">WOSubset</span> <span class="id" title="var">X</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">chain</span> : <span class="id" title="var">is_wosubset_chain</span> <span class="id" title="var">S</span>) :<br/>
&nbsp;&nbsp;<span class="id" title="var">isantisymm</span> (<span class="id" title="var">chain_union_rel</span> <span class="id" title="var">chain</span>).<br/>
<a class="proof" href="#">Show proof.</a><br/><div class="proof">
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">l</span> <span class="id" title="var">m</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">change</span> (<span class="id" title="var">x</span>=<span class="id" title="var">y</span>)%<span class="id" title="tactic">set</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">squash_to_hProp</span> (<span class="id" title="var">common_index2</span> <span class="id" title="var">chain</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>)); <span class="id" title="tactic">intros</span> [<span class="id" title="var">i</span> [<span class="id" title="var">r</span> <span class="id" title="var">s</span>]].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">subtypeEquality_prop</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">p</span> := <span class="id" title="var">chain_union_rel_eqn</span> <span class="id" title="var">chain</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">i</span> <span class="id" title="var">r</span> <span class="id" title="var">s</span>). <span class="id" title="tactic">rewrite</span> <span class="id" title="var">p</span> <span class="id" title="tactic">in</span> <span class="id" title="var">l</span>; <span class="id" title="tactic">clear</span> <span class="id" title="var">p</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">q</span> := <span class="id" title="var">chain_union_rel_eqn</span> <span class="id" title="var">chain</span> <span class="id" title="var">y</span> <span class="id" title="var">x</span> <span class="id" title="var">i</span> <span class="id" title="var">s</span> <span class="id" title="var">r</span>). <span class="id" title="tactic">rewrite</span> <span class="id" title="var">q</span> <span class="id" title="tactic">in</span> <span class="id" title="var">m</span>; <span class="id" title="tactic">clear</span> <span class="id" title="var">q</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">anti</span> : <span class="id" title="var">isantisymm</span> (<span class="id" title="var">WOSrel</span> (<span class="id" title="var">S</span> <span class="id" title="var">i</span>))).<br/>
&nbsp;&nbsp;{ <span class="id" title="tactic">apply</span> (<span class="id" title="var">pr2</span> (<span class="id" title="var">S</span> <span class="id" title="var">i</span>)). }<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">b</span> := <span class="id" title="var">anti</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">l</span> <span class="id" title="var">m</span>); <span class="id" title="tactic">clear</span> <span class="id" title="var">anti</span> <span class="id" title="var">l</span> <span class="id" title="var">m</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">exact</span> (<span class="id" title="var">maponpaths</span> <span class="id" title="var">pr1</span> <span class="id" title="var">b</span>).<br/>
</div>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">chain_union_rel_istotal</span> {<span class="id" title="var">X</span> : <span class="id" title="var">hSet</span>} {<span class="id" title="var">I</span> : <span class="id" title="var">UU</span>} {<span class="id" title="var">S</span> : <span class="id" title="var">I</span> → <span class="id" title="var">WOSubset</span> <span class="id" title="var">X</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">chain</span> : <span class="id" title="var">is_wosubset_chain</span> <span class="id" title="var">S</span>) :<br/>
&nbsp;&nbsp;<span class="id" title="var">istotal</span> (<span class="id" title="var">chain_union_rel</span> <span class="id" title="var">chain</span>).<br/>
<a class="proof" href="#">Show proof.</a><br/><div class="proof">
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">squash_to_hProp</span> (<span class="id" title="var">common_index2</span> <span class="id" title="var">chain</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>)); <span class="id" title="tactic">intros</span> [<span class="id" title="var">i</span> [<span class="id" title="var">r</span> <span class="id" title="var">s</span>]].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">p</span> := <span class="id" title="var">chain_union_rel_eqn</span> <span class="id" title="var">chain</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">i</span> <span class="id" title="var">r</span> <span class="id" title="var">s</span>). <span class="id" title="tactic">rewrite</span> <span class="id" title="var">p</span>; <span class="id" title="tactic">clear</span> <span class="id" title="var">p</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">p</span> := <span class="id" title="var">chain_union_rel_eqn</span> <span class="id" title="var">chain</span> <span class="id" title="var">y</span> <span class="id" title="var">x</span> <span class="id" title="var">i</span> <span class="id" title="var">s</span> <span class="id" title="var">r</span>). <span class="id" title="tactic">rewrite</span> <span class="id" title="var">p</span>; <span class="id" title="tactic">clear</span> <span class="id" title="var">p</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">pr2</span> (<span class="id" title="var">S</span> <span class="id" title="var">i</span>)).<br/>
</div>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">chain_union_rel_isTotalOrder</span> {<span class="id" title="var">X</span> : <span class="id" title="var">hSet</span>} {<span class="id" title="var">I</span> : <span class="id" title="var">UU</span>} {<span class="id" title="var">S</span> : <span class="id" title="var">I</span> → <span class="id" title="var">WOSubset</span> <span class="id" title="var">X</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">chain</span> : <span class="id" title="var">is_wosubset_chain</span> <span class="id" title="var">S</span>) :<br/>
&nbsp;&nbsp;<span class="id" title="var">isTotalOrder</span> (<span class="id" title="var">chain_union_rel</span> <span class="id" title="var">chain</span>).<br/>
<a class="proof" href="#">Show proof.</a><br/><div class="proof">
&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <span class="id" title="var">chain_union_rel_istrans</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <span class="id" title="var">chain_union_rel_isrefl</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <span class="id" title="var">chain_union_rel_isantisymm</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <span class="id" title="var">chain_union_rel_istotal</span>.<br/>
</div>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">chain_union_TOSubset</span> {<span class="id" title="var">X</span> : <span class="id" title="var">hSet</span>} {<span class="id" title="var">I</span> : <span class="id" title="var">UU</span>} {<span class="id" title="var">S</span> : <span class="id" title="var">I</span> → <span class="id" title="var">WOSubset</span> <span class="id" title="var">X</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">Schain</span> : <span class="id" title="var">is_wosubset_chain</span> <span class="id" title="var">S</span>) : <span class="id" title="var">TOSubset</span> <span class="id" title="var">X</span>.<br/>
<a class="proof" href="#">Show proof.</a><br/><div class="proof">
&nbsp;&nbsp;<span class="id" title="tactic">exists</span> (⋃ <span class="id" title="var">S</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">exists</span> (<span class="id" title="var">chain_union_rel</span> <span class="id" title="var">Schain</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <span class="id" title="var">chain_union_rel_istrans</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <span class="id" title="var">chain_union_rel_isrefl</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <span class="id" title="var">chain_union_rel_isantisymm</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <span class="id" title="var">chain_union_rel_istotal</span>.<br/>
</div>

<br/>
<span class="id" title="keyword">Notation</span> &quot;⋃ chain" := (<span class="id" title="var">chain_union_TOSubset</span> <span class="id" title="var">chain</span>) (<span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 100, <span class="id" title="keyword">no</span> <span class="id" title="keyword">associativity</span>) : <span class="id" title="var">tosubset</span>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab366"></a><h2 class="section">The union of a chain of well ordered subsets</h2>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">chain_union_tosub_le</span> {<span class="id" title="var">X</span> : <span class="id" title="var">hSet</span>} {<span class="id" title="var">I</span> : <span class="id" title="var">UU</span>} {<span class="id" title="var">S</span> : <span class="id" title="var">I</span> → <span class="id" title="var">WOSubset</span> <span class="id" title="var">X</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">Schain</span> : <span class="id" title="var">is_wosubset_chain</span> <span class="id" title="var">S</span>) (<span class="id" title="var">i</span>:<span class="id" title="var">I</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">inc</span> := <span class="id" title="var">subtype_inc</span> (<span class="id" title="var">subtype_union_containedIn</span> <span class="id" title="var">S</span> <span class="id" title="var">i</span>)) :<br/>
&nbsp;&nbsp;( <span class="id" title="var">S</span> <span class="id" title="var">i</span> ≼ ⋃ <span class="id" title="var">Schain</span> ) % <span class="id" title="var">tosubset</span>.<br/>
<a class="proof" href="#">Show proof.</a><br/><div class="proof">
&nbsp;&nbsp;<span class="id" title="tactic">exists</span> (<span class="id" title="var">subtype_union_containedIn</span> <span class="id" title="var">S</span> <span class="id" title="var">i</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">s</span> <span class="id" title="var">s'</span> <span class="id" title="var">j</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">u</span> := <span class="id" title="var">subtype_inc</span> (<span class="id" title="var">λ</span> <span class="id" title="var">x</span> <span class="id" title="var">J</span>, <span class="id" title="var">hinhpr</span> (<span class="id" title="var">i</span>,, <span class="id" title="var">J</span>)) <span class="id" title="var">s</span> : ⋃ <span class="id" title="var">Schain</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">u'</span>:= <span class="id" title="var">subtype_inc</span> (<span class="id" title="var">λ</span> <span class="id" title="var">x</span> <span class="id" title="var">J</span>, <span class="id" title="var">hinhpr</span> (<span class="id" title="var">i</span>,, <span class="id" title="var">J</span>)) <span class="id" title="var">s'</span>: ⋃ <span class="id" title="var">Schain</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">change</span> (<span class="id" title="var">chain_union_rel</span> <span class="id" title="var">Schain</span> <span class="id" title="var">u</span> <span class="id" title="var">u'</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">q</span> := <span class="id" title="var">chain_union_rel_eqn</span> <span class="id" title="var">Schain</span> <span class="id" title="var">u</span> <span class="id" title="var">u'</span> <span class="id" title="var">i</span> (<span class="id" title="var">pr2</span> <span class="id" title="var">s</span>) (<span class="id" title="var">pr2</span> <span class="id" title="var">s'</span>)).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">q</span>; <span class="id" title="tactic">clear</span> <span class="id" title="var">q</span>. <span class="id" title="tactic">exact</span> <span class="id" title="var">j</span>.<br/>
</div>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">chain_union_rel_initial</span> {<span class="id" title="var">X</span> : <span class="id" title="var">hSet</span>} {<span class="id" title="var">I</span> : <span class="id" title="var">UU</span>} {<span class="id" title="var">S</span> : <span class="id" title="var">I</span> → <span class="id" title="var">WOSubset</span> <span class="id" title="var">X</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">Schain</span> : <span class="id" title="var">is_wosubset_chain</span> <span class="id" title="var">S</span>) (<span class="id" title="var">i</span>:<span class="id" title="var">I</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">inc</span> := <span class="id" title="var">subtype_inc</span> (<span class="id" title="var">subtype_union_containedIn</span> <span class="id" title="var">S</span> <span class="id" title="var">i</span>)) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(∀ <span class="id" title="var">s</span>:<span class="id" title="var">S</span> <span class="id" title="var">i</span>, ∀ <span class="id" title="var">t</span>:⋃ <span class="id" title="var">Schain</span>, <span class="id" title="var">t</span> ≤ <span class="id" title="var">inc</span> <span class="id" title="var">s</span> ⇒ <span class="id" title="var">t</span> ∈ <span class="id" title="var">S</span> <span class="id" title="var">i</span>)%<span class="id" title="var">tosubset</span>.<br/>
<a class="proof" href="#">Show proof.</a><br/><div class="proof">
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">s</span> <span class="id" title="var">t</span> <span class="id" title="var">le</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">squash_to_hProp</span> (<span class="id" title="var">common_index</span> <span class="id" title="var">Schain</span> <span class="id" title="var">i</span> <span class="id" title="var">t</span>)).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> [<span class="id" title="var">j</span> [[<span class="id" title="var">ij</span> [<span class="id" title="var">com</span> <span class="id" title="var">ini</span>]] <span class="id" title="var">tinSj</span>]]. <span class="id" title="tactic">set</span> (<span class="id" title="var">t'</span> := (<span class="id" title="var">pr1</span> <span class="id" title="var">t</span>,,<span class="id" title="var">tinSj</span>) : <span class="id" title="var">S</span> <span class="id" title="var">j</span>). <span class="id" title="tactic">unfold</span> <span class="id" title="var">sub_initial</span> <span class="id" title="tactic">in</span> <span class="id" title="var">ini</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">K</span> := <span class="id" title="var">ini</span> (<span class="id" title="var">pr1</span> <span class="id" title="var">s</span>) (<span class="id" title="var">pr1</span> <span class="id" title="var">t'</span>) (<span class="id" title="var">pr2</span> <span class="id" title="var">s</span>) (<span class="id" title="var">pr2</span> <span class="id" title="var">t'</span>)); <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">K</span>. <span class="id" title="tactic">change</span> (<span class="id" title="var">t'</span> ≤ <span class="id" title="var">subtype_inc</span> <span class="id" title="var">ij</span> <span class="id" title="var">s</span> → <span class="id" title="var">t</span> ∈ <span class="id" title="var">S</span> <span class="id" title="var">i</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">K</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">K</span>; <span class="id" title="tactic">clear</span> <span class="id" title="var">K</span>. <span class="id" title="tactic">unfold</span> <span class="id" title="var">tosub_order_compat</span> <span class="id" title="tactic">in</span> <span class="id" title="var">com</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">pr2</span> (<span class="id" title="var">tosub_fidelity</span> (<span class="id" title="var">chain_union_tosub_le</span> <span class="id" title="var">Schain</span> <span class="id" title="var">j</span>) <span class="id" title="var">t'</span> (<span class="id" title="var">subtype_inc</span> <span class="id" title="var">ij</span> <span class="id" title="var">s</span>))).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">clear</span> <span class="id" title="var">com</span> <span class="id" title="var">ini</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">p</span> : <span class="id" title="var">t</span> = <span class="id" title="var">subtype_inc</span> (<span class="id" title="var">pr1</span> (<span class="id" title="var">chain_union_tosub_le</span> <span class="id" title="var">_</span> <span class="id" title="var">j</span>)) <span class="id" title="var">t'</span>).<br/>
&nbsp;&nbsp;{ <span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> <span class="id" title="var">subtypeEquality_prop</span>. }<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">p</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">q</span> : <span class="id" title="var">inc</span> <span class="id" title="var">s</span> = <span class="id" title="var">subtype_inc</span> (<span class="id" title="var">pr1</span> (<span class="id" title="var">chain_union_tosub_le</span> <span class="id" title="var">Schain</span> <span class="id" title="var">j</span>)) (<span class="id" title="var">subtype_inc</span> <span class="id" title="var">ij</span> <span class="id" title="var">s</span>)).<br/>
&nbsp;&nbsp;{ <span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> <span class="id" title="var">subtypeEquality_prop</span>. }<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">q</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">exact</span> <span class="id" title="var">le</span>.<br/>
</div>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">chain_union_rel_hasSmallest</span> {<span class="id" title="var">X</span> : <span class="id" title="var">hSet</span>} {<span class="id" title="var">I</span> : <span class="id" title="var">UU</span>} {<span class="id" title="var">S</span> : <span class="id" title="var">I</span> → <span class="id" title="var">WOSubset</span> <span class="id" title="var">X</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">chain</span> : <span class="id" title="var">is_wosubset_chain</span> <span class="id" title="var">S</span>) :<br/>
&nbsp;&nbsp;<span class="id" title="var">hasSmallest</span> (<span class="id" title="var">chain_union_rel</span> <span class="id" title="var">chain</span>).<br/>
<a class="proof" href="#">Show proof.</a><br/><div class="proof">
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">T</span> <span class="id" title="var">t'</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">squash_to_hProp</span> <span class="id" title="var">t'</span>); <span class="id" title="tactic">clear</span> <span class="id" title="var">t'</span>; <span class="id" title="tactic">intros</span> [[<span class="id" title="var">x</span> <span class="id" title="var">i</span>] <span class="id" title="var">xinT</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">squash_to_hProp</span> <span class="id" title="var">i</span>); <span class="id" title="tactic">intros</span> [<span class="id" title="var">j</span> <span class="id" title="var">xinSj</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> (<span class="id" title="var">ishinh_irrel</span> ( <span class="id" title="var">j</span> ,, <span class="id" title="var">xinSj</span> ) <span class="id" title="var">i</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">T'</span> := (<span class="id" title="var">λ</span> <span class="id" title="var">s</span>, <span class="id" title="var">T</span> (<span class="id" title="var">subtype_inc</span> (<span class="id" title="var">subtype_union_containedIn</span> <span class="id" title="var">S</span> <span class="id" title="var">j</span>) <span class="id" title="var">s</span>))).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">t'</span> := <span class="id" title="var">hinhpr</span> ((<span class="id" title="var">x</span>,,<span class="id" title="var">xinSj</span>),,<span class="id" title="var">xinT</span>) : ∥ <span class="id" title="var">carrier</span> <span class="id" title="var">T'</span> ∥); <span class="id" title="tactic">clear</span> <span class="id" title="var">x</span> <span class="id" title="var">xinSj</span> <span class="id" title="var">xinT</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">min</span> := <span class="id" title="var">WOS_hasSmallest</span> (<span class="id" title="var">S</span> <span class="id" title="var">j</span>) <span class="id" title="var">T'</span> <span class="id" title="var">t'</span>); <span class="id" title="tactic">clear</span> <span class="id" title="var">t'</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">squash_to_hProp</span> <span class="id" title="var">min</span>); <span class="id" title="tactic">clear</span> <span class="id" title="var">min</span>; <span class="id" title="tactic">intros</span> [<span class="id" title="var">t0</span> [<span class="id" title="var">t0inT'</span> <span class="id" title="var">t0min</span>]].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">t0'</span> := <span class="id" title="var">subtype_inc</span> (<span class="id" title="var">subtype_union_containedIn</span> <span class="id" title="var">S</span> <span class="id" title="var">j</span>) <span class="id" title="var">t0</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">hinhpr</span>. <span class="id" title="tactic">exists</span> <span class="id" title="var">t0'</span>. <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">exact</span> <span class="id" title="var">t0inT'</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">t</span> <span class="id" title="var">tinT</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">hdisj_impl_2</span> (<span class="id" title="var">chain_union_rel_istotal</span> <span class="id" title="var">chain</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>)); <span class="id" title="tactic">intro</span> <span class="id" title="var">tle</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">q</span> := <span class="id" title="var">chain_union_rel_initial</span> <span class="id" title="var">chain</span> <span class="id" title="var">j</span> <span class="id" title="var">t0</span> <span class="id" title="var">t</span> <span class="id" title="var">tle</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">t'</span> := (<span class="id" title="var">pr1</span> <span class="id" title="var">t</span>,,<span class="id" title="var">q</span>) : <span class="id" title="var">S</span> <span class="id" title="var">j</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">E</span> : <span class="id" title="var">subtype_inc</span> (<span class="id" title="var">subtype_union_containedIn</span> <span class="id" title="var">S</span> <span class="id" title="var">j</span>) <span class="id" title="var">t'</span> = <span class="id" title="var">t</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> <span class="id" title="var">subtypeEquality_prop</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">E</span>. <span class="id" title="tactic">unfold</span> <span class="id" title="var">t0'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">pr2</span> (<span class="id" title="var">chain_union_tosub_le</span> <span class="id" title="var">chain</span> <span class="id" title="var">j</span>) <span class="id" title="var">t0</span> <span class="id" title="var">t'</span>). <span class="id" title="tactic">apply</span> (<span class="id" title="var">t0min</span> <span class="id" title="var">t'</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">T'</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">E</span>. <span class="id" title="tactic">exact</span> <span class="id" title="var">tinT</span>.<br/>
</div>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">chain_union_WOSubset</span> {<span class="id" title="var">X</span>:<span class="id" title="var">hSet</span>} {<span class="id" title="var">I</span>:<span class="id" title="var">UU</span>} {<span class="id" title="var">S</span> : <span class="id" title="var">I</span> -&gt; <span class="id" title="var">WOSubset</span> <span class="id" title="var">X</span>} (<span class="id" title="var">Schain</span> : <span class="id" title="var">is_wosubset_chain</span> <span class="id" title="var">S</span>)<br/>
&nbsp;&nbsp;: <span class="id" title="var">WOSubset</span> <span class="id" title="var">X</span>.<br/>
<a class="proof" href="#">Show proof.</a><br/><div class="proof">
&nbsp;&nbsp;<span class="id" title="tactic">exists</span> (⋃ <span class="id" title="var">Schain</span>). <span class="id" title="tactic">exists</span> (<span class="id" title="var">chain_union_rel</span> <span class="id" title="var">Schain</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <span class="id" title="var">chain_union_rel_istrans</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <span class="id" title="var">chain_union_rel_isrefl</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <span class="id" title="var">chain_union_rel_isantisymm</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <span class="id" title="var">chain_union_rel_istotal</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <span class="id" title="var">chain_union_rel_hasSmallest</span>.<br/>
</div>

<br/>
<span class="id" title="keyword">Notation</span> &quot;⋃ chain" := (<span class="id" title="var">chain_union_WOSubset</span> <span class="id" title="var">chain</span>) (<span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 100, <span class="id" title="keyword">no</span> <span class="id" title="keyword">associativity</span>) : <span class="id" title="var">wosubset</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">chain_union_le</span> {<span class="id" title="var">X</span>:<span class="id" title="var">hSet</span>} {<span class="id" title="var">I</span>:<span class="id" title="var">UU</span>} (<span class="id" title="var">S</span> : <span class="id" title="var">I</span> -&gt; <span class="id" title="var">WOSubset</span> <span class="id" title="var">X</span>) (<span class="id" title="var">Schain</span> : <span class="id" title="var">is_wosubset_chain</span> <span class="id" title="var">S</span>) :<br/>
&nbsp;&nbsp;∀ <span class="id" title="var">i</span>, <span class="id" title="var">S</span> <span class="id" title="var">i</span> ≼ ⋃ <span class="id" title="var">Schain</span>.<br/>
<a class="proof" href="#">Show proof.</a><br/><div class="proof">
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">i</span>. <span class="id" title="tactic">exists</span> (<span class="id" title="var">subtype_union_containedIn</span> <span class="id" title="var">S</span> <span class="id" title="var">i</span>). <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;* <span class="id" title="tactic">exact</span> (<span class="id" title="var">pr2</span> (<span class="id" title="var">chain_union_tosub_le</span> <span class="id" title="var">_</span> <span class="id" title="var">i</span>)).<br/>
&nbsp;&nbsp;* <span class="id" title="tactic">intros</span> <span class="id" title="var">s</span> <span class="id" title="var">t</span> <span class="id" title="var">Ss</span> <span class="id" title="var">Tt</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exact</span> (<span class="id" title="var">chain_union_rel_initial</span> <span class="id" title="var">Schain</span> <span class="id" title="var">i</span> (<span class="id" title="var">s</span>,,<span class="id" title="var">Ss</span>) (<span class="id" title="var">t</span>,,<span class="id" title="var">Tt</span>)).<br/>
</div>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">proper_subtypes_set</span> (<span class="id" title="var">X</span>:<span class="id" title="var">UU</span>) : <span class="id" title="var">hSet</span> := ∑ <span class="id" title="var">S</span> : <span class="id" title="var">subtype_set</span> <span class="id" title="var">X</span>, <span class="id" title="var">hProp_to_hSet</span> (∃ <span class="id" title="var">x</span>, ¬ (<span class="id" title="var">S</span> <span class="id" title="var">x</span>)).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">upto'</span> {<span class="id" title="var">X</span>:<span class="id" title="var">hSet</span>} {<span class="id" title="var">C</span>:<span class="id" title="var">WOSubset</span> <span class="id" title="var">X</span>} (<span class="id" title="var">c</span>:<span class="id" title="var">C</span>) : <span class="id" title="var">proper_subtypes_set</span> <span class="id" title="var">X</span>.<br/>
<a class="proof" href="#">Show proof.</a><br/><div class="proof">
&nbsp;&nbsp;<span class="id" title="tactic">exists</span> (<span class="id" title="var">upto</span> <span class="id" title="var">c</span>). <span class="id" title="tactic">apply</span> <span class="id" title="var">hinhpr</span>. <span class="id" title="tactic">exists</span> (<span class="id" title="var">pr1</span> <span class="id" title="var">c</span>). <span class="id" title="tactic">intro</span> <span class="id" title="var">n</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">n</span>. <span class="id" title="tactic">induction</span> <span class="id" title="var">n</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">n</span> <span class="id" title="var">o</span>]. <span class="id" title="tactic">apply</span> <span class="id" title="var">o</span>; <span class="id" title="tactic">clear</span> <span class="id" title="var">o</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">TOeq_to_refl</span> <span class="id" title="var">C</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>). <span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> <span class="id" title="var">subtypeEquality_prop</span>.<br/>
</div>

<br/>
</div>

<div class="doc">
<a name="lab367"></a><h2 class="section">Choice functions</h2>

<div class="paragraph"> </div>

 A choice function provides an element not in each proper subset.  
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">choice_fun</span> (<span class="id" title="var">X</span>:<span class="id" title="var">hSet</span>) : <span class="id" title="var">hSet</span> := ∏ <span class="id" title="var">S</span> : <span class="id" title="var">proper_subtypes_set</span> <span class="id" title="var">X</span>, ∑ <span class="id" title="var">x</span> : <span class="id" title="var">X</span>, <span class="id" title="var">hProp_to_hSet</span> (¬ <span class="id" title="var">pr1</span> <span class="id" title="var">S</span> <span class="id" title="var">x</span>).<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">AC_to_choice_fun</span> (<span class="id" title="var">X</span>:<span class="id" title="var">hSet</span>) : <span class="id" title="var">AxiomOfChoice</span> ⇒ ∥ <span class="id" title="var">choice_fun</span> <span class="id" title="var">X</span> ∥.<br/>
<a class="proof" href="#">Show proof.</a><br/><div class="proof">
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">ac</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">exact</span> (<span class="id" title="var">squash_to_hProp</span> (<span class="id" title="var">ac</span> (<span class="id" title="var">proper_subtypes_set</span> <span class="id" title="var">X</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">λ</span> <span class="id" title="var">S</span>, ∑ <span class="id" title="var">x</span>, <span class="id" title="var">hProp_to_hSet</span> (¬ (<span class="id" title="var">pr1</span> <span class="id" title="var">S</span> <span class="id" title="var">x</span>))) <span class="id" title="var">pr2</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">hinhpr</span>).<br/>
</div>

<br/>
</div>

<div class="doc">
Given a choice function g, we single out well ordered subsets C of X that
    follow the choice functions advice when constructed by adding one element at
    a time to the top.  We may say that C is "guided" by g. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">is_guided_WOSubset</span> {<span class="id" title="var">X</span>:<span class="id" title="var">hSet</span>} (<span class="id" title="var">g</span> : <span class="id" title="var">choice_fun</span> <span class="id" title="var">X</span>) (<span class="id" title="var">C</span> : <span class="id" title="var">WOSubset</span> <span class="id" title="var">X</span>) : <span class="id" title="var">hProp</span><br/>
&nbsp;&nbsp;:= ∀ <span class="id" title="var">c</span>:<span class="id" title="var">C</span>, <span class="id" title="var">pr1</span> <span class="id" title="var">c</span> = <span class="id" title="var">pr1</span> (<span class="id" title="var">g</span> (<span class="id" title="var">upto'</span> <span class="id" title="var">c</span>)).<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">upto'_eqn</span> {<span class="id" title="var">X</span>:<span class="id" title="var">hSet</span>} (<span class="id" title="var">g</span> : <span class="id" title="var">choice_fun</span> <span class="id" title="var">X</span>) (<span class="id" title="var">C</span> <span class="id" title="var">D</span> : <span class="id" title="var">WOSubset</span> <span class="id" title="var">X</span>) (<span class="id" title="var">j</span> : <span class="id" title="var">C</span> ≼ <span class="id" title="var">D</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">c</span> : <span class="id" title="var">C</span>) (<span class="id" title="var">d</span> : <span class="id" title="var">D</span>) :<br/>
&nbsp;&nbsp;<span class="id" title="var">pr1</span> (<span class="id" title="var">subtype_inc</span> (<span class="id" title="var">pr1</span> <span class="id" title="var">j</span>) <span class="id" title="var">c</span>) = <span class="id" title="var">pr1</span> <span class="id" title="var">d</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id" title="var">pr1</span> (<span class="id" title="var">g</span> (<span class="id" title="var">upto'</span> <span class="id" title="var">c</span>)) = <span class="id" title="var">pr1</span> (<span class="id" title="var">g</span> (<span class="id" title="var">upto'</span> <span class="id" title="var">d</span>)).<br/>
<a class="proof" href="#">Show proof.</a><br/><div class="proof">
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">p</span>. <span class="id" title="tactic">assert</span> (<span class="id" title="var">e'</span> : <span class="id" title="var">upto'</span> <span class="id" title="var">c</span> = <span class="id" title="var">upto'</span> <span class="id" title="var">d</span>).<br/>
&nbsp;&nbsp;{ <span class="id" title="tactic">apply</span> <span class="id" title="var">subtypeEquality_prop</span>. <span class="id" title="tactic">change</span> (<span class="id" title="var">upto</span> <span class="id" title="var">c</span> = <span class="id" title="var">upto</span> <span class="id" title="var">d</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">q</span> : <span class="id" title="var">subtype_inc</span> (<span class="id" title="var">pr1</span> <span class="id" title="var">j</span>) <span class="id" title="var">c</span> = <span class="id" title="var">d</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> <span class="id" title="var">subtypeEquality_prop</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">clear</span> <span class="id" title="var">p</span>. <span class="id" title="tactic">induction</span> <span class="id" title="var">q</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> <span class="id" title="var">upto_eqn</span>. }<br/>
&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">induction</span> <span class="id" title="var">e'</span>.<br/>
</div>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">Guided_WOSubset</span> {<span class="id" title="var">X</span>:<span class="id" title="var">hSet</span>} (<span class="id" title="var">g</span> : <span class="id" title="var">choice_fun</span> <span class="id" title="var">X</span>) := (∑ <span class="id" title="var">C</span>, <span class="id" title="var">is_guided_WOSubset</span> <span class="id" title="var">g</span> <span class="id" title="var">C</span>)%<span class="id" title="keyword">type</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">guidedFamily</span> {<span class="id" title="var">X</span>:<span class="id" title="var">hSet</span>} (<span class="id" title="var">g</span> : <span class="id" title="var">choice_fun</span> <span class="id" title="var">X</span>) : <span class="id" title="var">Guided_WOSubset</span> <span class="id" title="var">g</span> -&gt; <span class="id" title="var">WOSubset</span> <span class="id" title="var">X</span><br/>
&nbsp;&nbsp;:= <span class="id" title="var">pr1</span>.<br/>

<br/>
<span class="id" title="keyword">Coercion</span> <span class="id" title="var">guidedFamily</span> : <span class="id" title="var">Guided_WOSubset</span> &gt;-&gt; <span class="id" title="var">WOSubset</span>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab368"></a><h2 class="section">The guided well ordered subsets form a chain</h2>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">guided_WOSubset_total</span> {<span class="id" title="var">X</span>:<span class="id" title="var">hSet</span>} (<span class="id" title="var">g</span> : <span class="id" title="var">choice_fun</span> <span class="id" title="var">X</span>) :<br/>
&nbsp;&nbsp;<span class="id" title="var">LEM</span> -&gt; <span class="id" title="var">is_wosubset_chain</span> (<span class="id" title="var">guidedFamily</span> <span class="id" title="var">g</span>).<br/>
<a class="proof" href="#">Show proof.</a><br/><div class="proof">
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">lem</span> [<span class="id" title="var">C</span> <span class="id" title="var">gC</span>] [<span class="id" title="var">D</span> <span class="id" title="var">gD</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">W</span> := <span class="id" title="var">max_common_initial</span> <span class="id" title="var">C</span> <span class="id" title="var">D</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">Q</span> := <span class="id" title="var">max_common_initial_is_common_initial</span> <span class="id" title="var">C</span> <span class="id" title="var">D</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">Q</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">WC</span> [<span class="id" title="var">WD</span> [<span class="id" title="var">WCi</span> [<span class="id" title="var">WDi</span> <span class="id" title="var">WCD</span>]]]]; <span class="id" title="tactic">fold</span> <span class="id" title="var">W</span> <span class="id" title="tactic">in</span> <span class="id" title="var">WC</span>, <span class="id" title="var">WD</span>, <span class="id" title="var">WCi</span>, <span class="id" title="var">WDi</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">E</span> : <span class="id" title="var">W</span> ≡ <span class="id" title="var">C</span> ∨ <span class="id" title="var">W</span> ≡ <span class="id" title="var">D</span>).<br/>
&nbsp;&nbsp;{ <span class="id" title="tactic">apply</span> (<span class="id" title="var">proof_by_contradiction</span> <span class="id" title="var">lem</span>); <span class="id" title="tactic">intro</span> <span class="id" title="var">h</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">k</span> := <span class="id" title="var">fromnegcoprod_prop</span> <span class="id" title="var">h</span>); <span class="id" title="tactic">clear</span> <span class="id" title="var">h</span>; <span class="id" title="tactic">induction</span> <span class="id" title="var">k</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">nc</span> <span class="id" title="var">nd</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">nCW</span> : <span class="id" title="var">C</span> ⊈ <span class="id" title="var">W</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="var">use</span> <span class="id" title="var">subtype_notEqual_containedIn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">exact</span> <span class="id" title="var">WC</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> <span class="id" title="var">subtype_notEqual_from_negEqual</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">nDW</span> : <span class="id" title="var">D</span> ⊈ <span class="id" title="var">W</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="var">use</span> <span class="id" title="var">subtype_notEqual_containedIn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">exact</span> <span class="id" title="var">WD</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> <span class="id" title="var">subtype_notEqual_from_negEqual</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">p</span> : ∃ <span class="id" title="var">t</span> : <span class="id" title="var">C</span>, <span class="id" title="var">W</span> ≡ <span class="id" title="var">upto</span> <span class="id" title="var">t</span>). { <span class="id" title="var">now</span> <span class="id" title="var">use</span> <span class="id" title="var">isInterval</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">q</span> : ∃ <span class="id" title="var">t</span> : <span class="id" title="var">D</span>, <span class="id" title="var">W</span> ≡ <span class="id" title="var">upto</span> <span class="id" title="var">t</span>). { <span class="id" title="var">now</span> <span class="id" title="var">use</span> <span class="id" title="var">isInterval</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">change</span> <span class="id" title="var">hfalse</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">squash_to_hProp</span> <span class="id" title="var">p</span>); <span class="id" title="tactic">clear</span> <span class="id" title="var">p</span>; <span class="id" title="tactic">intros</span> [<span class="id" title="var">c</span> <span class="id" title="var">cE</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">squash_to_hProp</span> <span class="id" title="var">q</span>); <span class="id" title="tactic">clear</span> <span class="id" title="var">q</span>; <span class="id" title="tactic">intros</span> [<span class="id" title="var">d</span> <span class="id" title="var">dE</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">ce</span> : <span class="id" title="var">W</span> = <span class="id" title="var">upto</span> <span class="id" title="var">c</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> (<span class="id" title="var">invmap</span> (<span class="id" title="var">hsubtype_univalence</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>)). }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">de</span> : <span class="id" title="var">W</span> = <span class="id" title="var">upto</span> <span class="id" title="var">d</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> (<span class="id" title="var">invmap</span> (<span class="id" title="var">hsubtype_univalence</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>)). }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">cd</span> := !<span class="id" title="var">ce</span> @ <span class="id" title="var">de</span> : <span class="id" title="var">upto</span> <span class="id" title="var">c</span> = <span class="id" title="var">upto</span> <span class="id" title="var">d</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">cd'</span> : <span class="id" title="var">upto'</span> <span class="id" title="var">c</span> = <span class="id" title="var">upto'</span> <span class="id" title="var">d</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> <span class="id" title="var">subtypeEquality_prop</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">p</span> := <span class="id" title="var">gC</span> <span class="id" title="var">c</span>); <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">p</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">q</span> := <span class="id" title="var">gD</span> <span class="id" title="var">d</span>); <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">q</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">choice_fun</span> <span class="id" title="tactic">in</span> <span class="id" title="var">g</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">cd1</span> : <span class="id" title="var">pr1</span> <span class="id" title="var">c</span> = <span class="id" title="var">pr1</span> <span class="id" title="var">d</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">simple</span> <span class="id" title="tactic">refine</span> (<span class="id" title="var">p</span> @ <span class="id" title="var">_</span> @ !<span class="id" title="var">q</span>). <span class="id" title="var">now</span> <span class="id" title="tactic">induction</span> <span class="id" title="var">cd'</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">clear</span> <span class="id" title="var">cd'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">W'</span> := <span class="id" title="var">subtype_plus</span> <span class="id" title="var">W</span> (<span class="id" title="var">pr1</span> <span class="id" title="var">c</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">j</span> := <span class="id" title="var">subtype_plus_incl</span> <span class="id" title="var">W</span> (<span class="id" title="var">pr1</span> <span class="id" title="var">c</span>) : <span class="id" title="var">W</span> ⊆ <span class="id" title="var">W'</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">W'c</span> := <span class="id" title="var">subtype_plus_has_point</span> <span class="id" title="var">W</span> (<span class="id" title="var">pr1</span> <span class="id" title="var">c</span>) : <span class="id" title="var">W'</span> (<span class="id" title="var">pr1</span> <span class="id" title="var">c</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">W'd</span> := <span class="id" title="var">transportf</span> <span class="id" title="var">W'</span> <span class="id" title="var">cd1</span> <span class="id" title="var">W'c</span> : <span class="id" title="var">W'</span> (<span class="id" title="var">pr1</span> <span class="id" title="var">d</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">ci</span> : <span class="id" title="var">common_initial</span> <span class="id" title="var">W'</span> <span class="id" title="var">C</span> <span class="id" title="var">D</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">assert</span> (<span class="id" title="var">W'C</span> := <span class="id" title="var">subtype_plus_in</span> <span class="id" title="var">WC</span> (<span class="id" title="var">pr2</span> <span class="id" title="var">c</span>));<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">W'D</span> := <span class="id" title="var">subtype_plus_in</span> <span class="id" title="var">WD</span> (<span class="id" title="var">transportb</span> (<span class="id" title="var">λ</span> <span class="id" title="var">x</span> : <span class="id" title="var">X</span>, <span class="id" title="var">D</span> <span class="id" title="var">x</span>) <span class="id" title="var">cd1</span> (<span class="id" title="var">pr2</span> <span class="id" title="var">d</span>)));<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">fold</span> <span class="id" title="var">W'</span> <span class="id" title="tactic">in</span> <span class="id" title="var">W'C</span>, <span class="id" title="var">W'D</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="var">W'C</span>, <span class="id" title="var">W'D</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">cmax</span> : ∏ (<span class="id" title="var">v</span> : <span class="id" title="var">carrier</span> <span class="id" title="var">W'</span>) (<span class="id" title="var">W'c</span> : <span class="id" title="var">W'</span> (<span class="id" title="var">pr1</span> <span class="id" title="var">c</span>)),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">subtype_inc</span> <span class="id" title="var">W'C</span> <span class="id" title="var">v</span> ≤ <span class="id" title="var">subtype_inc</span> <span class="id" title="var">W'C</span> (<span class="id" title="var">pr1</span> <span class="id" title="var">c</span>,,<span class="id" title="var">W'c</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">intros</span> <span class="id" title="var">v</span> <span class="id" title="var">W'c'</span>. <span class="id" title="tactic">assert</span> (<span class="id" title="var">e</span> : <span class="id" title="var">c</span> = <span class="id" title="var">subtype_inc</span> <span class="id" title="var">W'C</span> (<span class="id" title="var">pr1</span> <span class="id" title="var">c</span>,, <span class="id" title="var">W'c'</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> <span class="id" title="var">subtypeEquality_prop</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">e</span>. <span class="id" title="tactic">clear</span> <span class="id" title="var">W'c'</span>. <span class="id" title="tactic">induction</span> <span class="id" title="var">v</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">v</span> <span class="id" title="var">W'v</span>]. <span class="id" title="tactic">apply</span> (<span class="id" title="var">squash_to_hProp</span> <span class="id" title="var">W'v</span>); <span class="id" title="tactic">intros</span> [<span class="id" title="var">Wv</span>|<span class="id" title="var">k</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">assert</span> (<span class="id" title="var">L</span> := <span class="id" title="var">pr1</span> (<span class="id" title="var">cE</span> <span class="id" title="var">v</span>) <span class="id" title="var">Wv</span>). <span class="id" title="tactic">unfold</span> <span class="id" title="var">upto</span>,<span class="id" title="var">lt</span> <span class="id" title="tactic">in</span> <span class="id" title="var">L</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">Q</span> := @<span class="id" title="var">tot_nge_to_le</span> (<span class="id" title="var">carrier_set</span> <span class="id" title="var">C</span>) (<span class="id" title="var">TOSrel</span> <span class="id" title="var">C</span>) (<span class="id" title="var">TOtot</span> <span class="id" title="var">C</span>) <span class="id" title="var">_</span> <span class="id" title="var">_</span> (<span class="id" title="var">pr2</span> <span class="id" title="var">L</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">apply</span>(<span class="id" title="var">h1''</span> <span class="id" title="var">Q</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">use</span> (<span class="id" title="var">TOeq_to_refl</span> <span class="id" title="var">C</span>). <span class="id" title="tactic">apply</span> <span class="id" title="var">subtypeEquality_prop</span>. <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">exact</span> (!<span class="id" title="var">k</span>). }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">cmax'</span> : ∏ (<span class="id" title="var">w</span> : <span class="id" title="var">carrier</span> <span class="id" title="var">W</span>) (<span class="id" title="var">W'c</span> : <span class="id" title="var">W'</span> (<span class="id" title="var">pr1</span> <span class="id" title="var">c</span>)),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">subtype_inc</span> <span class="id" title="var">W'C</span> (<span class="id" title="var">subtype_inc</span> <span class="id" title="var">j</span> <span class="id" title="var">w</span>) &lt; <span class="id" title="var">subtype_inc</span> <span class="id" title="var">W'C</span> (<span class="id" title="var">pr1</span> <span class="id" title="var">c</span>,,<span class="id" title="var">W'c</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">intros</span> <span class="id" title="var">w</span> <span class="id" title="var">W'c'</span>. <span class="id" title="tactic">assert</span> (<span class="id" title="var">e</span> : <span class="id" title="var">c</span> = <span class="id" title="var">subtype_inc</span> <span class="id" title="var">W'C</span> (<span class="id" title="var">pr1</span> <span class="id" title="var">c</span>,, <span class="id" title="var">W'c'</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> <span class="id" title="var">subtypeEquality_prop</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">e</span>. <span class="id" title="tactic">clear</span> <span class="id" title="var">W'c'</span>. <span class="id" title="tactic">induction</span> <span class="id" title="var">w</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">v</span> <span class="id" title="var">Wv</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">L</span> := <span class="id" title="var">pr1</span> (<span class="id" title="var">cE</span> <span class="id" title="var">v</span>) <span class="id" title="var">Wv</span>). <span class="id" title="tactic">unfold</span> <span class="id" title="var">upto</span>,<span class="id" title="var">lt</span> <span class="id" title="tactic">in</span> <span class="id" title="var">L</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">Q</span> := @<span class="id" title="var">tot_nge_to_le</span> (<span class="id" title="var">carrier_set</span> <span class="id" title="var">C</span>) (<span class="id" title="var">TOSrel</span> <span class="id" title="var">C</span>) (<span class="id" title="var">TOtot</span> <span class="id" title="var">C</span>) <span class="id" title="var">_</span> <span class="id" title="var">_</span> (<span class="id" title="var">pr2</span> <span class="id" title="var">L</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (@<span class="id" title="var">tot_nle_iff_gt</span> (<span class="id" title="var">carrier_set</span> <span class="id" title="var">C</span>) (<span class="id" title="var">TOSrel</span> <span class="id" title="var">C</span>) (<span class="id" title="var">pr122</span> <span class="id" title="var">C</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> (<span class="id" title="var">h1''</span> <span class="id" title="var">Q</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">e</span>. <span class="id" title="tactic">assert</span> (<span class="id" title="var">e'</span> := <span class="id" title="var">maponpaths</span> <span class="id" title="var">pr1</span> <span class="id" title="var">e</span>); <span class="id" title="tactic">clear</span> <span class="id" title="var">e</span>. <span class="id" title="tactic">change</span> (<span class="id" title="var">v</span> = <span class="id" title="var">pr1</span> <span class="id" title="var">c</span>)%<span class="id" title="keyword">type</span> <span class="id" title="tactic">in</span> <span class="id" title="var">e'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> ( <span class="id" title="var">L'</span> := <span class="id" title="var">pr2</span> <span class="id" title="var">L</span> ). <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">L'</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">L'</span>; <span class="id" title="tactic">clear</span> <span class="id" title="var">L'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exact</span> (<span class="id" title="var">TOeq_to_refl_1</span> <span class="id" title="var">C</span> <span class="id" title="var">c</span> (<span class="id" title="var">v</span>,, <span class="id" title="var">pr1</span> <span class="id" title="var">L</span>) (!<span class="id" title="var">e'</span>)). }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">dmax</span> : ∏ (<span class="id" title="var">v</span> : <span class="id" title="var">carrier</span> <span class="id" title="var">W'</span>) (<span class="id" title="var">W'd</span> : <span class="id" title="var">W'</span> (<span class="id" title="var">pr1</span> <span class="id" title="var">d</span>)),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">subtype_inc</span> <span class="id" title="var">W'D</span> <span class="id" title="var">v</span> ≤ <span class="id" title="var">subtype_inc</span> <span class="id" title="var">W'D</span> (<span class="id" title="var">pr1</span> <span class="id" title="var">d</span>,,<span class="id" title="var">W'd</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">intros</span> <span class="id" title="var">v</span> <span class="id" title="var">W'd'</span>. <span class="id" title="tactic">assert</span> (<span class="id" title="var">e</span> : <span class="id" title="var">d</span> = <span class="id" title="var">subtype_inc</span> <span class="id" title="var">W'D</span> (<span class="id" title="var">pr1</span> <span class="id" title="var">d</span>,, <span class="id" title="var">W'd'</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> <span class="id" title="var">subtypeEquality_prop</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">e</span>. <span class="id" title="tactic">clear</span> <span class="id" title="var">W'd'</span>. <span class="id" title="tactic">induction</span> <span class="id" title="var">v</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">v</span> <span class="id" title="var">W'v</span>]. <span class="id" title="tactic">apply</span> (<span class="id" title="var">squash_to_hProp</span> <span class="id" title="var">W'v</span>); <span class="id" title="tactic">intros</span> [<span class="id" title="var">Wv</span>|<span class="id" title="var">k</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">assert</span> (<span class="id" title="var">L</span> := <span class="id" title="var">pr1</span> (<span class="id" title="var">dE</span> <span class="id" title="var">v</span>) <span class="id" title="var">Wv</span>). <span class="id" title="tactic">unfold</span> <span class="id" title="var">upto</span>,<span class="id" title="var">lt</span> <span class="id" title="tactic">in</span> <span class="id" title="var">L</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">Q</span> := @<span class="id" title="var">tot_nge_to_le</span> (<span class="id" title="var">carrier_set</span> <span class="id" title="var">D</span>) (<span class="id" title="var">TOSrel</span> <span class="id" title="var">D</span>) (<span class="id" title="var">TOtot</span> <span class="id" title="var">D</span>) <span class="id" title="var">_</span> <span class="id" title="var">_</span> (<span class="id" title="var">pr2</span> <span class="id" title="var">L</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">apply</span>(<span class="id" title="var">h1''</span> <span class="id" title="var">Q</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">use</span> (<span class="id" title="var">TOeq_to_refl</span> <span class="id" title="var">D</span>). <span class="id" title="tactic">apply</span> <span class="id" title="var">subtypeEquality_prop</span>. <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">exact</span> (!<span class="id" title="var">k</span> @ <span class="id" title="var">cd1</span>). }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">dmax'</span> : ∏ (<span class="id" title="var">w</span> : <span class="id" title="var">carrier</span> <span class="id" title="var">W</span>) (<span class="id" title="var">W'd</span> : <span class="id" title="var">W'</span> (<span class="id" title="var">pr1</span> <span class="id" title="var">d</span>)),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">subtype_inc</span> <span class="id" title="var">W'D</span> (<span class="id" title="var">subtype_inc</span> <span class="id" title="var">j</span> <span class="id" title="var">w</span>) &lt; <span class="id" title="var">subtype_inc</span> <span class="id" title="var">W'D</span> (<span class="id" title="var">pr1</span> <span class="id" title="var">d</span>,,<span class="id" title="var">W'd</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">intros</span> <span class="id" title="var">w</span> <span class="id" title="var">W'd'</span>. <span class="id" title="tactic">assert</span> (<span class="id" title="var">e</span> : <span class="id" title="var">d</span> = <span class="id" title="var">subtype_inc</span> <span class="id" title="var">W'D</span> (<span class="id" title="var">pr1</span> <span class="id" title="var">d</span>,, <span class="id" title="var">W'd'</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> <span class="id" title="var">subtypeEquality_prop</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">e</span>. <span class="id" title="tactic">clear</span> <span class="id" title="var">W'd'</span>. <span class="id" title="tactic">induction</span> <span class="id" title="var">w</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">v</span> <span class="id" title="var">Wv</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">L</span> := <span class="id" title="var">pr1</span> (<span class="id" title="var">dE</span> <span class="id" title="var">v</span>) <span class="id" title="var">Wv</span>). <span class="id" title="tactic">unfold</span> <span class="id" title="var">upto</span>,<span class="id" title="var">lt</span> <span class="id" title="tactic">in</span> <span class="id" title="var">L</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">Q</span> := @<span class="id" title="var">tot_nge_to_le</span> (<span class="id" title="var">carrier_set</span> <span class="id" title="var">D</span>) (<span class="id" title="var">TOSrel</span> <span class="id" title="var">D</span>) (<span class="id" title="var">TOtot</span> <span class="id" title="var">D</span>) <span class="id" title="var">_</span> <span class="id" title="var">_</span> (<span class="id" title="var">pr2</span> <span class="id" title="var">L</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (@<span class="id" title="var">tot_nle_iff_gt</span> (<span class="id" title="var">carrier_set</span> <span class="id" title="var">D</span>) (<span class="id" title="var">TOSrel</span> <span class="id" title="var">D</span>) (<span class="id" title="var">pr122</span> <span class="id" title="var">D</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> (<span class="id" title="var">h1''</span> <span class="id" title="var">Q</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">e</span>. <span class="id" title="tactic">assert</span> (<span class="id" title="var">e'</span> := <span class="id" title="var">maponpaths</span> <span class="id" title="var">pr1</span> <span class="id" title="var">e</span>); <span class="id" title="tactic">clear</span> <span class="id" title="var">e</span>. <span class="id" title="tactic">change</span> (<span class="id" title="var">v</span> = <span class="id" title="var">pr1</span> <span class="id" title="var">d</span>)%<span class="id" title="keyword">type</span> <span class="id" title="tactic">in</span> <span class="id" title="var">e'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> ( <span class="id" title="var">L'</span> := <span class="id" title="var">pr2</span> <span class="id" title="var">L</span> ). <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">L'</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">L'</span>; <span class="id" title="tactic">clear</span> <span class="id" title="var">L'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exact</span> (<span class="id" title="var">TOeq_to_refl_1</span> <span class="id" title="var">D</span> <span class="id" title="var">d</span> (<span class="id" title="var">v</span>,, <span class="id" title="var">pr1</span> <span class="id" title="var">L</span>) (!<span class="id" title="var">e'</span>)). }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">intros</span> <span class="id" title="var">w'</span> <span class="id" title="var">c'</span> <span class="id" title="var">W'w'</span> <span class="id" title="var">Cc'</span> <span class="id" title="var">le</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">squash_to_hProp</span> <span class="id" title="var">W'w'</span>); <span class="id" title="tactic">intros</span> <span class="id" title="var">B</span>. <span class="id" title="tactic">induction</span> <span class="id" title="var">B</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Ww'</span>|<span class="id" title="var">e</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <span class="id" title="var">hinhpr</span>, <span class="id" title="var">ii1</span>. <span class="id" title="tactic">apply</span> (<span class="id" title="var">WCi</span> <span class="id" title="var">w'</span> <span class="id" title="var">c'</span> <span class="id" title="var">Ww'</span> <span class="id" title="var">Cc'</span>). <span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> (<span class="id" title="var">h1''</span> <span class="id" title="var">le</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">induction</span> <span class="id" title="var">e</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> (<span class="id" title="var">lem</span> (<span class="id" title="var">pr1</span> <span class="id" title="var">c</span> = <span class="id" title="var">c'</span>)) <span class="id" title="keyword">as</span> [<span class="id" title="var">e</span>|<span class="id" title="var">ne</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">induction</span> <span class="id" title="var">e</span>. <span class="id" title="tactic">exact</span> <span class="id" title="var">W'c</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">use</span> <span class="id" title="var">j</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">ce</span>. <span class="id" title="tactic">exists</span> <span class="id" title="var">Cc'</span>. <span class="id" title="tactic">unfold</span> <span class="id" title="var">lt</span>. <span class="id" title="tactic">intro</span> <span class="id" title="var">le'</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">ne</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">e</span> : <span class="id" title="var">c</span> = (<span class="id" title="var">c'</span>,,<span class="id" title="var">Cc'</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">apply</span> (<span class="id" title="var">TOanti</span> <span class="id" title="var">C</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">exact</span> <span class="id" title="var">le'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> (<span class="id" title="var">h1''</span> <span class="id" title="var">le</span>). }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exact</span> (<span class="id" title="var">maponpaths</span> <span class="id" title="var">pr1</span> <span class="id" title="var">e</span>). }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">intros</span> <span class="id" title="var">w'</span> <span class="id" title="var">d'</span> <span class="id" title="var">W'w'</span> <span class="id" title="var">Dd'</span> <span class="id" title="var">le</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">squash_to_hProp</span> <span class="id" title="var">W'w'</span>); <span class="id" title="tactic">intros</span> <span class="id" title="var">B</span>. <span class="id" title="tactic">induction</span> <span class="id" title="var">B</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Ww'</span>|<span class="id" title="var">e</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <span class="id" title="var">hinhpr</span>, <span class="id" title="var">ii1</span>. <span class="id" title="tactic">apply</span> (<span class="id" title="var">WDi</span> <span class="id" title="var">w'</span> <span class="id" title="var">d'</span> <span class="id" title="var">Ww'</span> <span class="id" title="var">Dd'</span>). <span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> (<span class="id" title="var">h1''</span> <span class="id" title="var">le</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">induction</span> <span class="id" title="var">e</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> (<span class="id" title="var">lem</span> (<span class="id" title="var">pr1</span> <span class="id" title="var">d</span> = <span class="id" title="var">d'</span>)) <span class="id" title="keyword">as</span> [<span class="id" title="var">e</span>|<span class="id" title="var">ne</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">induction</span> <span class="id" title="var">e</span>. <span class="id" title="tactic">exact</span> <span class="id" title="var">W'd</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">use</span> <span class="id" title="var">j</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">de</span>. <span class="id" title="tactic">exists</span> <span class="id" title="var">Dd'</span>. <span class="id" title="tactic">unfold</span> <span class="id" title="var">lt</span>. <span class="id" title="tactic">intro</span> <span class="id" title="var">le'</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">ne</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">e</span> : <span class="id" title="var">d</span> = (<span class="id" title="var">d'</span>,,<span class="id" title="var">Dd'</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">apply</span> (<span class="id" title="var">TOanti</span> <span class="id" title="var">D</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">exact</span> <span class="id" title="var">le'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> (<span class="id" title="var">h1''</span> <span class="id" title="var">le</span>). }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exact</span> (<span class="id" title="var">maponpaths</span> <span class="id" title="var">pr1</span> <span class="id" title="var">e</span>). }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> [<span class="id" title="var">v</span> <span class="id" title="var">W'v</span>] [<span class="id" title="var">w</span> <span class="id" title="var">W'w</span>]. <span class="id" title="tactic">change</span> (<span class="id" title="var">hProptoType</span> (<span class="id" title="var">W'</span> <span class="id" title="var">v</span>)) <span class="id" title="tactic">in</span> <span class="id" title="var">W'v</span>; <span class="id" title="tactic">change</span> (<span class="id" title="var">hProptoType</span> (<span class="id" title="var">W'</span> <span class="id" title="var">w</span>)) <span class="id" title="tactic">in</span> <span class="id" title="var">W'w</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">squash_to_hProp</span> <span class="id" title="var">W'v</span>); <span class="id" title="tactic">intros</span> [<span class="id" title="var">Wv</span>|<span class="id" title="var">Ev</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> (<span class="id" title="var">squash_to_hProp</span> <span class="id" title="var">W'w</span>); <span class="id" title="tactic">intros</span> [<span class="id" title="var">Ww</span>|<span class="id" title="var">Ew</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">assert</span> (<span class="id" title="var">Q</span> := <span class="id" title="var">WCD</span> (<span class="id" title="var">v</span>,,<span class="id" title="var">Wv</span>) (<span class="id" title="var">w</span>,,<span class="id" title="var">Ww</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">change</span> (<span class="id" title="var">hProptoType</span> (<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">subtype_inc</span> <span class="id" title="var">WC</span> (<span class="id" title="var">v</span>,, <span class="id" title="var">Wv</span>) ≤ <span class="id" title="var">subtype_inc</span> <span class="id" title="var">WC</span> (<span class="id" title="var">w</span>,, <span class="id" title="var">Ww</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;⇔<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">subtype_inc</span> <span class="id" title="var">WD</span> (<span class="id" title="var">v</span>,, <span class="id" title="var">Wv</span>) ≤ <span class="id" title="var">subtype_inc</span> <span class="id" title="var">WD</span> (<span class="id" title="var">w</span>,, <span class="id" title="var">Ww</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;)%<span class="id" title="var">tosubset</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">Q</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">e</span> : <span class="id" title="var">subtype_inc</span> <span class="id" title="var">W'C</span> (<span class="id" title="var">v</span>,, <span class="id" title="var">W'v</span>) = <span class="id" title="var">subtype_inc</span> <span class="id" title="var">WC</span> (<span class="id" title="var">v</span>,, <span class="id" title="var">Wv</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> <span class="id" title="var">subtypeEquality_prop</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">e</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">e</span> : <span class="id" title="var">subtype_inc</span> <span class="id" title="var">W'C</span> (<span class="id" title="var">w</span>,, <span class="id" title="var">W'w</span>) = <span class="id" title="var">subtype_inc</span> <span class="id" title="var">WC</span> (<span class="id" title="var">w</span>,, <span class="id" title="var">Ww</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> <span class="id" title="var">subtypeEquality_prop</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">e</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">e</span> : <span class="id" title="var">subtype_inc</span> <span class="id" title="var">W'D</span> (<span class="id" title="var">v</span>,, <span class="id" title="var">W'v</span>) = <span class="id" title="var">subtype_inc</span> <span class="id" title="var">WD</span> (<span class="id" title="var">v</span>,, <span class="id" title="var">Wv</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> <span class="id" title="var">subtypeEquality_prop</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">e</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">e</span> : <span class="id" title="var">subtype_inc</span> <span class="id" title="var">W'D</span> (<span class="id" title="var">w</span>,, <span class="id" title="var">W'w</span>) = <span class="id" title="var">subtype_inc</span> <span class="id" title="var">WD</span> (<span class="id" title="var">w</span>,, <span class="id" title="var">Ww</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> <span class="id" title="var">subtypeEquality_prop</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">e</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exact</span> <span class="id" title="var">Q</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">induction</span> <span class="id" title="var">Ew</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">logeq_if_both_true</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">apply</span> <span class="id" title="var">cmax</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">induction</span> (!<span class="id" title="var">cd1</span>). <span class="id" title="tactic">apply</span> <span class="id" title="var">dmax</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">induction</span> <span class="id" title="var">Ev</span>. <span class="id" title="tactic">apply</span> (<span class="id" title="var">squash_to_hProp</span> <span class="id" title="var">W'w</span>); <span class="id" title="tactic">intros</span> [<span class="id" title="var">Ww</span>|<span class="id" title="var">Ew</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <span class="id" title="var">logeq_if_both_false</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">assert</span> (<span class="id" title="var">Q</span> := <span class="id" title="var">cmax'</span> (<span class="id" title="var">w</span>,,<span class="id" title="var">Ww</span>) <span class="id" title="var">W'v</span>). <span class="id" title="tactic">unfold</span> <span class="id" title="var">lt</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Q</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">e</span> : (<span class="id" title="var">w</span>,, <span class="id" title="var">W'w</span>) = (<span class="id" title="var">subtype_inc</span> <span class="id" title="var">j</span> (<span class="id" title="var">w</span>,, <span class="id" title="var">Ww</span>))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> <span class="id" title="var">subtypeEquality_prop</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">e</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exact</span> <span class="id" title="var">Q</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">assert</span> (<span class="id" title="var">Q</span> := <span class="id" title="var">dmax'</span> (<span class="id" title="var">w</span>,,<span class="id" title="var">Ww</span>) <span class="id" title="var">W'd</span>). <span class="id" title="tactic">unfold</span> <span class="id" title="var">lt</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Q</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">e</span> : (<span class="id" title="var">w</span>,, <span class="id" title="var">W'w</span>) = (<span class="id" title="var">subtype_inc</span> <span class="id" title="var">j</span> (<span class="id" title="var">w</span>,, <span class="id" title="var">Ww</span>))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> <span class="id" title="var">subtypeEquality_prop</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">e</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">e</span> : <span class="id" title="var">subtype_inc</span> <span class="id" title="var">W'D</span> (<span class="id" title="var">pr1</span> <span class="id" title="var">c</span>,, <span class="id" title="var">W'v</span>) = <span class="id" title="var">subtype_inc</span> <span class="id" title="var">W'D</span> (<span class="id" title="var">pr1</span> <span class="id" title="var">d</span>,, <span class="id" title="var">W'd</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> <span class="id" title="var">subtypeEquality_prop</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">e</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exact</span> <span class="id" title="var">Q</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">induction</span> <span class="id" title="var">Ew</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">logeq_if_both_true</span> ; <span class="id" title="var">now</span> <span class="id" title="var">use</span> <span class="id" title="var">TOeq_to_refl_1</span>. } }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">K</span> := <span class="id" title="var">max_common_initial_is_max</span> <span class="id" title="var">C</span> <span class="id" title="var">D</span> <span class="id" title="var">W'</span> <span class="id" title="var">ci</span>); <span class="id" title="tactic">fold</span> <span class="id" title="var">W</span> <span class="id" title="tactic">in</span> <span class="id" title="var">K</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">Wc</span> : <span class="id" title="var">W</span> (<span class="id" title="var">pr1</span> <span class="id" title="var">c</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">exact</span> (<span class="id" title="var">K</span> (<span class="id" title="var">pr1</span> <span class="id" title="var">c</span>) <span class="id" title="var">W'c</span>). }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">L</span> := <span class="id" title="var">pr1</span> (<span class="id" title="var">cE</span> (<span class="id" title="var">pr1</span> <span class="id" title="var">c</span>)) <span class="id" title="var">Wc</span>). <span class="id" title="tactic">induction</span> <span class="id" title="var">L</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Cc</span> <span class="id" title="var">Q</span>]. <span class="id" title="tactic">change</span> (<span class="id" title="var">neg</span> (<span class="id" title="var">c</span> ≤ <span class="id" title="var">pr1</span> <span class="id" title="var">c</span>,, <span class="id" title="var">Cc</span>)) <span class="id" title="tactic">in</span> <span class="id" title="var">Q</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">Q</span>; <span class="id" title="tactic">clear</span> <span class="id" title="var">Q</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simple</span> <span class="id" title="tactic">refine</span> (<span class="id" title="var">transportf</span> (<span class="id" title="var">λ</span> <span class="id" title="var">c'</span>, <span class="id" title="var">c</span> ≤ <span class="id" title="var">c'</span>) <span class="id" title="var">_</span> (<span class="id" title="var">TOrefl</span> <span class="id" title="var">C</span> <span class="id" title="var">c</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> <span class="id" title="var">subtypeEquality_prop</span>. }<br/>
&nbsp;&nbsp;<span class="id" title="tactic">change</span> (<span class="id" title="var">wosub_comparable</span> <span class="id" title="var">C</span> <span class="id" title="var">D</span>). <span class="id" title="tactic">unfold</span> <span class="id" title="var">wosub_comparable</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">squash_to_hProp</span> <span class="id" title="var">E</span>); <span class="id" title="tactic">clear</span> <span class="id" title="var">E</span>; <span class="id" title="tactic">intros</span> <span class="id" title="var">E</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">hinhpr</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Set Printing Coercions</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">E</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">eWC</span>|<span class="id" title="var">eWD</span>].<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <span class="id" title="var">ii1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">e</span> : <span class="id" title="var">W</span> = <span class="id" title="var">C</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> <span class="id" title="var">hsubtype_univalence</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">W</span> <span class="id" title="tactic">in</span> *. <span class="id" title="tactic">clear</span> <span class="id" title="var">W</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> (!<span class="id" title="var">e</span>); <span class="id" title="tactic">clear</span> <span class="id" title="var">e</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">use</span> <span class="id" title="var">tpair</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">exact</span> <span class="id" title="var">WD</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">intros</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">le</span>. <span class="id" title="tactic">apply</span> (<span class="id" title="var">pr1</span> (<span class="id" title="var">WCD</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>)). <span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> (<span class="id" title="var">h1''</span> <span class="id" title="var">le</span>). }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exact</span> <span class="id" title="var">WDi</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <span class="id" title="var">ii2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">e</span> : <span class="id" title="var">W</span> = <span class="id" title="var">D</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> <span class="id" title="var">hsubtype_univalence</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">W</span> <span class="id" title="tactic">in</span> *. <span class="id" title="tactic">clear</span> <span class="id" title="var">W</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> (!<span class="id" title="var">e</span>); <span class="id" title="tactic">clear</span> <span class="id" title="var">e</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">use</span> <span class="id" title="var">tpair</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">exact</span> <span class="id" title="var">WC</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">intros</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">le</span>. <span class="id" title="tactic">apply</span> (<span class="id" title="var">pr2</span> (<span class="id" title="var">WCD</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>)). <span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> (<span class="id" title="var">h1''</span> <span class="id" title="var">le</span>). }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exact</span> <span class="id" title="var">WCi</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Unset Printing Coercions</span>.<br/>
</div>

<br/>
</div>

<div class="doc">
<a name="lab369"></a><h2 class="section">The proof of the well ordering theorem of Zermelo</h2>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Theorem</span> <span class="id" title="var">ZermeloWellOrdering</span> {<span class="id" title="var">X</span>:<span class="id" title="var">hSet</span>} : <span class="id" title="var">AxiomOfChoice</span> ⇒ ∃ <span class="id" title="var">R</span> : <span class="id" title="var">hrel</span> <span class="id" title="var">X</span>, <span class="id" title="var">isWellOrder</span> <span class="id" title="var">R</span>.<br/>
<a class="proof" href="#">Show proof.</a><br/><div class="proof">
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">ac</span>. <span class="id" title="tactic">assert</span> (<span class="id" title="var">lem</span> := <span class="id" title="var">AC_to_LEM</span> <span class="id" title="var">ac</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">squash_to_hProp</span> (<span class="id" title="var">AC_to_choice_fun</span> <span class="id" title="var">X</span> <span class="id" title="var">ac</span>)); <span class="id" title="tactic">intro</span> <span class="id" title="var">g</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">S</span> := <span class="id" title="var">guidedFamily</span> <span class="id" title="var">g</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">Schain</span> := <span class="id" title="var">guided_WOSubset_total</span> <span class="id" title="var">g</span> <span class="id" title="var">lem</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">W</span> := ⋃ <span class="id" title="var">Schain</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">Wguided</span> : <span class="id" title="var">is_guided_WOSubset</span> <span class="id" title="var">g</span> <span class="id" title="var">W</span>).<br/>
&nbsp;&nbsp;{ <span class="id" title="tactic">intros</span> [<span class="id" title="var">w</span> <span class="id" title="var">Ww</span>]. <span class="id" title="tactic">apply</span> (<span class="id" title="var">squash_to_hProp</span> <span class="id" title="var">Ww</span>); <span class="id" title="tactic">intros</span> [<span class="id" title="var">C</span> <span class="id" title="var">Cw</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">change</span> (<span class="id" title="var">hProptoType</span> (<span class="id" title="var">C</span> <span class="id" title="var">w</span>)) <span class="id" title="tactic">in</span> <span class="id" title="var">Cw</span>. <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">Q</span> := <span class="id" title="var">pr2</span> <span class="id" title="var">C</span> (<span class="id" title="var">w</span>,,<span class="id" title="var">Cw</span>)); <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Q</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simple</span> <span class="id" title="tactic">refine</span> (<span class="id" title="var">Q</span> @ <span class="id" title="var">_</span>); <span class="id" title="tactic">clear</span> <span class="id" title="var">Q</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">CW</span> := <span class="id" title="var">chain_union_le</span> <span class="id" title="var">S</span> <span class="id" title="var">Schain</span> <span class="id" title="var">C</span> : <span class="id" title="var">C</span> ≼ <span class="id" title="var">W</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">use</span> <span class="id" title="var">upto'_eqn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">exact</span> <span class="id" title="var">CW</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">reflexivity</span>. }<br/>
&nbsp;&nbsp;<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">all</span> : ∀ <span class="id" title="var">x</span>, <span class="id" title="var">W</span> <span class="id" title="var">x</span>).<br/>
&nbsp;&nbsp;{ <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">proof_by_contradiction</span> <span class="id" title="var">lem</span>); <span class="id" title="tactic">intro</span> <span class="id" title="var">n</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">Q</span> := <span class="id" title="var">negforall_to_existsneg</span> <span class="id" title="var">_</span> <span class="id" title="var">lem</span> <span class="id" title="var">n</span>); <span class="id" title="tactic">clear</span> <span class="id" title="var">n</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">change</span> <span class="id" title="var">hfalse</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">znW</span> := <span class="id" title="var">g</span> (<span class="id" title="var">pr1</span> <span class="id" title="var">W</span>,,<span class="id" title="var">Q</span>) : ∑ <span class="id" title="var">z</span> : <span class="id" title="var">X</span>, ¬ <span class="id" title="var">pr1</span> <span class="id" title="var">W</span> <span class="id" title="var">z</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">z</span> := <span class="id" title="var">pr1</span> <span class="id" title="var">znW</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">nWz</span> := <span class="id" title="var">pr2</span> <span class="id" title="var">znW</span> : ¬ <span class="id" title="var">pr1</span> <span class="id" title="var">W</span> <span class="id" title="var">z</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">W'</span> := <span class="id" title="var">WOSubset_plus_point</span> <span class="id" title="var">W</span> <span class="id" title="var">z</span> <span class="id" title="var">nWz</span> <span class="id" title="var">lem</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">W'z</span> := <span class="id" title="var">subtype_plus_has_point</span> <span class="id" title="var">W</span> <span class="id" title="var">z</span> : <span class="id" title="var">W'</span> <span class="id" title="var">z</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">j</span> := <span class="id" title="var">TOSubset_plus_point_incl</span> <span class="id" title="var">W</span> <span class="id" title="var">z</span> <span class="id" title="var">nWz</span> : <span class="id" title="var">W</span> ⊆ <span class="id" title="var">W'</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">jmap</span> := <span class="id" title="var">subtype_inc</span> <span class="id" title="var">j</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">W'guided</span> : <span class="id" title="var">is_guided_WOSubset</span> <span class="id" title="var">g</span> <span class="id" title="var">W'</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">unfold</span> <span class="id" title="var">is_guided_WOSubset</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> [<span class="id" title="var">x</span> <span class="id" title="var">W'x</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">change</span> (<span class="id" title="var">x</span> = <span class="id" title="var">pr1</span> (<span class="id" title="var">g</span> (@<span class="id" title="var">upto'</span> <span class="id" title="var">X</span> <span class="id" title="var">W'</span> (<span class="id" title="var">x</span>,, <span class="id" title="var">W'x</span>))))%<span class="id" title="tactic">set</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">squash_to_hProp</span> <span class="id" title="var">W'x</span>); <span class="id" title="tactic">intros</span> [<span class="id" title="var">Wx</span>|<span class="id" title="var">ezx</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">assert</span> (<span class="id" title="var">x_guided</span> := <span class="id" title="var">Wguided</span> (<span class="id" title="var">x</span>,,<span class="id" title="var">Wx</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">change</span> (<span class="id" title="var">x</span> = <span class="id" title="var">pr1</span> (<span class="id" title="var">g</span> (@<span class="id" title="var">upto'</span> <span class="id" title="var">X</span> <span class="id" title="var">W</span> (<span class="id" title="var">x</span>,, <span class="id" title="var">Wx</span>))))%<span class="id" title="keyword">type</span> <span class="id" title="tactic">in</span> <span class="id" title="var">x_guided</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simple</span> <span class="id" title="tactic">refine</span> (<span class="id" title="var">x_guided</span> @ <span class="id" title="var">_</span>); <span class="id" title="tactic">clear</span> <span class="id" title="var">x_guided</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">use</span> <span class="id" title="var">upto'_eqn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">WW'</span> := <span class="id" title="var">TOSubset_plus_point_le</span> <span class="id" title="var">W</span> <span class="id" title="var">z</span> <span class="id" title="var">nWz</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">WW'</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">WW'</span> <span class="id" title="var">comp</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="var">WW'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">exact</span> <span class="id" title="var">comp</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">intros</span> <span class="id" title="var">w</span> <span class="id" title="var">w'</span> <span class="id" title="var">Ww</span> <span class="id" title="var">W'w'</span> <span class="id" title="var">le</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simple</span> <span class="id" title="tactic">refine</span> (<span class="id" title="var">TOSubset_plus_point_initial</span> <span class="id" title="var">W</span> <span class="id" title="var">z</span> <span class="id" title="var">nWz</span> <span class="id" title="var">w</span> <span class="id" title="var">w'</span> <span class="id" title="var">Ww</span> <span class="id" title="var">W'w'</span> <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> (<span class="id" title="var">h1''</span> <span class="id" title="var">le</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">induction</span> <span class="id" title="var">ezx</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">change</span> (<span class="id" title="var">pr1</span> (<span class="id" title="var">g</span> (<span class="id" title="var">pr1</span> <span class="id" title="var">W</span>,, <span class="id" title="var">Q</span>)) = <span class="id" title="var">pr1</span> (<span class="id" title="var">g</span> (@<span class="id" title="var">upto'</span> <span class="id" title="var">X</span> <span class="id" title="var">W'</span> (<span class="id" title="var">z</span>,, <span class="id" title="var">W'x</span>)))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">e</span> : (<span class="id" title="var">pr1</span> <span class="id" title="var">W</span>,, <span class="id" title="var">Q</span>) = @<span class="id" title="var">upto'</span> <span class="id" title="var">X</span> <span class="id" title="var">W'</span> (<span class="id" title="var">z</span>,, <span class="id" title="var">W'x</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">apply</span> <span class="id" title="var">subtypeEquality_prop</span>. <span class="id" title="tactic">apply</span> (<span class="id" title="var">invmap</span> (<span class="id" title="var">hsubtype_univalence</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">y</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">change</span> (<span class="id" title="var">W</span> <span class="id" title="var">y</span> ⇔ @<span class="id" title="var">upto</span> <span class="id" title="var">X</span> <span class="id" title="var">W'</span> (<span class="id" title="var">z</span>,, <span class="id" title="var">W'x</span>) <span class="id" title="var">y</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">Wy</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> (<span class="id" title="var">j</span> <span class="id" title="var">y</span> <span class="id" title="var">Wy</span>). <span class="id" title="tactic">unfold</span> <span class="id" title="var">lt</span>. <span class="id" title="tactic">intros</span> <span class="id" title="var">le</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> (<span class="id" title="var">ishinh_irrel</span> (<span class="id" title="var">ii2</span> (<span class="id" title="var">idpath</span> <span class="id" title="var">z</span>)) <span class="id" title="var">W'x</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">change</span> <span class="id" title="var">empty</span> <span class="id" title="tactic">in</span> <span class="id" title="var">le</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exact</span> <span class="id" title="var">le</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> [<span class="id" title="var">W'y</span> <span class="id" title="var">yz</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">squash_to_hProp</span> <span class="id" title="var">W'y</span>); <span class="id" title="tactic">intros</span> [<span class="id" title="var">Wy</span>|<span class="id" title="var">ezy</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">exact</span> <span class="id" title="var">Wy</span>. &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">induction</span> <span class="id" title="var">ezy</span>. &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">fromempty</span>. <span class="id" title="tactic">unfold</span> <span class="id" title="var">lt</span>,<span class="id" title="var">hneg</span> <span class="id" title="tactic">in</span> <span class="id" title="var">yz</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">yz</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> (<span class="id" title="var">proofirrelevance_hProp</span> <span class="id" title="var">_</span> <span class="id" title="var">W'y</span> <span class="id" title="var">W'x</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exact</span> (<span class="id" title="var">TOrefl</span> <span class="id" title="var">W'</span> (<span class="id" title="var">z</span>,, <span class="id" title="var">W'y</span>)). }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">induction</span> <span class="id" title="var">e</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">W'W</span> := <span class="id" title="var">chain_union_le</span> <span class="id" title="var">S</span> <span class="id" title="var">Schain</span> (<span class="id" title="var">W'</span>,,<span class="id" title="var">W'guided</span>) : <span class="id" title="var">W'</span> ≼ <span class="id" title="var">W</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">K</span> := <span class="id" title="var">pr2</span> (<span class="id" title="var">subtype_inc</span> (<span class="id" title="var">pr1</span> <span class="id" title="var">W'W</span>) (<span class="id" title="var">z</span>,,<span class="id" title="var">W'z</span>)) : <span class="id" title="var">W</span> <span class="id" title="var">z</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exact</span> (<span class="id" title="var">nWz</span> <span class="id" title="var">K</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;<span class="id" title="tactic">clear</span> <span class="id" title="var">Wguided</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">hinhpr</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">W</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">W</span> <span class="id" title="var">R'</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">change</span> (∏ <span class="id" title="var">x</span> : <span class="id" title="var">X</span>, <span class="id" title="var">W</span> <span class="id" title="var">x</span>)%<span class="id" title="keyword">type</span> <span class="id" title="tactic">in</span> <span class="id" title="var">all</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">change</span> (<span class="id" title="var">WellOrdering</span> <span class="id" title="var">X</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">e</span> : <span class="id" title="var">X</span> = <span class="id" title="var">carrier_set</span> <span class="id" title="var">W</span>).<br/>
&nbsp;&nbsp;{ <span class="id" title="tactic">apply</span> (<span class="id" title="var">invmap</span> (<span class="id" title="var">hSet_univalence</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>)). <span class="id" title="tactic">apply</span> <span class="id" title="var">invweq</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">weqpr1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">x</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">all</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">iscontraprop1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <span class="id" title="var">propproperty</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <span class="id" title="var">all</span>. }<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">e</span>. <span class="id" title="tactic">exact</span> <span class="id" title="var">R'</span>.<br/>
</div>

<br/>
</div>

<div class="doc">
<a name="lab370"></a><h2 class="section">Well ordered sets</h2>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">WellOrderedSet</span> : <span class="id" title="var">UU</span> := (∑ (<span class="id" title="var">S</span>:<span class="id" title="var">hSet</span>), <span class="id" title="var">WellOrdering</span> <span class="id" title="var">S</span>)%<span class="id" title="keyword">type</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">WellOrderedSet_to_hSet</span> : <span class="id" title="var">WellOrderedSet</span> -&gt; <span class="id" title="var">hSet</span> := <span class="id" title="var">pr1</span>.<br/>

<br/>
<span class="id" title="keyword">Coercion</span> <span class="id" title="var">WellOrderedSet_to_hSet</span> : <span class="id" title="var">WellOrderedSet</span> &gt;-&gt; <span class="id" title="var">hSet</span>.<br/>

<br/>
<span class="id" title="keyword">Delimit</span> <span class="id" title="keyword">Scope</span> <span class="id" title="var">woset</span> <span class="id" title="keyword">with</span> <span class="id" title="var">woset</span>.<br/>

<br/>
<span class="id" title="keyword">Local Open</span> <span class="id" title="keyword">Scope</span> <span class="id" title="var">woset</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">WOrel</span> (<span class="id" title="var">X</span>:<span class="id" title="var">WellOrderedSet</span>) : <span class="id" title="var">hrel</span> <span class="id" title="var">X</span> := <span class="id" title="var">pr12</span> <span class="id" title="var">X</span>.<br/>

<br/>
<span class="id" title="keyword">Notation</span> &quot;x ≤ y" := (<span class="id" title="var">WOrel</span> <span class="id" title="var">_</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>) : <span class="id" title="var">woset</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">WOlt</span> {<span class="id" title="var">X</span>:<span class="id" title="var">WellOrderedSet</span>} (<span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">X</span>) := ¬ (<span class="id" title="var">y</span> ≤ <span class="id" title="var">x</span>).<br/>

<br/>
<span class="id" title="keyword">Notation</span> &quot;x &lt; y" := (<span class="id" title="var">WOlt</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>) : <span class="id" title="var">woset</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">isaprop_theSmallest</span> {<span class="id" title="var">X</span> : <span class="id" title="var">hSet</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">R</span> : <span class="id" title="var">hrel</span> <span class="id" title="var">X</span>) (<span class="id" title="var">total</span> : <span class="id" title="var">isTotalOrder</span> <span class="id" title="var">R</span>) (<span class="id" title="var">S</span> : <span class="id" title="var">hsubtype</span> <span class="id" title="var">X</span>) :<br/>
&nbsp;&nbsp;<span class="id" title="var">isaprop</span> (∑ <span class="id" title="var">s</span>:<span class="id" title="var">X</span>, <span class="id" title="var">hProp_to_hSet</span> (<span class="id" title="var">S</span> <span class="id" title="var">s</span> ∧ ∀ <span class="id" title="var">t</span>:<span class="id" title="var">X</span>, <span class="id" title="var">S</span> <span class="id" title="var">t</span> ⇒ <span class="id" title="var">R</span> <span class="id" title="var">s</span> <span class="id" title="var">t</span>)).<br/>
<a class="proof" href="#">Show proof.</a><br/><div class="proof">
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">total</span> <span class="id" title="keyword">as</span> [[<span class="id" title="var">po</span> <span class="id" title="var">anti</span>] <span class="id" title="var">tot</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">invproofirrelevance</span>; <span class="id" title="tactic">intros</span> <span class="id" title="var">s</span> <span class="id" title="var">t</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">subtypeEquality_prop</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">s</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">x</span> <span class="id" title="var">i</span>], <span class="id" title="var">t</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">y</span> <span class="id" title="var">j</span>], <span class="id" title="var">i</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">I</span> <span class="id" title="var">i</span>], <span class="id" title="var">j</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">J</span> <span class="id" title="var">j</span>]. <span class="id" title="tactic">change</span> (<span class="id" title="var">x</span>=<span class="id" title="var">y</span>)%<span class="id" title="tactic">set</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">squash_to_hProp</span> (<span class="id" title="var">tot</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>)); <span class="id" title="tactic">intros</span> [<span class="id" title="var">c</span>|<span class="id" title="var">c</span>].<br/>
&nbsp;&nbsp;{ <span class="id" title="tactic">apply</span> <span class="id" title="var">anti</span>. { <span class="id" title="tactic">exact</span> <span class="id" title="var">c</span>. } { <span class="id" title="tactic">exact</span> (<span class="id" title="var">j</span> <span class="id" title="var">x</span> <span class="id" title="var">I</span>). } }<br/>
&nbsp;&nbsp;{ <span class="id" title="tactic">apply</span> <span class="id" title="var">anti</span>. { <span class="id" title="tactic">exact</span> (<span class="id" title="var">i</span> <span class="id" title="var">y</span> <span class="id" title="var">J</span>). } { <span class="id" title="tactic">exact</span> <span class="id" title="var">c</span>. } }<br/>
</div>

<br/>
</div>

<div class="doc">
Accessor functions 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">WO_isTotalOrder</span> (<span class="id" title="var">X</span> : <span class="id" title="var">WellOrderedSet</span>) : <span class="id" title="var">isTotalOrder</span> (<span class="id" title="var">WOrel</span> <span class="id" title="var">X</span>) := <span class="id" title="var">pr122</span> <span class="id" title="var">X</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">WO_isrefl</span> (<span class="id" title="var">X</span> : <span class="id" title="var">WellOrderedSet</span>) : <span class="id" title="var">isrefl</span> (<span class="id" title="var">WOrel</span> <span class="id" title="var">X</span>) := <span class="id" title="var">pr211</span> (<span class="id" title="var">WO_isTotalOrder</span> <span class="id" title="var">X</span>).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">WO_istrans</span> (<span class="id" title="var">X</span> : <span class="id" title="var">WellOrderedSet</span>) : <span class="id" title="var">istrans</span> (<span class="id" title="var">WOrel</span> <span class="id" title="var">X</span>) := <span class="id" title="var">pr111</span> (<span class="id" title="var">WO_isTotalOrder</span> <span class="id" title="var">X</span>).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">WO_istotal</span> (<span class="id" title="var">X</span> : <span class="id" title="var">WellOrderedSet</span>) : <span class="id" title="var">istotal</span> (<span class="id" title="var">WOrel</span> <span class="id" title="var">X</span>) := <span class="id" title="var">pr2</span> (<span class="id" title="var">WO_isTotalOrder</span> <span class="id" title="var">X</span>).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">WO_isantisymm</span> (<span class="id" title="var">X</span> : <span class="id" title="var">WellOrderedSet</span>) : <span class="id" title="var">isantisymm</span> (<span class="id" title="var">WOrel</span> <span class="id" title="var">X</span>) := <span class="id" title="var">pr21</span> (<span class="id" title="var">WO_isTotalOrder</span> <span class="id" title="var">X</span>).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">WO_hasSmallest</span> (<span class="id" title="var">X</span> : <span class="id" title="var">WellOrderedSet</span>) : <span class="id" title="var">hasSmallest</span> (<span class="id" title="var">WOrel</span> <span class="id" title="var">X</span>) := <span class="id" title="var">pr222</span> <span class="id" title="var">X</span>.<br/>

<br/>
</div>

<div class="doc">
Lemmas about WOlt 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">WOlt_istrans</span> (<span class="id" title="var">X</span> : <span class="id" title="var">WellOrderedSet</span>) : <span class="id" title="var">istrans</span> (@<span class="id" title="var">WOlt</span> <span class="id" title="var">X</span>).<br/>
<a class="proof" href="#">Show proof.</a><br/><div class="proof">
<span class="id" title="tactic">intros</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">z</span> <span class="id" title="var">H1</span> <span class="id" title="var">H2</span> <span class="id" title="var">H3</span>; <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *.<br/>
<span class="id" title="tactic">apply</span> (@<span class="id" title="var">squash_to_hProp</span> <span class="id" title="var">_</span> (<span class="id" title="var">_</span>,,<span class="id" title="var">isapropempty</span>) (<span class="id" title="var">WO_istotal</span> <span class="id" title="var">X</span> <span class="id" title="var">y</span> <span class="id" title="var">z</span>)); <span class="id" title="tactic">intros</span> [<span class="id" title="var">H</span>|<span class="id" title="var">H</span>]; <span class="id" title="tactic">simpl</span>.<br/>
- <span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> <span class="id" title="var">H1</span>, (<span class="id" title="var">WO_istrans</span> <span class="id" title="var">X</span> <span class="id" title="var">y</span> <span class="id" title="var">z</span> <span class="id" title="var">x</span> <span class="id" title="var">H</span> <span class="id" title="var">H3</span>).<br/>
- <span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> <span class="id" title="var">H2</span>.<br/>
</div>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">WOlt_isirrefl</span> (<span class="id" title="var">X</span> : <span class="id" title="var">WellOrderedSet</span>) : <span class="id" title="var">isirrefl</span> (@<span class="id" title="var">WOlt</span> <span class="id" title="var">X</span>).<br/>
<a class="proof" href="#">Show proof.</a><br/><div class="proof">
<span class="id" title="var">now</span> <span class="id" title="tactic">intros</span> <span class="id" title="var">x</span>; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">intros</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">apply</span> <span class="id" title="var">H</span>, <span class="id" title="var">WO_isrefl</span>.<br/>
</div>

<br/>
</div>

<div class="doc">
Equivalent definition (assuming decidable equality) of the WOlt relation 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <span class="id" title="var">WOlt'</span> (<span class="id" title="var">X</span> : <span class="id" title="var">WellOrderedSet</span>) (<span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">X</span>) : <span class="id" title="var">hProp</span>.<br/>
<a class="proof" href="#">Show proof.</a><br/><div class="proof">
<span class="id" title="tactic">exists</span> ((<span class="id" title="var">x</span> ≤ <span class="id" title="var">y</span>) × (<span class="id" title="var">x</span> != <span class="id" title="var">y</span>))%<span class="id" title="keyword">type</span>.<br/>
<span class="id" title="tactic">abstract</span> (<span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> <span class="id" title="var">isapropdirprod</span>; [ <span class="id" title="tactic">apply</span> <span class="id" title="var">propproperty</span> | <span class="id" title="tactic">apply</span> <span class="id" title="var">isapropneg</span> ]).<br/>
</div>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">WOlt'_to_WOlt</span> (<span class="id" title="var">X</span> : <span class="id" title="var">WellOrderedSet</span>) (<span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">X</span>) : <span class="id" title="var">WOlt'</span> <span class="id" title="var">X</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> → <span class="id" title="var">x</span> &lt; <span class="id" title="var">y</span>.<br/>
<a class="proof" href="#">Show proof.</a><br/><div class="proof">
<span class="id" title="tactic">intros</span> [<span class="id" title="var">H1</span> <span class="id" title="var">H2</span>] <span class="id" title="var">H3</span>.<br/>
<span class="id" title="var">now</span> <span class="id" title="var">use</span> <span class="id" title="var">H2</span>; <span class="id" title="tactic">apply</span> (<span class="id" title="var">WO_isantisymm</span> <span class="id" title="var">X</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">H1</span> <span class="id" title="var">H3</span>).<br/>
</div>

<br/>
</div>

<div class="doc">
One direction of the equivalence requires decidable equality 
</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">WOlt_to_WOlt'</span> (<span class="id" title="var">X</span> : <span class="id" title="var">WellOrderedSet</span>) (<span class="id" title="var">hX</span> : <span class="id" title="var">isdeceq</span> <span class="id" title="var">X</span>) (<span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">X</span>) : <span class="id" title="var">x</span> &lt; <span class="id" title="var">y</span> → <span class="id" title="var">WOlt'</span> <span class="id" title="var">X</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>.<br/>
<a class="proof" href="#">Show proof.</a><br/><div class="proof">
<span class="id" title="tactic">intros</span> <span class="id" title="var">H</span>.<br/>
<span class="id" title="tactic">apply</span> (<span class="id" title="var">squash_to_hProp</span> (<span class="id" title="var">WO_istotal</span> <span class="id" title="var">X</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>)); <span class="id" title="tactic">intros</span> [<span class="id" title="var">Hle</span>|<span class="id" title="var">Hle</span>]; <span class="id" title="tactic">simpl</span>.<br/>
- <span class="id" title="tactic">induction</span> (<span class="id" title="var">hX</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">Heq</span>|<span class="id" title="var">Hneq</span>].<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Heq</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> (<span class="id" title="var">WOlt_isirrefl</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">H</span>).<br/>
&nbsp;&nbsp;+ <span class="id" title="var">now</span> <span class="id" title="tactic">split</span>.<br/>
- <span class="id" title="tactic">induction</span> (<span class="id" title="var">H</span> <span class="id" title="var">Hle</span>).<br/>
</div>

<br/>
</div>

<div class="doc">
Assuming decidable equality we can prove that &lt; is a trichotomy 
</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">WOlt_trich</span> (<span class="id" title="var">X</span> : <span class="id" title="var">WellOrderedSet</span>) (<span class="id" title="var">hX</span> : <span class="id" title="var">isdeceq</span> <span class="id" title="var">X</span>) (<span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">X</span>) :<br/>
&nbsp;&nbsp;<span class="id" title="var">y</span> &lt; <span class="id" title="var">x</span> ∨ <span class="id" title="var">x</span> = <span class="id" title="var">y</span> ∨ <span class="id" title="var">x</span> &lt; <span class="id" title="var">y</span>.<br/>
<a class="proof" href="#">Show proof.</a><br/><div class="proof">
<span class="id" title="tactic">induction</span> (<span class="id" title="var">hX</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">Heq</span>|<span class="id" title="var">Hneq</span>].<br/>
- <span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> <span class="id" title="var">hinhpr</span>, <span class="id" title="var">inr</span>, <span class="id" title="var">hinhpr</span>, <span class="id" title="var">inl</span>.<br/>
- <span class="id" title="tactic">apply</span> (<span class="id" title="var">squash_to_hProp</span> (<span class="id" title="var">WO_istotal</span> <span class="id" title="var">X</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>)); <span class="id" title="tactic">intros</span> [<span class="id" title="var">Hle</span>|<span class="id" title="var">Hle</span>].<br/>
&nbsp;&nbsp;+ <span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> <span class="id" title="var">hinhpr</span>, <span class="id" title="var">inr</span>, <span class="id" title="var">hinhpr</span>, <span class="id" title="var">inr</span>, <span class="id" title="var">WOlt'_to_WOlt</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <span class="id" title="var">hinhpr</span>, <span class="id" title="var">inl</span>, <span class="id" title="var">WOlt'_to_WOlt</span>; <span class="id" title="tactic">split</span>; <span class="id" title="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">intros</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">apply</span> <span class="id" title="var">Hneq</span>.<br/>
</div>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">theSmallest</span> {<span class="id" title="var">X</span> : <span class="id" title="var">WellOrderedSet</span>} (<span class="id" title="var">S</span> : <span class="id" title="var">hsubtype</span> <span class="id" title="var">X</span>) : <span class="id" title="var">hProp</span><br/>
&nbsp;&nbsp;:= (∃ <span class="id" title="var">s</span>, <span class="id" title="var">S</span> <span class="id" title="var">s</span>) ⇒ <span class="id" title="var">hProppair</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(∑ <span class="id" title="var">s</span>:<span class="id" title="var">X</span>, <span class="id" title="var">S</span> <span class="id" title="var">s</span> ∧ ∀ <span class="id" title="var">t</span>:<span class="id" title="var">X</span>, <span class="id" title="var">S</span> <span class="id" title="var">t</span> ⇒ <span class="id" title="var">WOrel</span> <span class="id" title="var">X</span> <span class="id" title="var">s</span> <span class="id" title="var">t</span>)%<span class="id" title="keyword">type</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">isaprop_theSmallest</span> <span class="id" title="var">_</span> (<span class="id" title="var">WO_isTotalOrder</span> <span class="id" title="var">X</span>) <span class="id" title="var">S</span>).<br/>

<br/>
</div>

<div class="doc">
actually get the smallest element: 
</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">WO_theSmallest</span> {<span class="id" title="var">X</span> : <span class="id" title="var">WellOrderedSet</span>} (<span class="id" title="var">S</span> : <span class="id" title="var">hsubtype</span> <span class="id" title="var">X</span>) : <span class="id" title="var">theSmallest</span> <span class="id" title="var">S</span>.<br/>
<a class="proof" href="#">Show proof.</a><br/><div class="proof">
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">ne</span>. <span class="id" title="tactic">apply</span> (<span class="id" title="var">squash_to_hProp</span> (<span class="id" title="var">WO_hasSmallest</span> <span class="id" title="var">X</span> <span class="id" title="var">S</span> <span class="id" title="var">ne</span>)).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intro</span> <span class="id" title="var">c</span>. <span class="id" title="tactic">exact</span> <span class="id" title="var">c</span>.<br/>
</div>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">WO_theUniqueSmallest</span> {<span class="id" title="var">X</span> : <span class="id" title="var">WellOrderedSet</span>} (<span class="id" title="var">S</span> : <span class="id" title="var">hsubtype</span> <span class="id" title="var">X</span>) :<br/>
&nbsp;(∃ <span class="id" title="var">s</span>, <span class="id" title="var">S</span> <span class="id" title="var">s</span>) ⇒ ∃! <span class="id" title="var">s</span>:<span class="id" title="var">X</span>, <span class="id" title="var">S</span> <span class="id" title="var">s</span> ∧ ∀ <span class="id" title="var">t</span>:<span class="id" title="var">X</span>, <span class="id" title="var">S</span> <span class="id" title="var">t</span> ⇒ <span class="id" title="var">s</span> ≤ <span class="id" title="var">t</span>.<br/>
<a class="proof" href="#">Show proof.</a><br/><div class="proof">
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">ne</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">iscontraprop1</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <span class="id" title="var">isaprop_theSmallest</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">WO_isTotalOrder</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">exact</span> (<span class="id" title="var">WO_theSmallest</span> <span class="id" title="var">S</span> <span class="id" title="var">ne</span>).<br/>
</div>

<br/>
<span class="id" title="keyword">Local Close</span> <span class="id" title="keyword">Scope</span> <span class="id" title="tactic">set</span>.<br/>
<span class="id" title="keyword">Local Close</span> <span class="id" title="keyword">Scope</span> <span class="id" title="var">prop</span>.<br/>

<br/>
</div>

<div class="doc">
Functions of well-ordered sets that preserve the ordering and initial segments 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <span class="id" title="var">iswofun</span> {<span class="id" title="var">X</span> <span class="id" title="var">Y</span> : <span class="id" title="var">WellOrderedSet</span>} (<span class="id" title="var">f</span> : <span class="id" title="var">X</span> → <span class="id" title="var">Y</span>) : <span class="id" title="var">UU</span> :=<br/>
&nbsp;&nbsp;(<span class="id" title="var">iscomprelrelfun</span> (<span class="id" title="var">WOrel</span> <span class="id" title="var">X</span>) (<span class="id" title="var">WOrel</span> <span class="id" title="var">Y</span>) <span class="id" title="var">f</span>) ×<br/>
&nbsp;&nbsp;(∏ (<span class="id" title="var">x</span> : <span class="id" title="var">X</span>) (<span class="id" title="var">y</span> : <span class="id" title="var">Y</span>), <span class="id" title="var">y</span> &lt; <span class="id" title="var">f</span> <span class="id" title="var">x</span> → ∃ (<span class="id" title="var">z</span> : <span class="id" title="var">X</span>), <span class="id" title="var">z</span> &lt; <span class="id" title="var">x</span> × <span class="id" title="var">f</span> <span class="id" title="var">z</span> = <span class="id" title="var">y</span>).<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">isaprop_iswofun</span> {<span class="id" title="var">X</span> <span class="id" title="var">Y</span> : <span class="id" title="var">WellOrderedSet</span>} (<span class="id" title="var">f</span> : <span class="id" title="var">X</span> → <span class="id" title="var">Y</span>) : <span class="id" title="var">isaprop</span> (<span class="id" title="var">iswofun</span> <span class="id" title="var">f</span>).<br/>
<a class="proof" href="#">Show proof.</a><br/><div class="proof">
<span class="id" title="tactic">intros</span> <span class="id" title="var">h</span>; <span class="id" title="tactic">apply</span> <span class="id" title="var">isapropdirprod</span>; <span class="id" title="tactic">do</span> 3 (<span class="id" title="tactic">apply</span> <span class="id" title="var">impred_isaprop</span>; <span class="id" title="tactic">intros</span>).<br/>
- <span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> <span class="id" title="var">propproperty</span>.<br/>
- <span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> <span class="id" title="var">isapropishinh</span>.<br/>
</div>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">wofun</span> (<span class="id" title="var">X</span> <span class="id" title="var">Y</span> : <span class="id" title="var">WellOrderedSet</span>) : <span class="id" title="var">UU</span> := ∑ (<span class="id" title="var">f</span> : <span class="id" title="var">X</span> -&gt; <span class="id" title="var">Y</span>), <span class="id" title="var">iswofun</span> <span class="id" title="var">f</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">pr1wofun</span> (<span class="id" title="var">X</span> <span class="id" title="var">Y</span> : <span class="id" title="var">WellOrderedSet</span>) : <span class="id" title="var">wofun</span> <span class="id" title="var">X</span> <span class="id" title="var">Y</span> → (<span class="id" title="var">X</span> → <span class="id" title="var">Y</span>) := @<span class="id" title="var">pr1</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">wofun_eq</span> {<span class="id" title="var">X</span> <span class="id" title="var">Y</span> : <span class="id" title="var">WellOrderedSet</span>} {<span class="id" title="var">f</span> <span class="id" title="var">g</span> : <span class="id" title="var">wofun</span> <span class="id" title="var">X</span> <span class="id" title="var">Y</span>} : <span class="id" title="var">pr1</span> <span class="id" title="var">f</span> = <span class="id" title="var">pr1</span> <span class="id" title="var">g</span> → <span class="id" title="var">f</span> = <span class="id" title="var">g</span>.<br/>
<a class="proof" href="#">Show proof.</a><br/><div class="proof">
<span class="id" title="tactic">intros</span> <span class="id" title="var">Heq</span>.<br/>
<span class="id" title="tactic">apply</span> <span class="id" title="var">subtypeEquality</span>; <span class="id" title="tactic">trivial</span>.<br/>
<span class="id" title="var">now</span> <span class="id" title="tactic">intros</span> <span class="id" title="var">h</span>; <span class="id" title="tactic">apply</span> <span class="id" title="var">isaprop_iswofun</span>.<br/>
</div>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">iswofun_idfun</span> {<span class="id" title="var">X</span> : <span class="id" title="var">WellOrderedSet</span>} : <span class="id" title="var">iswofun</span> (<span class="id" title="var">idfun</span> <span class="id" title="var">X</span>).<br/>
<a class="proof" href="#">Show proof.</a><br/><div class="proof">
<span class="id" title="tactic">split</span>.<br/>
- <span class="id" title="var">now</span> <span class="id" title="tactic">intros</span> <span class="id" title="var">x</span>.<br/>
- <span class="id" title="tactic">intros</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">hxy</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> <span class="id" title="var">hinhpr</span>; <span class="id" title="tactic">exists</span> <span class="id" title="var">y</span>.<br/>
</div>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">iswofun_funcomp</span> {<span class="id" title="var">X</span> <span class="id" title="var">Y</span> <span class="id" title="var">Z</span> : <span class="id" title="var">WellOrderedSet</span>} (<span class="id" title="var">f</span> : <span class="id" title="var">wofun</span> <span class="id" title="var">X</span> <span class="id" title="var">Y</span>) (<span class="id" title="var">g</span> : <span class="id" title="var">wofun</span> <span class="id" title="var">Y</span> <span class="id" title="var">Z</span>) :<br/>
&nbsp;&nbsp;<span class="id" title="var">iswofun</span> (<span class="id" title="var">pr1</span> <span class="id" title="var">g</span> ∘ <span class="id" title="var">pr1</span> <span class="id" title="var">f</span>).<br/>
<a class="proof" href="#">Show proof.</a><br/><div class="proof">
<span class="id" title="tactic">induction</span> <span class="id" title="var">f</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">f</span> [<span class="id" title="var">h1f</span> <span class="id" title="var">h2f</span>]].<br/>
<span class="id" title="tactic">induction</span> <span class="id" title="var">g</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">g</span> [<span class="id" title="var">h1g</span> <span class="id" title="var">h2g</span>]].<br/>
<span class="id" title="tactic">split</span>.<br/>
- <span class="id" title="tactic">intros</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">hxy</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">exact</span> (<span class="id" title="var">h1g</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> (<span class="id" title="var">h1f</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">hxy</span>)).<br/>
- <span class="id" title="tactic">intros</span> <span class="id" title="var">x</span> <span class="id" title="var">z</span> <span class="id" title="var">hf</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">squash_to_hProp</span> (<span class="id" title="var">h2g</span> (<span class="id" title="var">f</span> <span class="id" title="var">x</span>) <span class="id" title="var">z</span> <span class="id" title="var">hf</span>)); <span class="id" title="tactic">intros</span> [<span class="id" title="var">y</span> [<span class="id" title="var">h1y</span> <span class="id" title="var">h2y</span>]].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">squash_to_hProp</span> (<span class="id" title="var">h2f</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">h1y</span>)); <span class="id" title="tactic">intros</span> [<span class="id" title="var">x'</span> [<span class="id" title="var">h1x'</span> <span class="id" title="var">h2x'</span>]].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">hinhpr</span>; <span class="id" title="tactic">exists</span> <span class="id" title="var">x'</span>; <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="var">h2x'</span>.<br/>
</div>

<br/>
<span class="id" title="keyword">Local Open</span> <span class="id" title="keyword">Scope</span> <span class="id" title="tactic">set</span>.<br/>
<span class="id" title="keyword">Local Open</span> <span class="id" title="keyword">Scope</span> <span class="id" title="var">prop</span>.<br/>

<br/>
</div>

<div class="doc">
The empty set is well-ordered 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <span class="id" title="var">empty_woset</span> : <span class="id" title="var">WellOrderedSet</span>.<br/>
<a class="proof" href="#">Show proof.</a><br/><div class="proof">
<span class="id" title="tactic">exists</span> (<span class="id" title="var">_</span>,,<span class="id" title="var">isasetempty</span>).<br/>
<span class="id" title="var">use</span> <span class="id" title="var">tpair</span>.<br/>
- <span class="id" title="tactic">intros</span> [].<br/>
- <span class="id" title="tactic">abstract</span> (<span class="id" title="tactic">repeat</span> <span class="id" title="tactic">split</span>; <span class="id" title="tactic">try</span> (<span class="id" title="var">now</span> <span class="id" title="tactic">intros</span> []);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">intros</span> <span class="id" title="var">T</span> <span class="id" title="var">t'</span>; <span class="id" title="tactic">apply</span> (<span class="id" title="var">squash_to_hProp</span> <span class="id" title="var">t'</span>); <span class="id" title="tactic">intros</span> [[]]).<br/>
</div>

<br/>
</div>

<div class="doc">
The unit set is well-ordered 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <span class="id" title="var">unit_woset</span> : <span class="id" title="var">WellOrderedSet</span>.<br/>
<a class="proof" href="#">Show proof.</a><br/><div class="proof">
<span class="id" title="tactic">exists</span> (<span class="id" title="var">_</span>,,<span class="id" title="var">isasetunit</span>).<br/>
<span class="id" title="var">use</span> <span class="id" title="var">tpair</span>.<br/>
- <span class="id" title="tactic">intros</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">exists</span> (<span class="id" title="var">x</span> = <span class="id" title="var">y</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">abstract</span> (<span class="id" title="tactic">apply</span> <span class="id" title="var">isapropifcontr</span>, <span class="id" title="var">isapropunit</span>).<br/>
- <span class="id" title="tactic">repeat</span> <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="var">now</span> <span class="id" title="tactic">intros</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">z</span> [].<br/>
&nbsp;&nbsp;+ <span class="id" title="var">now</span> <span class="id" title="tactic">intros</span> <span class="id" title="var">x</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">intros</span> [] [] <span class="id" title="var">H</span> <span class="id" title="var">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> <span class="id" title="var">H2</span>, <span class="id" title="var">inl</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">intros</span> <span class="id" title="var">T</span> <span class="id" title="var">t'</span>; <span class="id" title="tactic">apply</span> (<span class="id" title="var">squash_to_hProp</span> <span class="id" title="var">t'</span>); <span class="id" title="tactic">clear</span> <span class="id" title="var">t'</span>; <span class="id" title="tactic">intros</span> [[] <span class="id" title="var">H</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">hinhpr</span>; <span class="id" title="tactic">exists</span> <span class="id" title="var">tt</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">split</span>; [|<span class="id" title="tactic">intros</span> []].<br/>
</div>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">isaset_WellOrderedSet</span> : <span class="id" title="var">isaset</span> <span class="id" title="var">WellOrderedSet</span>.<br/>
<a class="proof" href="#">Show proof.</a><br/><div class="proof">

<br/>
<span class="id" title="keyword">Abort</span>.<br/>

<br/>

<br/>

<br/>
<span class="id" title="keyword">Theorem</span> <span class="id" title="var">transfiniteRecursion</span> {<span class="id" title="var">X</span>:<span class="id" title="var">WellOrderedSet</span>} (<span class="id" title="var">P</span> : <span class="id" title="var">X</span> -&gt; <span class="id" title="keyword">Type</span>) :<br/>
&nbsp;&nbsp;<span class="id" title="var">LEM</span> -&gt; (∏ <span class="id" title="var">x</span>:<span class="id" title="var">X</span>, (∏ <span class="id" title="var">y</span>, <span class="id" title="var">y</span>&lt;<span class="id" title="var">x</span> -&gt; <span class="id" title="var">P</span> <span class="id" title="var">y</span>) -&gt; <span class="id" title="var">P</span> <span class="id" title="var">x</span>) -&gt; (∏ <span class="id" title="var">x</span>, <span class="id" title="var">P</span> <span class="id" title="var">x</span>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">g</span>.<br/>

<br/>
<span class="id" title="keyword">Abort</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">bigSet</span> (<span class="id" title="var">X</span>:<span class="id" title="keyword">Type</span>) : (∑ <span class="id" title="var">Y</span>:<span class="id" title="var">hSet</span>, ∏ <span class="id" title="var">f</span> : <span class="id" title="var">Y</span> -&gt; <span class="id" title="var">X</span>, ¬ <span class="id" title="var">isincl</span> <span class="id" title="var">f</span>)%<span class="id" title="keyword">type</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>

<br/>
<span class="id" title="keyword">Abort</span>.<br/>
</div>
</div>

<div id="footer">
<hr/><a href="index.html">Index</a><hr/>This page has been generated by <a href="https://coq.inria.fr/">coqdoc</a>
</div>

</div>

</body>
</html>