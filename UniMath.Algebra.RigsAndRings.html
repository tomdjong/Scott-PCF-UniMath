<!DOCTYPE html>
<html>
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
	<link href="coqdoc.css" rel="stylesheet" type="text/css"/>
	<script src="https://code./jquery.com/jquery-1.11.0.min.js" type="text/javascript"></script>
	<script src="./proofs-toggle.js" type="text/javascript"></script>
	<style>
		div.proofcomment {
			font-style: italic;
		}
	</style>
	<title>Documentation</title>
</head>
<body>
<div id="page">
<div id="main">
<h1 class="libtitle">Library UniMath.Algebra.RigsAndRings</h1>

<div class="code">
</div>

<div class="doc">
<a name="lab476"></a><h1 class="section">Algebra I. Part D.  Rigs and rings. Vladimir Voevodsky. Aug. 2011 - .</h1>

</div>
<div class="code">
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="var">UniMath.Algebra.Groups</span>.<br/>
</div>

<div class="doc">
Contents
<ul class="doclist">
<li> Standard Algebraic Structures
<ul class="doclist">
<li> Rigs - semirings with 1, 0, and x * 0 = 0 * x = 0
<ul class="doclist">
<li> General definitions

</li>
<li> Homomorphisms of rigs (rig functions)

</li>
<li> Relations similar to "greater" or "greater or equal" on rigs

</li>
<li> Subobjects

</li>
<li> Quotient objects

</li>
<li> Direct products

</li>
<li> Opposite rigs

</li>
<li> Nonzero rigs

</li>
<li> Group of units

</li>
</ul>

</li>
<li> Commutative rigs
<ul class="doclist">
<li> General definitions

</li>
<li> Relations similar to "greater" on commutative rigs

</li>
<li> Subobjects

</li>
<li> Quotient objects

</li>
<li> Direct products

</li>
<li> Opposite commutative rigs

</li>
</ul>

</li>
<li> Rings
<ul class="doclist">
<li> General definitions

</li>
<li> Homomorphisms of rings

</li>
<li> Computation lemmas for rings

</li>
<li> Relations compatible with the additive structure on rings

</li>
<li> Relations compatible with the multiplicative structure on rings

</li>
<li> Relations "inversely compatible" with the multiplicative structure
    on rings

</li>
<li> Relations on rings and ring homomorphisms

</li>
<li> Subobjects

</li>
<li> Quotient objects

</li>
<li> Direct products

</li>
<li> Opposite rings

</li>
<li> Ring of differences associated with a rig

</li>
<li> Canonical homomorphism to the ring associated with a rig (ring of
    differences)

</li>
<li> Relations similar to "greater" or "greater or equal" on the ring
    associated with a rig

</li>
<li> Relations and the canonical homomorphism to the ring associated
    with a rig (ring of differences)

</li>
</ul>

</li>
<li> Commutative rings
<ul class="doclist">
<li> General definitions

</li>
<li> Computational lemmas for commutative rings

</li>
<li> Subobjects

</li>
<li> Quotient objects

</li>
<li> Direct products

</li>
<li> Opposite commutative rings

</li>
<li> Commutative rigs to commutative rings

</li>
<li> Rings of fractions

</li>
<li> Canonical homomorphism to the ring of fractions

</li>
<li> Ring of fractions in the case when all elements which are being
    inverted are cancelable

</li>
<li> Relations similar to "greater" or "greater or equal" on the rings
    of fractions

</li>
<li> Relations and the canonical homomorphism to the ring of fractions

</li>
</ul>

</li>
</ul>

</li>
</ul>

<div class="paragraph"> </div>

<a name="lab477"></a><h2 class="section">Preamble</h2>

<div class="paragraph"> </div>

 Settings 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Unset</span> <span class="id" title="var">Kernel</span> <span class="id" title="var">Term</span> <span class="id" title="var">Sharing</span>.<br/>

<br/>
</div>

<div class="doc">
Imports 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Export</span> <span class="id" title="var">UniMath.Algebra.Monoids</span>.<br/>

<br/>
</div>

<div class="doc">
To upstream files 
<div class="paragraph"> </div>

<a name="lab478"></a><h2 class="section">Standard Algebraic Structures (cont.)</h2>

<div class="paragraph"> </div>

<a name="lab479"></a><h3 class="section">Rigs - semirings with 1, 0 and x * 0 = 0 * x = 0</h3>

<div class="paragraph"> </div>

<a name="lab480"></a><h4 class="section">General definitions</h4>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">rig</span> : <span class="id" title="var">UU</span> := <span class="id" title="var">total2</span> (<span class="id" title="var">λ</span> <span class="id" title="var">X</span> : <span class="id" title="var">setwith2binop</span>, <span class="id" title="var">isrigops</span> (@<span class="id" title="var">op1</span> <span class="id" title="var">X</span>) (@<span class="id" title="var">op2</span> <span class="id" title="var">X</span>)).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">rigpair</span> {<span class="id" title="var">X</span> : <span class="id" title="var">setwith2binop</span>} (<span class="id" title="keyword">is</span> : <span class="id" title="var">isrigops</span> (@<span class="id" title="var">op1</span> <span class="id" title="var">X</span>) (@<span class="id" title="var">op2</span> <span class="id" title="var">X</span>)) : <span class="id" title="var">rig</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="var">tpair</span> (<span class="id" title="var">λ</span> <span class="id" title="var">X</span> : <span class="id" title="var">setwith2binop</span>, <span class="id" title="var">isrigops</span> (@<span class="id" title="var">op1</span> <span class="id" title="var">X</span>) (@<span class="id" title="var">op2</span> <span class="id" title="var">X</span>)) <span class="id" title="var">X</span> <span class="id" title="keyword">is</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">pr1rig</span> : <span class="id" title="var">rig</span> -&gt; <span class="id" title="var">setwith2binop</span> :=<br/>
&nbsp;&nbsp;@<span class="id" title="var">pr1</span> <span class="id" title="var">_</span> (<span class="id" title="var">λ</span> <span class="id" title="var">X</span> : <span class="id" title="var">setwith2binop</span>, <span class="id" title="var">isrigops</span> (@<span class="id" title="var">op1</span> <span class="id" title="var">X</span>) (@<span class="id" title="var">op2</span> <span class="id" title="var">X</span>)).<br/>
<span class="id" title="keyword">Coercion</span> <span class="id" title="var">pr1rig</span> : <span class="id" title="var">rig</span> &gt;-&gt; <span class="id" title="var">setwith2binop</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">rigaxs</span> (<span class="id" title="var">X</span> : <span class="id" title="var">rig</span>) : <span class="id" title="var">isrigops</span> (@<span class="id" title="var">op1</span> <span class="id" title="var">X</span>) (@<span class="id" title="var">op2</span> <span class="id" title="var">X</span>) := <span class="id" title="var">pr2</span> <span class="id" title="var">X</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">rigop1axs</span> (<span class="id" title="var">X</span> : <span class="id" title="var">rig</span>) : <span class="id" title="var">isabmonoidop</span> (@<span class="id" title="var">op1</span> <span class="id" title="var">X</span>) := <span class="id" title="var">rigop1axs_is</span> (<span class="id" title="var">pr2</span> <span class="id" title="var">X</span>).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">rigassoc1</span> (<span class="id" title="var">X</span> : <span class="id" title="var">rig</span>) : <span class="id" title="var">isassoc</span> (@<span class="id" title="var">op1</span> <span class="id" title="var">X</span>) := <span class="id" title="var">assocax_is</span> (<span class="id" title="var">rigop1axs</span> <span class="id" title="var">X</span>).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">rigunel1</span> {<span class="id" title="var">X</span> : <span class="id" title="var">rig</span>} : <span class="id" title="var">X</span> := <span class="id" title="var">unel_is</span> (<span class="id" title="var">rigop1axs</span> <span class="id" title="var">X</span>).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">riglunax1</span> (<span class="id" title="var">X</span> : <span class="id" title="var">rig</span>) : <span class="id" title="var">islunit</span> <span class="id" title="var">op1</span> (@<span class="id" title="var">rigunel1</span> <span class="id" title="var">X</span>) := <span class="id" title="var">lunax_is</span> (<span class="id" title="var">rigop1axs</span> <span class="id" title="var">X</span>).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">rigrunax1</span> (<span class="id" title="var">X</span> : <span class="id" title="var">rig</span>) : <span class="id" title="var">isrunit</span> <span class="id" title="var">op1</span> (@<span class="id" title="var">rigunel1</span> <span class="id" title="var">X</span>) := <span class="id" title="var">runax_is</span> (<span class="id" title="var">rigop1axs</span> <span class="id" title="var">X</span>).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">rigmult0x</span> (<span class="id" title="var">X</span> : <span class="id" title="var">rig</span>) : ∏ <span class="id" title="var">x</span> : <span class="id" title="var">X</span>, <span class="id" title="var">paths</span> (<span class="id" title="var">op2</span> (@<span class="id" title="var">rigunel1</span> <span class="id" title="var">X</span>) <span class="id" title="var">x</span>) (@<span class="id" title="var">rigunel1</span> <span class="id" title="var">X</span>) :=<br/>
&nbsp;&nbsp;<span class="id" title="var">rigmult0x_is</span> (<span class="id" title="var">pr2</span> <span class="id" title="var">X</span>).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">rigmultx0</span> (<span class="id" title="var">X</span> : <span class="id" title="var">rig</span>) : ∏ <span class="id" title="var">x</span> : <span class="id" title="var">X</span>, <span class="id" title="var">paths</span> (<span class="id" title="var">op2</span> <span class="id" title="var">x</span> (@<span class="id" title="var">rigunel1</span> <span class="id" title="var">X</span>)) (@<span class="id" title="var">rigunel1</span> <span class="id" title="var">X</span>) :=<br/>
&nbsp;&nbsp;<span class="id" title="var">rigmultx0_is</span> (<span class="id" title="var">pr2</span> <span class="id" title="var">X</span>).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">rigcomm1</span> (<span class="id" title="var">X</span> : <span class="id" title="var">rig</span>) : <span class="id" title="var">iscomm</span> (@<span class="id" title="var">op1</span> <span class="id" title="var">X</span>) := <span class="id" title="var">commax_is</span> (<span class="id" title="var">rigop1axs</span> <span class="id" title="var">X</span>).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">rigop2axs</span> (<span class="id" title="var">X</span> : <span class="id" title="var">rig</span>) : <span class="id" title="var">ismonoidop</span> (@<span class="id" title="var">op2</span> <span class="id" title="var">X</span>) := <span class="id" title="var">rigop2axs_is</span> (<span class="id" title="var">pr2</span> <span class="id" title="var">X</span>).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">rigassoc2</span> (<span class="id" title="var">X</span> : <span class="id" title="var">rig</span>) : <span class="id" title="var">isassoc</span> (@<span class="id" title="var">op2</span> <span class="id" title="var">X</span>) := <span class="id" title="var">assocax_is</span> (<span class="id" title="var">rigop2axs</span> <span class="id" title="var">X</span>).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">rigunel2</span> {<span class="id" title="var">X</span> : <span class="id" title="var">rig</span>} : <span class="id" title="var">X</span> := <span class="id" title="var">unel_is</span> (<span class="id" title="var">rigop2axs</span> <span class="id" title="var">X</span>).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">riglunax2</span> (<span class="id" title="var">X</span> : <span class="id" title="var">rig</span>) : <span class="id" title="var">islunit</span> <span class="id" title="var">op2</span> (@<span class="id" title="var">rigunel2</span> <span class="id" title="var">X</span>) := <span class="id" title="var">lunax_is</span> (<span class="id" title="var">rigop2axs</span> <span class="id" title="var">X</span>).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">rigrunax2</span> (<span class="id" title="var">X</span> : <span class="id" title="var">rig</span>) : <span class="id" title="var">isrunit</span> <span class="id" title="var">op2</span> (@<span class="id" title="var">rigunel2</span> <span class="id" title="var">X</span>) := <span class="id" title="var">runax_is</span> (<span class="id" title="var">rigop2axs</span> <span class="id" title="var">X</span>).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">rigdistraxs</span> (<span class="id" title="var">X</span> : <span class="id" title="var">rig</span>) : <span class="id" title="var">isdistr</span> (@<span class="id" title="var">op1</span> <span class="id" title="var">X</span>) (@<span class="id" title="var">op2</span> <span class="id" title="var">X</span>) := <span class="id" title="var">pr2</span> (<span class="id" title="var">pr2</span> <span class="id" title="var">X</span>).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">rigldistr</span> (<span class="id" title="var">X</span> : <span class="id" title="var">rig</span>) : <span class="id" title="var">isldistr</span> (@<span class="id" title="var">op1</span> <span class="id" title="var">X</span>) (@<span class="id" title="var">op2</span> <span class="id" title="var">X</span>) := <span class="id" title="var">pr1</span> (<span class="id" title="var">pr2</span> (<span class="id" title="var">pr2</span> <span class="id" title="var">X</span>)).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">rigrdistr</span> (<span class="id" title="var">X</span> : <span class="id" title="var">rig</span>) : <span class="id" title="var">isrdistr</span> (@<span class="id" title="var">op1</span> <span class="id" title="var">X</span>) (@<span class="id" title="var">op2</span> <span class="id" title="var">X</span>) := <span class="id" title="var">pr2</span> (<span class="id" title="var">pr2</span> (<span class="id" title="var">pr2</span> <span class="id" title="var">X</span>)).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">rigconstr</span> {<span class="id" title="var">X</span> : <span class="id" title="var">hSet</span>} (<span class="id" title="var">opp1</span> <span class="id" title="var">opp2</span> : <span class="id" title="var">binop</span> <span class="id" title="var">X</span>) (<span class="id" title="var">ax11</span> : <span class="id" title="var">ismonoidop</span> <span class="id" title="var">opp1</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">ax12</span> : <span class="id" title="var">iscomm</span> <span class="id" title="var">opp1</span>) (<span class="id" title="var">ax2</span> : <span class="id" title="var">ismonoidop</span> <span class="id" title="var">opp2</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">m0x</span> : ∏ <span class="id" title="var">x</span> : <span class="id" title="var">X</span>, <span class="id" title="var">paths</span> (<span class="id" title="var">opp2</span> (<span class="id" title="var">unel_is</span> <span class="id" title="var">ax11</span>) <span class="id" title="var">x</span>) (<span class="id" title="var">unel_is</span> <span class="id" title="var">ax11</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">mx0</span> : ∏ <span class="id" title="var">x</span> : <span class="id" title="var">X</span>, <span class="id" title="var">paths</span> (<span class="id" title="var">opp2</span> <span class="id" title="var">x</span> (<span class="id" title="var">unel_is</span> <span class="id" title="var">ax11</span>)) (<span class="id" title="var">unel_is</span> <span class="id" title="var">ax11</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">dax</span> : <span class="id" title="var">isdistr</span> <span class="id" title="var">opp1</span> <span class="id" title="var">opp2</span>) : <span class="id" title="var">rig</span>.<br/>
<a class="proof" href="#">Show proof.</a><br/><div class="proof">
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">split</span> <span class="id" title="keyword">with</span> (<span class="id" title="var">setwith2binoppair</span> <span class="id" title="var">X</span> (<span class="id" title="var">dirprodpair</span> <span class="id" title="var">opp1</span> <span class="id" title="var">opp2</span>)). <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">split</span> <span class="id" title="keyword">with</span> (<span class="id" title="var">dirprodpair</span> (<span class="id" title="var">dirprodpair</span> <span class="id" title="var">ax11</span> <span class="id" title="var">ax12</span>) <span class="id" title="var">ax2</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">dirprodpair</span> <span class="id" title="var">m0x</span> <span class="id" title="var">mx0</span>).<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <span class="id" title="var">dax</span>.<br/>
</div>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">rigaddabmonoid</span> (<span class="id" title="var">X</span> : <span class="id" title="var">rig</span>) : <span class="id" title="var">abmonoid</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="var">abmonoidpair</span> (<span class="id" title="var">setwithbinoppair</span> <span class="id" title="var">X</span> <span class="id" title="var">op1</span>) (<span class="id" title="var">rigop1axs</span> <span class="id" title="var">X</span>).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">rigmultmonoid</span> (<span class="id" title="var">X</span> : <span class="id" title="var">rig</span>) : <span class="id" title="var">monoid</span> := <span class="id" title="var">monoidpair</span> (<span class="id" title="var">setwithbinoppair</span> <span class="id" title="var">X</span> <span class="id" title="var">op2</span>) (<span class="id" title="var">rigop2axs</span> <span class="id" title="var">X</span>).<br/>

<br/>
<span class="id" title="keyword">Notation</span> &quot;x + y" := (<span class="id" title="var">op1</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>) : <span class="id" title="var">rig_scope</span>.<br/>
<span class="id" title="keyword">Notation</span> &quot;x * y" := (<span class="id" title="var">op2</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>) : <span class="id" title="var">rig_scope</span>.<br/>
<span class="id" title="keyword">Notation</span> &quot;0" := (<span class="id" title="var">rigunel1</span>) : <span class="id" title="var">rig_scope</span>.<br/>
<span class="id" title="keyword">Notation</span> &quot;1" := (<span class="id" title="var">rigunel2</span>) : <span class="id" title="var">rig_scope</span>.<br/>

<br/>
<span class="id" title="keyword">Delimit</span> <span class="id" title="keyword">Scope</span> <span class="id" title="var">rig_scope</span> <span class="id" title="keyword">with</span> <span class="id" title="var">rig</span>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab481"></a><h4 class="section">Homomorphisms of rigs (rig functions)</h4>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">isrigfun</span> {<span class="id" title="var">X</span> <span class="id" title="var">Y</span> : <span class="id" title="var">rig</span>} (<span class="id" title="var">f</span> : <span class="id" title="var">X</span> -&gt; <span class="id" title="var">Y</span>) : <span class="id" title="var">UU</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="var">dirprod</span> (@<span class="id" title="var">ismonoidfun</span> (<span class="id" title="var">rigaddabmonoid</span> <span class="id" title="var">X</span>) (<span class="id" title="var">rigaddabmonoid</span> <span class="id" title="var">Y</span>) <span class="id" title="var">f</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(@<span class="id" title="var">ismonoidfun</span> (<span class="id" title="var">rigmultmonoid</span> <span class="id" title="var">X</span>) (<span class="id" title="var">rigmultmonoid</span> <span class="id" title="var">Y</span>) <span class="id" title="var">f</span>).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">mk_isrigfun</span> {<span class="id" title="var">X</span> <span class="id" title="var">Y</span> : <span class="id" title="var">rig</span>} {<span class="id" title="var">f</span> : <span class="id" title="var">X</span> -&gt; <span class="id" title="var">Y</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">H1</span> : @<span class="id" title="var">ismonoidfun</span> (<span class="id" title="var">rigaddabmonoid</span> <span class="id" title="var">X</span>) (<span class="id" title="var">rigaddabmonoid</span> <span class="id" title="var">Y</span>) <span class="id" title="var">f</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">H2</span> : @<span class="id" title="var">ismonoidfun</span> (<span class="id" title="var">rigmultmonoid</span> <span class="id" title="var">X</span>) (<span class="id" title="var">rigmultmonoid</span> <span class="id" title="var">Y</span>) <span class="id" title="var">f</span>) : <span class="id" title="var">isrigfun</span> <span class="id" title="var">f</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="var">dirprodpair</span> <span class="id" title="var">H1</span> <span class="id" title="var">H2</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">isrigfunisaddmonoidfun</span> {<span class="id" title="var">X</span> <span class="id" title="var">Y</span> : <span class="id" title="var">rig</span>} {<span class="id" title="var">f</span> : <span class="id" title="var">X</span> -&gt; <span class="id" title="var">Y</span>} (<span class="id" title="var">H</span> : <span class="id" title="var">isrigfun</span> <span class="id" title="var">f</span>) :<br/>
&nbsp;&nbsp;@<span class="id" title="var">ismonoidfun</span> (<span class="id" title="var">rigaddabmonoid</span> <span class="id" title="var">X</span>) (<span class="id" title="var">rigaddabmonoid</span> <span class="id" title="var">Y</span>) <span class="id" title="var">f</span> := <span class="id" title="var">dirprod_pr1</span> <span class="id" title="var">H</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">isrigfunismultmonoidfun</span> {<span class="id" title="var">X</span> <span class="id" title="var">Y</span> : <span class="id" title="var">rig</span>} {<span class="id" title="var">f</span> : <span class="id" title="var">X</span> -&gt; <span class="id" title="var">Y</span>} (<span class="id" title="var">H</span> : <span class="id" title="var">isrigfun</span> <span class="id" title="var">f</span>) :<br/>
&nbsp;&nbsp;@<span class="id" title="var">ismonoidfun</span> (<span class="id" title="var">rigmultmonoid</span> <span class="id" title="var">X</span>) (<span class="id" title="var">rigmultmonoid</span> <span class="id" title="var">Y</span>) <span class="id" title="var">f</span> := <span class="id" title="var">dirprod_pr2</span> <span class="id" title="var">H</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">isapropisrigfun</span> {<span class="id" title="var">X</span> <span class="id" title="var">Y</span> : <span class="id" title="var">rig</span>} (<span class="id" title="var">f</span> : <span class="id" title="var">X</span> -&gt; <span class="id" title="var">Y</span>) : <span class="id" title="var">isaprop</span> (<span class="id" title="var">isrigfun</span> <span class="id" title="var">f</span>).<br/>
<a class="proof" href="#">Show proof.</a><br/><div class="proof">
&nbsp;&nbsp;<span class="id" title="var">use</span> <span class="id" title="var">isapropdirprod</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">use</span> <span class="id" title="var">isapropismonoidfun</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">use</span> <span class="id" title="var">isapropismonoidfun</span>.<br/>
</div>
<span class="id" title="keyword">Opaque</span> <span class="id" title="var">isapropisrigfun</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">rigfun</span> (<span class="id" title="var">X</span> <span class="id" title="var">Y</span> : <span class="id" title="var">rig</span>) : <span class="id" title="var">UU</span> := <span class="id" title="var">total2</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">f</span> : <span class="id" title="var">X</span> -&gt; <span class="id" title="var">Y</span> =&gt; <span class="id" title="var">isrigfun</span> <span class="id" title="var">f</span>).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">isasetrigfun</span> (<span class="id" title="var">X</span> <span class="id" title="var">Y</span> : <span class="id" title="var">rig</span>) : <span class="id" title="var">isaset</span> (<span class="id" title="var">rigfun</span> <span class="id" title="var">X</span> <span class="id" title="var">Y</span>).<br/>
<a class="proof" href="#">Show proof.</a><br/><div class="proof">
&nbsp;&nbsp;<span class="id" title="var">use</span> <span class="id" title="var">isaset_total2</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">use</span> <span class="id" title="var">isaset_set_fun_space</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">x</span>. <span class="id" title="var">use</span> <span class="id" title="var">isasetaprop</span>. <span class="id" title="var">use</span> <span class="id" title="var">isapropisrigfun</span>.<br/>
</div>
<span class="id" title="keyword">Opaque</span> <span class="id" title="var">isasetrigfun</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">rigfunconstr</span> {<span class="id" title="var">X</span> <span class="id" title="var">Y</span> : <span class="id" title="var">rig</span>} {<span class="id" title="var">f</span> : <span class="id" title="var">X</span> -&gt; <span class="id" title="var">Y</span>} (<span class="id" title="keyword">is</span> : <span class="id" title="var">isrigfun</span> <span class="id" title="var">f</span>) : <span class="id" title="var">rigfun</span> <span class="id" title="var">X</span> <span class="id" title="var">Y</span> := <span class="id" title="var">tpair</span> <span class="id" title="var">_</span> <span class="id" title="var">f</span> <span class="id" title="keyword">is</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">pr1rigfun</span> (<span class="id" title="var">X</span> <span class="id" title="var">Y</span> : <span class="id" title="var">rig</span>) : <span class="id" title="var">rigfun</span> <span class="id" title="var">X</span> <span class="id" title="var">Y</span>  -&gt; (<span class="id" title="var">X</span> -&gt; <span class="id" title="var">Y</span>) := @<span class="id" title="var">pr1</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>.<br/>
<span class="id" title="keyword">Coercion</span> <span class="id" title="var">pr1rigfun</span> : <span class="id" title="var">rigfun</span> &gt;-&gt; <span class="id" title="var">Funclass</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">rigaddfun</span> {<span class="id" title="var">X</span> <span class="id" title="var">Y</span> : <span class="id" title="var">rig</span>} (<span class="id" title="var">f</span> : <span class="id" title="var">rigfun</span> <span class="id" title="var">X</span> <span class="id" title="var">Y</span>) :<br/>
&nbsp;&nbsp;<span class="id" title="var">monoidfun</span> (<span class="id" title="var">rigaddabmonoid</span> <span class="id" title="var">X</span>) (<span class="id" title="var">rigaddabmonoid</span> <span class="id" title="var">Y</span>) := <span class="id" title="var">monoidfunconstr</span> (<span class="id" title="var">pr1</span> (<span class="id" title="var">pr2</span> <span class="id" title="var">f</span>)).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">rigmultfun</span> {<span class="id" title="var">X</span> <span class="id" title="var">Y</span> : <span class="id" title="var">rig</span>} (<span class="id" title="var">f</span> : <span class="id" title="var">rigfun</span> <span class="id" title="var">X</span> <span class="id" title="var">Y</span>) :<br/>
&nbsp;&nbsp;<span class="id" title="var">monoidfun</span> (<span class="id" title="var">rigmultmonoid</span> <span class="id" title="var">X</span>) (<span class="id" title="var">rigmultmonoid</span> <span class="id" title="var">Y</span>) := <span class="id" title="var">monoidfunconstr</span> (<span class="id" title="var">pr2</span> (<span class="id" title="var">pr2</span> <span class="id" title="var">f</span>)).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">rigfun_to_unel_rigaddmonoid</span> {<span class="id" title="var">X</span> <span class="id" title="var">Y</span> : <span class="id" title="var">rig</span>} (<span class="id" title="var">f</span> : <span class="id" title="var">rigfun</span> <span class="id" title="var">X</span> <span class="id" title="var">Y</span>) : <span class="id" title="var">f</span> (0%<span class="id" title="var">rig</span>) = 0%<span class="id" title="var">rig</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="var">pr2</span> (<span class="id" title="var">pr1</span> (<span class="id" title="var">pr2</span> <span class="id" title="var">f</span>)).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">rigfuncomp</span> {<span class="id" title="var">X</span> <span class="id" title="var">Y</span> <span class="id" title="var">Z</span> : <span class="id" title="var">rig</span>} (<span class="id" title="var">f</span> : <span class="id" title="var">rigfun</span> <span class="id" title="var">X</span> <span class="id" title="var">Y</span>) (<span class="id" title="var">g</span> : <span class="id" title="var">rigfun</span> <span class="id" title="var">Y</span> <span class="id" title="var">Z</span>) : <span class="id" title="var">rigfun</span> <span class="id" title="var">X</span> <span class="id" title="var">Z</span>.<br/>
<a class="proof" href="#">Show proof.</a><br/><div class="proof">
&nbsp;&nbsp;<span class="id" title="var">use</span> <span class="id" title="var">rigfunconstr</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">exact</span> (<span class="id" title="var">g</span> ∘ <span class="id" title="var">f</span>).<br/>
&nbsp;&nbsp;- <span class="id" title="var">use</span> <span class="id" title="var">mk_isrigfun</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">exact</span> (<span class="id" title="var">pr2</span> (<span class="id" title="var">monoidfuncomp</span> (<span class="id" title="var">rigaddfun</span> <span class="id" title="var">f</span>) (<span class="id" title="var">rigaddfun</span> <span class="id" title="var">g</span>))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">exact</span> (<span class="id" title="var">pr2</span> (<span class="id" title="var">monoidfuncomp</span> (<span class="id" title="var">rigmultfun</span> <span class="id" title="var">f</span>) (<span class="id" title="var">rigmultfun</span> <span class="id" title="var">g</span>))).<br/>
</div>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">rigfun_paths</span> {<span class="id" title="var">X</span> <span class="id" title="var">Y</span> : <span class="id" title="var">rig</span>} (<span class="id" title="var">f</span> <span class="id" title="var">g</span> : <span class="id" title="var">rigfun</span> <span class="id" title="var">X</span> <span class="id" title="var">Y</span>) (<span class="id" title="var">e</span> : <span class="id" title="var">pr1</span> <span class="id" title="var">f</span> = <span class="id" title="var">pr1</span> <span class="id" title="var">g</span>) : <span class="id" title="var">f</span> = <span class="id" title="var">g</span>.<br/>
<a class="proof" href="#">Show proof.</a><br/><div class="proof">
&nbsp;&nbsp;<span class="id" title="var">use</span> <span class="id" title="var">total2_paths_f</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">exact</span> <span class="id" title="var">e</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">use</span> <span class="id" title="var">proofirrelevance</span>. <span class="id" title="var">use</span> <span class="id" title="var">isapropisrigfun</span>.<br/>
</div>
<span class="id" title="keyword">Opaque</span> <span class="id" title="var">rigfun_paths</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">rigiso</span> (<span class="id" title="var">X</span> <span class="id" title="var">Y</span> : <span class="id" title="var">rig</span>) : <span class="id" title="var">UU</span> := <span class="id" title="var">total2</span> (<span class="id" title="var">λ</span> <span class="id" title="var">f</span> : <span class="id" title="var">X</span> ≃ <span class="id" title="var">Y</span>, <span class="id" title="var">isrigfun</span> <span class="id" title="var">f</span>).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">rigisopair</span> {<span class="id" title="var">X</span> <span class="id" title="var">Y</span> : <span class="id" title="var">rig</span>} (<span class="id" title="var">f</span> : <span class="id" title="var">X</span> ≃ <span class="id" title="var">Y</span>) (<span class="id" title="keyword">is</span> : <span class="id" title="var">isrigfun</span> <span class="id" title="var">f</span>) : <span class="id" title="var">rigiso</span> <span class="id" title="var">X</span> <span class="id" title="var">Y</span> := <span class="id" title="var">tpair</span> <span class="id" title="var">_</span>  <span class="id" title="var">f</span> <span class="id" title="keyword">is</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">pr1rigiso</span> (<span class="id" title="var">X</span> <span class="id" title="var">Y</span> : <span class="id" title="var">rig</span>) : <span class="id" title="var">rigiso</span> <span class="id" title="var">X</span> <span class="id" title="var">Y</span> -&gt; <span class="id" title="var">X</span> ≃ <span class="id" title="var">Y</span> := @<span class="id" title="var">pr1</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>.<br/>
<span class="id" title="keyword">Coercion</span> <span class="id" title="var">pr1rigiso</span> : <span class="id" title="var">rigiso</span> &gt;-&gt; <span class="id" title="var">weq</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">rigisoisrigfun</span> {<span class="id" title="var">X</span> <span class="id" title="var">Y</span> : <span class="id" title="var">rig</span>} (<span class="id" title="var">f</span> : <span class="id" title="var">rigiso</span> <span class="id" title="var">X</span> <span class="id" title="var">Y</span>) : <span class="id" title="var">isrigfun</span> <span class="id" title="var">f</span> := <span class="id" title="var">pr2</span> <span class="id" title="var">f</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">rigaddiso</span> {<span class="id" title="var">X</span> <span class="id" title="var">Y</span> : <span class="id" title="var">rig</span>} (<span class="id" title="var">f</span> : <span class="id" title="var">rigiso</span> <span class="id" title="var">X</span> <span class="id" title="var">Y</span>) :<br/>
&nbsp;&nbsp;<span class="id" title="var">monoidiso</span> (<span class="id" title="var">rigaddabmonoid</span> <span class="id" title="var">X</span>) (<span class="id" title="var">rigaddabmonoid</span> <span class="id" title="var">Y</span>) :=<br/>
&nbsp;&nbsp;@<span class="id" title="var">monoidisopair</span> (<span class="id" title="var">rigaddabmonoid</span> <span class="id" title="var">X</span>) (<span class="id" title="var">rigaddabmonoid</span> <span class="id" title="var">Y</span>) (<span class="id" title="var">pr1</span> <span class="id" title="var">f</span>) (<span class="id" title="var">pr1</span> (<span class="id" title="var">pr2</span> <span class="id" title="var">f</span>)).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">rigmultiso</span> {<span class="id" title="var">X</span> <span class="id" title="var">Y</span> : <span class="id" title="var">rig</span>} (<span class="id" title="var">f</span> : <span class="id" title="var">rigiso</span> <span class="id" title="var">X</span> <span class="id" title="var">Y</span>) :<br/>
&nbsp;&nbsp;<span class="id" title="var">monoidiso</span> (<span class="id" title="var">rigmultmonoid</span> <span class="id" title="var">X</span>) (<span class="id" title="var">rigmultmonoid</span> <span class="id" title="var">Y</span>) :=<br/>
&nbsp;&nbsp;@<span class="id" title="var">monoidisopair</span> (<span class="id" title="var">rigmultmonoid</span> <span class="id" title="var">X</span>) (<span class="id" title="var">rigmultmonoid</span> <span class="id" title="var">Y</span>) (<span class="id" title="var">pr1</span> <span class="id" title="var">f</span>) (<span class="id" title="var">pr2</span> (<span class="id" title="var">pr2</span> <span class="id" title="var">f</span>)).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">rigiso_paths</span> {<span class="id" title="var">X</span> <span class="id" title="var">Y</span> : <span class="id" title="var">rig</span>} (<span class="id" title="var">f</span> <span class="id" title="var">g</span> : <span class="id" title="var">rigiso</span> <span class="id" title="var">X</span> <span class="id" title="var">Y</span>) (<span class="id" title="var">e</span> : <span class="id" title="var">pr1</span> <span class="id" title="var">f</span> = <span class="id" title="var">pr1</span> <span class="id" title="var">g</span>) : <span class="id" title="var">f</span> = <span class="id" title="var">g</span>.<br/>
<a class="proof" href="#">Show proof.</a><br/><div class="proof">
&nbsp;&nbsp;<span class="id" title="var">use</span> <span class="id" title="var">total2_paths_f</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">exact</span> <span class="id" title="var">e</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">use</span> <span class="id" title="var">proofirrelevance</span>. <span class="id" title="var">use</span> <span class="id" title="var">isapropisrigfun</span>.<br/>
</div>
<span class="id" title="keyword">Opaque</span> <span class="id" title="var">rigiso_paths</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">rigisotorigfun</span> {<span class="id" title="var">X</span> <span class="id" title="var">Y</span> : <span class="id" title="var">rig</span>} (<span class="id" title="var">f</span> : <span class="id" title="var">rigiso</span> <span class="id" title="var">X</span> <span class="id" title="var">Y</span>) : <span class="id" title="var">rigfun</span> <span class="id" title="var">X</span> <span class="id" title="var">Y</span> := <span class="id" title="var">rigfunconstr</span> (<span class="id" title="var">pr2</span> <span class="id" title="var">f</span>).<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">isrigfuninvmap</span> {<span class="id" title="var">X</span> <span class="id" title="var">Y</span> : <span class="id" title="var">rig</span>} (<span class="id" title="var">f</span> : <span class="id" title="var">rigiso</span> <span class="id" title="var">X</span> <span class="id" title="var">Y</span>) : <span class="id" title="var">isrigfun</span> (<span class="id" title="var">invmap</span> <span class="id" title="var">f</span>).<br/>
<a class="proof" href="#">Show proof.</a><br/><div class="proof">
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> (<span class="id" title="var">ismonoidfuninvmap</span> (<span class="id" title="var">rigaddiso</span> <span class="id" title="var">f</span>)).<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span>  (<span class="id" title="var">ismonoidfuninvmap</span> (<span class="id" title="var">rigmultiso</span> <span class="id" title="var">f</span>)).<br/>
</div>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">invrigiso</span> {<span class="id" title="var">X</span> <span class="id" title="var">Y</span> : <span class="id" title="var">rig</span>} (<span class="id" title="var">f</span> : <span class="id" title="var">rigiso</span> <span class="id" title="var">X</span> <span class="id" title="var">Y</span>) : <span class="id" title="var">rigiso</span> <span class="id" title="var">Y</span> <span class="id" title="var">X</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="var">rigisopair</span> (<span class="id" title="var">invweq</span> <span class="id" title="var">f</span>) (<span class="id" title="var">isrigfuninvmap</span> <span class="id" title="var">f</span>).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">idrigiso</span> (<span class="id" title="var">X</span> : <span class="id" title="var">rig</span>) : <span class="id" title="var">rigiso</span> <span class="id" title="var">X</span> <span class="id" title="var">X</span>.<br/>
<a class="proof" href="#">Show proof.</a><br/><div class="proof">
&nbsp;&nbsp;<span class="id" title="var">use</span> <span class="id" title="var">rigisopair</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">exact</span> (<span class="id" title="var">idweq</span> <span class="id" title="var">X</span>).<br/>
&nbsp;&nbsp;- <span class="id" title="var">use</span> <span class="id" title="var">mk_isrigfun</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">use</span> <span class="id" title="var">mk_ismonoidfun</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="var">use</span> <span class="id" title="var">mk_isbinopfun</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">x</span> <span class="id" title="var">x'</span>. <span class="id" title="var">use</span> <span class="id" title="var">idpath</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="var">use</span> <span class="id" title="var">idpath</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">use</span> <span class="id" title="var">mk_ismonoidfun</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="var">use</span> <span class="id" title="var">mk_isbinopfun</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">x</span> <span class="id" title="var">x'</span>. <span class="id" title="var">use</span> <span class="id" title="var">idpath</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="var">use</span> <span class="id" title="var">idpath</span>.<br/>
</div>

<br/>
</div>

<div class="doc">
<a name="lab482"></a><h4 class="section">(X = Y) ≃ (rigiso X Y)</h4>

    We use the following composition

<div class="paragraph"> </div>

                              (X = Y) ≃ (X ╝ Y)
                                      ≃ (rigiso' X Y)
                                      ≃ (rigiso X Y)

<div class="paragraph"> </div>

    where the second weak equivalence is given by univalence for setwith2binop,
    <span class="inlinecode"><span class="id" title="var">setwith2binop_univalence</span></span>. The reason to define rigiso' is that it allows us to use
    <span class="inlinecode"><span class="id" title="var">setwith2binop_univalence</span></span>.

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Local</span> <span class="id" title="keyword">Definition</span> <span class="id" title="var">rigiso'</span> (<span class="id" title="var">X</span> <span class="id" title="var">Y</span> : <span class="id" title="var">rig</span>) : <span class="id" title="var">UU</span> :=<br/>
&nbsp;&nbsp;∑ <span class="id" title="var">D</span> : (∑ <span class="id" title="var">w</span> : <span class="id" title="var">X</span> ≃ <span class="id" title="var">Y</span>, <span class="id" title="var">istwobinopfun</span> <span class="id" title="var">w</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;((<span class="id" title="var">pr1</span> <span class="id" title="var">D</span>) (@<span class="id" title="var">rigunel1</span> <span class="id" title="var">X</span>) = @<span class="id" title="var">rigunel1</span> <span class="id" title="var">Y</span>) × ((<span class="id" title="var">pr1</span> <span class="id" title="var">D</span>) (@<span class="id" title="var">rigunel2</span> <span class="id" title="var">X</span>) = @<span class="id" title="var">rigunel2</span> <span class="id" title="var">Y</span>).<br/>

<br/>
<span class="id" title="keyword">Local</span> <span class="id" title="keyword">Definition</span> <span class="id" title="var">mk_rigiso'</span> (<span class="id" title="var">X</span> <span class="id" title="var">Y</span> : <span class="id" title="var">rig</span>) (<span class="id" title="var">w</span> : <span class="id" title="var">X</span> ≃ <span class="id" title="var">Y</span>) (<span class="id" title="var">H1</span> : <span class="id" title="var">istwobinopfun</span> <span class="id" title="var">w</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">H2</span> : <span class="id" title="var">w</span> (@<span class="id" title="var">rigunel1</span> <span class="id" title="var">X</span>) = @<span class="id" title="var">rigunel1</span> <span class="id" title="var">Y</span>) (<span class="id" title="var">H3</span> : <span class="id" title="var">w</span> (@<span class="id" title="var">rigunel2</span> <span class="id" title="var">X</span>) = @<span class="id" title="var">rigunel2</span> <span class="id" title="var">Y</span>) :<br/>
&nbsp;&nbsp;<span class="id" title="var">rigiso'</span> <span class="id" title="var">X</span> <span class="id" title="var">Y</span> := <span class="id" title="var">tpair</span> <span class="id" title="var">_</span> (<span class="id" title="var">tpair</span> <span class="id" title="var">_</span> <span class="id" title="var">w</span> <span class="id" title="var">H1</span>) (<span class="id" title="var">dirprodpair</span> <span class="id" title="var">H2</span> <span class="id" title="var">H3</span>).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">rig_univalence_weq1</span> (<span class="id" title="var">X</span> <span class="id" title="var">Y</span> : <span class="id" title="var">rig</span>) : (<span class="id" title="var">X</span> = <span class="id" title="var">Y</span>) ≃ (<span class="id" title="var">X</span> ╝ <span class="id" title="var">Y</span>) :=<br/>
&nbsp;&nbsp;<span class="id" title="var">total2_paths_equiv</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">rig_univalence_weq2</span> (<span class="id" title="var">X</span> <span class="id" title="var">Y</span> : <span class="id" title="var">rig</span>) : (<span class="id" title="var">X</span> ╝ <span class="id" title="var">Y</span>) ≃ (<span class="id" title="var">rigiso'</span> <span class="id" title="var">X</span> <span class="id" title="var">Y</span>).<br/>
<a class="proof" href="#">Show proof.</a><br/><div class="proof">
&nbsp;&nbsp;<span class="id" title="var">use</span> <span class="id" title="var">weqbandf</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">exact</span> (<span class="id" title="var">setwith2binop_univalence</span> <span class="id" title="var">X</span> <span class="id" title="var">Y</span>).<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">e</span>. <span class="id" title="var">cbn</span>. <span class="id" title="var">use</span> <span class="id" title="var">invweq</span>. <span class="id" title="tactic">induction</span> <span class="id" title="var">X</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">X</span> <span class="id" title="var">Xop</span>]. <span class="id" title="tactic">induction</span> <span class="id" title="var">Y</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Y</span> <span class="id" title="var">Yop</span>]. <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">e</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cbn</span>. <span class="id" title="tactic">induction</span> <span class="id" title="var">e</span>. <span class="id" title="var">use</span> <span class="id" title="var">weqimplimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">intros</span> <span class="id" title="var">i</span>. <span class="id" title="var">use</span> <span class="id" title="var">proofirrelevance</span>. <span class="id" title="var">use</span> <span class="id" title="var">isapropisrigops</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">intros</span> <span class="id" title="var">i</span>. <span class="id" title="var">use</span> <span class="id" title="var">dirprodpair</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">induction</span> <span class="id" title="var">i</span>. <span class="id" title="var">use</span> <span class="id" title="var">idpath</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">induction</span> <span class="id" title="var">i</span>. <span class="id" title="var">use</span> <span class="id" title="var">idpath</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">use</span> <span class="id" title="var">isapropdirprod</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="var">use</span> <span class="id" title="var">setproperty</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="var">use</span> <span class="id" title="var">setproperty</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">use</span> <span class="id" title="var">isapropifcontr</span>. <span class="id" title="tactic">exact</span> (@<span class="id" title="var">isapropisrigops</span> <span class="id" title="var">X</span> <span class="id" title="var">op1</span> <span class="id" title="var">op2</span> <span class="id" title="var">Xop</span> <span class="id" title="var">Yop</span>).<br/>
</div>
<span class="id" title="keyword">Opaque</span> <span class="id" title="var">rig_univalence_weq2</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">rig_univalence_weq3</span> (<span class="id" title="var">X</span> <span class="id" title="var">Y</span> : <span class="id" title="var">rig</span>) : (<span class="id" title="var">rigiso'</span> <span class="id" title="var">X</span> <span class="id" title="var">Y</span>) ≃ (<span class="id" title="var">rigiso</span> <span class="id" title="var">X</span> <span class="id" title="var">Y</span>).<br/>
<a class="proof" href="#">Show proof.</a><br/><div class="proof">
&nbsp;&nbsp;<span class="id" title="var">use</span> <span class="id" title="var">weqpair</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">i'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">use</span> <span class="id" title="var">rigisopair</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">exact</span> (<span class="id" title="var">pr1</span> (<span class="id" title="var">pr1</span> <span class="id" title="var">i'</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">use</span> <span class="id" title="var">mk_isrigfun</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="var">use</span> <span class="id" title="var">mk_ismonoidfun</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-- <span class="id" title="var">use</span> <span class="id" title="var">mk_isbinopfun</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exact</span> (<span class="id" title="var">dirprod_pr1</span> (<span class="id" title="var">pr2</span> (<span class="id" title="var">pr1</span> <span class="id" title="var">i'</span>))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-- <span class="id" title="tactic">exact</span> (<span class="id" title="var">dirprod_pr1</span> (<span class="id" title="var">pr2</span> <span class="id" title="var">i'</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*  <span class="id" title="var">use</span> <span class="id" title="var">mk_ismonoidfun</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-- <span class="id" title="var">use</span> <span class="id" title="var">mk_isbinopfun</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exact</span> (<span class="id" title="var">dirprod_pr2</span> (<span class="id" title="var">pr2</span> (<span class="id" title="var">pr1</span> <span class="id" title="var">i'</span>))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-- <span class="id" title="tactic">exact</span> (<span class="id" title="var">dirprod_pr2</span> (<span class="id" title="var">pr2</span> <span class="id" title="var">i'</span>)).<br/>
&nbsp;&nbsp;- <span class="id" title="var">use</span> <span class="id" title="var">isweq_iso</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">intros</span> <span class="id" title="var">i</span>. <span class="id" title="var">use</span> <span class="id" title="var">mk_rigiso'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">exact</span> (<span class="id" title="var">pr1rigiso</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">i</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="var">use</span> <span class="id" title="var">mk_istwobinopfun</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-- <span class="id" title="tactic">exact</span> (<span class="id" title="var">ismonoidfunisbinopfun</span> (<span class="id" title="var">isrigfunisaddmonoidfun</span> (<span class="id" title="var">rigisoisrigfun</span> <span class="id" title="var">i</span>))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-- <span class="id" title="tactic">exact</span> (<span class="id" title="var">ismonoidfunisbinopfun</span> (<span class="id" title="var">isrigfunismultmonoidfun</span> (<span class="id" title="var">rigisoisrigfun</span> <span class="id" title="var">i</span>))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">exact</span> (<span class="id" title="var">ismonoidfununel</span> (<span class="id" title="var">isrigfunisaddmonoidfun</span> (<span class="id" title="var">rigisoisrigfun</span> <span class="id" title="var">i</span>))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">exact</span> (<span class="id" title="var">ismonoidfununel</span> (<span class="id" title="var">isrigfunismultmonoidfun</span> (<span class="id" title="var">rigisoisrigfun</span> <span class="id" title="var">i</span>))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">intros</span> <span class="id" title="var">x</span>. <span class="id" title="var">use</span> <span class="id" title="var">idpath</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">intros</span> <span class="id" title="var">x</span>. <span class="id" title="var">use</span> <span class="id" title="var">idpath</span>.<br/>
</div>
<span class="id" title="keyword">Opaque</span> <span class="id" title="var">rig_univalence_weq3</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">rig_univlalence_map</span> (<span class="id" title="var">X</span> <span class="id" title="var">Y</span> : <span class="id" title="var">rig</span>) : <span class="id" title="var">X</span> = <span class="id" title="var">Y</span> → <span class="id" title="var">rigiso</span> <span class="id" title="var">X</span> <span class="id" title="var">Y</span>.<br/>
<a class="proof" href="#">Show proof.</a><br/><div class="proof">
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">e</span>. <span class="id" title="tactic">induction</span> <span class="id" title="var">e</span>. <span class="id" title="tactic">exact</span> (<span class="id" title="var">idrigiso</span> <span class="id" title="var">X</span>).<br/>
</div>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">rig_univalence_isweq</span> (<span class="id" title="var">X</span> <span class="id" title="var">Y</span> : <span class="id" title="var">rig</span>) : <span class="id" title="var">isweq</span> (<span class="id" title="var">rig_univlalence_map</span> <span class="id" title="var">X</span> <span class="id" title="var">Y</span>).<br/>
<a class="proof" href="#">Show proof.</a><br/><div class="proof">
&nbsp;&nbsp;<span class="id" title="var">use</span> <span class="id" title="var">isweqhomot</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">exact</span> (<span class="id" title="var">weqcomp</span> (<span class="id" title="var">rig_univalence_weq1</span> <span class="id" title="var">X</span> <span class="id" title="var">Y</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">weqcomp</span> (<span class="id" title="var">rig_univalence_weq2</span> <span class="id" title="var">X</span> <span class="id" title="var">Y</span>) (<span class="id" title="var">rig_univalence_weq3</span> <span class="id" title="var">X</span> <span class="id" title="var">Y</span>))).<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">e</span>. <span class="id" title="tactic">induction</span> <span class="id" title="var">e</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">use</span> (<span class="id" title="var">pathscomp0</span> <span class="id" title="var">weqcomp_to_funcomp_app</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">use</span> <span class="id" title="var">weqcomp_to_funcomp_app</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">use</span> <span class="id" title="var">weqproperty</span>.<br/>
</div>
<span class="id" title="keyword">Opaque</span> <span class="id" title="var">rig_univalence_isweq</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">rig_univalence</span> (<span class="id" title="var">X</span> <span class="id" title="var">Y</span> : <span class="id" title="var">rig</span>) : (<span class="id" title="var">X</span> = <span class="id" title="var">Y</span>) ≃ (<span class="id" title="var">rigiso</span> <span class="id" title="var">X</span> <span class="id" title="var">Y</span>).<br/>
<a class="proof" href="#">Show proof.</a><br/><div class="proof">
&nbsp;&nbsp;<span class="id" title="var">use</span> <span class="id" title="var">weqpair</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">exact</span> (<span class="id" title="var">rig_univlalence_map</span> <span class="id" title="var">X</span> <span class="id" title="var">Y</span>).<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">exact</span> (<span class="id" title="var">rig_univalence_isweq</span> <span class="id" title="var">X</span> <span class="id" title="var">Y</span>).<br/>
</div>
<span class="id" title="keyword">Opaque</span> <span class="id" title="var">rig_univalence</span>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab483"></a><h4 class="section">Relations similar to "greater" or "greater or equal" on rigs</h4>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">isrigmultgt</span> (<span class="id" title="var">X</span> : <span class="id" title="var">rig</span>) (<span class="id" title="var">R</span> : <span class="id" title="var">hrel</span> <span class="id" title="var">X</span>) :=<br/>
&nbsp;&nbsp;∏ (<span class="id" title="var">a</span> <span class="id" title="var">b</span> <span class="id" title="var">c</span> <span class="id" title="var">d</span> : <span class="id" title="var">X</span>), <span class="id" title="var">R</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span> -&gt; <span class="id" title="var">R</span> <span class="id" title="var">c</span> <span class="id" title="var">d</span> -&gt; <span class="id" title="var">R</span> (<span class="id" title="var">op1</span> (<span class="id" title="var">op2</span> <span class="id" title="var">a</span> <span class="id" title="var">c</span>) (<span class="id" title="var">op2</span> <span class="id" title="var">b</span> <span class="id" title="var">d</span>)) (<span class="id" title="var">op1</span> (<span class="id" title="var">op2</span> <span class="id" title="var">a</span> <span class="id" title="var">d</span>) (<span class="id" title="var">op2</span> <span class="id" title="var">b</span> <span class="id" title="var">c</span>)).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">isinvrigmultgt</span> (<span class="id" title="var">X</span> : <span class="id" title="var">rig</span>) (<span class="id" title="var">R</span> : <span class="id" title="var">hrel</span> <span class="id" title="var">X</span>) : <span class="id" title="var">UU</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="var">dirprod</span> (∏ (<span class="id" title="var">a</span> <span class="id" title="var">b</span> <span class="id" title="var">c</span> <span class="id" title="var">d</span> : <span class="id" title="var">X</span>), <span class="id" title="var">R</span> (<span class="id" title="var">op1</span> (<span class="id" title="var">op2</span> <span class="id" title="var">a</span> <span class="id" title="var">c</span>) (<span class="id" title="var">op2</span> <span class="id" title="var">b</span> <span class="id" title="var">d</span>)) (<span class="id" title="var">op1</span> (<span class="id" title="var">op2</span> <span class="id" title="var">a</span> <span class="id" title="var">d</span>) (<span class="id" title="var">op2</span> <span class="id" title="var">b</span> <span class="id" title="var">c</span>)) -&gt; <span class="id" title="var">R</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span> -&gt; <span class="id" title="var">R</span> <span class="id" title="var">c</span> <span class="id" title="var">d</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(∏ (<span class="id" title="var">a</span> <span class="id" title="var">b</span> <span class="id" title="var">c</span> <span class="id" title="var">d</span> : <span class="id" title="var">X</span>), <span class="id" title="var">R</span> (<span class="id" title="var">op1</span> (<span class="id" title="var">op2</span> <span class="id" title="var">a</span> <span class="id" title="var">c</span>) (<span class="id" title="var">op2</span> <span class="id" title="var">b</span> <span class="id" title="var">d</span>)) (<span class="id" title="var">op1</span> (<span class="id" title="var">op2</span> <span class="id" title="var">a</span> <span class="id" title="var">d</span>) (<span class="id" title="var">op2</span> <span class="id" title="var">b</span> <span class="id" title="var">c</span>)) -&gt; <span class="id" title="var">R</span> <span class="id" title="var">c</span> <span class="id" title="var">d</span> -&gt; <span class="id" title="var">R</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span>).<br/>

<br/>
</div>

<div class="doc">
<a name="lab484"></a><h4 class="section">Subobjects</h4>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">issubrig</span> {<span class="id" title="var">X</span> : <span class="id" title="var">rig</span>} (<span class="id" title="var">A</span> : <span class="id" title="var">hsubtype</span> <span class="id" title="var">X</span>) : <span class="id" title="var">UU</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="var">dirprod</span> (@<span class="id" title="var">issubmonoid</span> (<span class="id" title="var">rigaddabmonoid</span> <span class="id" title="var">X</span>) <span class="id" title="var">A</span>) (@<span class="id" title="var">issubmonoid</span> (<span class="id" title="var">rigmultmonoid</span> <span class="id" title="var">X</span>) <span class="id" title="var">A</span>).<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">isapropissubrig</span> {<span class="id" title="var">X</span> : <span class="id" title="var">rig</span>} (<span class="id" title="var">A</span> : <span class="id" title="var">hsubtype</span> <span class="id" title="var">X</span>) : <span class="id" title="var">isaprop</span> (<span class="id" title="var">issubrig</span> <span class="id" title="var">A</span>).<br/>
<a class="proof" href="#">Show proof.</a><br/><div class="proof">
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">apply</span> (<span class="id" title="var">isofhleveldirprod</span> 1).<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <span class="id" title="var">isapropissubmonoid</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <span class="id" title="var">isapropissubmonoid</span>.<br/>
</div>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">subrig</span> (<span class="id" title="var">X</span> : <span class="id" title="var">rig</span>) : <span class="id" title="var">UU</span> := <span class="id" title="var">total2</span> (<span class="id" title="var">λ</span>  <span class="id" title="var">A</span> : <span class="id" title="var">hsubtype</span> <span class="id" title="var">X</span>, <span class="id" title="var">issubrig</span> <span class="id" title="var">A</span>).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">subrigpair</span> {<span class="id" title="var">X</span> : <span class="id" title="var">rig</span>} :<br/>
&nbsp;&nbsp;∏ (<span class="id" title="var">t</span> : <span class="id" title="var">hsubtype</span> <span class="id" title="var">X</span>), (<span class="id" title="var">λ</span> <span class="id" title="var">A</span> : <span class="id" title="var">hsubtype</span> <span class="id" title="var">X</span>, <span class="id" title="var">issubrig</span> <span class="id" title="var">A</span>) <span class="id" title="var">t</span> → ∑ <span class="id" title="var">A</span> : <span class="id" title="var">hsubtype</span> <span class="id" title="var">X</span>, <span class="id" title="var">issubrig</span> <span class="id" title="var">A</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="var">tpair</span> (<span class="id" title="var">λ</span>  <span class="id" title="var">A</span> : <span class="id" title="var">hsubtype</span> <span class="id" title="var">X</span>, <span class="id" title="var">issubrig</span> <span class="id" title="var">A</span>).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">pr1subrig</span> (<span class="id" title="var">X</span> : <span class="id" title="var">rig</span>) : @<span class="id" title="var">subrig</span> <span class="id" title="var">X</span> -&gt; <span class="id" title="var">hsubtype</span> <span class="id" title="var">X</span> :=<br/>
&nbsp;&nbsp;@<span class="id" title="var">pr1</span> <span class="id" title="var">_</span> (<span class="id" title="var">λ</span>  <span class="id" title="var">A</span> : <span class="id" title="var">hsubtype</span> <span class="id" title="var">X</span>, <span class="id" title="var">issubrig</span> <span class="id" title="var">A</span>).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">subrigtosubsetswith2binop</span> (<span class="id" title="var">X</span> : <span class="id" title="var">rig</span>) : <span class="id" title="var">subrig</span> <span class="id" title="var">X</span> -&gt; @<span class="id" title="var">subsetswith2binop</span> <span class="id" title="var">X</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="var">λ</span> <span class="id" title="var">A</span> : <span class="id" title="var">_</span>, <span class="id" title="var">subsetswith2binoppair</span> (<span class="id" title="var">pr1</span> <span class="id" title="var">A</span>) (<span class="id" title="var">dirprodpair</span> (<span class="id" title="var">pr1</span> (<span class="id" title="var">pr1</span> (<span class="id" title="var">pr2</span> <span class="id" title="var">A</span>))) (<span class="id" title="var">pr1</span> (<span class="id" title="var">pr2</span> (<span class="id" title="var">pr2</span> <span class="id" title="var">A</span>)))).<br/>
<span class="id" title="keyword">Coercion</span> <span class="id" title="var">subrigtosubsetswith2binop</span> : <span class="id" title="var">subrig</span> &gt;-&gt; <span class="id" title="var">subsetswith2binop</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">rigaddsubmonoid</span> {<span class="id" title="var">X</span> : <span class="id" title="var">rig</span>} : <span class="id" title="var">subrig</span> <span class="id" title="var">X</span> -&gt; @<span class="id" title="var">subabmonoid</span> (<span class="id" title="var">rigaddabmonoid</span> <span class="id" title="var">X</span>) :=<br/>
&nbsp;&nbsp;<span class="id" title="var">λ</span> <span class="id" title="var">A</span> : <span class="id" title="var">_</span>, @<span class="id" title="var">submonoidpair</span> (<span class="id" title="var">rigaddabmonoid</span> <span class="id" title="var">X</span>) (<span class="id" title="var">pr1</span> <span class="id" title="var">A</span>) (<span class="id" title="var">pr1</span> (<span class="id" title="var">pr2</span> <span class="id" title="var">A</span>)).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">rigmultsubmonoid</span> {<span class="id" title="var">X</span> : <span class="id" title="var">rig</span>} : <span class="id" title="var">subrig</span> <span class="id" title="var">X</span> -&gt; @<span class="id" title="var">submonoid</span> (<span class="id" title="var">rigmultmonoid</span> <span class="id" title="var">X</span>) :=<br/>
&nbsp;&nbsp;<span class="id" title="var">λ</span> <span class="id" title="var">A</span> : <span class="id" title="var">_</span>, @<span class="id" title="var">submonoidpair</span> (<span class="id" title="var">rigmultmonoid</span> <span class="id" title="var">X</span>) (<span class="id" title="var">pr1</span> <span class="id" title="var">A</span>) (<span class="id" title="var">pr2</span> (<span class="id" title="var">pr2</span> <span class="id" title="var">A</span>)).<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">isrigcarrier</span> {<span class="id" title="var">X</span> : <span class="id" title="var">rig</span>} (<span class="id" title="var">A</span> : <span class="id" title="var">subrig</span> <span class="id" title="var">X</span>) : <span class="id" title="var">isrigops</span> (@<span class="id" title="var">op1</span> <span class="id" title="var">A</span>) (@<span class="id" title="var">op2</span> <span class="id" title="var">A</span>).<br/>
<a class="proof" href="#">Show proof.</a><br/><div class="proof">
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">split</span> <span class="id" title="keyword">with</span> (<span class="id" title="var">dirprodpair</span> (<span class="id" title="var">isabmonoidcarrier</span> (<span class="id" title="var">rigaddsubmonoid</span> <span class="id" title="var">A</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">ismonoidcarrier</span> (<span class="id" title="var">rigmultsubmonoid</span> <span class="id" title="var">A</span>))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">intro</span> <span class="id" title="var">a</span>. <span class="id" title="tactic">apply</span> (<span class="id" title="var">invmaponpathsincl</span> <span class="id" title="var">_</span> (<span class="id" title="var">isinclpr1carrier</span> <span class="id" title="var">A</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">rigmult0x</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">intro</span> <span class="id" title="var">a</span>. <span class="id" title="tactic">apply</span> (<span class="id" title="var">invmaponpathsincl</span> <span class="id" title="var">_</span> (<span class="id" title="var">isinclpr1carrier</span> <span class="id" title="var">A</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">rigmultx0</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">intros</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span> <span class="id" title="var">c</span>. <span class="id" title="tactic">apply</span> (<span class="id" title="var">invmaponpathsincl</span> <span class="id" title="var">_</span> (<span class="id" title="var">isinclpr1carrier</span> <span class="id" title="var">A</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">rigldistr</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">intros</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span> <span class="id" title="var">c</span>. <span class="id" title="tactic">apply</span> (<span class="id" title="var">invmaponpathsincl</span> <span class="id" title="var">_</span> (<span class="id" title="var">isinclpr1carrier</span> <span class="id" title="var">A</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">rigrdistr</span>.<br/>
</div>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">carrierofasubrig</span> (<span class="id" title="var">X</span> : <span class="id" title="var">rig</span>) (<span class="id" title="var">A</span> : <span class="id" title="var">subrig</span> <span class="id" title="var">X</span>) : <span class="id" title="var">rig</span>.<br/>
<a class="proof" href="#">Show proof.</a><br/><div class="proof"> <span class="id" title="tactic">intros</span>. <span class="id" title="tactic">split</span> <span class="id" title="keyword">with</span> <span class="id" title="var">A</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">isrigcarrier</span>. </div>
<span class="id" title="keyword">Coercion</span> <span class="id" title="var">carrierofasubrig</span> : <span class="id" title="var">subrig</span> &gt;-&gt; <span class="id" title="var">rig</span>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab485"></a><h4 class="section">Quotient objects</h4>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">rigeqrel</span> {<span class="id" title="var">X</span> : <span class="id" title="var">rig</span>} : <span class="id" title="var">UU</span> := @<span class="id" title="var">twobinopeqrel</span> <span class="id" title="var">X</span>.<br/>
<span class="id" title="keyword">Identity</span> <span class="id" title="keyword">Coercion</span> <span class="id" title="var">id_rigeqrel</span> : <span class="id" title="var">rigeqrel</span> &gt;-&gt; <span class="id" title="var">twobinopeqrel</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">addabmonoideqrel</span> {<span class="id" title="var">X</span> : <span class="id" title="var">rig</span>} (<span class="id" title="var">R</span> : @<span class="id" title="var">rigeqrel</span> <span class="id" title="var">X</span>) :<br/>
&nbsp;&nbsp;@<span class="id" title="var">binopeqrel</span> (<span class="id" title="var">rigaddabmonoid</span> <span class="id" title="var">X</span>) := @<span class="id" title="var">binopeqrelpair</span> (<span class="id" title="var">rigaddabmonoid</span> <span class="id" title="var">X</span>) (<span class="id" title="var">pr1</span> <span class="id" title="var">R</span>) (<span class="id" title="var">pr1</span> (<span class="id" title="var">pr2</span> <span class="id" title="var">R</span>)).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">multmonoideqrel</span> {<span class="id" title="var">X</span> : <span class="id" title="var">rig</span>} (<span class="id" title="var">R</span> : @<span class="id" title="var">rigeqrel</span> <span class="id" title="var">X</span>) :<br/>
&nbsp;&nbsp;@<span class="id" title="var">binopeqrel</span> (<span class="id" title="var">rigmultmonoid</span> <span class="id" title="var">X</span>) := @<span class="id" title="var">binopeqrelpair</span> (<span class="id" title="var">rigmultmonoid</span> <span class="id" title="var">X</span>) (<span class="id" title="var">pr1</span> <span class="id" title="var">R</span>) (<span class="id" title="var">pr2</span> (<span class="id" title="var">pr2</span> <span class="id" title="var">R</span>)).<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">isrigquot</span> {<span class="id" title="var">X</span> : <span class="id" title="var">rig</span>} (<span class="id" title="var">R</span> : @<span class="id" title="var">rigeqrel</span> <span class="id" title="var">X</span>) :<br/>
&nbsp;&nbsp;<span class="id" title="var">isrigops</span> (@<span class="id" title="var">op1</span> (<span class="id" title="var">setwith2binopquot</span> <span class="id" title="var">R</span>)) (@<span class="id" title="var">op2</span> (<span class="id" title="var">setwith2binopquot</span> <span class="id" title="var">R</span>)).<br/>
<a class="proof" href="#">Show proof.</a><br/><div class="proof">
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">split</span> <span class="id" title="keyword">with</span> (<span class="id" title="var">dirprodpair</span> (<span class="id" title="var">isabmonoidquot</span> (<span class="id" title="var">addabmonoideqrel</span> <span class="id" title="var">R</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">ismonoidquot</span> (<span class="id" title="var">multmonoideqrel</span> <span class="id" title="var">R</span>))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">opp1</span> := @<span class="id" title="var">op1</span> (<span class="id" title="var">setwith2binopquot</span> <span class="id" title="var">R</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">opp2</span> := @<span class="id" title="var">op2</span> (<span class="id" title="var">setwith2binopquot</span> <span class="id" title="var">R</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">zr</span> := <span class="id" title="var">setquotpr</span> <span class="id" title="var">R</span> (@<span class="id" title="var">rigunel1</span> <span class="id" title="var">X</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> (<span class="id" title="var">setquotunivprop</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">R</span> (<span class="id" title="var">λ</span> <span class="id" title="var">x</span> , <span class="id" title="var">hProppair</span> <span class="id" title="var">_</span> (<span class="id" title="var">setproperty</span> (<span class="id" title="var">setwith2binopquot</span> <span class="id" title="var">R</span>) (<span class="id" title="var">opp2</span> <span class="id" title="var">zr</span> <span class="id" title="var">x</span>) <span class="id" title="var">zr</span>))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intro</span> <span class="id" title="var">x</span>. <span class="id" title="tactic">apply</span> (<span class="id" title="var">maponpaths</span> (<span class="id" title="var">setquotpr</span> <span class="id" title="var">R</span>) (<span class="id" title="var">rigmult0x</span> <span class="id" title="var">X</span> <span class="id" title="var">x</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> (<span class="id" title="var">setquotunivprop</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">R</span> (<span class="id" title="var">λ</span> <span class="id" title="var">x</span> , <span class="id" title="var">hProppair</span> <span class="id" title="var">_</span> (<span class="id" title="var">setproperty</span> (<span class="id" title="var">setwith2binopquot</span> <span class="id" title="var">R</span>) (<span class="id" title="var">opp2</span> <span class="id" title="var">x</span> <span class="id" title="var">zr</span>) <span class="id" title="var">zr</span>))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intro</span> <span class="id" title="var">x</span>. <span class="id" title="tactic">apply</span> (<span class="id" title="var">maponpaths</span> (<span class="id" title="var">setquotpr</span> <span class="id" title="var">R</span>) (<span class="id" title="var">rigmultx0</span> <span class="id" title="var">X</span> <span class="id" title="var">x</span>)).<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">set</span> (<span class="id" title="var">opp1</span> := @<span class="id" title="var">op1</span> (<span class="id" title="var">setwith2binopquot</span> <span class="id" title="var">R</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">opp2</span> := @<span class="id" title="var">op2</span> (<span class="id" title="var">setwith2binopquot</span> <span class="id" title="var">R</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">unfold</span> <span class="id" title="var">isldistr</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">setquotuniv3prop</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">R</span> (<span class="id" title="var">λ</span> <span class="id" title="var">x</span> <span class="id" title="var">x'</span> <span class="id" title="var">x''</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">hProppair</span> <span class="id" title="var">_</span> (<span class="id" title="var">setproperty</span> (<span class="id" title="var">setwith2binopquot</span> <span class="id" title="var">R</span>) (<span class="id" title="var">opp2</span>  <span class="id" title="var">x''</span> (<span class="id" title="var">opp1</span> <span class="id" title="var">x</span> <span class="id" title="var">x'</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">opp1</span> (<span class="id" title="var">opp2</span> <span class="id" title="var">x''</span> <span class="id" title="var">x</span>) (<span class="id" title="var">opp2</span> <span class="id" title="var">x''</span> <span class="id" title="var">x'</span>))))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">x</span> <span class="id" title="var">x'</span> <span class="id" title="var">x''</span>. <span class="id" title="tactic">apply</span> (<span class="id" title="var">maponpaths</span> (<span class="id" title="var">setquotpr</span> <span class="id" title="var">R</span>) (<span class="id" title="var">rigldistr</span> <span class="id" title="var">X</span> <span class="id" title="var">x</span> <span class="id" title="var">x'</span> <span class="id" title="var">x''</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">unfold</span> <span class="id" title="var">isrdistr</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">setquotuniv3prop</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">R</span> (<span class="id" title="var">λ</span> <span class="id" title="var">x</span> <span class="id" title="var">x'</span> <span class="id" title="var">x''</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">hProppair</span> <span class="id" title="var">_</span> (<span class="id" title="var">setproperty</span> (<span class="id" title="var">setwith2binopquot</span> <span class="id" title="var">R</span>) (<span class="id" title="var">opp2</span>  (<span class="id" title="var">opp1</span> <span class="id" title="var">x</span> <span class="id" title="var">x'</span>) <span class="id" title="var">x''</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">opp1</span> (<span class="id" title="var">opp2</span> <span class="id" title="var">x</span> <span class="id" title="var">x''</span>) (<span class="id" title="var">opp2</span> <span class="id" title="var">x'</span> <span class="id" title="var">x''</span>))))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">x</span> <span class="id" title="var">x'</span> <span class="id" title="var">x''</span>. <span class="id" title="tactic">apply</span> (<span class="id" title="var">maponpaths</span> (<span class="id" title="var">setquotpr</span> <span class="id" title="var">R</span>) (<span class="id" title="var">rigrdistr</span> <span class="id" title="var">X</span> <span class="id" title="var">x</span> <span class="id" title="var">x'</span> <span class="id" title="var">x''</span>)).<br/>
</div>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">rigquot</span> {<span class="id" title="var">X</span> : <span class="id" title="var">rig</span>} (<span class="id" title="var">R</span> : @<span class="id" title="var">rigeqrel</span> <span class="id" title="var">X</span>) : <span class="id" title="var">rig</span> :=<br/>
&nbsp;&nbsp;@<span class="id" title="var">rigpair</span> (<span class="id" title="var">setwith2binopquot</span> <span class="id" title="var">R</span>) (<span class="id" title="var">isrigquot</span> <span class="id" title="var">R</span>).<br/>

<br/>
</div>

<div class="doc">
<a name="lab486"></a><h4 class="section">Direct products</h4>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">isrigdirprod</span> (<span class="id" title="var">X</span> <span class="id" title="var">Y</span> : <span class="id" title="var">rig</span>) :<br/>
&nbsp;&nbsp;<span class="id" title="var">isrigops</span> (@<span class="id" title="var">op1</span> (<span class="id" title="var">setwith2binopdirprod</span> <span class="id" title="var">X</span> <span class="id" title="var">Y</span>)) (@<span class="id" title="var">op2</span> (<span class="id" title="var">setwith2binopdirprod</span> <span class="id" title="var">X</span> <span class="id" title="var">Y</span>)).<br/>
<a class="proof" href="#">Show proof.</a><br/><div class="proof">
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">split</span> <span class="id" title="keyword">with</span> (<span class="id" title="var">dirprodpair</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">isabmonoiddirprod</span> (<span class="id" title="var">rigaddabmonoid</span> <span class="id" title="var">X</span>) (<span class="id" title="var">rigaddabmonoid</span> <span class="id" title="var">Y</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">ismonoiddirprod</span> (<span class="id" title="var">rigmultmonoid</span> <span class="id" title="var">X</span>) (<span class="id" title="var">rigmultmonoid</span> <span class="id" title="var">Y</span>))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">intro</span> <span class="id" title="var">xy</span>. <span class="id" title="tactic">unfold</span> <span class="id" title="var">setwith2binopdirprod</span>. <span class="id" title="tactic">unfold</span> <span class="id" title="var">op1</span>. <span class="id" title="tactic">unfold</span> <span class="id" title="var">op2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">ismonoiddirprod</span>. <span class="id" title="tactic">unfold</span> <span class="id" title="var">unel_is</span>. <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">pathsdirprod</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">rigmult0x</span> <span class="id" title="var">X</span>). <span class="id" title="tactic">apply</span> (<span class="id" title="var">rigmult0x</span> <span class="id" title="var">Y</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">intro</span> <span class="id" title="var">xy</span>. <span class="id" title="tactic">unfold</span> <span class="id" title="var">setwith2binopdirprod</span>. <span class="id" title="tactic">unfold</span> <span class="id" title="var">op1</span>. <span class="id" title="tactic">unfold</span> <span class="id" title="var">op2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">ismonoiddirprod</span>. <span class="id" title="tactic">unfold</span> <span class="id" title="var">unel_is</span>. <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">pathsdirprod</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">rigmultx0</span> <span class="id" title="var">X</span>). <span class="id" title="tactic">apply</span> (<span class="id" title="var">rigmultx0</span> <span class="id" title="var">Y</span>).<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">intros</span> <span class="id" title="var">xy</span> <span class="id" title="var">xy'</span> <span class="id" title="var">xy''</span>. <span class="id" title="tactic">unfold</span> <span class="id" title="var">setwith2binopdirprod</span>. <span class="id" title="tactic">unfold</span> <span class="id" title="var">op1</span>. <span class="id" title="tactic">unfold</span> <span class="id" title="var">op2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">pathsdirprod</span>. <span class="id" title="tactic">apply</span> (<span class="id" title="var">rigldistr</span> <span class="id" title="var">X</span>). <span class="id" title="tactic">apply</span> (<span class="id" title="var">rigldistr</span> <span class="id" title="var">Y</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">intros</span> <span class="id" title="var">xy</span> <span class="id" title="var">xy'</span> <span class="id" title="var">xy''</span>. <span class="id" title="tactic">unfold</span> <span class="id" title="var">setwith2binopdirprod</span>. <span class="id" title="tactic">unfold</span> <span class="id" title="var">op1</span>. <span class="id" title="tactic">unfold</span> <span class="id" title="var">op2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">pathsdirprod</span>. <span class="id" title="tactic">apply</span> (<span class="id" title="var">rigrdistr</span> <span class="id" title="var">X</span>). <span class="id" title="tactic">apply</span> (<span class="id" title="var">rigrdistr</span> <span class="id" title="var">Y</span>).<br/>
</div>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">rigdirprod</span> (<span class="id" title="var">X</span> <span class="id" title="var">Y</span> : <span class="id" title="var">rig</span>) : <span class="id" title="var">rig</span> := @<span class="id" title="var">rigpair</span> (<span class="id" title="var">setwith2binopdirprod</span> <span class="id" title="var">X</span> <span class="id" title="var">Y</span>) (<span class="id" title="var">isrigdirprod</span> <span class="id" title="var">X</span> <span class="id" title="var">Y</span>).<br/>

<br/>
</div>

<div class="doc">
<a name="lab487"></a><h4 class="section">Opposite rigs</h4>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Local Open</span> <span class="id" title="keyword">Scope</span> <span class="id" title="var">rig</span>.<br/>

<br/>
</div>

<div class="doc">
Following Bourbaki's Algebra, I, §8.3, Example V 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <span class="id" title="var">opposite_rig</span> (<span class="id" title="var">X</span> : <span class="id" title="var">rig</span>) : <span class="id" title="var">rig</span>.<br/>
<a class="proof" href="#">Show proof.</a><br/><div class="proof">

<br/>
&nbsp;&nbsp;<span class="id" title="tactic">refine</span> (<span class="id" title="var">setwith2binoppair</span> (<span class="id" title="var">pr1</span> (<span class="id" title="var">pr1rig</span> <span class="id" title="var">X</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">dirprodpair</span> (<span class="id" title="var">pr1</span> (<span class="id" title="var">pr2</span> (<span class="id" title="var">pr1rig</span> <span class="id" title="var">X</span>)))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">fun</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> =&gt; <span class="id" title="var">y</span> * <span class="id" title="var">x</span>)%<span class="id" title="var">rig</span>),, <span class="id" title="var">_</span>).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">op2</span>; <span class="id" title="var">cbn</span>; <span class="id" title="tactic">fold</span> (@<span class="id" title="var">op1</span> <span class="id" title="var">X</span>) (@<span class="id" title="var">op2</span> <span class="id" title="var">X</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">mk_isrigops</span> (<span class="id" title="var">rigop1axs</span> <span class="id" title="var">X</span>)).<br/>

<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <span class="id" title="var">mk_ismonoidop</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">exact</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">z</span> =&gt; !(<span class="id" title="var">rigassoc2</span> <span class="id" title="var">_</span> <span class="id" title="var">z</span> <span class="id" title="var">y</span> <span class="id" title="var">x</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">refine</span> (1,, <span class="id" title="var">_</span>). &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exact</span> (<span class="id" title="var">dirprodpair</span> (<span class="id" title="var">rigrunax2</span> <span class="id" title="var">_</span>) (<span class="id" title="var">riglunax2</span> <span class="id" title="var">_</span>)).<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">exact</span> (<span class="id" title="var">rigmultx0</span> <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">exact</span> (<span class="id" title="var">rigmult0x</span> <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">exact</span> (<span class="id" title="var">dirprodpair</span> (<span class="id" title="var">rigrdistr</span> <span class="id" title="var">_</span>) (<span class="id" title="var">rigldistr</span> <span class="id" title="var">_</span>)).<br/>
</div>

<br/>
</div>

<div class="doc">
In Emacs, use the function insert-char and choose SUPERSCRIPT ZERO 
</div>
<div class="code">
<span class="id" title="keyword">Notation</span> &quot;X ⁰" := (<span class="id" title="var">opposite_rig</span> <span class="id" title="var">X</span>) (<span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 12) : <span class="id" title="var">rig_scope</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">opposite_opposite_rig</span> (<span class="id" title="var">X</span> : <span class="id" title="var">rig</span>) : <span class="id" title="var">rigiso</span> <span class="id" title="var">X</span> ((<span class="id" title="var">X⁰</span>)<span class="id" title="var">⁰</span>).<br/>
<a class="proof" href="#">Show proof.</a><br/><div class="proof">
&nbsp;&nbsp;<span class="id" title="tactic">refine</span> ((<span class="id" title="var">idfun</span> <span class="id" title="var">X</span>,, <span class="id" title="var">idisweq</span> <span class="id" title="var">X</span>),, <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="tactic">split</span>.<br/>
</div>

<br/>
</div>

<div class="doc">
<a name="lab488"></a><h4 class="section">Nonzero rigs</h4>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">isnonzerorig</span> (<span class="id" title="var">X</span> : <span class="id" title="var">rig</span>) : <span class="id" title="var">hProp</span>.<br/>
<a class="proof" href="#">Show proof.</a><br/><div class="proof">
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>; <span class="id" title="var">use</span> <span class="id" title="var">hProppair</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">exact</span> (¬ (@<span class="id" title="var">paths</span> <span class="id" title="var">X</span> 1 0)).<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <span class="id" title="var">isapropneg</span>.<br/>
</div>

<br/>
<span class="id" title="keyword">Local Close</span> <span class="id" title="keyword">Scope</span> <span class="id" title="var">rig</span>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab489"></a><h3 class="section">Commutative rigs</h3>

<div class="paragraph"> </div>

<a name="lab490"></a><h4 class="section">General definitions</h4>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">commrig</span> : <span class="id" title="var">UU</span> := <span class="id" title="var">total2</span> (<span class="id" title="var">λ</span> <span class="id" title="var">X</span> : <span class="id" title="var">setwith2binop</span>, <span class="id" title="var">iscommrigops</span> (@<span class="id" title="var">op1</span> <span class="id" title="var">X</span>) (@<span class="id" title="var">op2</span> <span class="id" title="var">X</span>)).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">commrigpair</span> (<span class="id" title="var">X</span> : <span class="id" title="var">setwith2binop</span>) (<span class="id" title="keyword">is</span> : <span class="id" title="var">iscommrigops</span> (@<span class="id" title="var">op1</span> <span class="id" title="var">X</span>) (@<span class="id" title="var">op2</span> <span class="id" title="var">X</span>)) : <span class="id" title="var">commrig</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="var">tpair</span> (<span class="id" title="var">λ</span> <span class="id" title="var">X</span> : <span class="id" title="var">setwith2binop</span>, <span class="id" title="var">iscommrigops</span> (@<span class="id" title="var">op1</span> <span class="id" title="var">X</span>) (@<span class="id" title="var">op2</span> <span class="id" title="var">X</span>)) <span class="id" title="var">X</span> <span class="id" title="keyword">is</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">commrigconstr</span> {<span class="id" title="var">X</span> : <span class="id" title="var">hSet</span>} (<span class="id" title="var">opp1</span> <span class="id" title="var">opp2</span> : <span class="id" title="var">binop</span> <span class="id" title="var">X</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">ax11</span> : <span class="id" title="var">ismonoidop</span> <span class="id" title="var">opp1</span>) (<span class="id" title="var">ax12</span> : <span class="id" title="var">iscomm</span> <span class="id" title="var">opp1</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">ax2</span> : <span class="id" title="var">ismonoidop</span> <span class="id" title="var">opp2</span>) (<span class="id" title="var">ax22</span> : <span class="id" title="var">iscomm</span> <span class="id" title="var">opp2</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">m0x</span> : ∏ <span class="id" title="var">x</span> : <span class="id" title="var">X</span>, <span class="id" title="var">paths</span> (<span class="id" title="var">opp2</span> (<span class="id" title="var">unel_is</span> <span class="id" title="var">ax11</span>) <span class="id" title="var">x</span>) (<span class="id" title="var">unel_is</span> <span class="id" title="var">ax11</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">mx0</span> : ∏ <span class="id" title="var">x</span> : <span class="id" title="var">X</span>, <span class="id" title="var">paths</span> (<span class="id" title="var">opp2</span> <span class="id" title="var">x</span> (<span class="id" title="var">unel_is</span> <span class="id" title="var">ax11</span>)) (<span class="id" title="var">unel_is</span> <span class="id" title="var">ax11</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">dax</span> : <span class="id" title="var">isdistr</span> <span class="id" title="var">opp1</span> <span class="id" title="var">opp2</span>) : <span class="id" title="var">commrig</span>.<br/>
<a class="proof" href="#">Show proof.</a><br/><div class="proof">
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">split</span> <span class="id" title="keyword">with</span>  (<span class="id" title="var">setwith2binoppair</span> <span class="id" title="var">X</span> (<span class="id" title="var">dirprodpair</span> <span class="id" title="var">opp1</span> <span class="id" title="var">opp2</span>)).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">split</span> <span class="id" title="keyword">with</span> (<span class="id" title="var">dirprodpair</span> (<span class="id" title="var">dirprodpair</span> <span class="id" title="var">ax11</span> <span class="id" title="var">ax12</span>) <span class="id" title="var">ax2</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">dirprodpair</span> <span class="id" title="var">m0x</span> <span class="id" title="var">mx0</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <span class="id" title="var">dax</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <span class="id" title="var">ax22</span>.<br/>
</div>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">commrigtorig</span> : <span class="id" title="var">commrig</span> -&gt; <span class="id" title="var">rig</span> := <span class="id" title="var">λ</span> <span class="id" title="var">X</span> : <span class="id" title="var">_</span>, @<span class="id" title="var">rigpair</span> (<span class="id" title="var">pr1</span> <span class="id" title="var">X</span>) (<span class="id" title="var">pr1</span> (<span class="id" title="var">pr2</span> <span class="id" title="var">X</span>)).<br/>
<span class="id" title="keyword">Coercion</span> <span class="id" title="var">commrigtorig</span> : <span class="id" title="var">commrig</span> &gt;-&gt; <span class="id" title="var">rig</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">rigcomm2</span> (<span class="id" title="var">X</span> : <span class="id" title="var">commrig</span>) : <span class="id" title="var">iscomm</span> (@<span class="id" title="var">op2</span> <span class="id" title="var">X</span>) := <span class="id" title="var">pr2</span> (<span class="id" title="var">pr2</span> <span class="id" title="var">X</span>).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">commrigop2axs</span> (<span class="id" title="var">X</span> : <span class="id" title="var">commrig</span>) : <span class="id" title="var">isabmonoidop</span> (@<span class="id" title="var">op2</span> <span class="id" title="var">X</span>) :=<br/>
&nbsp;&nbsp;<span class="id" title="var">tpair</span> <span class="id" title="var">_</span> (<span class="id" title="var">rigop2axs</span> <span class="id" title="var">X</span>) (<span class="id" title="var">rigcomm2</span> <span class="id" title="var">X</span>).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">commrigmultabmonoid</span> (<span class="id" title="var">X</span> : <span class="id" title="var">commrig</span>) : <span class="id" title="var">abmonoid</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="var">abmonoidpair</span> (<span class="id" title="var">setwithbinoppair</span> <span class="id" title="var">X</span> <span class="id" title="var">op2</span>) (<span class="id" title="var">dirprodpair</span> (<span class="id" title="var">rigop2axs</span> <span class="id" title="var">X</span>) (<span class="id" title="var">rigcomm2</span> <span class="id" title="var">X</span>)).<br/>

<br/>
</div>

<div class="doc">
<a name="lab491"></a><h4 class="section">(X = Y) ≃ (rigiso X Y)</h4>

    We use the following composition

<div class="paragraph"> </div>

                          (X = Y) ≃ (mk_commrig' X = mk_commrig' Y)
                                  ≃ ((pr1 (mk_commrig' X)) = (pr1 (mk_commrig' Y)))
                                  ≃ (rigiso X Y)

<div class="paragraph"> </div>

    where the third weak equivalence uses univalence for rigs, <span class="inlinecode"><span class="id" title="var">rig_univalence</span></span>. We define
    <span class="inlinecode"><span class="id" title="var">commrig'</span></span> to be able to apply it.
 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Local</span> <span class="id" title="keyword">Definition</span> <span class="id" title="var">commrig'</span> : <span class="id" title="var">UU</span> :=<br/>
&nbsp;&nbsp;∑ <span class="id" title="var">D</span> : (∑ <span class="id" title="var">X</span> : <span class="id" title="var">setwith2binop</span>, <span class="id" title="var">isrigops</span> (@<span class="id" title="var">op1</span> <span class="id" title="var">X</span>) (@<span class="id" title="var">op2</span> <span class="id" title="var">X</span>)), <span class="id" title="var">iscomm</span> (@<span class="id" title="var">op2</span> (<span class="id" title="var">pr1</span> <span class="id" title="var">D</span>)).<br/>

<br/>
<span class="id" title="keyword">Local</span> <span class="id" title="keyword">Definition</span> <span class="id" title="var">mk_commrig'</span> (<span class="id" title="var">CR</span> : <span class="id" title="var">commrig</span>) : <span class="id" title="var">commrig'</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="var">tpair</span> <span class="id" title="var">_</span> (<span class="id" title="var">tpair</span> <span class="id" title="var">_</span> (<span class="id" title="var">pr1</span> <span class="id" title="var">CR</span>) (<span class="id" title="var">dirprod_pr1</span> (<span class="id" title="var">pr2</span> <span class="id" title="var">CR</span>))) (<span class="id" title="var">dirprod_pr2</span> (<span class="id" title="var">pr2</span> <span class="id" title="var">CR</span>)).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">commrig_univalence_weq1</span> : <span class="id" title="var">commrig</span> ≃ <span class="id" title="var">commrig'</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="var">weqtotal2asstol</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">λ</span> <span class="id" title="var">X</span> : <span class="id" title="var">setwith2binop</span>, <span class="id" title="var">isrigops</span> (@<span class="id" title="var">op1</span> <span class="id" title="var">X</span>) (@<span class="id" title="var">op2</span> <span class="id" title="var">X</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">fun</span> <span class="id" title="var">y</span> : (∑ (<span class="id" title="var">X</span> : <span class="id" title="var">setwith2binop</span>), <span class="id" title="var">isrigops</span> (@<span class="id" title="var">op1</span> <span class="id" title="var">X</span>) (@<span class="id" title="var">op2</span> <span class="id" title="var">X</span>)) =&gt; <span class="id" title="var">iscomm</span> (@<span class="id" title="var">op2</span> (<span class="id" title="var">pr1</span> <span class="id" title="var">y</span>))).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">commrig_univalence_weq1'</span> (<span class="id" title="var">X</span> <span class="id" title="var">Y</span> : <span class="id" title="var">commrig</span>) : (<span class="id" title="var">X</span> = <span class="id" title="var">Y</span>) ≃ (<span class="id" title="var">mk_commrig'</span> <span class="id" title="var">X</span> = <span class="id" title="var">mk_commrig'</span> <span class="id" title="var">Y</span>) :=<br/>
&nbsp;&nbsp;<span class="id" title="var">weqpair</span> <span class="id" title="var">_</span> (@<span class="id" title="var">isweqmaponpaths</span> <span class="id" title="var">commrig</span> <span class="id" title="var">commrig'</span> <span class="id" title="var">commrig_univalence_weq1</span> <span class="id" title="var">X</span> <span class="id" title="var">Y</span>).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">commrig_univalence_weq2</span> (<span class="id" title="var">X</span> <span class="id" title="var">Y</span> : <span class="id" title="var">commrig</span>) :<br/>
&nbsp;&nbsp;((<span class="id" title="var">mk_commrig'</span> <span class="id" title="var">X</span>) = (<span class="id" title="var">mk_commrig'</span> <span class="id" title="var">Y</span>)) ≃ ((<span class="id" title="var">pr1</span> (<span class="id" title="var">mk_commrig'</span> <span class="id" title="var">X</span>)) = (<span class="id" title="var">pr1</span> (<span class="id" title="var">mk_commrig'</span> <span class="id" title="var">Y</span>))).<br/>
<a class="proof" href="#">Show proof.</a><br/><div class="proof">
&nbsp;&nbsp;<span class="id" title="var">use</span> <span class="id" title="var">subtypeInjectivity</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">w</span>. <span class="id" title="var">use</span> <span class="id" title="var">isapropiscomm</span>.<br/>
</div>
<span class="id" title="keyword">Opaque</span> <span class="id" title="var">commrig_univalence_weq2</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">commrig_univalence_weq3</span> (<span class="id" title="var">X</span> <span class="id" title="var">Y</span> : <span class="id" title="var">commrig</span>) :<br/>
&nbsp;&nbsp;((<span class="id" title="var">pr1</span> (<span class="id" title="var">mk_commrig'</span> <span class="id" title="var">X</span>)) = (<span class="id" title="var">pr1</span> (<span class="id" title="var">mk_commrig'</span> <span class="id" title="var">Y</span>))) ≃ (<span class="id" title="var">rigiso</span> <span class="id" title="var">X</span> <span class="id" title="var">Y</span>) :=<br/>
&nbsp;&nbsp;<span class="id" title="var">rig_univalence</span> (<span class="id" title="var">pr1</span> (<span class="id" title="var">mk_commrig'</span> <span class="id" title="var">X</span>)) (<span class="id" title="var">pr1</span> (<span class="id" title="var">mk_commrig'</span> <span class="id" title="var">Y</span>)).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">commrig_univalence_map</span> (<span class="id" title="var">X</span> <span class="id" title="var">Y</span> : <span class="id" title="var">commrig</span>) : (<span class="id" title="var">X</span> = <span class="id" title="var">Y</span>) -&gt; (<span class="id" title="var">rigiso</span> <span class="id" title="var">X</span> <span class="id" title="var">Y</span>).<br/>
<a class="proof" href="#">Show proof.</a><br/><div class="proof">
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">e</span>. <span class="id" title="tactic">induction</span> <span class="id" title="var">e</span>. <span class="id" title="tactic">exact</span> (<span class="id" title="var">idrigiso</span> <span class="id" title="var">X</span>).<br/>
</div>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">commrig_univalence_isweq</span> (<span class="id" title="var">X</span> <span class="id" title="var">Y</span> : <span class="id" title="var">commrig</span>) : <span class="id" title="var">isweq</span> (<span class="id" title="var">commrig_univalence_map</span> <span class="id" title="var">X</span> <span class="id" title="var">Y</span>).<br/>
<a class="proof" href="#">Show proof.</a><br/><div class="proof">
&nbsp;&nbsp;<span class="id" title="var">use</span> <span class="id" title="var">isweqhomot</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">exact</span> (<span class="id" title="var">weqcomp</span> (<span class="id" title="var">commrig_univalence_weq1'</span> <span class="id" title="var">X</span> <span class="id" title="var">Y</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">weqcomp</span> (<span class="id" title="var">commrig_univalence_weq2</span> <span class="id" title="var">X</span> <span class="id" title="var">Y</span>) (<span class="id" title="var">commrig_univalence_weq3</span> <span class="id" title="var">X</span> <span class="id" title="var">Y</span>))).<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">e</span>. <span class="id" title="tactic">induction</span> <span class="id" title="var">e</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">use</span> (<span class="id" title="var">pathscomp0</span> <span class="id" title="var">weqcomp_to_funcomp_app</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">use</span> <span class="id" title="var">weqcomp_to_funcomp_app</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">use</span> <span class="id" title="var">weqproperty</span>.<br/>
</div>
<span class="id" title="keyword">Opaque</span> <span class="id" title="var">commrig_univalence_isweq</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">commrig_univalence</span> (<span class="id" title="var">X</span> <span class="id" title="var">Y</span> : <span class="id" title="var">commrig</span>) : (<span class="id" title="var">X</span> = <span class="id" title="var">Y</span>) ≃ (<span class="id" title="var">rigiso</span> <span class="id" title="var">X</span> <span class="id" title="var">Y</span>).<br/>
<a class="proof" href="#">Show proof.</a><br/><div class="proof">
&nbsp;&nbsp;<span class="id" title="var">use</span> <span class="id" title="var">weqpair</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">exact</span> (<span class="id" title="var">commrig_univalence_map</span> <span class="id" title="var">X</span> <span class="id" title="var">Y</span>).<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">exact</span> (<span class="id" title="var">commrig_univalence_isweq</span> <span class="id" title="var">X</span> <span class="id" title="var">Y</span>).<br/>
</div>
<span class="id" title="keyword">Opaque</span> <span class="id" title="var">commrig_univalence</span>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab492"></a><h4 class="section">Relations similar to "greater" on commutative rigs</h4>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">isinvrigmultgtif</span> (<span class="id" title="var">X</span> : <span class="id" title="var">commrig</span>) (<span class="id" title="var">R</span> : <span class="id" title="var">hrel</span> <span class="id" title="var">X</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">is2</span> : ∏ <span class="id" title="var">a</span> <span class="id" title="var">b</span> <span class="id" title="var">c</span> <span class="id" title="var">d</span>, <span class="id" title="var">R</span> (<span class="id" title="var">op1</span> (<span class="id" title="var">op2</span> <span class="id" title="var">a</span> <span class="id" title="var">c</span>) (<span class="id" title="var">op2</span> <span class="id" title="var">b</span> <span class="id" title="var">d</span>)) (<span class="id" title="var">op1</span> (<span class="id" title="var">op2</span> <span class="id" title="var">a</span> <span class="id" title="var">d</span>) (<span class="id" title="var">op2</span> <span class="id" title="var">b</span> <span class="id" title="var">c</span>)) -&gt; <span class="id" title="var">R</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span> -&gt; <span class="id" title="var">R</span> <span class="id" title="var">c</span> <span class="id" title="var">d</span>) :<br/>
&nbsp;&nbsp;<span class="id" title="var">isinvrigmultgt</span> <span class="id" title="var">X</span> <span class="id" title="var">R</span>.<br/>
<a class="proof" href="#">Show proof.</a><br/><div class="proof">
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <span class="id" title="var">is2</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span> <span class="id" title="var">c</span> <span class="id" title="var">d</span> <span class="id" title="var">r</span> <span class="id" title="var">rcd</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="var">rigcomm1</span> <span class="id" title="var">X</span> (<span class="id" title="var">op2</span> <span class="id" title="var">a</span> <span class="id" title="var">d</span>) <span class="id" title="var">_</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">r</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="var">rigcomm2</span> <span class="id" title="var">X</span> <span class="id" title="var">a</span> <span class="id" title="var">c</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">r</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="var">rigcomm2</span> <span class="id" title="var">X</span> <span class="id" title="var">b</span> <span class="id" title="var">d</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">r</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="var">rigcomm2</span> <span class="id" title="var">X</span> <span class="id" title="var">b</span> <span class="id" title="var">c</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">r</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="var">rigcomm2</span> <span class="id" title="var">X</span> <span class="id" title="var">a</span> <span class="id" title="var">d</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">r</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">is2</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">r</span> <span class="id" title="var">rcd</span>).<br/>
</div>

<br/>
</div>

<div class="doc">
<a name="lab493"></a><h4 class="section">Subobjects</h4>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">iscommrigcarrier</span> {<span class="id" title="var">X</span> : <span class="id" title="var">commrig</span>} (<span class="id" title="var">A</span> : @<span class="id" title="var">subrig</span> <span class="id" title="var">X</span>) : <span class="id" title="var">iscommrigops</span> (@<span class="id" title="var">op1</span> <span class="id" title="var">A</span>) (@<span class="id" title="var">op2</span> <span class="id" title="var">A</span>).<br/>
<a class="proof" href="#">Show proof.</a><br/><div class="proof">
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">split</span> <span class="id" title="keyword">with</span> (<span class="id" title="var">isrigcarrier</span> <span class="id" title="var">A</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">pr2</span> (@<span class="id" title="var">isabmonoidcarrier</span> (<span class="id" title="var">commrigmultabmonoid</span> <span class="id" title="var">X</span>) (<span class="id" title="var">rigmultsubmonoid</span> <span class="id" title="var">A</span>))).<br/>
</div>

<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">carrierofasubcommrig</span> {<span class="id" title="var">X</span> : <span class="id" title="var">commrig</span>} (<span class="id" title="var">A</span> : @<span class="id" title="var">subrig</span> <span class="id" title="var">X</span>) : <span class="id" title="var">commrig</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="var">commrigpair</span> <span class="id" title="var">A</span> (<span class="id" title="var">iscommrigcarrier</span> <span class="id" title="var">A</span>).<br/>

<br/>
</div>

<div class="doc">
<a name="lab494"></a><h4 class="section">Quotient objects</h4>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">iscommrigquot</span> {<span class="id" title="var">X</span> : <span class="id" title="var">commrig</span>} (<span class="id" title="var">R</span> : @<span class="id" title="var">rigeqrel</span> <span class="id" title="var">X</span>) :<br/>
&nbsp;&nbsp;<span class="id" title="var">iscommrigops</span> (@<span class="id" title="var">op1</span> (<span class="id" title="var">setwith2binopquot</span> <span class="id" title="var">R</span>)) (@<span class="id" title="var">op2</span> (<span class="id" title="var">setwith2binopquot</span> <span class="id" title="var">R</span>)).<br/>
<a class="proof" href="#">Show proof.</a><br/><div class="proof">
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">split</span> <span class="id" title="keyword">with</span> (<span class="id" title="var">isrigquot</span> <span class="id" title="var">R</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">pr2</span> (@<span class="id" title="var">isabmonoidquot</span>  (<span class="id" title="var">commrigmultabmonoid</span> <span class="id" title="var">X</span>) (<span class="id" title="var">multmonoideqrel</span> <span class="id" title="var">R</span>))).<br/>
</div>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">commrigquot</span> {<span class="id" title="var">X</span> : <span class="id" title="var">commrig</span>} (<span class="id" title="var">R</span> : @<span class="id" title="var">rigeqrel</span> <span class="id" title="var">X</span>) : <span class="id" title="var">commrig</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="var">commrigpair</span> (<span class="id" title="var">setwith2binopquot</span> <span class="id" title="var">R</span>) (<span class="id" title="var">iscommrigquot</span> <span class="id" title="var">R</span>).<br/>

<br/>
</div>

<div class="doc">
<a name="lab495"></a><h4 class="section">Direct products</h4>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">iscommrigdirprod</span> (<span class="id" title="var">X</span> <span class="id" title="var">Y</span> : <span class="id" title="var">commrig</span>) :<br/>
&nbsp;&nbsp;<span class="id" title="var">iscommrigops</span> (@<span class="id" title="var">op1</span> (<span class="id" title="var">setwith2binopdirprod</span> <span class="id" title="var">X</span> <span class="id" title="var">Y</span>)) (@<span class="id" title="var">op2</span> (<span class="id" title="var">setwith2binopdirprod</span> <span class="id" title="var">X</span> <span class="id" title="var">Y</span>)).<br/>
<a class="proof" href="#">Show proof.</a><br/><div class="proof">
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">split</span> <span class="id" title="keyword">with</span> (<span class="id" title="var">isrigdirprod</span> <span class="id" title="var">X</span> <span class="id" title="var">Y</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">pr2</span> (<span class="id" title="var">isabmonoiddirprod</span> (<span class="id" title="var">commrigmultabmonoid</span> <span class="id" title="var">X</span>) (<span class="id" title="var">commrigmultabmonoid</span> <span class="id" title="var">Y</span>))).<br/>
</div>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">commrigdirprod</span> (<span class="id" title="var">X</span> <span class="id" title="var">Y</span> : <span class="id" title="var">commrig</span>) : <span class="id" title="var">commrig</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="var">commrigpair</span> (<span class="id" title="var">setwith2binopdirprod</span> <span class="id" title="var">X</span> <span class="id" title="var">Y</span>) (<span class="id" title="var">iscommrigdirprod</span> <span class="id" title="var">X</span> <span class="id" title="var">Y</span>).<br/>

<br/>
</div>

<div class="doc">
<a name="lab496"></a><h4 class="section">Opposite commutative rigs</h4>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Local Open</span> <span class="id" title="keyword">Scope</span> <span class="id" title="var">rig</span>.<br/>

<br/>
</div>

<div class="doc">
We reuse much of the proof for general rigs 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <span class="id" title="var">opposite_commrig</span> (<span class="id" title="var">X</span> : <span class="id" title="var">commrig</span>) : <span class="id" title="var">commrig</span> :=<br/>
&nbsp;&nbsp;((<span class="id" title="var">pr1</span> (<span class="id" title="var">X⁰</span>)),, (<span class="id" title="var">dirprodpair</span> (<span class="id" title="var">pr2</span> (<span class="id" title="var">X⁰</span>)) (<span class="id" title="keyword">fun</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> =&gt; @<span class="id" title="var">rigcomm2</span> <span class="id" title="var">X</span> <span class="id" title="var">y</span> <span class="id" title="var">x</span>))).<br/>

<br/>
</div>

<div class="doc">
Commutativity makes taking the opposite trivial 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <span class="id" title="var">iso_commrig_opposite</span> (<span class="id" title="var">X</span> : <span class="id" title="var">commrig</span>) : <span class="id" title="var">rigiso</span> <span class="id" title="var">X</span> (<span class="id" title="var">opposite_commrig</span> <span class="id" title="var">X</span>).<br/>
<a class="proof" href="#">Show proof.</a><br/><div class="proof">
&nbsp;&nbsp;<span class="id" title="tactic">refine</span> ((<span class="id" title="var">idfun</span> <span class="id" title="var">X</span>,, <span class="id" title="var">idisweq</span> <span class="id" title="var">X</span>),, <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">isbinopfun</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">exact</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> =&gt; @<span class="id" title="var">rigcomm2</span> <span class="id" title="var">X</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>).<br/>
</div>

<br/>
<span class="id" title="keyword">Local Close</span> <span class="id" title="keyword">Scope</span> <span class="id" title="var">rig</span>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab497"></a><h3 class="section">Rings</h3>

<div class="paragraph"> </div>

<a name="lab498"></a><h4 class="section">General definitions</h4>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="tactic">ring</span> : <span class="id" title="var">UU</span> := <span class="id" title="var">total2</span> (<span class="id" title="var">λ</span> <span class="id" title="var">X</span> : <span class="id" title="var">setwith2binop</span>, <span class="id" title="var">isringops</span> (@<span class="id" title="var">op1</span> <span class="id" title="var">X</span>) (@<span class="id" title="var">op2</span> <span class="id" title="var">X</span>)).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">ringpair</span> {<span class="id" title="var">X</span> : <span class="id" title="var">setwith2binop</span>} (<span class="id" title="keyword">is</span> : <span class="id" title="var">isringops</span> (@<span class="id" title="var">op1</span> <span class="id" title="var">X</span>) (@<span class="id" title="var">op2</span> <span class="id" title="var">X</span>)) : <span class="id" title="tactic">ring</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="var">tpair</span> (<span class="id" title="var">λ</span> <span class="id" title="var">X</span> : <span class="id" title="var">setwith2binop</span>,  <span class="id" title="var">isringops</span> (@<span class="id" title="var">op1</span> <span class="id" title="var">X</span>) (@<span class="id" title="var">op2</span> <span class="id" title="var">X</span>)) <span class="id" title="var">X</span> <span class="id" title="keyword">is</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">pr1ring</span> : <span class="id" title="tactic">ring</span> -&gt; <span class="id" title="var">setwith2binop</span> :=<br/>
&nbsp;&nbsp;@<span class="id" title="var">pr1</span> <span class="id" title="var">_</span> (<span class="id" title="var">λ</span> <span class="id" title="var">X</span> : <span class="id" title="var">setwith2binop</span>, <span class="id" title="var">isringops</span> (@<span class="id" title="var">op1</span> <span class="id" title="var">X</span>) (@<span class="id" title="var">op2</span> <span class="id" title="var">X</span>)).<br/>
<span class="id" title="keyword">Coercion</span> <span class="id" title="var">pr1ring</span> : <span class="id" title="tactic">ring</span> &gt;-&gt; <span class="id" title="var">setwith2binop</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">ringaxs</span> (<span class="id" title="var">X</span> : <span class="id" title="tactic">ring</span>) : <span class="id" title="var">isringops</span> (@<span class="id" title="var">op1</span> <span class="id" title="var">X</span>) (@<span class="id" title="var">op2</span> <span class="id" title="var">X</span>) := <span class="id" title="var">pr2</span> <span class="id" title="var">X</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">ringop1axs</span> (<span class="id" title="var">X</span> : <span class="id" title="tactic">ring</span>) : <span class="id" title="var">isabgrop</span> (@<span class="id" title="var">op1</span> <span class="id" title="var">X</span>) := <span class="id" title="var">pr1</span> (<span class="id" title="var">pr1</span> (<span class="id" title="var">pr2</span> <span class="id" title="var">X</span>)).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">ringassoc1</span> (<span class="id" title="var">X</span> : <span class="id" title="tactic">ring</span>) : <span class="id" title="var">isassoc</span> (@<span class="id" title="var">op1</span> <span class="id" title="var">X</span>) := <span class="id" title="var">assocax_is</span> (<span class="id" title="var">ringop1axs</span> <span class="id" title="var">X</span>).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">ringunel1</span> {<span class="id" title="var">X</span> : <span class="id" title="tactic">ring</span>} : <span class="id" title="var">X</span> := <span class="id" title="var">unel_is</span> (<span class="id" title="var">ringop1axs</span> <span class="id" title="var">X</span>).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">ringlunax1</span> (<span class="id" title="var">X</span> : <span class="id" title="tactic">ring</span>) : <span class="id" title="var">islunit</span> <span class="id" title="var">op1</span> (@<span class="id" title="var">ringunel1</span> <span class="id" title="var">X</span>) := <span class="id" title="var">lunax_is</span> (<span class="id" title="var">ringop1axs</span> <span class="id" title="var">X</span>).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">ringrunax1</span> (<span class="id" title="var">X</span> : <span class="id" title="tactic">ring</span>) : <span class="id" title="var">isrunit</span> <span class="id" title="var">op1</span> (@<span class="id" title="var">ringunel1</span> <span class="id" title="var">X</span>) := <span class="id" title="var">runax_is</span> (<span class="id" title="var">ringop1axs</span> <span class="id" title="var">X</span>).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">ringinv1</span> {<span class="id" title="var">X</span> : <span class="id" title="tactic">ring</span>} : <span class="id" title="var">X</span> -&gt; <span class="id" title="var">X</span> := <span class="id" title="var">grinv_is</span> (<span class="id" title="var">ringop1axs</span> <span class="id" title="var">X</span>).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">ringlinvax1</span> (<span class="id" title="var">X</span> : <span class="id" title="tactic">ring</span>) : ∏ <span class="id" title="var">x</span> : <span class="id" title="var">X</span>, <span class="id" title="var">paths</span> (<span class="id" title="var">op1</span> (<span class="id" title="var">ringinv1</span> <span class="id" title="var">x</span>) <span class="id" title="var">x</span>) <span class="id" title="var">ringunel1</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="var">grlinvax_is</span> (<span class="id" title="var">ringop1axs</span> <span class="id" title="var">X</span>).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">ringrinvax1</span> (<span class="id" title="var">X</span> : <span class="id" title="tactic">ring</span>) : ∏ <span class="id" title="var">x</span> : <span class="id" title="var">X</span>, <span class="id" title="var">paths</span> (<span class="id" title="var">op1</span> <span class="id" title="var">x</span> (<span class="id" title="var">ringinv1</span> <span class="id" title="var">x</span>)) <span class="id" title="var">ringunel1</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="var">grrinvax_is</span> (<span class="id" title="var">ringop1axs</span> <span class="id" title="var">X</span>).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">ringcomm1</span> (<span class="id" title="var">X</span> : <span class="id" title="tactic">ring</span>) : <span class="id" title="var">iscomm</span> (@<span class="id" title="var">op1</span> <span class="id" title="var">X</span>) := <span class="id" title="var">commax_is</span> (<span class="id" title="var">ringop1axs</span> <span class="id" title="var">X</span>).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">ringop2axs</span> (<span class="id" title="var">X</span> : <span class="id" title="tactic">ring</span>) : <span class="id" title="var">ismonoidop</span> (@<span class="id" title="var">op2</span> <span class="id" title="var">X</span>) := <span class="id" title="var">pr2</span> (<span class="id" title="var">pr1</span> (<span class="id" title="var">pr2</span> <span class="id" title="var">X</span>)).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">ringassoc2</span> (<span class="id" title="var">X</span> : <span class="id" title="tactic">ring</span>) : <span class="id" title="var">isassoc</span> (@<span class="id" title="var">op2</span> <span class="id" title="var">X</span>) := <span class="id" title="var">assocax_is</span> (<span class="id" title="var">ringop2axs</span> <span class="id" title="var">X</span>).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">ringunel2</span> {<span class="id" title="var">X</span> : <span class="id" title="tactic">ring</span>} : <span class="id" title="var">X</span> := <span class="id" title="var">unel_is</span> (<span class="id" title="var">ringop2axs</span> <span class="id" title="var">X</span>).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">ringlunax2</span> (<span class="id" title="var">X</span> : <span class="id" title="tactic">ring</span>) : <span class="id" title="var">islunit</span> <span class="id" title="var">op2</span> (@<span class="id" title="var">ringunel2</span> <span class="id" title="var">X</span>) := <span class="id" title="var">lunax_is</span> (<span class="id" title="var">ringop2axs</span> <span class="id" title="var">X</span>).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">ringrunax2</span> (<span class="id" title="var">X</span> : <span class="id" title="tactic">ring</span>) : <span class="id" title="var">isrunit</span> <span class="id" title="var">op2</span> (@<span class="id" title="var">ringunel2</span> <span class="id" title="var">X</span>) := <span class="id" title="var">runax_is</span> (<span class="id" title="var">ringop2axs</span> <span class="id" title="var">X</span>).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">ringdistraxs</span> (<span class="id" title="var">X</span> : <span class="id" title="tactic">ring</span>) : <span class="id" title="var">isdistr</span> (@<span class="id" title="var">op1</span> <span class="id" title="var">X</span>) (@<span class="id" title="var">op2</span> <span class="id" title="var">X</span>) := <span class="id" title="var">pr2</span> (<span class="id" title="var">pr2</span> <span class="id" title="var">X</span>).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">ringldistr</span> (<span class="id" title="var">X</span> : <span class="id" title="tactic">ring</span>) : <span class="id" title="var">isldistr</span> (@<span class="id" title="var">op1</span> <span class="id" title="var">X</span>) (@<span class="id" title="var">op2</span> <span class="id" title="var">X</span>) := <span class="id" title="var">pr1</span> (<span class="id" title="var">pr2</span> (<span class="id" title="var">pr2</span> <span class="id" title="var">X</span>)).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">ringrdistr</span> (<span class="id" title="var">X</span> : <span class="id" title="tactic">ring</span>) : <span class="id" title="var">isrdistr</span> (@<span class="id" title="var">op1</span> <span class="id" title="var">X</span>) (@<span class="id" title="var">op2</span> <span class="id" title="var">X</span>) := <span class="id" title="var">pr2</span> (<span class="id" title="var">pr2</span> (<span class="id" title="var">pr2</span> <span class="id" title="var">X</span>)).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">ringconstr</span> {<span class="id" title="var">X</span> : <span class="id" title="var">hSet</span>} (<span class="id" title="var">opp1</span> <span class="id" title="var">opp2</span> : <span class="id" title="var">binop</span> <span class="id" title="var">X</span>) (<span class="id" title="var">ax11</span> : <span class="id" title="var">isgrop</span> <span class="id" title="var">opp1</span>) (<span class="id" title="var">ax12</span> : <span class="id" title="var">iscomm</span> <span class="id" title="var">opp1</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">ax2</span> : <span class="id" title="var">ismonoidop</span> <span class="id" title="var">opp2</span>) (<span class="id" title="var">dax</span> : <span class="id" title="var">isdistr</span> <span class="id" title="var">opp1</span> <span class="id" title="var">opp2</span>) : <span class="id" title="tactic">ring</span> :=<br/>
&nbsp;&nbsp;@<span class="id" title="var">ringpair</span> (<span class="id" title="var">setwith2binoppair</span> <span class="id" title="var">X</span> (<span class="id" title="var">dirprodpair</span> <span class="id" title="var">opp1</span> <span class="id" title="var">opp2</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">dirprodpair</span> (<span class="id" title="var">dirprodpair</span> (<span class="id" title="var">dirprodpair</span> <span class="id" title="var">ax11</span> <span class="id" title="var">ax12</span>) <span class="id" title="var">ax2</span>) <span class="id" title="var">dax</span>).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">ringmultx0</span> (<span class="id" title="var">X</span> : <span class="id" title="tactic">ring</span>) : ∏ <span class="id" title="var">x</span> : <span class="id" title="var">X</span>, (<span class="id" title="var">op2</span> <span class="id" title="var">x</span> <span class="id" title="var">ringunel1</span>) = <span class="id" title="var">ringunel1</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="var">ringmultx0_is</span> (<span class="id" title="var">ringaxs</span> <span class="id" title="var">X</span>).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">ringmult0x</span> (<span class="id" title="var">X</span> : <span class="id" title="tactic">ring</span>) : ∏ <span class="id" title="var">x</span> : <span class="id" title="var">X</span>, (<span class="id" title="var">op2</span> <span class="id" title="var">ringunel1</span> <span class="id" title="var">x</span>) = <span class="id" title="var">ringunel1</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="var">ringmult0x_is</span> (<span class="id" title="var">ringaxs</span> <span class="id" title="var">X</span>).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">ringminus1</span> {<span class="id" title="var">X</span> : <span class="id" title="tactic">ring</span>} : <span class="id" title="var">X</span> := <span class="id" title="var">ringminus1_is</span> (<span class="id" title="var">ringaxs</span> <span class="id" title="var">X</span>).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">ringmultwithminus1</span> (<span class="id" title="var">X</span> : <span class="id" title="tactic">ring</span>) : ∏ <span class="id" title="var">x</span> : <span class="id" title="var">X</span>, <span class="id" title="var">paths</span> (<span class="id" title="var">op2</span> <span class="id" title="var">ringminus1</span> <span class="id" title="var">x</span>) (<span class="id" title="var">ringinv1</span> <span class="id" title="var">x</span>) :=<br/>
&nbsp;&nbsp;<span class="id" title="var">ringmultwithminus1_is</span> (<span class="id" title="var">ringaxs</span> <span class="id" title="var">X</span>).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">ringaddabgr</span> (<span class="id" title="var">X</span> : <span class="id" title="tactic">ring</span>) : <span class="id" title="var">abgr</span> := <span class="id" title="var">abgrpair</span> (<span class="id" title="var">setwithbinoppair</span> <span class="id" title="var">X</span> <span class="id" title="var">op1</span>) (<span class="id" title="var">ringop1axs</span> <span class="id" title="var">X</span>).<br/>
<span class="id" title="keyword">Coercion</span> <span class="id" title="var">ringaddabgr</span> : <span class="id" title="tactic">ring</span> &gt;-&gt; <span class="id" title="var">abgr</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">ringmultmonoid</span> (<span class="id" title="var">X</span> : <span class="id" title="tactic">ring</span>) : <span class="id" title="var">monoid</span> := <span class="id" title="var">monoidpair</span> (<span class="id" title="var">setwithbinoppair</span> <span class="id" title="var">X</span> <span class="id" title="var">op2</span>) (<span class="id" title="var">ringop2axs</span> <span class="id" title="var">X</span>).<br/>

<br/>
<span class="id" title="keyword">Notation</span> &quot;x + y" := (<span class="id" title="var">op1</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>) : <span class="id" title="var">ring_scope</span>.<br/>
<span class="id" title="keyword">Notation</span> &quot;x - y" := (<span class="id" title="var">op1</span> <span class="id" title="var">x</span> (<span class="id" title="var">ringinv1</span> <span class="id" title="var">y</span>)) : <span class="id" title="var">ring_scope</span>.<br/>
<span class="id" title="keyword">Notation</span> &quot;x * y" := (<span class="id" title="var">op2</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>) : <span class="id" title="var">ring_scope</span>.<br/>
<span class="id" title="keyword">Notation</span> &quot;0" := (<span class="id" title="var">ringunel1</span>) : <span class="id" title="var">ring_scope</span>.<br/>
<span class="id" title="keyword">Notation</span> &quot;1" := (<span class="id" title="var">ringunel2</span>) : <span class="id" title="var">ring_scope</span>.<br/>
<span class="id" title="keyword">Notation</span> &quot;-1" := (<span class="id" title="var">ringminus1</span>) (<span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 0) : <span class="id" title="var">ring_scope</span>.<br/>
<span class="id" title="keyword">Notation</span> &quot; - x " := (<span class="id" title="var">ringinv1</span> <span class="id" title="var">x</span>) : <span class="id" title="var">ring_scope</span>.<br/>

<br/>
<span class="id" title="keyword">Delimit</span> <span class="id" title="keyword">Scope</span> <span class="id" title="var">ring_scope</span> <span class="id" title="keyword">with</span> <span class="id" title="tactic">ring</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">ringtorig</span> (<span class="id" title="var">X</span> : <span class="id" title="tactic">ring</span>) : <span class="id" title="var">rig</span> := @<span class="id" title="var">rigpair</span> <span class="id" title="var">_</span> (<span class="id" title="var">pr2</span> <span class="id" title="var">X</span>).<br/>
<span class="id" title="keyword">Coercion</span> <span class="id" title="var">ringtorig</span> : <span class="id" title="tactic">ring</span> &gt;-&gt; <span class="id" title="var">rig</span>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab499"></a><h4 class="section">Homomorphisms of rings</h4>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">isringfun</span> {<span class="id" title="var">X</span> <span class="id" title="var">Y</span> : <span class="id" title="tactic">ring</span>} (<span class="id" title="var">f</span> : <span class="id" title="var">X</span> -&gt; <span class="id" title="var">Y</span>) := @<span class="id" title="var">isrigfun</span> <span class="id" title="var">X</span> <span class="id" title="var">Y</span> <span class="id" title="var">f</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">ringfun</span> (<span class="id" title="var">X</span> <span class="id" title="var">Y</span> : <span class="id" title="tactic">ring</span>) := <span class="id" title="var">rigfun</span> <span class="id" title="var">X</span> <span class="id" title="var">Y</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">isaset_ringfun</span> (<span class="id" title="var">X</span> <span class="id" title="var">Y</span> : <span class="id" title="tactic">ring</span>) : <span class="id" title="var">isaset</span> (<span class="id" title="var">ringfun</span> <span class="id" title="var">X</span> <span class="id" title="var">Y</span>).<br/>
<a class="proof" href="#">Show proof.</a><br/><div class="proof">
&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">isofhleveltotal2</span> 2).<br/>
&nbsp;&nbsp;&nbsp;- <span class="id" title="var">use</span> <span class="id" title="var">impred_isaset</span>. <span class="id" title="tactic">intro</span> <span class="id" title="var">x</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">setproperty</span>.<br/>
&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">intro</span> <span class="id" title="var">f</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">isasetaprop</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">isapropisrigfun</span>.<br/>
</div>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">ringfunconstr</span> {<span class="id" title="var">X</span> <span class="id" title="var">Y</span> : <span class="id" title="tactic">ring</span>} {<span class="id" title="var">f</span> : <span class="id" title="var">X</span> -&gt; <span class="id" title="var">Y</span>} (<span class="id" title="keyword">is</span> : <span class="id" title="var">isringfun</span> <span class="id" title="var">f</span>) : <span class="id" title="var">ringfun</span> <span class="id" title="var">X</span> <span class="id" title="var">Y</span> := <span class="id" title="var">rigfunconstr</span> <span class="id" title="keyword">is</span>.<br/>
<span class="id" title="keyword">Identity</span> <span class="id" title="keyword">Coercion</span> <span class="id" title="var">id_ringfun</span> : <span class="id" title="var">ringfun</span> &gt;-&gt; <span class="id" title="var">rigfun</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">ringaddfun</span> {<span class="id" title="var">X</span> <span class="id" title="var">Y</span> : <span class="id" title="tactic">ring</span>} (<span class="id" title="var">f</span> : <span class="id" title="var">ringfun</span> <span class="id" title="var">X</span> <span class="id" title="var">Y</span>) : <span class="id" title="var">monoidfun</span> <span class="id" title="var">X</span> <span class="id" title="var">Y</span> := <span class="id" title="var">monoidfunconstr</span> (<span class="id" title="var">pr1</span> (<span class="id" title="var">pr2</span> <span class="id" title="var">f</span>)).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">ringmultfun</span> {<span class="id" title="var">X</span> <span class="id" title="var">Y</span> : <span class="id" title="tactic">ring</span>} (<span class="id" title="var">f</span> : <span class="id" title="var">ringfun</span> <span class="id" title="var">X</span> <span class="id" title="var">Y</span>) :<br/>
&nbsp;&nbsp;<span class="id" title="var">monoidfun</span> (<span class="id" title="var">ringmultmonoid</span> <span class="id" title="var">X</span>) (<span class="id" title="var">ringmultmonoid</span> <span class="id" title="var">Y</span>) := <span class="id" title="var">monoidfunconstr</span> (<span class="id" title="var">pr2</span> (<span class="id" title="var">pr2</span> <span class="id" title="var">f</span>)).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">ringiso</span> (<span class="id" title="var">X</span> <span class="id" title="var">Y</span> : <span class="id" title="tactic">ring</span>) := <span class="id" title="var">rigiso</span> <span class="id" title="var">X</span> <span class="id" title="var">Y</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">ringisopair</span> {<span class="id" title="var">X</span> <span class="id" title="var">Y</span> : <span class="id" title="tactic">ring</span>} (<span class="id" title="var">f</span> : <span class="id" title="var">X</span> ≃ <span class="id" title="var">Y</span>) (<span class="id" title="keyword">is</span> : <span class="id" title="var">isringfun</span> <span class="id" title="var">f</span>) : <span class="id" title="var">ringiso</span> <span class="id" title="var">X</span> <span class="id" title="var">Y</span> := <span class="id" title="var">tpair</span> <span class="id" title="var">_</span>  <span class="id" title="var">f</span> <span class="id" title="keyword">is</span>.<br/>
<span class="id" title="keyword">Identity</span> <span class="id" title="keyword">Coercion</span> <span class="id" title="var">id_ringiso</span> : <span class="id" title="var">ringiso</span> &gt;-&gt; <span class="id" title="var">rigiso</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">isringfuninvmap</span> {<span class="id" title="var">X</span> <span class="id" title="var">Y</span> : <span class="id" title="tactic">ring</span>} (<span class="id" title="var">f</span> : <span class="id" title="var">ringiso</span> <span class="id" title="var">X</span> <span class="id" title="var">Y</span>) : <span class="id" title="var">isringfun</span> (<span class="id" title="var">invmap</span> <span class="id" title="var">f</span>) := <span class="id" title="var">isrigfuninvmap</span> <span class="id" title="var">f</span>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab500"></a><h4 class="section">(X = Y) ≃ (ringiso X Y)</h4>

    We use the following composition

<div class="paragraph"> </div>

                           (X = Y) ≃ (mk_ring' X = mk_ring' Y)
                                   ≃ ((pr1 (mk_ring' X)) = (pr1 (mk_ring' Y)))
                                   ≃ (ringiso X Y)

<div class="paragraph"> </div>

    where the third weak equivalence is given by univalence for rigs, <span class="inlinecode"><span class="id" title="var">rig_univalence</span></span>. We define
    ring' to be able to apply <span class="inlinecode"><span class="id" title="var">rig_univalence</span></span>.
 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Local</span> <span class="id" title="keyword">Definition</span> <span class="id" title="var">ring'</span> : <span class="id" title="var">UU</span> :=<br/>
&nbsp;&nbsp;∑ <span class="id" title="var">D</span> : (∑ <span class="id" title="var">X</span> : <span class="id" title="var">setwith2binop</span>, <span class="id" title="var">isrigops</span> (@<span class="id" title="var">op1</span> <span class="id" title="var">X</span>) (@<span class="id" title="var">op2</span> <span class="id" title="var">X</span>)),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">invstruct</span> (@<span class="id" title="var">op1</span> (<span class="id" title="var">pr1</span> <span class="id" title="var">D</span>)) (<span class="id" title="var">dirprod_pr1</span> (<span class="id" title="var">dirprod_pr1</span> (<span class="id" title="var">pr1</span> (<span class="id" title="var">pr1</span> (<span class="id" title="var">pr2</span> <span class="id" title="var">D</span>))))).<br/>

<br/>
<span class="id" title="keyword">Local</span> <span class="id" title="keyword">Definition</span> <span class="id" title="var">mk_ring'</span> (<span class="id" title="var">R</span> : <span class="id" title="tactic">ring</span>) : <span class="id" title="var">ring'</span>.<br/>
<a class="proof" href="#">Show proof.</a><br/><div class="proof">
&nbsp;&nbsp;<span class="id" title="var">use</span> <span class="id" title="var">tpair</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">use</span> <span class="id" title="var">tpair</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">exact</span> (<span class="id" title="var">pr1</span> <span class="id" title="var">R</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">use</span> <span class="id" title="var">mk_isrigops</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="var">use</span> <span class="id" title="var">mk_isabmonoidop</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-- <span class="id" title="tactic">exact</span> (<span class="id" title="var">pr1</span> (<span class="id" title="var">dirprod_pr1</span> (<span class="id" title="var">dirprod_pr1</span> (<span class="id" title="var">dirprod_pr1</span> (<span class="id" title="var">pr2</span> <span class="id" title="var">R</span>))))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-- <span class="id" title="tactic">exact</span> (<span class="id" title="var">dirprod_pr2</span> (<span class="id" title="var">dirprod_pr1</span> (<span class="id" title="var">dirprod_pr1</span> (<span class="id" title="var">pr2</span> <span class="id" title="var">R</span>)))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">exact</span> (<span class="id" title="var">dirprod_pr2</span> (<span class="id" title="var">dirprod_pr1</span> (<span class="id" title="var">pr2</span> <span class="id" title="var">R</span>))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">exact</span> (@<span class="id" title="var">mult0x_is_l</span> (<span class="id" title="var">pr1</span> <span class="id" title="var">R</span>) (@<span class="id" title="var">op1</span> (<span class="id" title="var">pr1</span> <span class="id" title="var">R</span>)) (@<span class="id" title="var">op2</span> (<span class="id" title="var">pr1</span> <span class="id" title="var">R</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">dirprod_pr1</span> (<span class="id" title="var">dirprod_pr1</span> (<span class="id" title="var">dirprod_pr1</span> (<span class="id" title="var">pr2</span> <span class="id" title="var">R</span>))))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">dirprod_pr2</span> (<span class="id" title="var">dirprod_pr1</span> (<span class="id" title="var">pr2</span> <span class="id" title="var">R</span>))) (<span class="id" title="var">dirprod_pr2</span> (<span class="id" title="var">pr2</span> <span class="id" title="var">R</span>))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">exact</span> (@<span class="id" title="var">multx0_is_l</span> (<span class="id" title="var">pr1</span> <span class="id" title="var">R</span>) (@<span class="id" title="var">op1</span> (<span class="id" title="var">pr1</span> <span class="id" title="var">R</span>)) (@<span class="id" title="var">op2</span> (<span class="id" title="var">pr1</span> <span class="id" title="var">R</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">dirprod_pr1</span> (<span class="id" title="var">dirprod_pr1</span> (<span class="id" title="var">dirprod_pr1</span> (<span class="id" title="var">pr2</span> <span class="id" title="var">R</span>))))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">dirprod_pr2</span> (<span class="id" title="var">dirprod_pr1</span> (<span class="id" title="var">pr2</span> <span class="id" title="var">R</span>))) (<span class="id" title="var">dirprod_pr2</span> (<span class="id" title="var">pr2</span> <span class="id" title="var">R</span>))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">exact</span> (<span class="id" title="var">dirprod_pr2</span> (<span class="id" title="var">pr2</span> <span class="id" title="var">R</span>)).<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">exact</span> (<span class="id" title="var">pr2</span> (<span class="id" title="var">dirprod_pr1</span> (<span class="id" title="var">dirprod_pr1</span> (<span class="id" title="var">dirprod_pr1</span> (<span class="id" title="var">pr2</span> <span class="id" title="var">R</span>))))).<br/>
</div>

<br/>
<span class="id" title="keyword">Local</span> <span class="id" title="keyword">Definition</span> <span class="id" title="var">mk_ring_from_ring'</span> (<span class="id" title="var">R</span> : <span class="id" title="var">ring'</span>) : <span class="id" title="tactic">ring</span>.<br/>
<a class="proof" href="#">Show proof.</a><br/><div class="proof">
&nbsp;&nbsp;<span class="id" title="var">use</span> <span class="id" title="var">ringpair</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">exact</span> (<span class="id" title="var">pr1</span> (<span class="id" title="var">pr1</span> <span class="id" title="var">R</span>)).<br/>
&nbsp;&nbsp;- <span class="id" title="var">use</span> <span class="id" title="var">mk_isringops</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">use</span> <span class="id" title="var">mk_isabgrop</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="var">use</span> <span class="id" title="var">mk_isgrop</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-- <span class="id" title="tactic">exact</span> (<span class="id" title="var">dirprod_pr1</span> (<span class="id" title="var">dirprod_pr1</span> (<span class="id" title="var">pr1</span> (<span class="id" title="var">dirprod_pr1</span> (<span class="id" title="var">pr2</span> (<span class="id" title="var">pr1</span> <span class="id" title="var">R</span>)))))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-- <span class="id" title="tactic">exact</span> (<span class="id" title="var">pr2</span> <span class="id" title="var">R</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">exact</span> (<span class="id" title="var">dirprod_pr2</span> (<span class="id" title="var">dirprod_pr1</span> (<span class="id" title="var">pr1</span> (<span class="id" title="var">dirprod_pr1</span> (<span class="id" title="var">pr2</span> (<span class="id" title="var">pr1</span> <span class="id" title="var">R</span>)))))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">exact</span> (<span class="id" title="var">dirprod_pr2</span> (<span class="id" title="var">pr1</span> (<span class="id" title="var">dirprod_pr1</span> (<span class="id" title="var">pr2</span> (<span class="id" title="var">pr1</span> <span class="id" title="var">R</span>))))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">exact</span> (<span class="id" title="var">dirprod_pr2</span> (<span class="id" title="var">pr2</span> (<span class="id" title="var">pr1</span> <span class="id" title="var">R</span>))).<br/>
</div>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">ring_univalence_weq1</span> : <span class="id" title="tactic">ring</span> ≃ <span class="id" title="var">ring'</span>.<br/>
<a class="proof" href="#">Show proof.</a><br/><div class="proof">
&nbsp;&nbsp;<span class="id" title="var">use</span> <span class="id" title="var">weqpair</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">R</span>. <span class="id" title="tactic">exact</span> (<span class="id" title="var">mk_ring'</span> <span class="id" title="var">R</span>).<br/>
&nbsp;&nbsp;- <span class="id" title="var">use</span> <span class="id" title="var">isweq_iso</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">intros</span> <span class="id" title="var">R'</span>. <span class="id" title="tactic">exact</span> (<span class="id" title="var">mk_ring_from_ring'</span> <span class="id" title="var">R'</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">intros</span> <span class="id" title="var">R</span>. <span class="id" title="var">use</span> <span class="id" title="var">idpath</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">intros</span> <span class="id" title="var">R'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">use</span> <span class="id" title="var">total2_paths_f</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="var">use</span> <span class="id" title="var">total2_paths_f</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-- <span class="id" title="var">use</span> <span class="id" title="var">idpath</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-- <span class="id" title="var">use</span> <span class="id" title="var">proofirrelevance</span>. <span class="id" title="var">use</span> <span class="id" title="var">isapropisrigops</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="var">use</span> <span class="id" title="var">proofirrelevance</span>. <span class="id" title="var">use</span> <span class="id" title="var">isapropinvstruct</span>.<br/>
</div>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">ring_univalence_weq1'</span> (<span class="id" title="var">X</span> <span class="id" title="var">Y</span> : <span class="id" title="tactic">ring</span>) : (<span class="id" title="var">X</span> = <span class="id" title="var">Y</span>) ≃ (<span class="id" title="var">mk_ring'</span> <span class="id" title="var">X</span> = <span class="id" title="var">mk_ring'</span> <span class="id" title="var">Y</span>) :=<br/>
&nbsp;&nbsp;<span class="id" title="var">weqpair</span> <span class="id" title="var">_</span> (@<span class="id" title="var">isweqmaponpaths</span> <span class="id" title="tactic">ring</span> <span class="id" title="var">ring'</span> <span class="id" title="var">ring_univalence_weq1</span> <span class="id" title="var">X</span> <span class="id" title="var">Y</span>).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">ring_univalence_weq2</span> (<span class="id" title="var">X</span> <span class="id" title="var">Y</span> : <span class="id" title="tactic">ring</span>) :<br/>
&nbsp;&nbsp;((<span class="id" title="var">mk_ring'</span> <span class="id" title="var">X</span>) = (<span class="id" title="var">mk_ring'</span> <span class="id" title="var">Y</span>)) ≃ ((<span class="id" title="var">pr1</span> (<span class="id" title="var">mk_ring'</span> <span class="id" title="var">X</span>)) = (<span class="id" title="var">pr1</span> (<span class="id" title="var">mk_ring'</span> <span class="id" title="var">Y</span>))).<br/>
<a class="proof" href="#">Show proof.</a><br/><div class="proof">
&nbsp;&nbsp;<span class="id" title="var">use</span> <span class="id" title="var">subtypeInjectivity</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">w</span>. <span class="id" title="var">use</span> <span class="id" title="var">isapropinvstruct</span>.<br/>
</div>
<span class="id" title="keyword">Opaque</span> <span class="id" title="var">ring_univalence_weq2</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">ring_univalence_weq3</span> (<span class="id" title="var">X</span> <span class="id" title="var">Y</span> : <span class="id" title="tactic">ring</span>) :<br/>
&nbsp;&nbsp;((<span class="id" title="var">pr1</span> (<span class="id" title="var">mk_ring'</span> <span class="id" title="var">X</span>)) = (<span class="id" title="var">pr1</span> (<span class="id" title="var">mk_ring'</span> <span class="id" title="var">Y</span>))) ≃ (<span class="id" title="var">rigiso</span> <span class="id" title="var">X</span> <span class="id" title="var">Y</span>) :=<br/>
&nbsp;&nbsp;<span class="id" title="var">rig_univalence</span> (<span class="id" title="var">pr1</span> (<span class="id" title="var">mk_ring'</span> <span class="id" title="var">X</span>)) (<span class="id" title="var">pr1</span> (<span class="id" title="var">mk_ring'</span> <span class="id" title="var">Y</span>)).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">ring_univalence_map</span> (<span class="id" title="var">X</span> <span class="id" title="var">Y</span> : <span class="id" title="tactic">ring</span>) : (<span class="id" title="var">X</span> = <span class="id" title="var">Y</span>) -&gt; (<span class="id" title="var">ringiso</span> <span class="id" title="var">X</span> <span class="id" title="var">Y</span>).<br/>
<a class="proof" href="#">Show proof.</a><br/><div class="proof">
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">e</span>. <span class="id" title="tactic">induction</span> <span class="id" title="var">e</span>. <span class="id" title="tactic">exact</span> (<span class="id" title="var">idrigiso</span> <span class="id" title="var">X</span>).<br/>
</div>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">ring_univalence_isweq</span> (<span class="id" title="var">X</span> <span class="id" title="var">Y</span> : <span class="id" title="tactic">ring</span>) : <span class="id" title="var">isweq</span> (<span class="id" title="var">ring_univalence_map</span> <span class="id" title="var">X</span> <span class="id" title="var">Y</span>).<br/>
<a class="proof" href="#">Show proof.</a><br/><div class="proof">
&nbsp;&nbsp;<span class="id" title="var">use</span> <span class="id" title="var">isweqhomot</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">exact</span> (<span class="id" title="var">weqcomp</span> (<span class="id" title="var">ring_univalence_weq1'</span> <span class="id" title="var">X</span> <span class="id" title="var">Y</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">weqcomp</span> (<span class="id" title="var">ring_univalence_weq2</span> <span class="id" title="var">X</span> <span class="id" title="var">Y</span>) (<span class="id" title="var">ring_univalence_weq3</span> <span class="id" title="var">X</span> <span class="id" title="var">Y</span>))).<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">e</span>. <span class="id" title="tactic">induction</span> <span class="id" title="var">e</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">use</span> (<span class="id" title="var">pathscomp0</span> <span class="id" title="var">weqcomp_to_funcomp_app</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">use</span> <span class="id" title="var">weqcomp_to_funcomp_app</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">use</span> <span class="id" title="var">weqproperty</span>.<br/>
</div>
<span class="id" title="keyword">Opaque</span> <span class="id" title="var">ring_univalence_isweq</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">ring_univalence</span> (<span class="id" title="var">X</span> <span class="id" title="var">Y</span> : <span class="id" title="tactic">ring</span>) : (<span class="id" title="var">X</span> = <span class="id" title="var">Y</span>) ≃ (<span class="id" title="var">ringiso</span> <span class="id" title="var">X</span> <span class="id" title="var">Y</span>).<br/>
<a class="proof" href="#">Show proof.</a><br/><div class="proof">
&nbsp;&nbsp;<span class="id" title="var">use</span> <span class="id" title="var">weqpair</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">exact</span> (<span class="id" title="var">ring_univalence_map</span> <span class="id" title="var">X</span> <span class="id" title="var">Y</span>).<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">exact</span> (<span class="id" title="var">ring_univalence_isweq</span> <span class="id" title="var">X</span> <span class="id" title="var">Y</span>).<br/>
</div>
<span class="id" title="keyword">Opaque</span> <span class="id" title="var">ring_univalence</span>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab501"></a><h4 class="section">Computation lemmas for rings</h4>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Local Open</span> <span class="id" title="keyword">Scope</span> <span class="id" title="var">ring_scope</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">ringinvunel1</span> (<span class="id" title="var">X</span> : <span class="id" title="tactic">ring</span>) : -0 = 0 := <span class="id" title="var">grinvunel</span> <span class="id" title="var">X</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">ringismultlcancelableif</span> (<span class="id" title="var">X</span> : <span class="id" title="tactic">ring</span>) (<span class="id" title="var">x</span> : <span class="id" title="var">X</span>) (<span class="id" title="var">isl</span> : ∏ <span class="id" title="var">y</span>, <span class="id" title="var">paths</span> (<span class="id" title="var">x</span> * <span class="id" title="var">y</span>) 0 -&gt; <span class="id" title="var">y</span> = 0) :<br/>
&nbsp;&nbsp;<span class="id" title="var">islcancelable</span> <span class="id" title="var">op2</span> <span class="id" title="var">x</span>.<br/>
<a class="proof" href="#">Show proof.</a><br/><div class="proof">
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (@<span class="id" title="var">isinclbetweensets</span> <span class="id" title="var">X</span> <span class="id" title="var">X</span>).<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <span class="id" title="var">setproperty</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <span class="id" title="var">setproperty</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">x1</span> <span class="id" title="var">x2</span> <span class="id" title="var">e</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">e'</span> := <span class="id" title="var">maponpaths</span> (<span class="id" title="var">λ</span> <span class="id" title="var">a</span>, <span class="id" title="var">a</span> + (<span class="id" title="var">x</span> * (-<span class="id" title="var">x2</span>))) <span class="id" title="var">e</span>). <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">e'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="var">pathsinv0</span> (<span class="id" title="var">ringldistr</span> <span class="id" title="var">X</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">x</span>)) <span class="id" title="tactic">in</span> <span class="id" title="var">e'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="var">pathsinv0</span> (<span class="id" title="var">ringldistr</span> <span class="id" title="var">X</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">x</span>)) <span class="id" title="tactic">in</span> <span class="id" title="var">e'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="var">ringrinvax1</span> <span class="id" title="var">X</span> <span class="id" title="var">x2</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">e'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="var">ringmultx0</span> <span class="id" title="var">X</span> <span class="id" title="var">_</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">e'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">e''</span> := <span class="id" title="var">isl</span> (<span class="id" title="var">x1</span> - <span class="id" title="var">x2</span>) <span class="id" title="var">e'</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">e'''</span> := <span class="id" title="var">maponpaths</span> (<span class="id" title="var">λ</span> <span class="id" title="var">a</span>, <span class="id" title="var">a</span> + <span class="id" title="var">x2</span>) <span class="id" title="var">e''</span>). <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">e'''</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="var">ringassoc1</span> <span class="id" title="var">X</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">x2</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">e'''</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="var">ringlinvax1</span> <span class="id" title="var">X</span> <span class="id" title="var">x2</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">e'''</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="var">ringlunax1</span> <span class="id" title="var">X</span> <span class="id" title="var">_</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">e'''</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="var">ringrunax1</span> <span class="id" title="var">X</span> <span class="id" title="var">_</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">e'''</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">e'''</span>.<br/>
</div>
<span class="id" title="keyword">Opaque</span>  <span class="id" title="var">ringismultlcancelableif</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">ringismultrcancelableif</span> (<span class="id" title="var">X</span> : <span class="id" title="tactic">ring</span>) (<span class="id" title="var">x</span> : <span class="id" title="var">X</span>) (<span class="id" title="var">isr</span> : ∏ <span class="id" title="var">y</span>, <span class="id" title="var">paths</span> (<span class="id" title="var">y</span> * <span class="id" title="var">x</span>) 0 -&gt; <span class="id" title="var">y</span> = 0) :<br/>
&nbsp;&nbsp;<span class="id" title="var">isrcancelable</span> <span class="id" title="var">op2</span> <span class="id" title="var">x</span>.<br/>
<a class="proof" href="#">Show proof.</a><br/><div class="proof">
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">apply</span> (@<span class="id" title="var">isinclbetweensets</span> <span class="id" title="var">X</span> <span class="id" title="var">X</span>).<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <span class="id" title="var">setproperty</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <span class="id" title="var">setproperty</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">x1</span> <span class="id" title="var">x2</span> <span class="id" title="var">e</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">e'</span> := <span class="id" title="var">maponpaths</span> (<span class="id" title="var">λ</span> <span class="id" title="var">a</span>, <span class="id" title="var">a</span> + ((-<span class="id" title="var">x2</span>) * <span class="id" title="var">x</span>)) <span class="id" title="var">e</span>). <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">e'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="var">pathsinv0</span> (<span class="id" title="var">ringrdistr</span> <span class="id" title="var">X</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">x</span>)) <span class="id" title="tactic">in</span> <span class="id" title="var">e'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="var">pathsinv0</span> (<span class="id" title="var">ringrdistr</span> <span class="id" title="var">X</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">x</span>)) <span class="id" title="tactic">in</span> <span class="id" title="var">e'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="var">ringrinvax1</span> <span class="id" title="var">X</span> <span class="id" title="var">x2</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">e'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="var">ringmult0x</span> <span class="id" title="var">X</span> <span class="id" title="var">_</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">e'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">e''</span> := <span class="id" title="var">isr</span> (<span class="id" title="var">x1</span> - <span class="id" title="var">x2</span>) <span class="id" title="var">e'</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">e'''</span> := <span class="id" title="var">maponpaths</span> (<span class="id" title="var">λ</span> <span class="id" title="var">a</span>, <span class="id" title="var">a</span> + <span class="id" title="var">x2</span>) <span class="id" title="var">e''</span>). <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">e'''</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="var">ringassoc1</span> <span class="id" title="var">X</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">x2</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">e'''</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="var">ringlinvax1</span> <span class="id" title="var">X</span> <span class="id" title="var">x2</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">e'''</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="var">ringlunax1</span> <span class="id" title="var">X</span> <span class="id" title="var">_</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">e'''</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="var">ringrunax1</span> <span class="id" title="var">X</span> <span class="id" title="var">_</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">e'''</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">e'''</span>.<br/>
</div>
<span class="id" title="keyword">Opaque</span> <span class="id" title="var">ringismultrcancelableif</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">ringismultcancelableif</span> (<span class="id" title="var">X</span> : <span class="id" title="tactic">ring</span>) (<span class="id" title="var">x</span> : <span class="id" title="var">X</span>) (<span class="id" title="var">isl</span> : ∏ <span class="id" title="var">y</span>, <span class="id" title="var">paths</span> (<span class="id" title="var">x</span> * <span class="id" title="var">y</span>) 0 -&gt; <span class="id" title="var">y</span> = 0)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">isr</span> : ∏ <span class="id" title="var">y</span>, <span class="id" title="var">paths</span> (<span class="id" title="var">y</span> * <span class="id" title="var">x</span>) 0 -&gt; <span class="id" title="var">y</span> = 0) : <span class="id" title="var">iscancelable</span> <span class="id" title="var">op2</span> <span class="id" title="var">x</span>.<br/>
<a class="proof" href="#">Show proof.</a><br/><div class="proof">
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">dirprodpair</span> (<span class="id" title="var">ringismultlcancelableif</span> <span class="id" title="var">X</span> <span class="id" title="var">x</span> <span class="id" title="var">isl</span>) (<span class="id" title="var">ringismultrcancelableif</span> <span class="id" title="var">X</span> <span class="id" title="var">x</span> <span class="id" title="var">isr</span>)).<br/>
</div>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">ringlmultminus</span> (<span class="id" title="var">X</span> : <span class="id" title="tactic">ring</span>) (<span class="id" title="var">a</span> <span class="id" title="var">b</span> : <span class="id" title="var">X</span>) : <span class="id" title="var">paths</span> ((- <span class="id" title="var">a</span>) * <span class="id" title="var">b</span>) (- (<span class="id" title="var">a</span> * <span class="id" title="var">b</span>)).<br/>
<a class="proof" href="#">Show proof.</a><br/><div class="proof">
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">apply</span> (@<span class="id" title="var">grrcan</span> <span class="id" title="var">X</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> (<span class="id" title="var">a</span> * <span class="id" title="var">b</span>)).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">change</span> (<span class="id" title="var">paths</span> (-<span class="id" title="var">a</span> * <span class="id" title="var">b</span> + <span class="id" title="var">a</span> * <span class="id" title="var">b</span>) (- (<span class="id" title="var">a</span> * <span class="id" title="var">b</span>) + <span class="id" title="var">a</span> * <span class="id" title="var">b</span>)).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="var">ringlinvax1</span> <span class="id" title="var">X</span> <span class="id" title="var">_</span>). <span class="id" title="tactic">rewrite</span> (<span class="id" title="var">pathsinv0</span> (<span class="id" title="var">ringrdistr</span> <span class="id" title="var">X</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>)).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="var">ringlinvax1</span> <span class="id" title="var">X</span> <span class="id" title="var">_</span>). <span class="id" title="tactic">rewrite</span> (<span class="id" title="var">ringmult0x</span> <span class="id" title="var">X</span> <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">idpath</span>.<br/>
</div>
<span class="id" title="keyword">Opaque</span> <span class="id" title="var">ringlmultminus</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">ringrmultminus</span> (<span class="id" title="var">X</span> : <span class="id" title="tactic">ring</span>) (<span class="id" title="var">a</span> <span class="id" title="var">b</span> : <span class="id" title="var">X</span>) : <span class="id" title="var">paths</span> (<span class="id" title="var">a</span> * (- <span class="id" title="var">b</span>)) (- (<span class="id" title="var">a</span> * <span class="id" title="var">b</span>)).<br/>
<a class="proof" href="#">Show proof.</a><br/><div class="proof">
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">apply</span> (@<span class="id" title="var">grrcan</span> <span class="id" title="var">X</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> (<span class="id" title="var">a</span> * <span class="id" title="var">b</span>)).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">change</span> (<span class="id" title="var">paths</span> (<span class="id" title="var">a</span> * (- <span class="id" title="var">b</span>) + <span class="id" title="var">a</span> * <span class="id" title="var">b</span>) (- (<span class="id" title="var">a</span> * <span class="id" title="var">b</span>) + <span class="id" title="var">a</span> * <span class="id" title="var">b</span>)).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="var">ringlinvax1</span> <span class="id" title="var">X</span> <span class="id" title="var">_</span>). <span class="id" title="tactic">rewrite</span> (<span class="id" title="var">pathsinv0</span> (<span class="id" title="var">ringldistr</span> <span class="id" title="var">X</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>)).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="var">ringlinvax1</span> <span class="id" title="var">X</span> <span class="id" title="var">_</span>). <span class="id" title="tactic">rewrite</span> (<span class="id" title="var">ringmultx0</span> <span class="id" title="var">X</span> <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">idpath</span>.<br/>
</div>
<span class="id" title="keyword">Opaque</span> <span class="id" title="var">ringrmultminus</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">ringmultminusminus</span> (<span class="id" title="var">X</span> : <span class="id" title="tactic">ring</span>) (<span class="id" title="var">a</span> <span class="id" title="var">b</span> : <span class="id" title="var">X</span>) : <span class="id" title="var">paths</span> (-<span class="id" title="var">a</span> * - <span class="id" title="var">b</span>) (<span class="id" title="var">a</span> * <span class="id" title="var">b</span>).<br/>
<a class="proof" href="#">Show proof.</a><br/><div class="proof">
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">apply</span> (@<span class="id" title="var">grrcan</span> <span class="id" title="var">X</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> (- <span class="id" title="var">a</span> * <span class="id" title="var">b</span>)). <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="var">pathsinv0</span> (<span class="id" title="var">ringldistr</span> <span class="id" title="var">X</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> (- <span class="id" title="var">a</span>))).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="var">pathsinv0</span> (<span class="id" title="var">ringrdistr</span> <span class="id" title="var">X</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">b</span>)).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="var">ringlinvax1</span> <span class="id" title="var">X</span> <span class="id" title="var">b</span>). <span class="id" title="tactic">rewrite</span> (<span class="id" title="var">ringrinvax1</span> <span class="id" title="var">X</span> <span class="id" title="var">a</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="var">ringmult0x</span> <span class="id" title="var">X</span> <span class="id" title="var">_</span>). <span class="id" title="tactic">rewrite</span> (<span class="id" title="var">ringmultx0</span> <span class="id" title="var">X</span> <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">idpath</span>.<br/>
</div>
<span class="id" title="keyword">Opaque</span> <span class="id" title="var">ringmultminusminus</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">ringminusminus</span> (<span class="id" title="var">X</span> : <span class="id" title="tactic">ring</span>) (<span class="id" title="var">a</span> : <span class="id" title="var">X</span>) : --<span class="id" title="var">a</span> = <span class="id" title="var">a</span>.<br/>
<a class="proof" href="#">Show proof.</a><br/><div class="proof"> <span class="id" title="tactic">intros</span>. <span class="id" title="tactic">apply</span> (<span class="id" title="var">grinvinv</span> <span class="id" title="var">X</span> <span class="id" title="var">a</span>). </div>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">ringinvmaponpathsminus</span> (<span class="id" title="var">X</span> : <span class="id" title="tactic">ring</span>) {<span class="id" title="var">a</span> <span class="id" title="var">b</span> : <span class="id" title="var">X</span>} : -<span class="id" title="var">a</span> = -<span class="id" title="var">b</span> -&gt; <span class="id" title="var">a</span> = <span class="id" title="var">b</span> := <span class="id" title="var">grinvmaponpathsinv</span> <span class="id" title="var">X</span>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab502"></a><h4 class="section">Relations compatible with the additive structure on rings</h4>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">ringfromgt0</span> (<span class="id" title="var">X</span> : <span class="id" title="tactic">ring</span>) {<span class="id" title="var">R</span> : <span class="id" title="var">hrel</span> <span class="id" title="var">X</span>} (<span class="id" title="var">is0</span> : @<span class="id" title="var">isbinophrel</span> <span class="id" title="var">X</span> <span class="id" title="var">R</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id" title="var">x</span> : <span class="id" title="var">X</span>} (<span class="id" title="keyword">is</span> : <span class="id" title="var">R</span> <span class="id" title="var">x</span> 0) : <span class="id" title="var">R</span> 0 (- <span class="id" title="var">x</span>) := <span class="id" title="var">grfromgtunel</span> <span class="id" title="var">X</span> <span class="id" title="var">is0</span> <span class="id" title="keyword">is</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">ringtogt0</span> (<span class="id" title="var">X</span> : <span class="id" title="tactic">ring</span>) {<span class="id" title="var">R</span> : <span class="id" title="var">hrel</span> <span class="id" title="var">X</span>} (<span class="id" title="var">is0</span> : @<span class="id" title="var">isbinophrel</span> <span class="id" title="var">X</span> <span class="id" title="var">R</span>) {<span class="id" title="var">x</span> : <span class="id" title="var">X</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">is</span> : <span class="id" title="var">R</span> 0 (- <span class="id" title="var">x</span>)) : <span class="id" title="var">R</span> <span class="id" title="var">x</span> 0 := <span class="id" title="var">grtogtunel</span> <span class="id" title="var">X</span> <span class="id" title="var">is0</span> <span class="id" title="keyword">is</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">ringfromlt0</span> (<span class="id" title="var">X</span> : <span class="id" title="tactic">ring</span>) {<span class="id" title="var">R</span> : <span class="id" title="var">hrel</span> <span class="id" title="var">X</span>} (<span class="id" title="var">is0</span> : @<span class="id" title="var">isbinophrel</span> <span class="id" title="var">X</span> <span class="id" title="var">R</span>) {<span class="id" title="var">x</span> : <span class="id" title="var">X</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">is</span> : <span class="id" title="var">R</span> 0 <span class="id" title="var">x</span>) : <span class="id" title="var">R</span> (- <span class="id" title="var">x</span>) 0 := <span class="id" title="var">grfromltunel</span> <span class="id" title="var">X</span> <span class="id" title="var">is0</span> <span class="id" title="keyword">is</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">ringtolt0</span> (<span class="id" title="var">X</span> : <span class="id" title="tactic">ring</span>) {<span class="id" title="var">R</span> : <span class="id" title="var">hrel</span> <span class="id" title="var">X</span>} (<span class="id" title="var">is0</span> : @<span class="id" title="var">isbinophrel</span> <span class="id" title="var">X</span> <span class="id" title="var">R</span>) {<span class="id" title="var">x</span> : <span class="id" title="var">X</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">is</span> : <span class="id" title="var">R</span> (- <span class="id" title="var">x</span>) 0) : <span class="id" title="var">R</span> 0 <span class="id" title="var">x</span> := <span class="id" title="var">grtoltunel</span> <span class="id" title="var">X</span> <span class="id" title="var">is0</span> <span class="id" title="keyword">is</span>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab503"></a><h4 class="section">Relations compatible with the multiplicative structure on rings</h4>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">isringmultgt</span> (<span class="id" title="var">X</span> : <span class="id" title="tactic">ring</span>) (<span class="id" title="var">R</span> : <span class="id" title="var">hrel</span> <span class="id" title="var">X</span>) : <span class="id" title="var">UU</span> := ∏ <span class="id" title="var">a</span> <span class="id" title="var">b</span>, <span class="id" title="var">R</span> <span class="id" title="var">a</span> 0 -&gt; <span class="id" title="var">R</span> <span class="id" title="var">b</span> 0 -&gt; <span class="id" title="var">R</span> (<span class="id" title="var">a</span> * <span class="id" title="var">b</span>) 0.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">ringmultgt0lt0</span> (<span class="id" title="var">X</span> : <span class="id" title="tactic">ring</span>) {<span class="id" title="var">R</span> : <span class="id" title="var">hrel</span> <span class="id" title="var">X</span>} (<span class="id" title="var">is0</span> : @<span class="id" title="var">isbinophrel</span> <span class="id" title="var">X</span> <span class="id" title="var">R</span>) (<span class="id" title="keyword">is</span> : <span class="id" title="var">isringmultgt</span> <span class="id" title="var">X</span> <span class="id" title="var">R</span>) {<span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">X</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">isx</span> : <span class="id" title="var">R</span> <span class="id" title="var">x</span> 0) (<span class="id" title="var">isy</span> : <span class="id" title="var">R</span> 0 <span class="id" title="var">y</span>) : <span class="id" title="var">R</span> 0 (<span class="id" title="var">x</span> * <span class="id" title="var">y</span>).<br/>
<a class="proof" href="#">Show proof.</a><br/><div class="proof">
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">isy'</span> := <span class="id" title="var">grfromltunel</span> <span class="id" title="var">X</span> <span class="id" title="var">is0</span> <span class="id" title="var">isy</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">r</span> := <span class="id" title="keyword">is</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">isx</span> <span class="id" title="var">isy'</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">change</span> (<span class="id" title="var">pr1</span> (<span class="id" title="var">R</span> (<span class="id" title="var">x</span> * (- <span class="id" title="var">y</span>)) 0)) <span class="id" title="tactic">in</span> <span class="id" title="var">r</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="var">ringrmultminus</span> <span class="id" title="var">X</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">r</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">r'</span> := <span class="id" title="var">grfromgtunel</span> <span class="id" title="var">X</span> <span class="id" title="var">is0</span> <span class="id" title="var">r</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">change</span> (<span class="id" title="var">pr1</span> (<span class="id" title="var">R</span> 0 (- - (<span class="id" title="var">x</span> * <span class="id" title="var">y</span>)))) <span class="id" title="tactic">in</span> <span class="id" title="var">r'</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="var">ringminusminus</span> <span class="id" title="var">X</span> (<span class="id" title="var">x</span> * <span class="id" title="var">y</span>)) <span class="id" title="tactic">in</span> <span class="id" title="var">r'</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">r'</span>.<br/>
</div>
<span class="id" title="keyword">Opaque</span> <span class="id" title="var">ringmultgt0lt0</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">ringmultlt0gt0</span> (<span class="id" title="var">X</span> : <span class="id" title="tactic">ring</span>) {<span class="id" title="var">R</span> : <span class="id" title="var">hrel</span> <span class="id" title="var">X</span>} (<span class="id" title="var">is0</span> : @<span class="id" title="var">isbinophrel</span> <span class="id" title="var">X</span> <span class="id" title="var">R</span>) (<span class="id" title="keyword">is</span> : <span class="id" title="var">isringmultgt</span> <span class="id" title="var">X</span> <span class="id" title="var">R</span>) {<span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">X</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">isx</span> : <span class="id" title="var">R</span> 0 <span class="id" title="var">x</span>) (<span class="id" title="var">isy</span> : <span class="id" title="var">R</span> <span class="id" title="var">y</span> 0) : <span class="id" title="var">R</span> 0 (<span class="id" title="var">x</span> * <span class="id" title="var">y</span>).<br/>
<a class="proof" href="#">Show proof.</a><br/><div class="proof">
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">isx'</span> := <span class="id" title="var">grfromltunel</span> <span class="id" title="var">X</span> <span class="id" title="var">is0</span> <span class="id" title="var">isx</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">r</span> := <span class="id" title="keyword">is</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">isx'</span> <span class="id" title="var">isy</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">change</span> (<span class="id" title="var">pr1</span> (<span class="id" title="var">R</span> ((- <span class="id" title="var">x</span>) * <span class="id" title="var">y</span>) 0)) <span class="id" title="tactic">in</span> <span class="id" title="var">r</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="var">ringlmultminus</span> <span class="id" title="var">X</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">r</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">r'</span> := <span class="id" title="var">grfromgtunel</span> <span class="id" title="var">X</span> <span class="id" title="var">is0</span> <span class="id" title="var">r</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">change</span> (<span class="id" title="var">pr1</span> (<span class="id" title="var">R</span> 0 (- - (<span class="id" title="var">x</span> * <span class="id" title="var">y</span>)))) <span class="id" title="tactic">in</span> <span class="id" title="var">r'</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="var">ringminusminus</span> <span class="id" title="var">X</span> (<span class="id" title="var">x</span> * <span class="id" title="var">y</span>)) <span class="id" title="tactic">in</span> <span class="id" title="var">r'</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">r'</span>.<br/>
</div>
<span class="id" title="keyword">Opaque</span> <span class="id" title="var">ringmultlt0gt0</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">ringmultlt0lt0</span> (<span class="id" title="var">X</span> : <span class="id" title="tactic">ring</span>) {<span class="id" title="var">R</span> : <span class="id" title="var">hrel</span> <span class="id" title="var">X</span>} (<span class="id" title="var">is0</span> : @<span class="id" title="var">isbinophrel</span> <span class="id" title="var">X</span> <span class="id" title="var">R</span>) (<span class="id" title="keyword">is</span> : <span class="id" title="var">isringmultgt</span> <span class="id" title="var">X</span> <span class="id" title="var">R</span>) {<span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">X</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">isx</span> : <span class="id" title="var">R</span> 0 <span class="id" title="var">x</span>) (<span class="id" title="var">isy</span> : <span class="id" title="var">R</span> 0 <span class="id" title="var">y</span>) : <span class="id" title="var">R</span> (<span class="id" title="var">x</span> * <span class="id" title="var">y</span>) 0.<br/>
<a class="proof" href="#">Show proof.</a><br/><div class="proof">
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">rx</span> := <span class="id" title="var">ringfromlt0</span> <span class="id" title="var">_</span> <span class="id" title="var">is0</span> <span class="id" title="var">isx</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">ry</span> := <span class="id" title="var">ringfromlt0</span> <span class="id" title="var">_</span> <span class="id" title="var">is0</span> <span class="id" title="var">isy</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">int</span> := <span class="id" title="keyword">is</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">rx</span> <span class="id" title="var">ry</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="var">ringmultminusminus</span> <span class="id" title="var">X</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">int</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">int</span>.<br/>
</div>
<span class="id" title="keyword">Opaque</span> <span class="id" title="var">ringmultlt0lt0</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">isringmultgttoislringmultgt</span> (<span class="id" title="var">X</span> : <span class="id" title="tactic">ring</span>) {<span class="id" title="var">R</span> : <span class="id" title="var">hrel</span> <span class="id" title="var">X</span>} (<span class="id" title="var">is0</span> : @<span class="id" title="var">isbinophrel</span> <span class="id" title="var">X</span> <span class="id" title="var">R</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">is</span> : <span class="id" title="var">isringmultgt</span> <span class="id" title="var">X</span> <span class="id" title="var">R</span>) : ∏ <span class="id" title="var">a</span> <span class="id" title="var">b</span> <span class="id" title="var">c</span> : <span class="id" title="var">X</span>, <span class="id" title="var">R</span> <span class="id" title="var">c</span> 0 -&gt; <span class="id" title="var">R</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span> -&gt; <span class="id" title="var">R</span> (<span class="id" title="var">c</span> * <span class="id" title="var">a</span>) (<span class="id" title="var">c</span> * <span class="id" title="var">b</span>).<br/>
<a class="proof" href="#">Show proof.</a><br/><div class="proof">
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span> <span class="id" title="var">c</span> <span class="id" title="var">rc0</span> <span class="id" title="var">rab</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">rab'</span>:= (<span class="id" title="var">pr2</span> <span class="id" title="var">is0</span>) <span class="id" title="var">_</span> <span class="id" title="var">_</span> (- <span class="id" title="var">b</span>) <span class="id" title="var">rab</span>). <span class="id" title="var">clearbody</span> <span class="id" title="var">rab'</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">change</span> (<span class="id" title="var">pr1</span> (<span class="id" title="var">R</span> (<span class="id" title="var">a</span> - <span class="id" title="var">b</span>) (<span class="id" title="var">b</span> - <span class="id" title="var">b</span>))) <span class="id" title="tactic">in</span> <span class="id" title="var">rab'</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="var">ringrinvax1</span> <span class="id" title="var">X</span> <span class="id" title="var">b</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">rab'</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">r'</span> := <span class="id" title="keyword">is</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">rc0</span> <span class="id" title="var">rab'</span>). <span class="id" title="var">clearbody</span> <span class="id" title="var">r'</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">r''</span> := (<span class="id" title="var">pr2</span> <span class="id" title="var">is0</span>) <span class="id" title="var">_</span> <span class="id" title="var">_</span> (<span class="id" title="var">c</span> * <span class="id" title="var">b</span>) <span class="id" title="var">r'</span>). <span class="id" title="var">clearbody</span> <span class="id" title="var">r''</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">change</span> (<span class="id" title="var">pr1</span> (<span class="id" title="var">R</span> (<span class="id" title="var">c</span> * (<span class="id" title="var">a</span> - <span class="id" title="var">b</span>) + <span class="id" title="var">c</span> * <span class="id" title="var">b</span>) (0 + <span class="id" title="var">c</span> * <span class="id" title="var">b</span>))) <span class="id" title="tactic">in</span> <span class="id" title="var">r''</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="var">ringlunax1</span> <span class="id" title="var">X</span> <span class="id" title="var">_</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">r''</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="var">pathsinv0</span> (<span class="id" title="var">ringldistr</span> <span class="id" title="var">X</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">c</span>)) <span class="id" title="tactic">in</span> <span class="id" title="var">r''</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="var">ringassoc1</span> <span class="id" title="var">X</span> <span class="id" title="var">a</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">r''</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="var">ringlinvax1</span> <span class="id" title="var">X</span> <span class="id" title="var">b</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">r''</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="var">ringrunax1</span> <span class="id" title="var">X</span> <span class="id" title="var">_</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">r''</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">r''</span>.<br/>
</div>
<span class="id" title="keyword">Opaque</span> <span class="id" title="var">isringmultgttoislringmultgt</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">islringmultgttoisringmultgt</span> (<span class="id" title="var">X</span> : <span class="id" title="tactic">ring</span>) {<span class="id" title="var">R</span> : <span class="id" title="var">hrel</span> <span class="id" title="var">X</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">is</span> : ∏ <span class="id" title="var">a</span> <span class="id" title="var">b</span> <span class="id" title="var">c</span> : <span class="id" title="var">X</span>, <span class="id" title="var">R</span> <span class="id" title="var">c</span> 0 -&gt; <span class="id" title="var">R</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span> -&gt; <span class="id" title="var">R</span> (<span class="id" title="var">c</span> * <span class="id" title="var">a</span>) (<span class="id" title="var">c</span> * <span class="id" title="var">b</span>)) : <span class="id" title="var">isringmultgt</span> <span class="id" title="var">X</span> <span class="id" title="var">R</span>.<br/>
<a class="proof" href="#">Show proof.</a><br/><div class="proof">
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">intros</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span> <span class="id" title="var">ra</span> <span class="id" title="var">rb</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">int</span> := <span class="id" title="keyword">is</span> <span class="id" title="var">b</span> 0 <span class="id" title="var">a</span> <span class="id" title="var">ra</span> <span class="id" title="var">rb</span>). <span class="id" title="var">clearbody</span> <span class="id" title="var">int</span>. <span class="id" title="tactic">rewrite</span> (<span class="id" title="var">ringmultx0</span> <span class="id" title="var">X</span> <span class="id" title="var">_</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">int</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">int</span>.<br/>
</div>
<span class="id" title="keyword">Opaque</span> <span class="id" title="var">islringmultgttoisringmultgt</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">isringmultgttoisrringmultgt</span> (<span class="id" title="var">X</span> : <span class="id" title="tactic">ring</span>) {<span class="id" title="var">R</span> : <span class="id" title="var">hrel</span> <span class="id" title="var">X</span>} (<span class="id" title="var">is0</span> : @<span class="id" title="var">isbinophrel</span> <span class="id" title="var">X</span> <span class="id" title="var">R</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">is</span> : <span class="id" title="var">isringmultgt</span> <span class="id" title="var">X</span> <span class="id" title="var">R</span>) : ∏ <span class="id" title="var">a</span> <span class="id" title="var">b</span> <span class="id" title="var">c</span> : <span class="id" title="var">X</span>, <span class="id" title="var">R</span> <span class="id" title="var">c</span> 0 -&gt; <span class="id" title="var">R</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span> -&gt; <span class="id" title="var">R</span> (<span class="id" title="var">a</span> * <span class="id" title="var">c</span>) (<span class="id" title="var">b</span> * <span class="id" title="var">c</span>).<br/>
<a class="proof" href="#">Show proof.</a><br/><div class="proof">
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span> <span class="id" title="var">c</span> <span class="id" title="var">rc0</span> <span class="id" title="var">rab</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">rab'</span> := (<span class="id" title="var">pr2</span> <span class="id" title="var">is0</span>) <span class="id" title="var">_</span> <span class="id" title="var">_</span> (- <span class="id" title="var">b</span>) <span class="id" title="var">rab</span>). <span class="id" title="var">clearbody</span> <span class="id" title="var">rab'</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">change</span> (<span class="id" title="var">pr1</span> (<span class="id" title="var">R</span> (<span class="id" title="var">a</span> - <span class="id" title="var">b</span>) (<span class="id" title="var">b</span> - <span class="id" title="var">b</span>))) <span class="id" title="tactic">in</span> <span class="id" title="var">rab'</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="var">ringrinvax1</span> <span class="id" title="var">X</span> <span class="id" title="var">b</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">rab'</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">r'</span> := <span class="id" title="keyword">is</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">rab'</span> <span class="id" title="var">rc0</span>). <span class="id" title="var">clearbody</span> <span class="id" title="var">r'</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">r''</span> :=  (<span class="id" title="var">pr2</span> <span class="id" title="var">is0</span>) <span class="id" title="var">_</span> <span class="id" title="var">_</span> (<span class="id" title="var">b</span> * <span class="id" title="var">c</span>) <span class="id" title="var">r'</span>). <span class="id" title="var">clearbody</span> <span class="id" title="var">r''</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">change</span> (<span class="id" title="var">pr1</span> (<span class="id" title="var">R</span> ((<span class="id" title="var">a</span> - <span class="id" title="var">b</span>) * <span class="id" title="var">c</span> + <span class="id" title="var">b</span> * <span class="id" title="var">c</span>) (0 + <span class="id" title="var">b</span> * <span class="id" title="var">c</span>))) <span class="id" title="tactic">in</span> <span class="id" title="var">r''</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="var">ringlunax1</span> <span class="id" title="var">X</span> <span class="id" title="var">_</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">r''</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="var">pathsinv0</span> (<span class="id" title="var">ringrdistr</span> <span class="id" title="var">X</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">c</span>)) <span class="id" title="tactic">in</span> <span class="id" title="var">r''</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="var">ringassoc1</span> <span class="id" title="var">X</span> <span class="id" title="var">a</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">r''</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="var">ringlinvax1</span> <span class="id" title="var">X</span> <span class="id" title="var">b</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">r''</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="var">ringrunax1</span> <span class="id" title="var">X</span> <span class="id" title="var">_</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">r''</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">r''</span>.<br/>
</div>
<span class="id" title="keyword">Opaque</span> <span class="id" title="var">isringmultgttoisrringmultgt</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">isrringmultgttoisringmultgt</span> (<span class="id" title="var">X</span> : <span class="id" title="tactic">ring</span>) {<span class="id" title="var">R</span> : <span class="id" title="var">hrel</span> <span class="id" title="var">X</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">is1</span> : ∏ <span class="id" title="var">a</span> <span class="id" title="var">b</span> <span class="id" title="var">c</span> : <span class="id" title="var">X</span>, <span class="id" title="var">R</span> <span class="id" title="var">c</span> 0 -&gt; <span class="id" title="var">R</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span> -&gt; <span class="id" title="var">R</span> (<span class="id" title="var">a</span> * <span class="id" title="var">c</span>) (<span class="id" title="var">b</span> * <span class="id" title="var">c</span>)) : <span class="id" title="var">isringmultgt</span> <span class="id" title="var">X</span> <span class="id" title="var">R</span>.<br/>
<a class="proof" href="#">Show proof.</a><br/><div class="proof">
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">intros</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span> <span class="id" title="var">ra</span> <span class="id" title="var">rb</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">int</span> := <span class="id" title="var">is1</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">rb</span> <span class="id" title="var">ra</span>). <span class="id" title="var">clearbody</span> <span class="id" title="var">int</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="var">ringmult0x</span> <span class="id" title="var">X</span> <span class="id" title="var">_</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">int</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">int</span>.<br/>
</div>
<span class="id" title="keyword">Opaque</span> <span class="id" title="var">isrringmultgttoisringmultgt</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">isringmultgtaspartbinophrel</span> (<span class="id" title="var">X</span> : <span class="id" title="tactic">ring</span>) (<span class="id" title="var">R</span> : <span class="id" title="var">hrel</span> <span class="id" title="var">X</span>) (<span class="id" title="var">is0</span> : @<span class="id" title="var">isbinophrel</span> <span class="id" title="var">X</span> <span class="id" title="var">R</span>) :<br/>
&nbsp;&nbsp;(<span class="id" title="var">isringmultgt</span> <span class="id" title="var">X</span> <span class="id" title="var">R</span>) &lt;-&gt; (@<span class="id" title="var">ispartbinophrel</span> (<span class="id" title="var">ringmultmonoid</span> <span class="id" title="var">X</span>) (<span class="id" title="var">λ</span> <span class="id" title="var">a</span>, <span class="id" title="var">R</span> <span class="id" title="var">a</span> 0) <span class="id" title="var">R</span>).<br/>
<a class="proof" href="#">Show proof.</a><br/><div class="proof">
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intro</span> <span class="id" title="var">ism</span>. <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> (<span class="id" title="var">isringmultgttoislringmultgt</span> <span class="id" title="var">X</span> <span class="id" title="var">is0</span> <span class="id" title="var">ism</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> (<span class="id" title="var">isringmultgttoisrringmultgt</span> <span class="id" title="var">X</span> <span class="id" title="var">is0</span> <span class="id" title="var">ism</span>).<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intro</span> <span class="id" title="var">isp</span>. <span class="id" title="tactic">apply</span> (<span class="id" title="var">islringmultgttoisringmultgt</span> <span class="id" title="var">X</span> (<span class="id" title="var">pr1</span> <span class="id" title="var">isp</span>)).<br/>
</div>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">isringmultgttoisrigmultgt</span> (<span class="id" title="var">X</span> : <span class="id" title="tactic">ring</span>) {<span class="id" title="var">R</span> : <span class="id" title="var">hrel</span> <span class="id" title="var">X</span>} (<span class="id" title="var">is0</span> : @<span class="id" title="var">isbinophrel</span> <span class="id" title="var">X</span> <span class="id" title="var">R</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">is</span> : <span class="id" title="var">isringmultgt</span> <span class="id" title="var">X</span> <span class="id" title="var">R</span>) : <span class="id" title="var">isrigmultgt</span> <span class="id" title="var">X</span> <span class="id" title="var">R</span>.<br/>
<a class="proof" href="#">Show proof.</a><br/><div class="proof">
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">set</span> (<span class="id" title="var">rer</span> := <span class="id" title="var">abmonoidrer</span> <span class="id" title="var">X</span>). <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">rer</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span> <span class="id" title="var">c</span> <span class="id" title="var">d</span> <span class="id" title="var">rab</span> <span class="id" title="var">rcd</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">intab</span> : <span class="id" title="var">R</span> (<span class="id" title="var">a</span> - <span class="id" title="var">b</span>) 0).<br/>
&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">ringrinvax1</span> <span class="id" title="var">X</span> <span class="id" title="var">b</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> ((<span class="id" title="var">pr2</span> <span class="id" title="var">is0</span>) <span class="id" title="var">_</span> <span class="id" title="var">_</span> (- <span class="id" title="var">b</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">rab</span>.<br/>
&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">intcd</span> : <span class="id" title="var">R</span> (<span class="id" title="var">c</span> - <span class="id" title="var">d</span>) 0).<br/>
&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">ringrinvax1</span> <span class="id" title="var">X</span> <span class="id" title="var">d</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> ((<span class="id" title="var">pr2</span> <span class="id" title="var">is0</span>) <span class="id" title="var">_</span> <span class="id" title="var">_</span> (- <span class="id" title="var">d</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">rcd</span>.<br/>
&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">int</span> := <span class="id" title="keyword">is</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">intab</span> <span class="id" title="var">intcd</span>). <span class="id" title="tactic">rewrite</span> (<span class="id" title="var">ringrdistr</span> <span class="id" title="var">X</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">int</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="var">ringldistr</span> <span class="id" title="var">X</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">int</span>. <span class="id" title="tactic">rewrite</span> (<span class="id" title="var">ringldistr</span> <span class="id" title="var">X</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">int</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">int'</span> := (<span class="id" title="var">pr2</span> <span class="id" title="var">is0</span>) <span class="id" title="var">_</span> <span class="id" title="var">_</span> (<span class="id" title="var">a</span> * <span class="id" title="var">d</span> + <span class="id" title="var">b</span> * <span class="id" title="var">c</span>) <span class="id" title="var">int</span>). <span class="id" title="var">clearbody</span> <span class="id" title="var">int'</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">int'</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="var">ringlunax1</span> <span class="id" title="var">_</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">int'</span>. <span class="id" title="tactic">rewrite</span> (<span class="id" title="var">ringcomm1</span> <span class="id" title="var">X</span> (- <span class="id" title="var">b</span> * <span class="id" title="var">c</span>) <span class="id" title="var">_</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">int'</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="var">rer</span> <span class="id" title="var">_</span> (<span class="id" title="var">a</span> * - <span class="id" title="var">d</span>) <span class="id" title="var">_</span> <span class="id" title="var">_</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">int'</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="var">ringassoc1</span> <span class="id" title="var">X</span>  <span class="id" title="var">_</span> (<span class="id" title="var">a</span> * - <span class="id" title="var">d</span> + - <span class="id" title="var">b</span> * <span class="id" title="var">c</span>) <span class="id" title="var">_</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">int'</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="var">rer</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> (<span class="id" title="var">a</span> * <span class="id" title="var">d</span>) <span class="id" title="var">_</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">int'</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="var">pathsinv0</span> (<span class="id" title="var">ringldistr</span> <span class="id" title="var">X</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">a</span>)) <span class="id" title="tactic">in</span> <span class="id" title="var">int'</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="var">ringlinvax1</span> <span class="id" title="var">X</span> <span class="id" title="var">d</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">int'</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="var">ringmultx0</span> <span class="id" title="var">X</span> <span class="id" title="var">_</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">int'</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="var">pathsinv0</span> (<span class="id" title="var">ringrdistr</span> <span class="id" title="var">X</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">c</span>)) <span class="id" title="tactic">in</span> <span class="id" title="var">int'</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="var">ringlinvax1</span> <span class="id" title="var">X</span> <span class="id" title="var">b</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">int'</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="var">ringmult0x</span> <span class="id" title="var">X</span> <span class="id" title="var">_</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">int'</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="var">ringrunax1</span> <span class="id" title="var">X</span> <span class="id" title="var">_</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">int'</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="var">ringrunax1</span> <span class="id" title="var">X</span> <span class="id" title="var">_</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">int'</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="var">ringmultminusminus</span> <span class="id" title="var">X</span> <span class="id" title="var">b</span> <span class="id" title="var">d</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">int'</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">int'</span>.<br/>
</div>
<span class="id" title="keyword">Opaque</span> <span class="id" title="var">isringmultgttoisrigmultgt</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">isrigmultgttoisringmultgt</span> (<span class="id" title="var">X</span> : <span class="id" title="tactic">ring</span>) {<span class="id" title="var">R</span> : <span class="id" title="var">hrel</span> <span class="id" title="var">X</span>} (<span class="id" title="keyword">is</span> : <span class="id" title="var">isrigmultgt</span> <span class="id" title="var">X</span> <span class="id" title="var">R</span>) : <span class="id" title="var">isringmultgt</span> <span class="id" title="var">X</span> <span class="id" title="var">R</span>.<br/>
<a class="proof" href="#">Show proof.</a><br/><div class="proof">
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">intros</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span> <span class="id" title="var">ra0</span> <span class="id" title="var">rb0</span>. <span class="id" title="tactic">set</span> (<span class="id" title="var">is'</span> := <span class="id" title="keyword">is</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">ra0</span> <span class="id" title="var">rb0</span>). <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">is'</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">fold</span> (<span class="id" title="var">pr1ring</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">is'</span>. <span class="id" title="tactic">rewrite</span> 2? (<span class="id" title="var">ringmult0x</span> <span class="id" title="var">X</span> <span class="id" title="var">_</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">is'</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="var">ringmultx0</span> <span class="id" title="var">X</span> <span class="id" title="var">_</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">is'</span>. <span class="id" title="tactic">rewrite</span> 2? (<span class="id" title="var">ringrunax1</span> <span class="id" title="var">X</span> <span class="id" title="var">_</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">is'</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">exact</span> <span class="id" title="var">is'</span>.<br/>
</div>
<span class="id" title="keyword">Opaque</span> <span class="id" title="var">isrigmultgttoisringmultgt</span>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab504"></a><h4 class="section">Relations "inversely compatible" with the multiplicative structure on rings</h4>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">isinvringmultgt</span> (<span class="id" title="var">X</span> : <span class="id" title="tactic">ring</span>) (<span class="id" title="var">R</span> : <span class="id" title="var">hrel</span> <span class="id" title="var">X</span>) : <span class="id" title="var">UU</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="var">dirprod</span> (∏ <span class="id" title="var">a</span> <span class="id" title="var">b</span>, <span class="id" title="var">R</span> (<span class="id" title="var">a</span> * <span class="id" title="var">b</span>) 0 -&gt; <span class="id" title="var">R</span> <span class="id" title="var">a</span> 0 -&gt; <span class="id" title="var">R</span> <span class="id" title="var">b</span> 0) (∏ <span class="id" title="var">a</span> <span class="id" title="var">b</span>, <span class="id" title="var">R</span> (<span class="id" title="var">a</span> * <span class="id" title="var">b</span>) 0 -&gt; <span class="id" title="var">R</span> <span class="id" title="var">b</span> 0 -&gt; <span class="id" title="var">R</span> <span class="id" title="var">a</span> 0).<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">isinvringmultgttoislinvringmultgt</span> (<span class="id" title="var">X</span> : <span class="id" title="tactic">ring</span>) {<span class="id" title="var">R</span> : <span class="id" title="var">hrel</span> <span class="id" title="var">X</span>} (<span class="id" title="var">is0</span> : @<span class="id" title="var">isbinophrel</span> <span class="id" title="var">X</span> <span class="id" title="var">R</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">is</span> : <span class="id" title="var">isinvringmultgt</span> <span class="id" title="var">X</span> <span class="id" title="var">R</span>) : ∏ <span class="id" title="var">a</span> <span class="id" title="var">b</span> <span class="id" title="var">c</span> : <span class="id" title="var">X</span>, <span class="id" title="var">R</span> <span class="id" title="var">c</span> 0 -&gt; <span class="id" title="var">R</span> (<span class="id" title="var">c</span> * <span class="id" title="var">a</span>) (<span class="id" title="var">c</span> * <span class="id" title="var">b</span>) -&gt; <span class="id" title="var">R</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span>.<br/>
<a class="proof" href="#">Show proof.</a><br/><div class="proof">
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span> <span class="id" title="var">c</span> <span class="id" title="var">rc0</span> <span class="id" title="var">r</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">rab'</span>:= (<span class="id" title="var">pr2</span> <span class="id" title="var">is0</span>) <span class="id" title="var">_</span> <span class="id" title="var">_</span> (<span class="id" title="var">c</span> * - <span class="id" title="var">b</span>) <span class="id" title="var">r</span>).<br/>
&nbsp;&nbsp;<span class="id" title="var">clearbody</span> <span class="id" title="var">rab'</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">change</span> (<span class="id" title="var">pr1</span> (<span class="id" title="var">R</span> (<span class="id" title="var">c</span> * <span class="id" title="var">a</span> + <span class="id" title="var">c</span> * - <span class="id" title="var">b</span>) (<span class="id" title="var">c</span> * <span class="id" title="var">b</span> + <span class="id" title="var">c</span> * - <span class="id" title="var">b</span>))) <span class="id" title="tactic">in</span> <span class="id" title="var">rab'</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="var">pathsinv0</span> (<span class="id" title="var">ringldistr</span> <span class="id" title="var">X</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">c</span>)) <span class="id" title="tactic">in</span> <span class="id" title="var">rab'</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="var">pathsinv0</span> (<span class="id" title="var">ringldistr</span> <span class="id" title="var">X</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">c</span>)) <span class="id" title="tactic">in</span> <span class="id" title="var">rab'</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="var">ringrinvax1</span> <span class="id" title="var">X</span> <span class="id" title="var">b</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">rab'</span>. <span class="id" title="tactic">rewrite</span> (<span class="id" title="var">ringmultx0</span> <span class="id" title="var">X</span> <span class="id" title="var">_</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">rab'</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">r'</span> := (<span class="id" title="var">pr1</span> <span class="id" title="keyword">is</span>) <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">rab'</span> <span class="id" title="var">rc0</span>). <span class="id" title="var">clearbody</span> <span class="id" title="var">r'</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">r''</span> := (<span class="id" title="var">pr2</span> <span class="id" title="var">is0</span>) <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">b</span> <span class="id" title="var">r'</span>). <span class="id" title="var">clearbody</span> <span class="id" title="var">r''</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">change</span> (<span class="id" title="var">pr1</span> (<span class="id" title="var">R</span> (<span class="id" title="var">a</span> - <span class="id" title="var">b</span> + <span class="id" title="var">b</span>) (0 + <span class="id" title="var">b</span>))) <span class="id" title="tactic">in</span> <span class="id" title="var">r''</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="var">ringlunax1</span> <span class="id" title="var">X</span> <span class="id" title="var">_</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">r''</span>. <span class="id" title="tactic">rewrite</span> (<span class="id" title="var">ringassoc1</span> <span class="id" title="var">X</span> <span class="id" title="var">a</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">r''</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="var">ringlinvax1</span> <span class="id" title="var">X</span> <span class="id" title="var">b</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">r''</span>. <span class="id" title="tactic">rewrite</span> (<span class="id" title="var">ringrunax1</span> <span class="id" title="var">X</span> <span class="id" title="var">_</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">r''</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">r''</span>.<br/>
</div>
<span class="id" title="keyword">Opaque</span> <span class="id" title="var">isinvringmultgttoislinvringmultgt</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">isinvringmultgttoisrinvringmultgt</span> (<span class="id" title="var">X</span> : <span class="id" title="tactic">ring</span>) {<span class="id" title="var">R</span> : <span class="id" title="var">hrel</span> <span class="id" title="var">X</span>} (<span class="id" title="var">is0</span> : @<span class="id" title="var">isbinophrel</span> <span class="id" title="var">X</span> <span class="id" title="var">R</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">is</span> : <span class="id" title="var">isinvringmultgt</span> <span class="id" title="var">X</span> <span class="id" title="var">R</span>) : ∏ <span class="id" title="var">a</span> <span class="id" title="var">b</span> <span class="id" title="var">c</span> : <span class="id" title="var">X</span>, <span class="id" title="var">R</span> <span class="id" title="var">c</span> 0 -&gt; <span class="id" title="var">R</span> (<span class="id" title="var">a</span> * <span class="id" title="var">c</span>) (<span class="id" title="var">b</span> * <span class="id" title="var">c</span>) -&gt; <span class="id" title="var">R</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span>.<br/>
<a class="proof" href="#">Show proof.</a><br/><div class="proof">
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span> <span class="id" title="var">c</span> <span class="id" title="var">rc0</span> <span class="id" title="var">r</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">rab'</span>:= (<span class="id" title="var">pr2</span> <span class="id" title="var">is0</span>) <span class="id" title="var">_</span> <span class="id" title="var">_</span> (- <span class="id" title="var">b</span> * <span class="id" title="var">c</span>) <span class="id" title="var">r</span>). <span class="id" title="var">clearbody</span> <span class="id" title="var">rab'</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">change</span> (<span class="id" title="var">pr1</span> (<span class="id" title="var">R</span> (<span class="id" title="var">a</span> * <span class="id" title="var">c</span> + - <span class="id" title="var">b</span> * <span class="id" title="var">c</span>) (<span class="id" title="var">b</span> * <span class="id" title="var">c</span> + - <span class="id" title="var">b</span> * <span class="id" title="var">c</span>))) <span class="id" title="tactic">in</span> <span class="id" title="var">rab'</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="var">pathsinv0</span> (<span class="id" title="var">ringrdistr</span> <span class="id" title="var">X</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">c</span>)) <span class="id" title="tactic">in</span> <span class="id" title="var">rab'</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="var">pathsinv0</span> (<span class="id" title="var">ringrdistr</span> <span class="id" title="var">X</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">c</span>)) <span class="id" title="tactic">in</span> <span class="id" title="var">rab'</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="var">ringrinvax1</span> <span class="id" title="var">X</span> <span class="id" title="var">b</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">rab'</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="var">ringmult0x</span> <span class="id" title="var">X</span> <span class="id" title="var">_</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">rab'</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">r'</span> := (<span class="id" title="var">pr2</span> <span class="id" title="keyword">is</span>) <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">rab'</span> <span class="id" title="var">rc0</span>).<br/>
&nbsp;&nbsp;<span class="id" title="var">clearbody</span> <span class="id" title="var">r'</span>. <span class="id" title="tactic">set</span> (<span class="id" title="var">r''</span> := (<span class="id" title="var">pr2</span> <span class="id" title="var">is0</span>) <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">b</span> <span class="id" title="var">r'</span>).<br/>
&nbsp;&nbsp;<span class="id" title="var">clearbody</span> <span class="id" title="var">r''</span>. <span class="id" title="tactic">change</span> (<span class="id" title="var">pr1</span> (<span class="id" title="var">R</span> (<span class="id" title="var">a</span> - <span class="id" title="var">b</span> + <span class="id" title="var">b</span>) (0 + <span class="id" title="var">b</span>))) <span class="id" title="tactic">in</span> <span class="id" title="var">r''</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="var">ringlunax1</span> <span class="id" title="var">X</span> <span class="id" title="var">_</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">r''</span>. <span class="id" title="tactic">rewrite</span> (<span class="id" title="var">ringassoc1</span> <span class="id" title="var">X</span> <span class="id" title="var">a</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">r''</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="var">ringlinvax1</span> <span class="id" title="var">X</span> <span class="id" title="var">b</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">r''</span>. <span class="id" title="tactic">rewrite</span> (<span class="id" title="var">ringrunax1</span> <span class="id" title="var">X</span> <span class="id" title="var">_</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">r''</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">r''</span>.<br/>
</div>
<span class="id" title="keyword">Opaque</span> <span class="id" title="var">isinvringmultgttoisrinvringmultgt</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">islrinvringmultgttoisinvringmultgt</span> (<span class="id" title="var">X</span> : <span class="id" title="tactic">ring</span>) {<span class="id" title="var">R</span> : <span class="id" title="var">hrel</span> <span class="id" title="var">X</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">isl</span> : ∏ <span class="id" title="var">a</span> <span class="id" title="var">b</span> <span class="id" title="var">c</span> : <span class="id" title="var">X</span>, <span class="id" title="var">R</span> <span class="id" title="var">c</span> 0 -&gt; <span class="id" title="var">R</span> (<span class="id" title="var">c</span> * <span class="id" title="var">a</span>) (<span class="id" title="var">c</span> * <span class="id" title="var">b</span>) -&gt; <span class="id" title="var">R</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">isr</span> : ∏ <span class="id" title="var">a</span> <span class="id" title="var">b</span> <span class="id" title="var">c</span> : <span class="id" title="var">X</span>, <span class="id" title="var">R</span> <span class="id" title="var">c</span> 0 -&gt; <span class="id" title="var">R</span> (<span class="id" title="var">a</span> * <span class="id" title="var">c</span>) (<span class="id" title="var">b</span> * <span class="id" title="var">c</span>) -&gt; <span class="id" title="var">R</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span>) : <span class="id" title="var">isinvringmultgt</span> <span class="id" title="var">X</span> <span class="id" title="var">R</span>.<br/>
<a class="proof" href="#">Show proof.</a><br/><div class="proof">
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span> <span class="id" title="var">rab</span> <span class="id" title="var">ra</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="var">pathsinv0</span> (<span class="id" title="var">ringmultx0</span> <span class="id" title="var">X</span> <span class="id" title="var">a</span>)) <span class="id" title="tactic">in</span> <span class="id" title="var">rab</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">isl</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">ra</span> <span class="id" title="var">rab</span>).<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span> <span class="id" title="var">rab</span> <span class="id" title="var">rb</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="var">pathsinv0</span> (<span class="id" title="var">ringmult0x</span> <span class="id" title="var">X</span> <span class="id" title="var">b</span>)) <span class="id" title="tactic">in</span> <span class="id" title="var">rab</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">isr</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">rb</span> <span class="id" title="var">rab</span>).<br/>
</div>
<span class="id" title="keyword">Opaque</span> <span class="id" title="var">islrinvringmultgttoisinvringmultgt</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">isinvringmultgtaspartinvbinophrel</span> (<span class="id" title="var">X</span> : <span class="id" title="tactic">ring</span>) (<span class="id" title="var">R</span> : <span class="id" title="var">hrel</span> <span class="id" title="var">X</span>) (<span class="id" title="var">is0</span> : @<span class="id" title="var">isbinophrel</span> <span class="id" title="var">X</span> <span class="id" title="var">R</span>) :<br/>
&nbsp;&nbsp;(<span class="id" title="var">isinvringmultgt</span> <span class="id" title="var">X</span> <span class="id" title="var">R</span>) &lt;-&gt; (@<span class="id" title="var">ispartinvbinophrel</span> (<span class="id" title="var">ringmultmonoid</span> <span class="id" title="var">X</span>) (<span class="id" title="var">λ</span> <span class="id" title="var">a</span>, <span class="id" title="var">R</span> <span class="id" title="var">a</span> 0) <span class="id" title="var">R</span>).<br/>
<a class="proof" href="#">Show proof.</a><br/><div class="proof">
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intro</span> <span class="id" title="var">ism</span>. <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> (<span class="id" title="var">isinvringmultgttoislinvringmultgt</span> <span class="id" title="var">X</span> <span class="id" title="var">is0</span> <span class="id" title="var">ism</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> (<span class="id" title="var">isinvringmultgttoisrinvringmultgt</span> <span class="id" title="var">X</span> <span class="id" title="var">is0</span> <span class="id" title="var">ism</span>).<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intro</span> <span class="id" title="var">isp</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">islrinvringmultgttoisinvringmultgt</span> <span class="id" title="var">X</span> (<span class="id" title="var">pr1</span> <span class="id" title="var">isp</span>) (<span class="id" title="var">pr2</span> <span class="id" title="var">isp</span>)).<br/>
</div>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">isinvringmultgttoisinvrigmultgt</span> (<span class="id" title="var">X</span> : <span class="id" title="tactic">ring</span>) {<span class="id" title="var">R</span> : <span class="id" title="var">hrel</span> <span class="id" title="var">X</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">is0</span> : @<span class="id" title="var">isbinophrel</span> <span class="id" title="var">X</span> <span class="id" title="var">R</span>) (<span class="id" title="keyword">is</span> : <span class="id" title="var">isinvringmultgt</span> <span class="id" title="var">X</span> <span class="id" title="var">R</span>) : <span class="id" title="var">isinvrigmultgt</span> <span class="id" title="var">X</span> <span class="id" title="var">R</span>.<br/>
<a class="proof" href="#">Show proof.</a><br/><div class="proof">
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">set</span> (<span class="id" title="var">rer</span> := <span class="id" title="var">abmonoidrer</span> <span class="id" title="var">X</span>). <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">rer</span>. <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span> <span class="id" title="var">c</span> <span class="id" title="var">d</span> <span class="id" title="var">r</span> <span class="id" title="var">rab</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">r'</span> := (<span class="id" title="var">pr2</span> <span class="id" title="var">is0</span>) <span class="id" title="var">_</span> <span class="id" title="var">_</span> (<span class="id" title="var">a</span> * - <span class="id" title="var">d</span> + - <span class="id" title="var">b</span> * <span class="id" title="var">c</span>) <span class="id" title="var">r</span>). <span class="id" title="var">clearbody</span> <span class="id" title="var">r'</span>. <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">r'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="var">rer</span> <span class="id" title="var">_</span> (<span class="id" title="var">b</span> * <span class="id" title="var">c</span>) <span class="id" title="var">_</span> <span class="id" title="var">_</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">r'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="var">pathsinv0</span> (<span class="id" title="var">ringldistr</span> <span class="id" title="var">X</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">a</span>)) <span class="id" title="tactic">in</span> <span class="id" title="var">r'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="var">pathsinv0</span> (<span class="id" title="var">ringrdistr</span> <span class="id" title="var">X</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">c</span>)) <span class="id" title="tactic">in</span> <span class="id" title="var">r'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="var">ringrinvax1</span> <span class="id" title="var">X</span> <span class="id" title="var">d</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">r'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="var">ringrinvax1</span> <span class="id" title="var">X</span> <span class="id" title="var">b</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">r'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="var">ringmult0x</span> <span class="id" title="var">X</span> <span class="id" title="var">_</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">r'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="var">ringmultx0</span> <span class="id" title="var">X</span> <span class="id" title="var">_</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">r'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="var">ringlunax1</span> <span class="id" title="var">X</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">r'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="var">rer</span> <span class="id" title="var">_</span> (<span class="id" title="var">b</span> * <span class="id" title="var">d</span>) <span class="id" title="var">_</span> <span class="id" title="var">_</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">r'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="var">pathsinv0</span> (<span class="id" title="var">ringldistr</span> <span class="id" title="var">X</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">a</span>)) <span class="id" title="tactic">in</span> <span class="id" title="var">r'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">r'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">fold</span> <span class="id" title="var">pr1ring</span> <span class="id" title="tactic">in</span> <span class="id" title="var">r'</span>. &nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">change</span> (<span class="id" title="var">pr1</span> <span class="id" title="var">X</span>) <span class="id" title="keyword">with</span> (<span class="id" title="var">pr1ring</span> <span class="id" title="var">X</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">r'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="var">pathsinv0</span> (<span class="id" title="var">ringmultminusminus</span> <span class="id" title="var">X</span> <span class="id" title="var">b</span> <span class="id" title="var">d</span>)) <span class="id" title="tactic">in</span> <span class="id" title="var">r'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="var">pathsinv0</span> (<span class="id" title="var">ringldistr</span> <span class="id" title="var">X</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> (- <span class="id" title="var">b</span>))) <span class="id" title="tactic">in</span> <span class="id" title="var">r'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="var">ringcomm1</span> <span class="id" title="var">X</span> <span class="id" title="var">_</span> <span class="id" title="var">c</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">r'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="var">pathsinv0</span> (<span class="id" title="var">ringrdistr</span> <span class="id" title="var">X</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>)) <span class="id" title="tactic">in</span> <span class="id" title="var">r'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">rab'</span> := (<span class="id" title="var">pr2</span> <span class="id" title="var">is0</span>) <span class="id" title="var">_</span> <span class="id" title="var">_</span> (- <span class="id" title="var">b</span>) <span class="id" title="var">rab</span>). <span class="id" title="var">clearbody</span> <span class="id" title="var">rab'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">rab'</span>. <span class="id" title="tactic">rewrite</span> (<span class="id" title="var">ringrinvax1</span> <span class="id" title="var">X</span> <span class="id" title="var">b</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">rab'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">rcd'</span> := (<span class="id" title="var">pr1</span> <span class="id" title="keyword">is</span>) <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">r'</span> <span class="id" title="var">rab'</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">rcd''</span> := (<span class="id" title="var">pr2</span> <span class="id" title="var">is0</span>) <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">d</span> <span class="id" title="var">rcd'</span>). <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">rcd''</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="var">ringassoc1</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">rcd''</span>. <span class="id" title="tactic">rewrite</span> (<span class="id" title="var">ringlinvax1</span> <span class="id" title="var">X</span> <span class="id" title="var">_</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">rcd''</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="var">ringlunax1</span> <span class="id" title="var">X</span> <span class="id" title="var">_</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">rcd''</span>. <span class="id" title="tactic">rewrite</span> (<span class="id" title="var">ringrunax1</span> <span class="id" title="var">X</span> <span class="id" title="var">_</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">rcd''</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">rcd''</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span> <span class="id" title="var">c</span> <span class="id" title="var">d</span> <span class="id" title="var">r</span> <span class="id" title="var">rcd</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">r'</span> := (<span class="id" title="var">pr2</span> <span class="id" title="var">is0</span>) <span class="id" title="var">_</span> <span class="id" title="var">_</span> (<span class="id" title="var">a</span> * - <span class="id" title="var">d</span> + - <span class="id" title="var">b</span> * <span class="id" title="var">c</span>) <span class="id" title="var">r</span>). <span class="id" title="var">clearbody</span> <span class="id" title="var">r'</span>. <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">r'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="var">rer</span> <span class="id" title="var">_</span> (<span class="id" title="var">b</span> * <span class="id" title="var">c</span>) <span class="id" title="var">_</span> <span class="id" title="var">_</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">r'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="var">pathsinv0</span> (<span class="id" title="var">ringldistr</span> <span class="id" title="var">X</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">a</span>)) <span class="id" title="tactic">in</span> <span class="id" title="var">r'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="var">pathsinv0</span> (<span class="id" title="var">ringrdistr</span> <span class="id" title="var">X</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">c</span>)) <span class="id" title="tactic">in</span> <span class="id" title="var">r'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="var">ringrinvax1</span> <span class="id" title="var">X</span> <span class="id" title="var">d</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">r'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="var">ringrinvax1</span> <span class="id" title="var">X</span> <span class="id" title="var">b</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">r'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="var">ringmult0x</span> <span class="id" title="var">X</span> <span class="id" title="var">_</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">r'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="var">ringmultx0</span> <span class="id" title="var">X</span> <span class="id" title="var">_</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">r'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="var">ringlunax1</span> <span class="id" title="var">X</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">r'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="var">rer</span> <span class="id" title="var">_</span> (<span class="id" title="var">b</span> * <span class="id" title="var">d</span>) <span class="id" title="var">_</span> <span class="id" title="var">_</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">r'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="var">pathsinv0</span> (<span class="id" title="var">ringldistr</span> <span class="id" title="var">X</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">a</span>)) <span class="id" title="tactic">in</span> <span class="id" title="var">r'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">r'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">fold</span> <span class="id" title="var">pr1ring</span> <span class="id" title="tactic">in</span> <span class="id" title="var">r'</span>. &nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">change</span> (<span class="id" title="var">pr1</span> <span class="id" title="var">X</span>) <span class="id" title="keyword">with</span> (<span class="id" title="var">pr1ring</span> <span class="id" title="var">X</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">r'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="var">pathsinv0</span> (<span class="id" title="var">ringmultminusminus</span> <span class="id" title="var">X</span> <span class="id" title="var">b</span> <span class="id" title="var">d</span>)) <span class="id" title="tactic">in</span> <span class="id" title="var">r'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="var">pathsinv0</span> (<span class="id" title="var">ringldistr</span> <span class="id" title="var">X</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> (- <span class="id" title="var">b</span>))) <span class="id" title="tactic">in</span> <span class="id" title="var">r'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="var">ringcomm1</span> <span class="id" title="var">X</span> <span class="id" title="var">_</span> <span class="id" title="var">c</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">r'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="var">pathsinv0</span> (<span class="id" title="var">ringrdistr</span> <span class="id" title="var">X</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>)) <span class="id" title="tactic">in</span> <span class="id" title="var">r'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">rcd'</span> := (<span class="id" title="var">pr2</span> <span class="id" title="var">is0</span>) <span class="id" title="var">_</span> <span class="id" title="var">_</span> (- <span class="id" title="var">d</span>) <span class="id" title="var">rcd</span>). <span class="id" title="var">clearbody</span> <span class="id" title="var">rcd'</span>. <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">rcd'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="var">ringrinvax1</span> <span class="id" title="var">X</span> <span class="id" title="var">d</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">rcd'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">rab'</span> := (<span class="id" title="var">pr2</span> <span class="id" title="keyword">is</span>) <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">r'</span> <span class="id" title="var">rcd'</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">rab''</span> := (<span class="id" title="var">pr2</span> <span class="id" title="var">is0</span>) <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">b</span> <span class="id" title="var">rab'</span>). <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">rab''</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="var">ringassoc1</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">rab''</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="var">ringlinvax1</span> <span class="id" title="var">X</span> <span class="id" title="var">_</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">rab''</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="var">ringlunax1</span> <span class="id" title="var">X</span> <span class="id" title="var">_</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">rab''</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="var">ringrunax1</span> <span class="id" title="var">X</span> <span class="id" title="var">_</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">rab''</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">rab''</span>.<br/>
</div>
<span class="id" title="keyword">Opaque</span> <span class="id" title="var">isinvringmultgttoisinvrigmultgt</span>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab505"></a><h4 class="section">Relations on rings and ring homomorphisms</h4>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">ringaddhrelandfun</span> {<span class="id" title="var">X</span> <span class="id" title="var">Y</span> : <span class="id" title="tactic">ring</span>} (<span class="id" title="var">f</span> : <span class="id" title="var">ringfun</span> <span class="id" title="var">X</span> <span class="id" title="var">Y</span>) (<span class="id" title="var">R</span> : <span class="id" title="var">hrel</span> <span class="id" title="var">Y</span>) (<span class="id" title="var">isr</span> : @<span class="id" title="var">isbinophrel</span> <span class="id" title="var">Y</span> <span class="id" title="var">R</span>) :<br/>
&nbsp;&nbsp;@<span class="id" title="var">isbinophrel</span> <span class="id" title="var">X</span> (<span class="id" title="var">λ</span> <span class="id" title="var">x</span> <span class="id" title="var">x'</span>, <span class="id" title="var">R</span> (<span class="id" title="var">f</span> <span class="id" title="var">x</span>) (<span class="id" title="var">f</span> <span class="id" title="var">x'</span>)).<br/>
<a class="proof" href="#">Show proof.</a><br/><div class="proof"> <span class="id" title="tactic">intros</span>. <span class="id" title="tactic">apply</span> (<span class="id" title="var">binophrelandfun</span> (<span class="id" title="var">ringaddfun</span> <span class="id" title="var">f</span>) <span class="id" title="var">R</span> <span class="id" title="var">isr</span>). </div>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">ringmultgtandfun</span> {<span class="id" title="var">X</span> <span class="id" title="var">Y</span> : <span class="id" title="tactic">ring</span>} (<span class="id" title="var">f</span> : <span class="id" title="var">ringfun</span> <span class="id" title="var">X</span> <span class="id" title="var">Y</span>) (<span class="id" title="var">R</span> : <span class="id" title="var">hrel</span> <span class="id" title="var">Y</span>) (<span class="id" title="var">isr</span> : <span class="id" title="var">isringmultgt</span> <span class="id" title="var">Y</span> <span class="id" title="var">R</span>) :<br/>
&nbsp;&nbsp;<span class="id" title="var">isringmultgt</span> <span class="id" title="var">X</span> (<span class="id" title="var">λ</span> <span class="id" title="var">x</span> <span class="id" title="var">x'</span>, <span class="id" title="var">R</span> (<span class="id" title="var">f</span> <span class="id" title="var">x</span>) (<span class="id" title="var">f</span> <span class="id" title="var">x'</span>)).<br/>
<a class="proof" href="#">Show proof.</a><br/><div class="proof">
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">intros</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span> <span class="id" title="var">ra</span> <span class="id" title="var">rb</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">ax0</span> := (<span class="id" title="var">pr2</span> (<span class="id" title="var">pr1</span> (<span class="id" title="var">pr2</span> <span class="id" title="var">f</span>))) : (<span class="id" title="var">f</span> 0) = 0).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">ax1</span> := (<span class="id" title="var">pr1</span> (<span class="id" title="var">pr2</span> (<span class="id" title="var">pr2</span> <span class="id" title="var">f</span>))) : ∏ <span class="id" title="var">a</span> <span class="id" title="var">b</span>, <span class="id" title="var">paths</span> (<span class="id" title="var">f</span> (<span class="id" title="var">a</span> * <span class="id" title="var">b</span>)) ((<span class="id" title="var">f</span> <span class="id" title="var">a</span>) * (<span class="id" title="var">f</span> <span class="id" title="var">b</span>))).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">ax0</span> <span class="id" title="tactic">in</span> <span class="id" title="var">ra</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">ax0</span> <span class="id" title="tactic">in</span> <span class="id" title="var">rb</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">ax0</span>. <span class="id" title="tactic">rewrite</span> (<span class="id" title="var">ax1</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">isr</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">ra</span> <span class="id" title="var">rb</span>).<br/>
</div>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">ringinvmultgtandfun</span> {<span class="id" title="var">X</span> <span class="id" title="var">Y</span> : <span class="id" title="tactic">ring</span>} (<span class="id" title="var">f</span> : <span class="id" title="var">ringfun</span> <span class="id" title="var">X</span> <span class="id" title="var">Y</span>) (<span class="id" title="var">R</span> : <span class="id" title="var">hrel</span> <span class="id" title="var">Y</span>) (<span class="id" title="var">isr</span> : <span class="id" title="var">isinvringmultgt</span> <span class="id" title="var">Y</span> <span class="id" title="var">R</span>) :<br/>
&nbsp;&nbsp;<span class="id" title="var">isinvringmultgt</span> <span class="id" title="var">X</span> (<span class="id" title="var">λ</span> <span class="id" title="var">x</span> <span class="id" title="var">x'</span>, <span class="id" title="var">R</span> (<span class="id" title="var">f</span> <span class="id" title="var">x</span>) (<span class="id" title="var">f</span> <span class="id" title="var">x'</span>)).<br/>
<a class="proof" href="#">Show proof.</a><br/><div class="proof">
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">ax0</span> := (<span class="id" title="var">pr2</span> (<span class="id" title="var">pr1</span> (<span class="id" title="var">pr2</span> <span class="id" title="var">f</span>))) : (<span class="id" title="var">f</span> 0) = 0).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">ax1</span> := (<span class="id" title="var">pr1</span> (<span class="id" title="var">pr2</span> (<span class="id" title="var">pr2</span> <span class="id" title="var">f</span>))) : ∏ <span class="id" title="var">a</span> <span class="id" title="var">b</span>, <span class="id" title="var">paths</span> (<span class="id" title="var">f</span> (<span class="id" title="var">a</span> * <span class="id" title="var">b</span>)) ((<span class="id" title="var">f</span> <span class="id" title="var">a</span>) * (<span class="id" title="var">f</span> <span class="id" title="var">b</span>))).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span> <span class="id" title="var">rab</span> <span class="id" title="var">ra</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">ax0</span> <span class="id" title="tactic">in</span> <span class="id" title="var">ra</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">ax0</span> <span class="id" title="tactic">in</span> <span class="id" title="var">rab</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">ax0</span>. <span class="id" title="tactic">rewrite</span> (<span class="id" title="var">ax1</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">rab</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> ((<span class="id" title="var">pr1</span> <span class="id" title="var">isr</span>) <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">rab</span> <span class="id" title="var">ra</span>).<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span> <span class="id" title="var">rab</span> <span class="id" title="var">rb</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">ax0</span> <span class="id" title="tactic">in</span> <span class="id" title="var">rb</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">ax0</span> <span class="id" title="tactic">in</span> <span class="id" title="var">rab</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">ax0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="var">ax1</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">rab</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> ((<span class="id" title="var">pr2</span> <span class="id" title="var">isr</span>) <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">rab</span> <span class="id" title="var">rb</span>).<br/>
</div>

<br/>
<span class="id" title="keyword">Close</span> <span class="id" title="keyword">Scope</span> <span class="id" title="var">ring_scope</span>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab506"></a><h4 class="section">Subobjects</h4>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">issubring</span> {<span class="id" title="var">X</span> : <span class="id" title="tactic">ring</span>} (<span class="id" title="var">A</span> : <span class="id" title="var">hsubtype</span> <span class="id" title="var">X</span>) : <span class="id" title="var">UU</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="var">dirprod</span> (@<span class="id" title="var">issubgr</span> <span class="id" title="var">X</span> <span class="id" title="var">A</span>) (@<span class="id" title="var">issubmonoid</span> (<span class="id" title="var">ringmultmonoid</span> <span class="id" title="var">X</span>) <span class="id" title="var">A</span>).<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">isapropissubring</span> {<span class="id" title="var">X</span> : <span class="id" title="tactic">ring</span>} (<span class="id" title="var">A</span> : <span class="id" title="var">hsubtype</span> <span class="id" title="var">X</span>) : <span class="id" title="var">isaprop</span> (<span class="id" title="var">issubring</span> <span class="id" title="var">A</span>).<br/>
<a class="proof" href="#">Show proof.</a><br/><div class="proof">
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">apply</span> (<span class="id" title="var">isofhleveldirprod</span> 1).<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <span class="id" title="var">isapropissubgr</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <span class="id" title="var">isapropissubmonoid</span>.<br/>
</div>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">subring</span> (<span class="id" title="var">X</span> : <span class="id" title="tactic">ring</span>) : <span class="id" title="var">UU</span> := <span class="id" title="var">total2</span> (<span class="id" title="var">λ</span> <span class="id" title="var">A</span> : <span class="id" title="var">hsubtype</span> <span class="id" title="var">X</span>, <span class="id" title="var">issubring</span> <span class="id" title="var">A</span>).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">subringpair</span> {<span class="id" title="var">X</span> : <span class="id" title="tactic">ring</span>} :<br/>
&nbsp;&nbsp;∏ (<span class="id" title="var">t</span> : <span class="id" title="var">hsubtype</span> <span class="id" title="var">X</span>), (<span class="id" title="var">λ</span> <span class="id" title="var">A</span> : <span class="id" title="var">hsubtype</span> <span class="id" title="var">X</span>, <span class="id" title="var">issubring</span> <span class="id" title="var">A</span>) <span class="id" title="var">t</span> → ∑ <span class="id" title="var">A</span> : <span class="id" title="var">hsubtype</span> <span class="id" title="var">X</span>, <span class="id" title="var">issubring</span> <span class="id" title="var">A</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="var">tpair</span> (<span class="id" title="var">λ</span> <span class="id" title="var">A</span> : <span class="id" title="var">hsubtype</span> <span class="id" title="var">X</span>, <span class="id" title="var">issubring</span> <span class="id" title="var">A</span>).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">pr1subring</span> (<span class="id" title="var">X</span> : <span class="id" title="tactic">ring</span>) : @<span class="id" title="var">subring</span> <span class="id" title="var">X</span> -&gt; <span class="id" title="var">hsubtype</span> <span class="id" title="var">X</span> :=<br/>
&nbsp;&nbsp;@<span class="id" title="var">pr1</span> <span class="id" title="var">_</span> (<span class="id" title="var">λ</span> <span class="id" title="var">A</span> : <span class="id" title="var">hsubtype</span> <span class="id" title="var">X</span>, <span class="id" title="var">issubring</span> <span class="id" title="var">A</span>).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">subringtosubsetswith2binop</span> (<span class="id" title="var">X</span> : <span class="id" title="tactic">ring</span>) : <span class="id" title="var">subring</span> <span class="id" title="var">X</span> -&gt; @<span class="id" title="var">subsetswith2binop</span> <span class="id" title="var">X</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="var">λ</span> <span class="id" title="var">A</span> : <span class="id" title="var">_</span>, <span class="id" title="var">subsetswith2binoppair</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">pr1</span> <span class="id" title="var">A</span>) (<span class="id" title="var">dirprodpair</span> (<span class="id" title="var">pr1</span> (<span class="id" title="var">pr1</span> (<span class="id" title="var">pr1</span> (<span class="id" title="var">pr2</span> <span class="id" title="var">A</span>)))) (<span class="id" title="var">pr1</span> (<span class="id" title="var">pr2</span> (<span class="id" title="var">pr2</span> <span class="id" title="var">A</span>)))).<br/>
<span class="id" title="keyword">Coercion</span> <span class="id" title="var">subringtosubsetswith2binop</span> : <span class="id" title="var">subring</span> &gt;-&gt; <span class="id" title="var">subsetswith2binop</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">addsubgr</span> {<span class="id" title="var">X</span> : <span class="id" title="tactic">ring</span>} : <span class="id" title="var">subring</span> <span class="id" title="var">X</span> -&gt; @<span class="id" title="var">subgr</span> <span class="id" title="var">X</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="var">λ</span> <span class="id" title="var">A</span> : <span class="id" title="var">_</span>, @<span class="id" title="var">subgrpair</span> <span class="id" title="var">X</span> (<span class="id" title="var">pr1</span> <span class="id" title="var">A</span>) (<span class="id" title="var">pr1</span> (<span class="id" title="var">pr2</span> <span class="id" title="var">A</span>)).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">multsubmonoid</span> {<span class="id" title="var">X</span> : <span class="id" title="tactic">ring</span>} : <span class="id" title="var">subring</span> <span class="id" title="var">X</span> -&gt; @<span class="id" title="var">submonoid</span> (<span class="id" title="var">ringmultmonoid</span> <span class="id" title="var">X</span>) :=<br/>
&nbsp;&nbsp;<span class="id" title="var">λ</span> <span class="id" title="var">A</span> : <span class="id" title="var">_</span>, @<span class="id" title="var">submonoidpair</span> (<span class="id" title="var">ringmultmonoid</span> <span class="id" title="var">X</span>) (<span class="id" title="var">pr1</span> <span class="id" title="var">A</span>) (<span class="id" title="var">pr2</span> (<span class="id" title="var">pr2</span> <span class="id" title="var">A</span>)).<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">isringcarrier</span> {<span class="id" title="var">X</span> : <span class="id" title="tactic">ring</span>} (<span class="id" title="var">A</span> : <span class="id" title="var">subring</span> <span class="id" title="var">X</span>) : <span class="id" title="var">isringops</span> (@<span class="id" title="var">op1</span> <span class="id" title="var">A</span>) (@<span class="id" title="var">op2</span> <span class="id" title="var">A</span>).<br/>
<a class="proof" href="#">Show proof.</a><br/><div class="proof">
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span> <span class="id" title="keyword">with</span> (<span class="id" title="var">dirprodpair</span> (<span class="id" title="var">isabgrcarrier</span> (<span class="id" title="var">addsubgr</span> <span class="id" title="var">A</span>)) (<span class="id" title="var">ismonoidcarrier</span> (<span class="id" title="var">multsubmonoid</span> <span class="id" title="var">A</span>))).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span> <span class="id" title="var">c</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">invmaponpathsincl</span> <span class="id" title="var">_</span> (<span class="id" title="var">isinclpr1carrier</span> <span class="id" title="var">A</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">ringldistr</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span> <span class="id" title="var">c</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">invmaponpathsincl</span> <span class="id" title="var">_</span> (<span class="id" title="var">isinclpr1carrier</span> <span class="id" title="var">A</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">ringrdistr</span>.<br/>
</div>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">carrierofasubring</span> (<span class="id" title="var">X</span> : <span class="id" title="tactic">ring</span>) (<span class="id" title="var">A</span> : <span class="id" title="var">subring</span> <span class="id" title="var">X</span>) : <span class="id" title="tactic">ring</span>.<br/>
<a class="proof" href="#">Show proof.</a><br/><div class="proof"> <span class="id" title="tactic">intros</span>. <span class="id" title="tactic">split</span> <span class="id" title="keyword">with</span> <span class="id" title="var">A</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">isringcarrier</span>. </div>
<span class="id" title="keyword">Coercion</span> <span class="id" title="var">carrierofasubring</span> : <span class="id" title="var">subring</span> &gt;-&gt; <span class="id" title="tactic">ring</span>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab507"></a><h4 class="section">Quotient objects</h4>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">ringeqrel</span> {<span class="id" title="var">X</span> : <span class="id" title="tactic">ring</span>} := @<span class="id" title="var">twobinopeqrel</span> <span class="id" title="var">X</span>.<br/>
<span class="id" title="keyword">Identity</span> <span class="id" title="keyword">Coercion</span> <span class="id" title="var">id_ringeqrel</span> : <span class="id" title="var">ringeqrel</span> &gt;-&gt; <span class="id" title="var">twobinopeqrel</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">ringaddabgreqrel</span> {<span class="id" title="var">X</span> : <span class="id" title="tactic">ring</span>} (<span class="id" title="var">R</span> : @<span class="id" title="var">ringeqrel</span> <span class="id" title="var">X</span>) :<br/>
&nbsp;&nbsp;@<span class="id" title="var">binopeqrel</span> <span class="id" title="var">X</span> := @<span class="id" title="var">binopeqrelpair</span> <span class="id" title="var">X</span> (<span class="id" title="var">pr1</span> <span class="id" title="var">R</span>) (<span class="id" title="var">pr1</span> (<span class="id" title="var">pr2</span> <span class="id" title="var">R</span>)).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">ringmultmonoideqrel</span> {<span class="id" title="var">X</span> : <span class="id" title="tactic">ring</span>} (<span class="id" title="var">R</span> : @<span class="id" title="var">ringeqrel</span> <span class="id" title="var">X</span>) :<br/>
&nbsp;&nbsp;@<span class="id" title="var">binopeqrel</span> (<span class="id" title="var">ringmultmonoid</span> <span class="id" title="var">X</span>) := @<span class="id" title="var">binopeqrelpair</span> (<span class="id" title="var">ringmultmonoid</span> <span class="id" title="var">X</span>) (<span class="id" title="var">pr1</span> <span class="id" title="var">R</span>) (<span class="id" title="var">pr2</span> (<span class="id" title="var">pr2</span> <span class="id" title="var">R</span>)).<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">isringquot</span> {<span class="id" title="var">X</span> : <span class="id" title="tactic">ring</span>} (<span class="id" title="var">R</span> : @<span class="id" title="var">ringeqrel</span> <span class="id" title="var">X</span>) :<br/>
&nbsp;&nbsp;<span class="id" title="var">isringops</span> (@<span class="id" title="var">op1</span> (<span class="id" title="var">setwith2binopquot</span> <span class="id" title="var">R</span>)) (@<span class="id" title="var">op2</span> (<span class="id" title="var">setwith2binopquot</span> <span class="id" title="var">R</span>)).<br/>
<a class="proof" href="#">Show proof.</a><br/><div class="proof">
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span> <span class="id" title="keyword">with</span> (<span class="id" title="var">dirprodpair</span> (<span class="id" title="var">isabgrquot</span> (<span class="id" title="var">ringaddabgreqrel</span> <span class="id" title="var">R</span>)) (<span class="id" title="var">ismonoidquot</span> (<span class="id" title="var">ringmultmonoideqrel</span> <span class="id" title="var">R</span>))).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">opp1</span> := @<span class="id" title="var">op1</span> (<span class="id" title="var">setwith2binopquot</span> <span class="id" title="var">R</span>)).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">opp2</span> := @<span class="id" title="var">op2</span> (<span class="id" title="var">setwith2binopquot</span> <span class="id" title="var">R</span>)).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">unfold</span> <span class="id" title="var">isldistr</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">setquotuniv3prop</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">R</span> (<span class="id" title="var">λ</span> <span class="id" title="var">x</span> <span class="id" title="var">x'</span> <span class="id" title="var">x''</span>, <span class="id" title="var">hProppair</span> <span class="id" title="var">_</span> (<span class="id" title="var">setproperty</span> (<span class="id" title="var">setwith2binopquot</span> <span class="id" title="var">R</span>) (<span class="id" title="var">opp2</span>  <span class="id" title="var">x''</span> (<span class="id" title="var">opp1</span> <span class="id" title="var">x</span> <span class="id" title="var">x'</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">opp1</span> (<span class="id" title="var">opp2</span> <span class="id" title="var">x''</span> <span class="id" title="var">x</span>) (<span class="id" title="var">opp2</span> <span class="id" title="var">x''</span> <span class="id" title="var">x'</span>))))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">x</span> <span class="id" title="var">x'</span> <span class="id" title="var">x''</span>. <span class="id" title="tactic">apply</span> (<span class="id" title="var">maponpaths</span> (<span class="id" title="var">setquotpr</span> <span class="id" title="var">R</span>) (<span class="id" title="var">ringldistr</span> <span class="id" title="var">X</span> <span class="id" title="var">x</span> <span class="id" title="var">x'</span> <span class="id" title="var">x''</span>)).<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">unfold</span> <span class="id" title="var">isrdistr</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">setquotuniv3prop</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">R</span> (<span class="id" title="var">λ</span> <span class="id" title="var">x</span> <span class="id" title="var">x'</span> <span class="id" title="var">x''</span>, <span class="id" title="var">hProppair</span> <span class="id" title="var">_</span> (<span class="id" title="var">setproperty</span> (<span class="id" title="var">setwith2binopquot</span> <span class="id" title="var">R</span>) (<span class="id" title="var">opp2</span>  (<span class="id" title="var">opp1</span> <span class="id" title="var">x</span> <span class="id" title="var">x'</span>) <span class="id" title="var">x''</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">opp1</span> (<span class="id" title="var">opp2</span> <span class="id" title="var">x</span> <span class="id" title="var">x''</span>) (<span class="id" title="var">opp2</span> <span class="id" title="var">x'</span> <span class="id" title="var">x''</span>))))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">x</span> <span class="id" title="var">x'</span> <span class="id" title="var">x''</span>. <span class="id" title="tactic">apply</span> (<span class="id" title="var">maponpaths</span> (<span class="id" title="var">setquotpr</span> <span class="id" title="var">R</span>) (<span class="id" title="var">ringrdistr</span> <span class="id" title="var">X</span> <span class="id" title="var">x</span> <span class="id" title="var">x'</span> <span class="id" title="var">x''</span>)).<br/>
</div>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">ringquot</span> {<span class="id" title="var">X</span> : <span class="id" title="tactic">ring</span>} (<span class="id" title="var">R</span> : @<span class="id" title="var">ringeqrel</span> <span class="id" title="var">X</span>) : <span class="id" title="tactic">ring</span> :=<br/>
&nbsp;&nbsp;@<span class="id" title="var">ringpair</span> (<span class="id" title="var">setwith2binopquot</span> <span class="id" title="var">R</span>) (<span class="id" title="var">isringquot</span> <span class="id" title="var">R</span>).<br/>

<br/>
</div>

<div class="doc">
<a name="lab508"></a><h4 class="section">Direct products</h4>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">isringdirprod</span> (<span class="id" title="var">X</span> <span class="id" title="var">Y</span> : <span class="id" title="tactic">ring</span>) :<br/>
&nbsp;&nbsp;<span class="id" title="var">isringops</span> (@<span class="id" title="var">op1</span> (<span class="id" title="var">setwith2binopdirprod</span> <span class="id" title="var">X</span> <span class="id" title="var">Y</span>)) (@<span class="id" title="var">op2</span> (<span class="id" title="var">setwith2binopdirprod</span> <span class="id" title="var">X</span> <span class="id" title="var">Y</span>)).<br/>
<a class="proof" href="#">Show proof.</a><br/><div class="proof">
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span> <span class="id" title="keyword">with</span> (<span class="id" title="var">dirprodpair</span> (<span class="id" title="var">isabgrdirprod</span> <span class="id" title="var">X</span> <span class="id" title="var">Y</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">ismonoiddirprod</span> (<span class="id" title="var">ringmultmonoid</span> <span class="id" title="var">X</span>) (<span class="id" title="var">ringmultmonoid</span> <span class="id" title="var">Y</span>))).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">xy</span> <span class="id" title="var">xy'</span> <span class="id" title="var">xy''</span>. <span class="id" title="tactic">unfold</span> <span class="id" title="var">setwith2binopdirprod</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">op1</span>. <span class="id" title="tactic">unfold</span> <span class="id" title="var">op2</span>. <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">pathsdirprod</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> (<span class="id" title="var">ringldistr</span> <span class="id" title="var">X</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> (<span class="id" title="var">ringldistr</span> <span class="id" title="var">Y</span>).<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">xy</span> <span class="id" title="var">xy'</span> <span class="id" title="var">xy''</span>. <span class="id" title="tactic">unfold</span> <span class="id" title="var">setwith2binopdirprod</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">op1</span>. <span class="id" title="tactic">unfold</span> <span class="id" title="var">op2</span>. <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">pathsdirprod</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> (<span class="id" title="var">ringrdistr</span> <span class="id" title="var">X</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> (<span class="id" title="var">ringrdistr</span> <span class="id" title="var">Y</span>).<br/>
</div>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">ringdirprod</span> (<span class="id" title="var">X</span> <span class="id" title="var">Y</span> : <span class="id" title="tactic">ring</span>) : <span class="id" title="tactic">ring</span> := @<span class="id" title="var">ringpair</span> (<span class="id" title="var">setwith2binopdirprod</span> <span class="id" title="var">X</span> <span class="id" title="var">Y</span>) (<span class="id" title="var">isringdirprod</span> <span class="id" title="var">X</span> <span class="id" title="var">Y</span>).<br/>

<br/>
</div>

<div class="doc">
<a name="lab509"></a><h4 class="section">Opposite rings</h4>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Local Open</span> <span class="id" title="keyword">Scope</span> <span class="id" title="var">rig</span>.<br/>

<br/>
</div>

<div class="doc">
We just need to reuse and rearrange the opposite rig 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <span class="id" title="var">opposite_ring</span> (<span class="id" title="var">X</span> : <span class="id" title="tactic">ring</span>) : <span class="id" title="tactic">ring</span>.<br/>
<a class="proof" href="#">Show proof.</a><br/><div class="proof">
&nbsp;&nbsp;<span class="id" title="tactic">refine</span> (<span class="id" title="var">pr1</span> (<span class="id" title="var">X⁰</span>),, <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">mk_isabgrop</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">exact</span> (<span class="id" title="var">pr1</span> (<span class="id" title="var">rigop1axs</span> (<span class="id" title="var">X⁰</span>)),, <span class="id" title="var">pr2</span> (<span class="id" title="var">pr1</span> (<span class="id" title="var">ringop1axs</span> <span class="id" title="var">X</span>))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">exact</span> (<span class="id" title="var">pr2</span> (<span class="id" title="var">ringop1axs</span> <span class="id" title="var">X</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">exact</span> (<span class="id" title="var">rigop2axs</span> (<span class="id" title="var">X⁰</span>)).<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">exact</span> (<span class="id" title="var">rigdistraxs</span> (<span class="id" title="var">X⁰</span>)).<br/>
</div>

<br/>
<span class="id" title="keyword">Notation</span> &quot;X ⁰" := (<span class="id" title="var">opposite_ring</span> <span class="id" title="var">X</span>) (<span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 12) : <span class="id" title="var">ring_scope</span>.<br/>

<br/>
<span class="id" title="keyword">Local Close</span> <span class="id" title="keyword">Scope</span> <span class="id" title="var">rig</span>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab510"></a><h4 class="section">Ring of differences associated with a rig</h4>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Local Open</span> <span class="id" title="keyword">Scope</span> <span class="id" title="var">rig_scope</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">rigtoringaddabgr</span> (<span class="id" title="var">X</span> : <span class="id" title="var">rig</span>) : <span class="id" title="var">abgr</span> := <span class="id" title="var">abgrdiff</span> (<span class="id" title="var">rigaddabmonoid</span> <span class="id" title="var">X</span>).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">rigtoringcarrier</span> (<span class="id" title="var">X</span> : <span class="id" title="var">rig</span>) : <span class="id" title="var">hSet</span> := <span class="id" title="var">pr1</span> (<span class="id" title="var">pr1</span> (<span class="id" title="var">rigtoringaddabgr</span> <span class="id" title="var">X</span>)).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">rigtoringop1int</span> (<span class="id" title="var">X</span> : <span class="id" title="var">rig</span>) : <span class="id" title="var">binop</span> (<span class="id" title="var">X</span> × <span class="id" title="var">X</span>) :=<br/>
&nbsp;&nbsp;<span class="id" title="var">λ</span> <span class="id" title="var">x</span> <span class="id" title="var">x'</span>, <span class="id" title="var">dirprodpair</span> ((<span class="id" title="var">pr1</span> <span class="id" title="var">x</span>) + (<span class="id" title="var">pr1</span> <span class="id" title="var">x'</span>)) ((<span class="id" title="var">pr2</span> <span class="id" title="var">x</span>) + (<span class="id" title="var">pr2</span> <span class="id" title="var">x'</span>)).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">rigtoringop1</span> (<span class="id" title="var">X</span> : <span class="id" title="var">rig</span>) : <span class="id" title="var">binop</span> (<span class="id" title="var">rigtoringcarrier</span> <span class="id" title="var">X</span>) := @<span class="id" title="var">op</span> (<span class="id" title="var">rigtoringaddabgr</span> <span class="id" title="var">X</span>).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">rigtoringop1axs</span> (<span class="id" title="var">X</span> : <span class="id" title="var">rig</span>) : <span class="id" title="var">isabgrop</span> (<span class="id" title="var">rigtoringop1</span> <span class="id" title="var">X</span>) := <span class="id" title="var">pr2</span> (<span class="id" title="var">rigtoringaddabgr</span> <span class="id" title="var">X</span>).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">rigtoringunel1</span> (<span class="id" title="var">X</span> : <span class="id" title="var">rig</span>) : <span class="id" title="var">rigtoringcarrier</span> <span class="id" title="var">X</span> := <span class="id" title="var">unel</span> (<span class="id" title="var">rigtoringaddabgr</span> <span class="id" title="var">X</span>).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">eqrelrigtoring</span> (<span class="id" title="var">X</span> : <span class="id" title="var">rig</span>) : <span class="id" title="var">eqrel</span> (<span class="id" title="var">X</span> × <span class="id" title="var">X</span>) := <span class="id" title="var">eqrelabgrdiff</span> (<span class="id" title="var">rigaddabmonoid</span> <span class="id" title="var">X</span>).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">rigtoringop2int</span> (<span class="id" title="var">X</span> : <span class="id" title="var">rig</span>) : <span class="id" title="var">binop</span> (<span class="id" title="var">X</span> × <span class="id" title="var">X</span>) :=<br/>
&nbsp;&nbsp;<span class="id" title="var">λ</span> <span class="id" title="var">xx</span> <span class="id" title="var">xx'</span> : <span class="id" title="var">dirprod</span> <span class="id" title="var">X</span> <span class="id" title="var">X</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">dirprodpair</span> (<span class="id" title="var">pr1</span> <span class="id" title="var">xx</span> * <span class="id" title="var">pr1</span> <span class="id" title="var">xx'</span> + <span class="id" title="var">pr2</span> <span class="id" title="var">xx</span> * <span class="id" title="var">pr2</span> <span class="id" title="var">xx'</span>) (<span class="id" title="var">pr1</span> <span class="id" title="var">xx</span> * <span class="id" title="var">pr2</span> <span class="id" title="var">xx'</span> + <span class="id" title="var">pr2</span> <span class="id" title="var">xx</span> * <span class="id" title="var">pr1</span> <span class="id" title="var">xx'</span>).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">rigtoringunel2int</span> (<span class="id" title="var">X</span> : <span class="id" title="var">rig</span>) : <span class="id" title="var">dirprod</span> <span class="id" title="var">X</span> <span class="id" title="var">X</span> := <span class="id" title="var">dirprodpair</span> 1 0.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">rigtoringop2comp</span> (<span class="id" title="var">X</span> : <span class="id" title="var">rig</span>) :<br/>
&nbsp;&nbsp;<span class="id" title="var">iscomprelrelfun2</span> (<span class="id" title="var">eqrelrigtoring</span> <span class="id" title="var">X</span>) (<span class="id" title="var">eqrelrigtoring</span> <span class="id" title="var">X</span>) (<span class="id" title="var">rigtoringop2int</span> <span class="id" title="var">X</span>).<br/>
<a class="proof" href="#">Show proof.</a><br/><div class="proof">
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">iscomprelrelfun2if</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">xx</span> <span class="id" title="var">xx'</span> <span class="id" title="var">aa</span>. <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> @<span class="id" title="var">hinhfun</span>. <span class="id" title="tactic">intro</span> <span class="id" title="var">tt1</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">tt1</span> <span class="id" title="keyword">as</span> [ <span class="id" title="var">x0</span> <span class="id" title="var">e</span> ].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span> <span class="id" title="keyword">with</span> (<span class="id" title="var">x0</span> * <span class="id" title="var">pr2</span> <span class="id" title="var">aa</span> + <span class="id" title="var">x0</span> * <span class="id" title="var">pr1</span> <span class="id" title="var">aa</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">rd</span> := <span class="id" title="var">rigrdistr</span> <span class="id" title="var">X</span>). <span class="id" title="tactic">set</span> (<span class="id" title="var">cm1</span> := <span class="id" title="var">rigcomm1</span> <span class="id" title="var">X</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">as1</span> := <span class="id" title="var">rigassoc1</span> <span class="id" title="var">X</span>). <span class="id" title="tactic">set</span> (<span class="id" title="var">rr</span> := <span class="id" title="var">abmonoidoprer</span> (<span class="id" title="var">rigop1axs</span> <span class="id" title="var">X</span>)).<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="var">cm1</span> (<span class="id" title="var">pr1</span> <span class="id" title="var">xx</span> * <span class="id" title="var">pr1</span> <span class="id" title="var">aa</span>) (<span class="id" title="var">pr2</span> <span class="id" title="var">xx</span>  * <span class="id" title="var">pr2</span> <span class="id" title="var">aa</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="var">rr</span> <span class="id" title="var">_</span> (<span class="id" title="var">pr1</span> <span class="id" title="var">xx</span> * <span class="id" title="var">pr1</span> <span class="id" title="var">aa</span>) (<span class="id" title="var">pr1</span> <span class="id" title="var">xx'</span> * <span class="id" title="var">pr2</span> <span class="id" title="var">aa</span>) <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="var">cm1</span> (<span class="id" title="var">pr2</span> <span class="id" title="var">xx</span> * <span class="id" title="var">pr2</span> <span class="id" title="var">aa</span>) (<span class="id" title="var">pr1</span> <span class="id" title="var">xx'</span> * <span class="id" title="var">pr2</span> <span class="id" title="var">aa</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">rd</span> (<span class="id" title="var">pr1</span> <span class="id" title="var">xx</span>) (<span class="id" title="var">pr2</span> <span class="id" title="var">xx'</span>) (<span class="id" title="var">pr1</span> <span class="id" title="var">aa</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">rd</span> (<span class="id" title="var">pr1</span> <span class="id" title="var">xx'</span>) (<span class="id" title="var">pr2</span> <span class="id" title="var">xx</span>) (<span class="id" title="var">pr2</span> <span class="id" title="var">aa</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="var">rr</span> ((<span class="id" title="var">pr1</span> <span class="id" title="var">xx'</span> + <span class="id" title="var">pr2</span> <span class="id" title="var">xx</span>) * <span class="id" title="var">pr2</span> <span class="id" title="var">aa</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;((<span class="id" title="var">pr1</span> <span class="id" title="var">xx</span> + <span class="id" title="var">pr2</span> <span class="id" title="var">xx'</span>) * <span class="id" title="var">pr1</span> <span class="id" title="var">aa</span>) (<span class="id" title="var">x0</span> * <span class="id" title="var">pr2</span> <span class="id" title="var">aa</span>) (<span class="id" title="var">x0</span> * <span class="id" title="var">pr1</span> <span class="id" title="var">aa</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">rd</span> (<span class="id" title="var">pr1</span> <span class="id" title="var">xx'</span> + <span class="id" title="var">pr2</span> <span class="id" title="var">xx</span>) <span class="id" title="var">x0</span> (<span class="id" title="var">pr2</span> <span class="id" title="var">aa</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">rd</span> (<span class="id" title="var">pr1</span> <span class="id" title="var">xx</span> + <span class="id" title="var">pr2</span> <span class="id" title="var">xx'</span>) <span class="id" title="var">x0</span> (<span class="id" title="var">pr1</span> <span class="id" title="var">aa</span>)).<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="var">cm1</span> (<span class="id" title="var">pr1</span> <span class="id" title="var">xx'</span> * <span class="id" title="var">pr1</span> <span class="id" title="var">aa</span>) (<span class="id" title="var">pr2</span> <span class="id" title="var">xx'</span>  * <span class="id" title="var">pr2</span> <span class="id" title="var">aa</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="var">rr</span> <span class="id" title="var">_</span> (<span class="id" title="var">pr1</span> <span class="id" title="var">xx'</span> * <span class="id" title="var">pr1</span> <span class="id" title="var">aa</span>) (<span class="id" title="var">pr1</span> <span class="id" title="var">xx</span> * <span class="id" title="var">pr2</span> <span class="id" title="var">aa</span>) <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="var">cm1</span> (<span class="id" title="var">pr2</span> <span class="id" title="var">xx'</span> * <span class="id" title="var">pr2</span> <span class="id" title="var">aa</span>) (<span class="id" title="var">pr1</span> <span class="id" title="var">xx</span> * <span class="id" title="var">pr2</span> <span class="id" title="var">aa</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">rd</span> (<span class="id" title="var">pr1</span> <span class="id" title="var">xx'</span>) (<span class="id" title="var">pr2</span> <span class="id" title="var">xx</span>) (<span class="id" title="var">pr1</span> <span class="id" title="var">aa</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">rd</span> (<span class="id" title="var">pr1</span> <span class="id" title="var">xx</span>) (<span class="id" title="var">pr2</span> <span class="id" title="var">xx'</span>) (<span class="id" title="var">pr2</span> <span class="id" title="var">aa</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="var">rr</span> ((<span class="id" title="var">pr1</span> <span class="id" title="var">xx</span> + <span class="id" title="var">pr2</span> <span class="id" title="var">xx'</span>) * <span class="id" title="var">pr2</span> <span class="id" title="var">aa</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;((<span class="id" title="var">pr1</span> <span class="id" title="var">xx'</span> + <span class="id" title="var">pr2</span> <span class="id" title="var">xx</span>) * <span class="id" title="var">pr1</span> <span class="id" title="var">aa</span>) (<span class="id" title="var">x0</span> * <span class="id" title="var">pr2</span> <span class="id" title="var">aa</span>) (<span class="id" title="var">x0</span> * <span class="id" title="var">pr1</span> <span class="id" title="var">aa</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">rd</span> (<span class="id" title="var">pr1</span> <span class="id" title="var">xx</span> + <span class="id" title="var">pr2</span> <span class="id" title="var">xx'</span>) <span class="id" title="var">x0</span> (<span class="id" title="var">pr2</span> <span class="id" title="var">aa</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">rd</span> (<span class="id" title="var">pr1</span> <span class="id" title="var">xx'</span> + <span class="id" title="var">pr2</span> <span class="id" title="var">xx</span>) <span class="id" title="var">x0</span> (<span class="id" title="var">pr1</span> <span class="id" title="var">aa</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">e</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">idpath</span>.<br/>

<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">aa</span> <span class="id" title="var">xx</span> <span class="id" title="var">xx'</span>. <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">apply</span> @<span class="id" title="var">hinhfun</span>. <span class="id" title="tactic">intro</span> <span class="id" title="var">tt1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">tt1</span> <span class="id" title="keyword">as</span> [ <span class="id" title="var">x0</span> <span class="id" title="var">e</span> ]. <span class="id" title="tactic">split</span> <span class="id" title="keyword">with</span> (<span class="id" title="var">pr1</span> <span class="id" title="var">aa</span> * <span class="id" title="var">x0</span> + <span class="id" title="var">pr2</span> <span class="id" title="var">aa</span> * <span class="id" title="var">x0</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">ld</span> := <span class="id" title="var">rigldistr</span> <span class="id" title="var">X</span>). <span class="id" title="tactic">set</span> (<span class="id" title="var">cm1</span> := <span class="id" title="var">rigcomm1</span> <span class="id" title="var">X</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">as1</span> := <span class="id" title="var">rigassoc1</span> <span class="id" title="var">X</span>). <span class="id" title="tactic">set</span> (<span class="id" title="var">rr</span> := <span class="id" title="var">abmonoidoprer</span> (<span class="id" title="var">rigop1axs</span> <span class="id" title="var">X</span>)).<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="var">rr</span> <span class="id" title="var">_</span> (<span class="id" title="var">pr2</span> <span class="id" title="var">aa</span> * <span class="id" title="var">pr2</span> <span class="id" title="var">xx</span>) (<span class="id" title="var">pr1</span> <span class="id" title="var">aa</span> * <span class="id" title="var">pr2</span> <span class="id" title="var">xx'</span>) <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">ld</span> (<span class="id" title="var">pr1</span> <span class="id" title="var">xx</span>) (<span class="id" title="var">pr2</span> <span class="id" title="var">xx'</span>) (<span class="id" title="var">pr1</span> <span class="id" title="var">aa</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">ld</span> (<span class="id" title="var">pr2</span> <span class="id" title="var">xx</span>) (<span class="id" title="var">pr1</span> <span class="id" title="var">xx'</span>) (<span class="id" title="var">pr2</span> <span class="id" title="var">aa</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="var">rr</span> <span class="id" title="var">_</span> (<span class="id" title="var">pr2</span> <span class="id" title="var">aa</span> * (<span class="id" title="var">pr2</span> <span class="id" title="var">xx</span> + <span class="id" title="var">pr1</span> <span class="id" title="var">xx'</span>)) (<span class="id" title="var">pr1</span> <span class="id" title="var">aa</span> * <span class="id" title="var">x0</span>) <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">ld</span> (<span class="id" title="var">pr1</span> <span class="id" title="var">xx</span> + <span class="id" title="var">pr2</span> <span class="id" title="var">xx'</span>) <span class="id" title="var">x0</span> (<span class="id" title="var">pr1</span> <span class="id" title="var">aa</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">ld</span> (<span class="id" title="var">pr2</span> <span class="id" title="var">xx</span> + <span class="id" title="var">pr1</span> <span class="id" title="var">xx'</span>) <span class="id" title="var">x0</span> (<span class="id" title="var">pr2</span> <span class="id" title="var">aa</span>)).<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="var">rr</span> <span class="id" title="var">_</span> (<span class="id" title="var">pr2</span> <span class="id" title="var">aa</span> * <span class="id" title="var">pr2</span> <span class="id" title="var">xx'</span>) (<span class="id" title="var">pr1</span> <span class="id" title="var">aa</span> * <span class="id" title="var">pr2</span> <span class="id" title="var">xx</span>) <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">ld</span> (<span class="id" title="var">pr1</span> <span class="id" title="var">xx'</span>) (<span class="id" title="var">pr2</span> <span class="id" title="var">xx</span>) (<span class="id" title="var">pr1</span> <span class="id" title="var">aa</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">ld</span> (<span class="id" title="var">pr2</span> <span class="id" title="var">xx'</span>) (<span class="id" title="var">pr1</span> <span class="id" title="var">xx</span>) (<span class="id" title="var">pr2</span> <span class="id" title="var">aa</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="var">rr</span> <span class="id" title="var">_</span> (<span class="id" title="var">pr2</span> <span class="id" title="var">aa</span> * (<span class="id" title="var">pr2</span> <span class="id" title="var">xx'</span> + <span class="id" title="var">pr1</span> <span class="id" title="var">xx</span>)) (<span class="id" title="var">pr1</span> <span class="id" title="var">aa</span> * <span class="id" title="var">x0</span>) <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">ld</span> (<span class="id" title="var">pr1</span> <span class="id" title="var">xx'</span> + <span class="id" title="var">pr2</span> <span class="id" title="var">xx</span>) <span class="id" title="var">x0</span> (<span class="id" title="var">pr1</span> <span class="id" title="var">aa</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">ld</span> (<span class="id" title="var">pr2</span> <span class="id" title="var">xx'</span> + <span class="id" title="var">pr1</span> <span class="id" title="var">xx</span>) <span class="id" title="var">x0</span> (<span class="id" title="var">pr2</span> <span class="id" title="var">aa</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="var">cm1</span> (<span class="id" title="var">pr2</span> <span class="id" title="var">xx</span>) (<span class="id" title="var">pr1</span> <span class="id" title="var">xx'</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="var">cm1</span> (<span class="id" title="var">pr2</span> <span class="id" title="var">xx'</span>) (<span class="id" title="var">pr1</span> <span class="id" title="var">xx</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">e</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">idpath</span>.<br/>
</div>
<span class="id" title="keyword">Opaque</span> <span class="id" title="var">rigtoringop2comp</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">rigtoringop2</span> (<span class="id" title="var">X</span> : <span class="id" title="var">rig</span>) : <span class="id" title="var">binop</span> (<span class="id" title="var">rigtoringcarrier</span> <span class="id" title="var">X</span>) :=<br/>
&nbsp;&nbsp;<span class="id" title="var">setquotfun2</span> (<span class="id" title="var">eqrelrigtoring</span> <span class="id" title="var">X</span>) (<span class="id" title="var">eqrelrigtoring</span> <span class="id" title="var">X</span>) (<span class="id" title="var">rigtoringop2int</span> <span class="id" title="var">X</span>) (<span class="id" title="var">rigtoringop2comp</span> <span class="id" title="var">X</span>).<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">rigtoringassoc2</span> (<span class="id" title="var">X</span> : <span class="id" title="var">rig</span>) : <span class="id" title="var">isassoc</span> (<span class="id" title="var">rigtoringop2</span> <span class="id" title="var">X</span>).<br/>
<a class="proof" href="#">Show proof.</a><br/><div class="proof">
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">isassoc</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">setquotuniv3prop</span> (<span class="id" title="var">eqrelrigtoring</span> <span class="id" title="var">X</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">λ</span> <span class="id" title="var">x</span> <span class="id" title="var">x'</span> <span class="id" title="var">x''</span> : <span class="id" title="var">rigtoringcarrier</span> <span class="id" title="var">X</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">eqset</span> (<span class="id" title="var">rigtoringop2</span> <span class="id" title="var">X</span> (<span class="id" title="var">rigtoringop2</span> <span class="id" title="var">X</span> <span class="id" title="var">x</span> <span class="id" title="var">x'</span>) <span class="id" title="var">x''</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">rigtoringop2</span> <span class="id" title="var">X</span> <span class="id" title="var">x</span> (<span class="id" title="var">rigtoringop2</span> <span class="id" title="var">X</span> <span class="id" title="var">x'</span> <span class="id" title="var">x''</span>)))).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">x</span> <span class="id" title="var">x'</span> <span class="id" title="var">x''</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">change</span> (<span class="id" title="var">paths</span> (<span class="id" title="var">setquotpr</span> (<span class="id" title="var">eqrelrigtoring</span> <span class="id" title="var">X</span>) (<span class="id" title="var">rigtoringop2int</span> <span class="id" title="var">X</span> (<span class="id" title="var">rigtoringop2int</span> <span class="id" title="var">X</span> <span class="id" title="var">x</span> <span class="id" title="var">x'</span>) <span class="id" title="var">x''</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">setquotpr</span> (<span class="id" title="var">eqrelrigtoring</span> <span class="id" title="var">X</span>) (<span class="id" title="var">rigtoringop2int</span> <span class="id" title="var">X</span> <span class="id" title="var">x</span> (<span class="id" title="var">rigtoringop2int</span> <span class="id" title="var">X</span> <span class="id" title="var">x'</span> <span class="id" title="var">x''</span>)))).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">maponpaths</span> (<span class="id" title="var">setquotpr</span> (<span class="id" title="var">eqrelrigtoring</span> <span class="id" title="var">X</span>))). <span class="id" title="tactic">unfold</span> <span class="id" title="var">rigtoringop2int</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">rd</span> := <span class="id" title="var">rigrdistr</span> <span class="id" title="var">X</span>). <span class="id" title="tactic">set</span> (<span class="id" title="var">ld</span> := <span class="id" title="var">rigldistr</span> <span class="id" title="var">X</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">cm1</span> := <span class="id" title="var">rigcomm1</span> <span class="id" title="var">X</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">as1</span> := <span class="id" title="var">rigassoc1</span> <span class="id" title="var">X</span>). <span class="id" title="tactic">set</span> (<span class="id" title="var">as2</span> := <span class="id" title="var">rigassoc2</span> <span class="id" title="var">X</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">rr</span> := <span class="id" title="var">abmonoidoprer</span> (<span class="id" title="var">rigop1axs</span> <span class="id" title="var">X</span>)). <span class="id" title="tactic">apply</span> <span class="id" title="var">pathsdirprod</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="var">rd</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> (<span class="id" title="var">pr1</span> <span class="id" title="var">x''</span>)). <span class="id" title="tactic">rewrite</span> (<span class="id" title="var">rd</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> (<span class="id" title="var">pr2</span> <span class="id" title="var">x''</span>)).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="var">ld</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> (<span class="id" title="var">pr1</span> <span class="id" title="var">x</span>)). <span class="id" title="tactic">rewrite</span> (<span class="id" title="var">ld</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> (<span class="id" title="var">pr2</span> <span class="id" title="var">x</span>)).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">as2</span> (<span class="id" title="var">pr1</span> <span class="id" title="var">x</span>) (<span class="id" title="var">pr1</span> <span class="id" title="var">x'</span>) (<span class="id" title="var">pr1</span> <span class="id" title="var">x''</span>)).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">as2</span> (<span class="id" title="var">pr1</span> <span class="id" title="var">x</span>) (<span class="id" title="var">pr2</span> <span class="id" title="var">x'</span>) (<span class="id" title="var">pr2</span> <span class="id" title="var">x''</span>)).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">as2</span> (<span class="id" title="var">pr2</span> <span class="id" title="var">x</span>) (<span class="id" title="var">pr1</span> <span class="id" title="var">x'</span>) (<span class="id" title="var">pr2</span> <span class="id" title="var">x''</span>)).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">as2</span> (<span class="id" title="var">pr2</span> <span class="id" title="var">x</span>) (<span class="id" title="var">pr2</span> <span class="id" title="var">x'</span>) (<span class="id" title="var">pr1</span> <span class="id" title="var">x''</span>)).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">cm1</span> (<span class="id" title="var">pr2</span> <span class="id" title="var">x</span> * <span class="id" title="var">pr2</span> <span class="id" title="var">x'</span> * <span class="id" title="var">pr1</span> <span class="id" title="var">x''</span>) (<span class="id" title="var">pr2</span> <span class="id" title="var">x</span> * <span class="id" title="var">pr1</span> <span class="id" title="var">x'</span> * <span class="id" title="var">pr2</span> <span class="id" title="var">x''</span>)).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="var">rr</span> <span class="id" title="var">_</span> (<span class="id" title="var">pr2</span> <span class="id" title="var">x</span> * <span class="id" title="var">pr2</span> <span class="id" title="var">x'</span> * <span class="id" title="var">pr1</span> <span class="id" title="var">x''</span>) (<span class="id" title="var">pr1</span> <span class="id" title="var">x</span> * <span class="id" title="var">pr2</span> <span class="id" title="var">x'</span> * <span class="id" title="var">pr2</span> <span class="id" title="var">x''</span>) <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">idpath</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="var">rd</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> (<span class="id" title="var">pr1</span> <span class="id" title="var">x''</span>)). <span class="id" title="tactic">rewrite</span> (<span class="id" title="var">rd</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> (<span class="id" title="var">pr2</span> <span class="id" title="var">x''</span>)).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="var">ld</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> (<span class="id" title="var">pr1</span> <span class="id" title="var">x</span>)). <span class="id" title="tactic">rewrite</span> (<span class="id" title="var">ld</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> (<span class="id" title="var">pr2</span> <span class="id" title="var">x</span>)).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">as2</span> (<span class="id" title="var">pr1</span> <span class="id" title="var">x</span>) (<span class="id" title="var">pr1</span> <span class="id" title="var">x'</span>) (<span class="id" title="var">pr2</span> <span class="id" title="var">x''</span>)).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">as2</span> (<span class="id" title="var">pr1</span> <span class="id" title="var">x</span>) (<span class="id" title="var">pr2</span> <span class="id" title="var">x'</span>) (<span class="id" title="var">pr1</span> <span class="id" title="var">x''</span>)).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">as2</span> (<span class="id" title="var">pr2</span> <span class="id" title="var">x</span>) (<span class="id" title="var">pr1</span> <span class="id" title="var">x'</span>) (<span class="id" title="var">pr1</span> <span class="id" title="var">x''</span>)).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">as2</span> (<span class="id" title="var">pr2</span> <span class="id" title="var">x</span>) (<span class="id" title="var">pr2</span> <span class="id" title="var">x'</span>) (<span class="id" title="var">pr2</span> <span class="id" title="var">x''</span>)).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">cm1</span> (<span class="id" title="var">pr2</span> <span class="id" title="var">x</span> * <span class="id" title="var">pr2</span> <span class="id" title="var">x'</span> * <span class="id" title="var">pr2</span> <span class="id" title="var">x''</span>) (<span class="id" title="var">pr2</span> <span class="id" title="var">x</span> * <span class="id" title="var">pr1</span> <span class="id" title="var">x'</span> * <span class="id" title="var">pr1</span> <span class="id" title="var">x''</span>)).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="var">rr</span> <span class="id" title="var">_</span> (<span class="id" title="var">pr1</span> <span class="id" title="var">x</span> * <span class="id" title="var">pr2</span> <span class="id" title="var">x'</span> * <span class="id" title="var">pr1</span> <span class="id" title="var">x''</span>) (<span class="id" title="var">pr2</span> <span class="id" title="var">x</span> * <span class="id" title="var">pr2</span> <span class="id" title="var">x'</span> * <span class="id" title="var">pr2</span> <span class="id" title="var">x''</span>) <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">idpath</span>.<br/>
</div>
<span class="id" title="keyword">Opaque</span> <span class="id" title="var">rigtoringassoc2</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">rigtoringunel2</span> (<span class="id" title="var">X</span> : <span class="id" title="var">rig</span>) : <span class="id" title="var">rigtoringcarrier</span> <span class="id" title="var">X</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="var">setquotpr</span> (<span class="id" title="var">eqrelrigtoring</span> <span class="id" title="var">X</span>) (<span class="id" title="var">rigtoringunel2int</span> <span class="id" title="var">X</span>).<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">rigtoringlunit2</span> (<span class="id" title="var">X</span> : <span class="id" title="var">rig</span>) : <span class="id" title="var">islunit</span> (<span class="id" title="var">rigtoringop2</span> <span class="id" title="var">X</span>) (<span class="id" title="var">rigtoringunel2</span> <span class="id" title="var">X</span>).<br/>
<a class="proof" href="#">Show proof.</a><br/><div class="proof">
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">islunit</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">setquotunivprop</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">eqrelrigtoring</span> <span class="id" title="var">X</span>) (<span class="id" title="var">λ</span> <span class="id" title="var">x</span> : <span class="id" title="var">rigtoringcarrier</span> <span class="id" title="var">X</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">eqset</span> (<span class="id" title="var">rigtoringop2</span> <span class="id" title="var">X</span> (<span class="id" title="var">rigtoringunel2</span> <span class="id" title="var">X</span>) <span class="id" title="var">x</span>) <span class="id" title="var">x</span>)).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intro</span> <span class="id" title="var">x</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">change</span> (<span class="id" title="var">paths</span> (<span class="id" title="var">setquotpr</span> (<span class="id" title="var">eqrelrigtoring</span> <span class="id" title="var">X</span>) (<span class="id" title="var">rigtoringop2int</span> <span class="id" title="var">X</span> (<span class="id" title="var">rigtoringunel2int</span> <span class="id" title="var">X</span>) <span class="id" title="var">x</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">setquotpr</span> (<span class="id" title="var">eqrelrigtoring</span> <span class="id" title="var">X</span>) <span class="id" title="var">x</span>)).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">maponpaths</span> (<span class="id" title="var">setquotpr</span> (<span class="id" title="var">eqrelrigtoring</span> <span class="id" title="var">X</span>))).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">rigtoringop2int</span>. <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">x</span> <span class="id" title="keyword">as</span> [ <span class="id" title="var">x1</span> <span class="id" title="var">x2</span> ]. <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">lu2</span> := <span class="id" title="var">riglunax2</span> <span class="id" title="var">X</span>). <span class="id" title="tactic">set</span> (<span class="id" title="var">ru1</span> := <span class="id" title="var">rigrunax1</span> <span class="id" title="var">X</span>). <span class="id" title="tactic">set</span> (<span class="id" title="var">m0x</span> := <span class="id" title="var">rigmult0x</span> <span class="id" title="var">X</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">pathsdirprod</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> (<span class="id" title="var">lu2</span> <span class="id" title="var">x1</span>). <span class="id" title="tactic">rewrite</span> (<span class="id" title="var">m0x</span> <span class="id" title="var">x2</span>). <span class="id" title="tactic">apply</span> (<span class="id" title="var">ru1</span> <span class="id" title="var">x1</span>).<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> (<span class="id" title="var">lu2</span> <span class="id" title="var">x2</span>). <span class="id" title="tactic">rewrite</span> (<span class="id" title="var">m0x</span> <span class="id" title="var">x1</span>). <span class="id" title="tactic">apply</span> (<span class="id" title="var">ru1</span> <span class="id" title="var">x2</span>).<br/>
</div>
<span class="id" title="keyword">Opaque</span> <span class="id" title="var">rigtoringlunit2</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">rigtoringrunit2</span> (<span class="id" title="var">X</span> : <span class="id" title="var">rig</span>) : <span class="id" title="var">isrunit</span> (<span class="id" title="var">rigtoringop2</span> <span class="id" title="var">X</span>) (<span class="id" title="var">rigtoringunel2</span> <span class="id" title="var">X</span>).<br/>
<a class="proof" href="#">Show proof.</a><br/><div class="proof">
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">isrunit</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">setquotunivprop</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">eqrelrigtoring</span> <span class="id" title="var">X</span>) (<span class="id" title="var">λ</span> <span class="id" title="var">x</span> : <span class="id" title="var">rigtoringcarrier</span> <span class="id" title="var">X</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">eqset</span> (<span class="id" title="var">rigtoringop2</span> <span class="id" title="var">X</span> <span class="id" title="var">x</span> (<span class="id" title="var">rigtoringunel2</span> <span class="id" title="var">X</span>)) <span class="id" title="var">x</span>)).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intro</span> <span class="id" title="var">x</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">change</span> (<span class="id" title="var">paths</span> (<span class="id" title="var">setquotpr</span> (<span class="id" title="var">eqrelrigtoring</span> <span class="id" title="var">X</span>) (<span class="id" title="var">rigtoringop2int</span> <span class="id" title="var">X</span> <span class="id" title="var">x</span> (<span class="id" title="var">rigtoringunel2int</span> <span class="id" title="var">X</span>)))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">setquotpr</span> (<span class="id" title="var">eqrelrigtoring</span> <span class="id" title="var">X</span>) <span class="id" title="var">x</span>)).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">maponpaths</span> (<span class="id" title="var">setquotpr</span> (<span class="id" title="var">eqrelrigtoring</span> <span class="id" title="var">X</span>))). <span class="id" title="tactic">unfold</span> <span class="id" title="var">rigtoringop2int</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">x</span> <span class="id" title="keyword">as</span> [ <span class="id" title="var">x1</span> <span class="id" title="var">x2</span> ]. <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">ru1</span> := <span class="id" title="var">rigrunax1</span> <span class="id" title="var">X</span>). <span class="id" title="tactic">set</span> (<span class="id" title="var">ru2</span> := <span class="id" title="var">rigrunax2</span> <span class="id" title="var">X</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">lu1</span> := <span class="id" title="var">riglunax1</span> <span class="id" title="var">X</span>). <span class="id" title="tactic">set</span> (<span class="id" title="var">mx0</span> := <span class="id" title="var">rigmultx0</span> <span class="id" title="var">X</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">pathsdirprod</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> (<span class="id" title="var">ru2</span> <span class="id" title="var">x1</span>). <span class="id" title="tactic">rewrite</span> (<span class="id" title="var">mx0</span> <span class="id" title="var">x2</span>). <span class="id" title="tactic">apply</span> (<span class="id" title="var">ru1</span> <span class="id" title="var">x1</span>).<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> (<span class="id" title="var">ru2</span> <span class="id" title="var">x2</span>). <span class="id" title="tactic">rewrite</span> (<span class="id" title="var">mx0</span> <span class="id" title="var">x1</span>). <span class="id" title="tactic">apply</span> (<span class="id" title="var">lu1</span> <span class="id" title="var">x2</span>).<br/>
</div>
<span class="id" title="keyword">Opaque</span> <span class="id" title="var">rigtoringrunit2</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">rigtoringisunit</span> (<span class="id" title="var">X</span> : <span class="id" title="var">rig</span>) : <span class="id" title="var">isunit</span> (<span class="id" title="var">rigtoringop2</span> <span class="id" title="var">X</span>) (<span class="id" title="var">rigtoringunel2</span> <span class="id" title="var">X</span>) :=<br/>
&nbsp;&nbsp;<span class="id" title="var">dirprodpair</span> (<span class="id" title="var">rigtoringlunit2</span> <span class="id" title="var">X</span>) (<span class="id" title="var">rigtoringrunit2</span> <span class="id" title="var">X</span>).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">rigtoringisunital</span> (<span class="id" title="var">X</span> : <span class="id" title="var">rig</span>) : <span class="id" title="var">isunital</span> (<span class="id" title="var">rigtoringop2</span> <span class="id" title="var">X</span>) :=<br/>
&nbsp;&nbsp;<span class="id" title="var">tpair</span> <span class="id" title="var">_</span> (<span class="id" title="var">rigtoringunel2</span> <span class="id" title="var">X</span>) (<span class="id" title="var">rigtoringisunit</span> <span class="id" title="var">X</span>).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">rigtoringismonoidop2</span> (<span class="id" title="var">X</span> : <span class="id" title="var">rig</span>) : <span class="id" title="var">ismonoidop</span> (<span class="id" title="var">rigtoringop2</span> <span class="id" title="var">X</span>) :=<br/>
&nbsp;&nbsp;<span class="id" title="var">dirprodpair</span> (<span class="id" title="var">rigtoringassoc2</span> <span class="id" title="var">X</span>) (<span class="id" title="var">rigtoringisunital</span> <span class="id" title="var">X</span>).<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">rigtoringldistr</span> (<span class="id" title="var">X</span> : <span class="id" title="var">rig</span>) : <span class="id" title="var">isldistr</span> (<span class="id" title="var">rigtoringop1</span> <span class="id" title="var">X</span>) (<span class="id" title="var">rigtoringop2</span> <span class="id" title="var">X</span>).<br/>
<a class="proof" href="#">Show proof.</a><br/><div class="proof">
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">isldistr</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">setquotuniv3prop</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">eqrelrigtoring</span> <span class="id" title="var">X</span>) (<span class="id" title="var">λ</span> <span class="id" title="var">x</span> <span class="id" title="var">x'</span> <span class="id" title="var">x''</span> : <span class="id" title="var">rigtoringcarrier</span> <span class="id" title="var">X</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">eqset</span> (<span class="id" title="var">rigtoringop2</span> <span class="id" title="var">X</span> <span class="id" title="var">x''</span> (<span class="id" title="var">rigtoringop1</span> <span class="id" title="var">X</span> <span class="id" title="var">x</span> <span class="id" title="var">x'</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">rigtoringop1</span> <span class="id" title="var">X</span> (<span class="id" title="var">rigtoringop2</span> <span class="id" title="var">X</span> <span class="id" title="var">x''</span> <span class="id" title="var">x</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">rigtoringop2</span> <span class="id" title="var">X</span> <span class="id" title="var">x''</span> <span class="id" title="var">x'</span>)))).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">x</span> <span class="id" title="var">x'</span> <span class="id" title="var">x''</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">change</span> (<span class="id" title="var">paths</span> (<span class="id" title="var">setquotpr</span> (<span class="id" title="var">eqrelrigtoring</span> <span class="id" title="var">X</span>) (<span class="id" title="var">rigtoringop2int</span> <span class="id" title="var">X</span> <span class="id" title="var">x''</span> (<span class="id" title="var">rigtoringop1int</span> <span class="id" title="var">X</span> <span class="id" title="var">x</span> <span class="id" title="var">x'</span>)))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">setquotpr</span> (<span class="id" title="var">eqrelrigtoring</span> <span class="id" title="var">X</span>) (<span class="id" title="var">rigtoringop1int</span> <span class="id" title="var">X</span> (<span class="id" title="var">rigtoringop2int</span> <span class="id" title="var">X</span> <span class="id" title="var">x''</span> <span class="id" title="var">x</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">rigtoringop2int</span> <span class="id" title="var">X</span> <span class="id" title="var">x''</span> <span class="id" title="var">x'</span>)))).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">maponpaths</span> (<span class="id" title="var">setquotpr</span> (<span class="id" title="var">eqrelrigtoring</span> <span class="id" title="var">X</span>))).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">rigtoringop1int</span>. <span class="id" title="tactic">unfold</span> <span class="id" title="var">rigtoringop2int</span>. <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">ld</span> := <span class="id" title="var">rigldistr</span> <span class="id" title="var">X</span>). <span class="id" title="tactic">set</span> (<span class="id" title="var">cm1</span> := <span class="id" title="var">rigcomm1</span> <span class="id" title="var">X</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">rr</span> := <span class="id" title="var">abmonoidoprer</span> (<span class="id" title="var">rigop1axs</span> <span class="id" title="var">X</span>)).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">pathsdirprod</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> (<span class="id" title="var">ld</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> (<span class="id" title="var">pr1</span> <span class="id" title="var">x''</span>)). <span class="id" title="tactic">rewrite</span> (<span class="id" title="var">ld</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> (<span class="id" title="var">pr2</span> <span class="id" title="var">x''</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">rr</span> <span class="id" title="var">_</span> (<span class="id" title="var">pr1</span> <span class="id" title="var">x''</span> * <span class="id" title="var">pr1</span> <span class="id" title="var">x'</span>) (<span class="id" title="var">pr2</span> <span class="id" title="var">x''</span> * <span class="id" title="var">pr2</span> <span class="id" title="var">x</span>) <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> (<span class="id" title="var">ld</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> (<span class="id" title="var">pr1</span> <span class="id" title="var">x''</span>)). <span class="id" title="tactic">rewrite</span> (<span class="id" title="var">ld</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> (<span class="id" title="var">pr2</span> <span class="id" title="var">x''</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">rr</span> <span class="id" title="var">_</span> (<span class="id" title="var">pr1</span> <span class="id" title="var">x''</span> * <span class="id" title="var">pr2</span> <span class="id" title="var">x'</span>) (<span class="id" title="var">pr2</span> <span class="id" title="var">x''</span> * <span class="id" title="var">pr1</span> <span class="id" title="var">x</span>) <span class="id" title="var">_</span>).<br/>
</div>
<span class="id" title="keyword">Opaque</span> <span class="id" title="var">rigtoringldistr</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">rigtoringrdistr</span> (<span class="id" title="var">X</span> : <span class="id" title="var">rig</span>) : <span class="id" title="var">isrdistr</span> (<span class="id" title="var">rigtoringop1</span> <span class="id" title="var">X</span>) (<span class="id" title="var">rigtoringop2</span> <span class="id" title="var">X</span>).<br/>
<a class="proof" href="#">Show proof.</a><br/><div class="proof">
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">isrdistr</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">setquotuniv3prop</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">eqrelrigtoring</span> <span class="id" title="var">X</span>) (<span class="id" title="var">λ</span> <span class="id" title="var">x</span> <span class="id" title="var">x'</span> <span class="id" title="var">x''</span> : <span class="id" title="var">rigtoringcarrier</span> <span class="id" title="var">X</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">eqset</span> (<span class="id" title="var">rigtoringop2</span> <span class="id" title="var">X</span> (<span class="id" title="var">rigtoringop1</span> <span class="id" title="var">X</span> <span class="id" title="var">x</span> <span class="id" title="var">x'</span>) <span class="id" title="var">x''</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">rigtoringop1</span> <span class="id" title="var">X</span> (<span class="id" title="var">rigtoringop2</span> <span class="id" title="var">X</span> <span class="id" title="var">x</span> <span class="id" title="var">x''</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">rigtoringop2</span> <span class="id" title="var">X</span> <span class="id" title="var">x'</span> <span class="id" title="var">x''</span>)))).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">x</span> <span class="id" title="var">x'</span> <span class="id" title="var">x''</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">change</span> (<span class="id" title="var">paths</span> (<span class="id" title="var">setquotpr</span> (<span class="id" title="var">eqrelrigtoring</span> <span class="id" title="var">X</span>) (<span class="id" title="var">rigtoringop2int</span> <span class="id" title="var">X</span> (<span class="id" title="var">rigtoringop1int</span> <span class="id" title="var">X</span> <span class="id" title="var">x</span> <span class="id" title="var">x'</span>) <span class="id" title="var">x''</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">setquotpr</span> (<span class="id" title="var">eqrelrigtoring</span> <span class="id" title="var">X</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">rigtoringop1int</span> <span class="id" title="var">X</span> (<span class="id" title="var">rigtoringop2int</span> <span class="id" title="var">X</span> <span class="id" title="var">x</span> <span class="id" title="var">x''</span>) (<span class="id" title="var">rigtoringop2int</span> <span class="id" title="var">X</span> <span class="id" title="var">x'</span> <span class="id" title="var">x''</span>)))).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">maponpaths</span> (<span class="id" title="var">setquotpr</span> (<span class="id" title="var">eqrelrigtoring</span> <span class="id" title="var">X</span>))).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">rigtoringop1int</span>. <span class="id" title="tactic">unfold</span> <span class="id" title="var">rigtoringop2int</span>. <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">rd</span> := <span class="id" title="var">rigrdistr</span> <span class="id" title="var">X</span>). <span class="id" title="tactic">set</span> (<span class="id" title="var">cm1</span> := <span class="id" title="var">rigcomm1</span> <span class="id" title="var">X</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">rr</span> := <span class="id" title="var">abmonoidoprer</span> (<span class="id" title="var">rigop1axs</span> <span class="id" title="var">X</span>)).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">pathsdirprod</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> (<span class="id" title="var">rd</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> (<span class="id" title="var">pr1</span> <span class="id" title="var">x''</span>)). <span class="id" title="tactic">rewrite</span> (<span class="id" title="var">rd</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> (<span class="id" title="var">pr2</span> <span class="id" title="var">x''</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">rr</span> <span class="id" title="var">_</span> (<span class="id" title="var">pr1</span> <span class="id" title="var">x'</span> * <span class="id" title="var">pr1</span> <span class="id" title="var">x''</span>) (<span class="id" title="var">pr2</span> <span class="id" title="var">x</span> * <span class="id" title="var">pr2</span> <span class="id" title="var">x''</span>) <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> (<span class="id" title="var">rd</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> (<span class="id" title="var">pr1</span> <span class="id" title="var">x''</span>)). <span class="id" title="tactic">rewrite</span> (<span class="id" title="var">rd</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> (<span class="id" title="var">pr2</span> <span class="id" title="var">x''</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">rr</span> <span class="id" title="var">_</span> (<span class="id" title="var">pr1</span> <span class="id" title="var">x'</span> * <span class="id" title="var">pr2</span> <span class="id" title="var">x''</span>) (<span class="id" title="var">pr2</span> <span class="id" title="var">x</span> * <span class="id" title="var">pr1</span> <span class="id" title="var">x''</span>) <span class="id" title="var">_</span>).<br/>
</div>
<span class="id" title="keyword">Opaque</span> <span class="id" title="var">rigtoringrdistr</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">rigtoringdistr</span> (<span class="id" title="var">X</span> : <span class="id" title="var">rig</span>) : <span class="id" title="var">isdistr</span> (<span class="id" title="var">rigtoringop1</span> <span class="id" title="var">X</span>) (<span class="id" title="var">rigtoringop2</span> <span class="id" title="var">X</span>) :=<br/>
&nbsp;&nbsp;<span class="id" title="var">dirprodpair</span> (<span class="id" title="var">rigtoringldistr</span> <span class="id" title="var">X</span>) (<span class="id" title="var">rigtoringrdistr</span> <span class="id" title="var">X</span>).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">rigtoring</span> (<span class="id" title="var">X</span> : <span class="id" title="var">rig</span>) : <span class="id" title="tactic">ring</span>.<br/>
<a class="proof" href="#">Show proof.</a><br/><div class="proof">
&nbsp;&nbsp;<span class="id" title="tactic">split</span> <span class="id" title="keyword">with</span> (@<span class="id" title="var">setwith2binoppair</span> (<span class="id" title="var">rigtoringcarrier</span> <span class="id" title="var">X</span>) (<span class="id" title="var">dirprodpair</span> (<span class="id" title="var">rigtoringop1</span> <span class="id" title="var">X</span>) (<span class="id" title="var">rigtoringop2</span> <span class="id" title="var">X</span>))).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> (<span class="id" title="var">dirprodpair</span> (<span class="id" title="var">rigtoringop1axs</span> <span class="id" title="var">X</span>) (<span class="id" title="var">rigtoringismonoidop2</span> <span class="id" title="var">X</span>)).<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> (<span class="id" title="var">rigtoringdistr</span> <span class="id" title="var">X</span>).<br/>
</div>

<br/>
</div>

<div class="doc">
<a name="lab511"></a><h4 class="section">Canonical homomorphism to the ring associated with a rig (ring of differences)</h4>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">toringdiff</span> (<span class="id" title="var">X</span> : <span class="id" title="var">rig</span>) (<span class="id" title="var">x</span> : <span class="id" title="var">X</span>) : <span class="id" title="var">rigtoring</span> <span class="id" title="var">X</span> := <span class="id" title="var">setquotpr</span> <span class="id" title="var">_</span> (<span class="id" title="var">dirprodpair</span> <span class="id" title="var">x</span> 0).<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">isbinop1funtoringdiff</span> (<span class="id" title="var">X</span> : <span class="id" title="var">rig</span>) : @<span class="id" title="var">isbinopfun</span> (<span class="id" title="var">rigaddabmonoid</span> <span class="id" title="var">X</span>) (<span class="id" title="var">rigtoring</span> <span class="id" title="var">X</span>) (<span class="id" title="var">toringdiff</span> <span class="id" title="var">X</span>).<br/>
<a class="proof" href="#">Show proof.</a><br/><div class="proof">
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">unfold</span> <span class="id" title="var">isbinopfun</span>. <span class="id" title="tactic">intros</span> <span class="id" title="var">x</span> <span class="id" title="var">x'</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">isbinopfuntoabgrdiff</span> (<span class="id" title="var">rigaddabmonoid</span> <span class="id" title="var">X</span>) <span class="id" title="var">x</span> <span class="id" title="var">x'</span>).<br/>
</div>
<span class="id" title="keyword">Opaque</span> <span class="id" title="var">isbinop1funtoringdiff</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">isunital1funtoringdiff</span> (<span class="id" title="var">X</span> : <span class="id" title="var">rig</span>) : (<span class="id" title="var">toringdiff</span> <span class="id" title="var">X</span> 0) = 0%<span class="id" title="tactic">ring</span>.<br/>
<a class="proof" href="#">Show proof.</a><br/><div class="proof"> <span class="id" title="tactic">apply</span> <span class="id" title="var">idpath</span>. </div>
<span class="id" title="keyword">Opaque</span> <span class="id" title="var">isunital1funtoringdiff</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">isaddmonoidfuntoringdiff</span> (<span class="id" title="var">X</span> : <span class="id" title="var">rig</span>) :<br/>
&nbsp;&nbsp;@<span class="id" title="var">ismonoidfun</span> (<span class="id" title="var">rigaddabmonoid</span> <span class="id" title="var">X</span>) (<span class="id" title="var">rigtoring</span> <span class="id" title="var">X</span>) (<span class="id" title="var">toringdiff</span> <span class="id" title="var">X</span>) :=<br/>
&nbsp;&nbsp;<span class="id" title="var">dirprodpair</span> (<span class="id" title="var">isbinop1funtoringdiff</span> <span class="id" title="var">X</span>) (<span class="id" title="var">isunital1funtoringdiff</span> <span class="id" title="var">X</span>).<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">isbinop2funtoringdiff</span> (<span class="id" title="var">X</span> : <span class="id" title="var">rig</span>) :<br/>
&nbsp;&nbsp;@<span class="id" title="var">isbinopfun</span> (<span class="id" title="var">rigmultmonoid</span> <span class="id" title="var">X</span>) (<span class="id" title="var">ringmultmonoid</span> (<span class="id" title="var">rigtoring</span> <span class="id" title="var">X</span>)) (<span class="id" title="var">toringdiff</span> <span class="id" title="var">X</span>).<br/>
<a class="proof" href="#">Show proof.</a><br/><div class="proof">
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">unfold</span> <span class="id" title="var">isbinopfun</span>. <span class="id" title="tactic">intros</span> <span class="id" title="var">x</span> <span class="id" title="var">x'</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">change</span> (<span class="id" title="var">paths</span> (<span class="id" title="var">setquotpr</span> <span class="id" title="var">_</span> (<span class="id" title="var">dirprodpair</span> (<span class="id" title="var">x</span> * <span class="id" title="var">x'</span>) 0))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">setquotpr</span> (<span class="id" title="var">eqrelrigtoring</span> <span class="id" title="var">X</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">rigtoringop2int</span> <span class="id" title="var">X</span> (<span class="id" title="var">dirprodpair</span> <span class="id" title="var">x</span> 0) (<span class="id" title="var">dirprodpair</span> <span class="id" title="var">x'</span> 0)))).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">maponpaths</span> (<span class="id" title="var">setquotpr</span> <span class="id" title="var">_</span>)). <span class="id" title="tactic">unfold</span> <span class="id" title="var">rigtoringop2int</span>. <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">pathsdirprod</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> (<span class="id" title="var">rigmultx0</span> <span class="id" title="var">X</span> <span class="id" title="var">_</span>). <span class="id" title="tactic">rewrite</span> (<span class="id" title="var">rigrunax1</span> <span class="id" title="var">X</span> <span class="id" title="var">_</span>). <span class="id" title="tactic">apply</span> <span class="id" title="var">idpath</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> (<span class="id" title="var">rigmult0x</span> <span class="id" title="var">X</span> <span class="id" title="var">_</span>). <span class="id" title="tactic">rewrite</span> (<span class="id" title="var">rigmultx0</span> <span class="id" title="var">X</span> <span class="id" title="var">_</span>). <span class="id" title="tactic">rewrite</span> (<span class="id" title="var">rigrunax1</span> <span class="id" title="var">X</span> <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">idpath</span>.<br/>
</div>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">isunital2funtoringdiff</span>  (<span class="id" title="var">X</span> : <span class="id" title="var">rig</span>) : (<span class="id" title="var">toringdiff</span> <span class="id" title="var">X</span> 1) = 1%<span class="id" title="tactic">ring</span>.<br/>
<a class="proof" href="#">Show proof.</a><br/><div class="proof"> <span class="id" title="tactic">apply</span> <span class="id" title="var">idpath</span>. </div>
<span class="id" title="keyword">Opaque</span> <span class="id" title="var">isunital2funtoringdiff</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">ismultmonoidfuntoringdiff</span> (<span class="id" title="var">X</span> : <span class="id" title="var">rig</span>) :<br/>
&nbsp;&nbsp;@<span class="id" title="var">ismonoidfun</span> (<span class="id" title="var">rigmultmonoid</span> <span class="id" title="var">X</span>) (<span class="id" title="var">ringmultmonoid</span> (<span class="id" title="var">rigtoring</span> <span class="id" title="var">X</span>)) (<span class="id" title="var">toringdiff</span> <span class="id" title="var">X</span>) :=<br/>
&nbsp;&nbsp;<span class="id" title="var">dirprodpair</span> (<span class="id" title="var">isbinop2funtoringdiff</span> <span class="id" title="var">X</span>) (<span class="id" title="var">isunital2funtoringdiff</span> <span class="id" title="var">X</span>).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">isrigfuntoringdiff</span> (<span class="id" title="var">X</span> : <span class="id" title="var">rig</span>) : @<span class="id" title="var">isrigfun</span> <span class="id" title="var">X</span> (<span class="id" title="var">rigtoring</span> <span class="id" title="var">X</span>) (<span class="id" title="var">toringdiff</span> <span class="id" title="var">X</span>) :=<br/>
&nbsp;&nbsp;<span class="id" title="var">dirprodpair</span> (<span class="id" title="var">isaddmonoidfuntoringdiff</span> <span class="id" title="var">X</span>) (<span class="id" title="var">ismultmonoidfuntoringdiff</span> <span class="id" title="var">X</span>).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">isincltoringdiff</span> (<span class="id" title="var">X</span> : <span class="id" title="var">rig</span>) (<span class="id" title="var">iscanc</span> : ∏ <span class="id" title="var">x</span> : <span class="id" title="var">X</span>, @<span class="id" title="var">isrcancelable</span> <span class="id" title="var">X</span> (@<span class="id" title="var">op1</span> <span class="id" title="var">X</span>) <span class="id" title="var">x</span>) :<br/>
&nbsp;&nbsp;<span class="id" title="var">isincl</span> (<span class="id" title="var">toringdiff</span> <span class="id" title="var">X</span>) := <span class="id" title="var">isincltoabgrdiff</span> (<span class="id" title="var">rigaddabmonoid</span> <span class="id" title="var">X</span>) <span class="id" title="var">iscanc</span>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab512"></a><h4 class="section">Relations similar to "greater" or "greater or equal" on the ring associated with a rig</h4>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">rigtoringrel</span> (<span class="id" title="var">X</span> : <span class="id" title="var">rig</span>) {<span class="id" title="var">R</span> : <span class="id" title="var">hrel</span> <span class="id" title="var">X</span>} (<span class="id" title="keyword">is</span> : @<span class="id" title="var">isbinophrel</span> (<span class="id" title="var">rigaddabmonoid</span> <span class="id" title="var">X</span>) <span class="id" title="var">R</span>) :<br/>
&nbsp;&nbsp;<span class="id" title="var">hrel</span> (<span class="id" title="var">rigtoring</span> <span class="id" title="var">X</span>) := <span class="id" title="var">abgrdiffrel</span> (<span class="id" title="var">rigaddabmonoid</span> <span class="id" title="var">X</span>) <span class="id" title="keyword">is</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">isringrigtoringmultgt</span> (<span class="id" title="var">X</span> : <span class="id" title="var">rig</span>) {<span class="id" title="var">R</span> : <span class="id" title="var">hrel</span> <span class="id" title="var">X</span>} (<span class="id" title="var">is0</span> : @<span class="id" title="var">isbinophrel</span> (<span class="id" title="var">rigaddabmonoid</span> <span class="id" title="var">X</span>) <span class="id" title="var">R</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">is</span> : <span class="id" title="var">isrigmultgt</span> <span class="id" title="var">X</span> <span class="id" title="var">R</span>) : <span class="id" title="var">isringmultgt</span> (<span class="id" title="var">rigtoring</span> <span class="id" title="var">X</span>) (<span class="id" title="var">rigtoringrel</span> <span class="id" title="var">X</span> <span class="id" title="var">is0</span>).<br/>
<a class="proof" href="#">Show proof.</a><br/><div class="proof">
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">assoc</span> := <span class="id" title="var">rigassoc1</span> <span class="id" title="var">X</span>). <span class="id" title="tactic">set</span> (<span class="id" title="var">comm</span> := <span class="id" title="var">rigcomm1</span> <span class="id" title="var">X</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">rer</span> := (<span class="id" title="var">abmonoidrer</span> (<span class="id" title="var">rigaddabmonoid</span> <span class="id" title="var">X</span>)) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;∏ <span class="id" title="var">a</span> <span class="id" title="var">b</span> <span class="id" title="var">c</span> <span class="id" title="var">d</span> : <span class="id" title="var">X</span>, <span class="id" title="var">paths</span> ((<span class="id" title="var">a</span> + <span class="id" title="var">b</span>) + (<span class="id" title="var">c</span> + <span class="id" title="var">d</span>)) ((<span class="id" title="var">a</span> + <span class="id" title="var">c</span>) + (<span class="id" title="var">b</span> + <span class="id" title="var">d</span>))).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">ld</span> := <span class="id" title="var">rigldistr</span> <span class="id" title="var">X</span>). <span class="id" title="tactic">set</span> (<span class="id" title="var">rd</span> := <span class="id" title="var">rigrdistr</span> <span class="id" title="var">X</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">int</span> : ∏ <span class="id" title="var">a</span> <span class="id" title="var">b</span>, <span class="id" title="var">isaprop</span> (<span class="id" title="var">rigtoringrel</span> <span class="id" title="var">X</span> <span class="id" title="var">is0</span> <span class="id" title="var">a</span> <span class="id" title="var">ringunel1</span> -&gt; <span class="id" title="var">rigtoringrel</span> <span class="id" title="var">X</span> <span class="id" title="var">is0</span> <span class="id" title="var">b</span> <span class="id" title="var">ringunel1</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">rigtoringrel</span> <span class="id" title="var">X</span> <span class="id" title="var">is0</span> (<span class="id" title="var">a</span> * <span class="id" title="var">b</span>) <span class="id" title="var">ringunel1</span>)).<br/>
&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">impred</span>. <span class="id" title="tactic">intro</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">impred</span>. <span class="id" title="tactic">intro</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">pr2</span> <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">isringmultgt</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">setquotuniv2prop</span> <span class="id" title="var">_</span> (<span class="id" title="var">λ</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span>, <span class="id" title="var">hProppair</span> <span class="id" title="var">_</span> (<span class="id" title="var">int</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span>))).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">xa1</span> <span class="id" title="var">xa2</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">change</span> ((<span class="id" title="var">abgrdiffrelint</span> (<span class="id" title="var">rigaddabmonoid</span> <span class="id" title="var">X</span>) <span class="id" title="var">R</span>) <span class="id" title="var">xa1</span> (<span class="id" title="var">dirprodpair</span> (@<span class="id" title="var">rigunel1</span> <span class="id" title="var">X</span>) (@<span class="id" title="var">rigunel1</span> <span class="id" title="var">X</span>)) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">abgrdiffrelint</span> (<span class="id" title="var">rigaddabmonoid</span> <span class="id" title="var">X</span>) <span class="id" title="var">R</span>) <span class="id" title="var">xa2</span> (<span class="id" title="var">dirprodpair</span> (@<span class="id" title="var">rigunel1</span> <span class="id" title="var">X</span>) (@<span class="id" title="var">rigunel1</span> <span class="id" title="var">X</span>)) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">abgrdiffrelint</span> (<span class="id" title="var">rigaddabmonoid</span> <span class="id" title="var">X</span>) <span class="id" title="var">R</span> (@<span class="id" title="var">rigtoringop2int</span> <span class="id" title="var">X</span> <span class="id" title="var">xa1</span> <span class="id" title="var">xa2</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">dirprodpair</span> (@<span class="id" title="var">rigunel1</span> <span class="id" title="var">X</span>) (@<span class="id" title="var">rigunel1</span> <span class="id" title="var">X</span>)))).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">abgrdiffrelint</span>. <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">hinhfun2</span>. <span class="id" title="tactic">intros</span> <span class="id" title="var">t22</span> <span class="id" title="var">t21</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">c2</span> := <span class="id" title="var">pr1</span> <span class="id" title="var">t21</span>). <span class="id" title="tactic">set</span> (<span class="id" title="var">c1</span> := <span class="id" title="var">pr1</span> <span class="id" title="var">t22</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">r1</span> := <span class="id" title="var">pr2</span> <span class="id" title="var">t21</span>). <span class="id" title="tactic">set</span> (<span class="id" title="var">r2</span> := <span class="id" title="var">pr2</span> <span class="id" title="var">t22</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">x1</span> := <span class="id" title="var">pr1</span> <span class="id" title="var">xa1</span>). <span class="id" title="tactic">set</span> (<span class="id" title="var">a1</span> := <span class="id" title="var">pr2</span> <span class="id" title="var">xa1</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">x2</span> := <span class="id" title="var">pr1</span> <span class="id" title="var">xa2</span>). <span class="id" title="tactic">set</span> (<span class="id" title="var">a2</span> := <span class="id" title="var">pr2</span> <span class="id" title="var">xa2</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;((<span class="id" title="var">x1</span> * <span class="id" title="var">c2</span> + <span class="id" title="var">a1</span> * <span class="id" title="var">c2</span>) + ((<span class="id" title="var">c1</span> * <span class="id" title="var">x2</span> + <span class="id" title="var">c1</span> * <span class="id" title="var">c2</span>) + (<span class="id" title="var">c1</span> * <span class="id" title="var">a2</span> + <span class="id" title="var">c1</span> * <span class="id" title="var">c2</span>))).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">change</span> (<span class="id" title="var">pr1</span> (<span class="id" title="var">R</span> (<span class="id" title="var">x1</span> * <span class="id" title="var">x2</span> + <span class="id" title="var">a1</span> * <span class="id" title="var">a2</span> + 0 +<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;((<span class="id" title="var">x1</span> * <span class="id" title="var">c2</span> + <span class="id" title="var">a1</span> * <span class="id" title="var">c2</span>) + ((<span class="id" title="var">c1</span> * <span class="id" title="var">x2</span> + <span class="id" title="var">c1</span> * <span class="id" title="var">c2</span>) + (<span class="id" title="var">c1</span> * <span class="id" title="var">a2</span> + <span class="id" title="var">c1</span> * <span class="id" title="var">c2</span>))))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(0 + (<span class="id" title="var">x1</span> * <span class="id" title="var">a2</span> + <span class="id" title="var">a1</span> * <span class="id" title="var">x2</span>) +<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">x1</span> * <span class="id" title="var">c2</span> + <span class="id" title="var">a1</span> * <span class="id" title="var">c2</span> + ((<span class="id" title="var">c1</span> * <span class="id" title="var">x2</span> + <span class="id" title="var">c1</span> * <span class="id" title="var">c2</span>) + (<span class="id" title="var">c1</span> * <span class="id" title="var">a2</span> + <span class="id" title="var">c1</span> * <span class="id" title="var">c2</span>)))))).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="var">riglunax1</span> <span class="id" title="var">X</span> <span class="id" title="var">_</span>). <span class="id" title="tactic">rewrite</span> (<span class="id" title="var">rigrunax1</span> <span class="id" title="var">X</span> <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="var">assoc</span> (<span class="id" title="var">x1</span> * <span class="id" title="var">c2</span>) <span class="id" title="var">_</span> <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="var">rer</span> <span class="id" title="var">_</span> (<span class="id" title="var">a1</span> * <span class="id" title="var">a2</span>) <span class="id" title="var">_</span> <span class="id" title="var">_</span>). <span class="id" title="tactic">rewrite</span> (<span class="id" title="var">rer</span> <span class="id" title="var">_</span> (<span class="id" title="var">a1</span> * <span class="id" title="var">x2</span>) <span class="id" title="var">_</span> <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="var">pathsinv0</span> (<span class="id" title="var">assoc</span> (<span class="id" title="var">a1</span> * <span class="id" title="var">a2</span>) <span class="id" title="var">_</span> <span class="id" title="var">_</span>)).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="var">pathsinv0</span> (<span class="id" title="var">assoc</span> (<span class="id" title="var">a1</span> * <span class="id" title="var">x2</span>) <span class="id" title="var">_</span> <span class="id" title="var">_</span>)).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="var">pathsinv0</span> (<span class="id" title="var">assoc</span> (<span class="id" title="var">x1</span> * <span class="id" title="var">x2</span> + <span class="id" title="var">_</span>) <span class="id" title="var">_</span> <span class="id" title="var">_</span>)).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="var">pathsinv0</span> (<span class="id" title="var">assoc</span> (<span class="id" title="var">x1</span> * <span class="id" title="var">a2</span> + <span class="id" title="var">_</span>) <span class="id" title="var">_</span> <span class="id" title="var">_</span>)).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="var">rer</span> <span class="id" title="var">_</span> (<span class="id" title="var">a1</span> * <span class="id" title="var">a2</span> + <span class="id" title="var">_</span>) <span class="id" title="var">_</span> <span class="id" title="var">_</span>). <span class="id" title="tactic">rewrite</span> (<span class="id" title="var">rer</span> <span class="id" title="var">_</span> (<span class="id" title="var">a1</span> * <span class="id" title="var">x2</span> + <span class="id" title="var">_</span>) <span class="id" title="var">_</span> <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="var">pathsinv0</span> (<span class="id" title="var">ld</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">x1</span>)). <span class="id" title="tactic">rewrite</span> (<span class="id" title="var">pathsinv0</span> (<span class="id" title="var">ld</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">x1</span>)).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="var">pathsinv0</span> (<span class="id" title="var">ld</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">c1</span>)). <span class="id" title="tactic">rewrite</span> (<span class="id" title="var">pathsinv0</span> (<span class="id" title="var">ld</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">c1</span>)).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="var">pathsinv0</span> (<span class="id" title="var">ld</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">a1</span>)). <span class="id" title="tactic">rewrite</span> (<span class="id" title="var">pathsinv0</span> (<span class="id" title="var">ld</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">a1</span>)).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="var">pathsinv0</span> (<span class="id" title="var">rd</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> (<span class="id" title="var">x2</span> + <span class="id" title="var">c2</span>))).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="var">pathsinv0</span> (<span class="id" title="var">rd</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> (<span class="id" title="var">a2</span> + <span class="id" title="var">c2</span>))).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="var">comm</span> (<span class="id" title="var">a1</span> * <span class="id" title="var">_</span>) <span class="id" title="var">_</span>). <span class="id" title="tactic">rewrite</span> (<span class="id" title="var">rer</span> <span class="id" title="var">_</span> (<span class="id" title="var">c1</span> * <span class="id" title="var">_</span>) <span class="id" title="var">_</span> <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="var">pathsinv0</span> (<span class="id" title="var">rd</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> (<span class="id" title="var">x2</span> + <span class="id" title="var">c2</span>))).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="var">pathsinv0</span> (<span class="id" title="var">rd</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> (<span class="id" title="var">a2</span> + <span class="id" title="var">c2</span>))).<br/>
&nbsp;&nbsp;<span class="id" title="var">clearbody</span> <span class="id" title="var">r1</span>. <span class="id" title="var">clearbody</span> <span class="id" title="var">r2</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">change</span> (<span class="id" title="var">pr1</span> (<span class="id" title="var">R</span> (<span class="id" title="var">x2</span> + 0 + <span class="id" title="var">c2</span>) (0 + <span class="id" title="var">a2</span> + <span class="id" title="var">c2</span>))) <span class="id" title="tactic">in</span> <span class="id" title="var">r1</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">change</span> (<span class="id" title="var">pr1</span> (<span class="id" title="var">R</span> (<span class="id" title="var">x1</span> + 0 + <span class="id" title="var">c1</span>) (0 + <span class="id" title="var">a1</span> + <span class="id" title="var">c1</span>))) <span class="id" title="tactic">in</span> <span class="id" title="var">r2</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="var">rigrunax1</span> <span class="id" title="var">X</span> <span class="id" title="var">_</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">r1</span>. <span class="id" title="tactic">rewrite</span> (<span class="id" title="var">riglunax1</span> <span class="id" title="var">X</span> <span class="id" title="var">_</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">r1</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="var">rigrunax1</span> <span class="id" title="var">X</span> <span class="id" title="var">_</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">r2</span>. <span class="id" title="tactic">rewrite</span> (<span class="id" title="var">riglunax1</span> <span class="id" title="var">X</span> <span class="id" title="var">_</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">r2</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="var">comm</span> <span class="id" title="var">c1</span> <span class="id" title="var">a1</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="keyword">is</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">r2</span> <span class="id" title="var">r1</span>).<br/>
</div>
<span class="id" title="keyword">Opaque</span> <span class="id" title="var">isringrigtoringmultgt</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">isdecrigtoringrel</span> (<span class="id" title="var">X</span> : <span class="id" title="var">rig</span>) {<span class="id" title="var">R</span> : <span class="id" title="var">hrel</span> <span class="id" title="var">X</span>} (<span class="id" title="keyword">is</span> : @<span class="id" title="var">isbinophrel</span> (<span class="id" title="var">rigaddabmonoid</span> <span class="id" title="var">X</span>) <span class="id" title="var">R</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">is'</span> : @<span class="id" title="var">isinvbinophrel</span> (<span class="id" title="var">rigaddabmonoid</span> <span class="id" title="var">X</span>) <span class="id" title="var">R</span>) (<span class="id" title="var">isd</span> : <span class="id" title="var">isdecrel</span> <span class="id" title="var">R</span>) :<br/>
&nbsp;&nbsp;<span class="id" title="var">isdecrel</span> (<span class="id" title="var">rigtoringrel</span> <span class="id" title="var">X</span> <span class="id" title="keyword">is</span>).<br/>
<a class="proof" href="#">Show proof.</a><br/><div class="proof"> <span class="id" title="tactic">intros</span>. <span class="id" title="tactic">apply</span> (<span class="id" title="var">isdecabgrdiffrel</span> (<span class="id" title="var">rigaddabmonoid</span> <span class="id" title="var">X</span>) <span class="id" title="keyword">is</span> <span class="id" title="var">is'</span> <span class="id" title="var">isd</span>). </div>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">isinvringrigtoringmultgt</span> (<span class="id" title="var">X</span> : <span class="id" title="var">rig</span>) {<span class="id" title="var">R</span> : <span class="id" title="var">hrel</span> <span class="id" title="var">X</span>} (<span class="id" title="var">is0</span> : @<span class="id" title="var">isbinophrel</span> (<span class="id" title="var">rigaddabmonoid</span> <span class="id" title="var">X</span>) <span class="id" title="var">R</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">is1</span> : @<span class="id" title="var">isinvbinophrel</span> (<span class="id" title="var">rigaddabmonoid</span> <span class="id" title="var">X</span>) <span class="id" title="var">R</span>) (<span class="id" title="keyword">is</span> : <span class="id" title="var">isinvrigmultgt</span> <span class="id" title="var">X</span> <span class="id" title="var">R</span>) :<br/>
&nbsp;&nbsp;<span class="id" title="var">isinvringmultgt</span> (<span class="id" title="var">rigtoring</span> <span class="id" title="var">X</span>) (<span class="id" title="var">rigtoringrel</span> <span class="id" title="var">X</span> <span class="id" title="var">is0</span>).<br/>
<a class="proof" href="#">Show proof.</a><br/><div class="proof">
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">assert</span> (<span class="id" title="var">int</span> : ∏ <span class="id" title="var">a</span> <span class="id" title="var">b</span>, <span class="id" title="var">isaprop</span> (<span class="id" title="var">rigtoringrel</span> <span class="id" title="var">X</span> <span class="id" title="var">is0</span> (<span class="id" title="var">a</span> * <span class="id" title="var">b</span>) <span class="id" title="var">ringunel1</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">rigtoringrel</span> <span class="id" title="var">X</span> <span class="id" title="var">is0</span> <span class="id" title="var">a</span> <span class="id" title="var">ringunel1</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">rigtoringrel</span> <span class="id" title="var">X</span> <span class="id" title="var">is0</span> <span class="id" title="var">b</span> <span class="id" title="var">ringunel1</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">impred</span>. <span class="id" title="tactic">intro</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">impred</span>. <span class="id" title="tactic">intro</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">pr2</span> <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">setquotuniv2prop</span> <span class="id" title="var">_</span> (<span class="id" title="var">λ</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span>, <span class="id" title="var">hProppair</span> <span class="id" title="var">_</span> (<span class="id" title="var">int</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span>))).<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">xa1</span> <span class="id" title="var">xa2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">change</span> ((<span class="id" title="var">abgrdiffrelint</span> (<span class="id" title="var">rigaddabmonoid</span> <span class="id" title="var">X</span>) <span class="id" title="var">R</span> (@<span class="id" title="var">rigtoringop2int</span> <span class="id" title="var">X</span> <span class="id" title="var">xa1</span> <span class="id" title="var">xa2</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">dirprodpair</span> (@<span class="id" title="var">rigunel1</span> <span class="id" title="var">X</span>) (@<span class="id" title="var">rigunel1</span> <span class="id" title="var">X</span>))) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">abgrdiffrelint</span> (<span class="id" title="var">rigaddabmonoid</span> <span class="id" title="var">X</span>) <span class="id" title="var">R</span>) <span class="id" title="var">xa1</span> (<span class="id" title="var">dirprodpair</span> (@<span class="id" title="var">rigunel1</span> <span class="id" title="var">X</span>) (@<span class="id" title="var">rigunel1</span> <span class="id" title="var">X</span>)) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">abgrdiffrelint</span> (<span class="id" title="var">rigaddabmonoid</span> <span class="id" title="var">X</span>) <span class="id" title="var">R</span>) <span class="id" title="var">xa2</span> (<span class="id" title="var">dirprodpair</span> (@<span class="id" title="var">rigunel1</span> <span class="id" title="var">X</span>) (@<span class="id" title="var">rigunel1</span> <span class="id" title="var">X</span>))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">abgrdiffrelint</span>. <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">hinhfun2</span>. <span class="id" title="tactic">intros</span> <span class="id" title="var">t22</span> <span class="id" title="var">t21</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">c2</span> := <span class="id" title="var">pr1</span> <span class="id" title="var">t22</span>). <span class="id" title="tactic">set</span> (<span class="id" title="var">c1</span> := <span class="id" title="var">pr1</span> <span class="id" title="var">t21</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">r1</span> := <span class="id" title="var">pr2</span> <span class="id" title="var">t21</span>). <span class="id" title="tactic">set</span> (<span class="id" title="var">r2</span> := <span class="id" title="var">pr2</span> <span class="id" title="var">t22</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">x1</span> := <span class="id" title="var">pr1</span> <span class="id" title="var">xa1</span>). <span class="id" title="tactic">set</span> (<span class="id" title="var">a1</span> := <span class="id" title="var">pr2</span> <span class="id" title="var">xa1</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">x2</span> := <span class="id" title="var">pr1</span> <span class="id" title="var">xa2</span>). <span class="id" title="tactic">set</span> (<span class="id" title="var">a2</span> := <span class="id" title="var">pr2</span> <span class="id" title="var">xa2</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">r2</span>. <span class="id" title="var">clearbody</span> <span class="id" title="var">r2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">change</span> (<span class="id" title="var">pr1</span> (<span class="id" title="var">R</span> (<span class="id" title="var">x1</span> * <span class="id" title="var">x2</span> + <span class="id" title="var">a1</span> * <span class="id" title="var">a2</span> + 0 + <span class="id" title="var">c2</span>) (0 + (<span class="id" title="var">x1</span> * <span class="id" title="var">a2</span> + <span class="id" title="var">a1</span> * <span class="id" title="var">x2</span>) + <span class="id" title="var">c2</span>))) <span class="id" title="tactic">in</span> <span class="id" title="var">r2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="var">riglunax1</span> <span class="id" title="var">X</span> <span class="id" title="var">_</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">r2</span>. <span class="id" title="tactic">rewrite</span> (<span class="id" title="var">rigrunax1</span> <span class="id" title="var">X</span> <span class="id" title="var">_</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">r2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="var">rigrunax1</span> <span class="id" title="var">X</span> <span class="id" title="var">_</span>). <span class="id" title="tactic">rewrite</span> (<span class="id" title="var">riglunax1</span> <span class="id" title="var">X</span> <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">r2'</span> := (<span class="id" title="var">pr2</span> <span class="id" title="var">is1</span>) <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">c2</span> <span class="id" title="var">r2</span>). <span class="id" title="var">clearbody</span> <span class="id" title="var">r1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">change</span> (<span class="id" title="var">pr1</span> (<span class="id" title="var">R</span> (<span class="id" title="var">x1</span> + 0 + <span class="id" title="var">c1</span>) (0 + <span class="id" title="var">a1</span> + <span class="id" title="var">c1</span>))) <span class="id" title="tactic">in</span> <span class="id" title="var">r1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="var">riglunax1</span> <span class="id" title="var">X</span> <span class="id" title="var">_</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">r1</span>. <span class="id" title="tactic">rewrite</span> (<span class="id" title="var">rigrunax1</span> <span class="id" title="var">X</span> <span class="id" title="var">_</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">r1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">r1'</span> := (<span class="id" title="var">pr2</span> <span class="id" title="var">is1</span>) <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">c1</span> <span class="id" title="var">r1</span>). <span class="id" title="tactic">split</span> <span class="id" title="keyword">with</span> 0.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="var">rigrunax1</span> <span class="id" title="var">X</span> <span class="id" title="var">_</span>). <span class="id" title="tactic">rewrite</span> (<span class="id" title="var">rigrunax1</span> <span class="id" title="var">X</span> <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> ((<span class="id" title="var">pr1</span> <span class="id" title="keyword">is</span>) <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">r2'</span> <span class="id" title="var">r1'</span>).<br/>

<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">assert</span> (<span class="id" title="var">int</span> : ∏ <span class="id" title="var">a</span> <span class="id" title="var">b</span>, <span class="id" title="var">isaprop</span> (<span class="id" title="var">rigtoringrel</span> <span class="id" title="var">X</span> <span class="id" title="var">is0</span> (<span class="id" title="var">a</span> * <span class="id" title="var">b</span>) <span class="id" title="var">ringunel1</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">rigtoringrel</span> <span class="id" title="var">X</span> <span class="id" title="var">is0</span> <span class="id" title="var">b</span> <span class="id" title="var">ringunel1</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">rigtoringrel</span> <span class="id" title="var">X</span> <span class="id" title="var">is0</span> <span class="id" title="var">a</span> <span class="id" title="var">ringunel1</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">impred</span>. <span class="id" title="tactic">intro</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">impred</span>. <span class="id" title="tactic">intro</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">pr2</span> <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">setquotuniv2prop</span> <span class="id" title="var">_</span> (<span class="id" title="var">λ</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span>, <span class="id" title="var">hProppair</span> <span class="id" title="var">_</span> (<span class="id" title="var">int</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span>))).<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">xa1</span> <span class="id" title="var">xa2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">change</span> ((<span class="id" title="var">abgrdiffrelint</span> (<span class="id" title="var">rigaddabmonoid</span> <span class="id" title="var">X</span>) <span class="id" title="var">R</span> (@<span class="id" title="var">rigtoringop2int</span> <span class="id" title="var">X</span> <span class="id" title="var">xa1</span> <span class="id" title="var">xa2</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">dirprodpair</span> (@<span class="id" title="var">rigunel1</span> <span class="id" title="var">X</span>) (@<span class="id" title="var">rigunel1</span> <span class="id" title="var">X</span>))) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">abgrdiffrelint</span> (<span class="id" title="var">rigaddabmonoid</span> <span class="id" title="var">X</span>) <span class="id" title="var">R</span>) <span class="id" title="var">xa2</span> (<span class="id" title="var">dirprodpair</span> (@<span class="id" title="var">rigunel1</span> <span class="id" title="var">X</span>) (@<span class="id" title="var">rigunel1</span> <span class="id" title="var">X</span>)) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">abgrdiffrelint</span> (<span class="id" title="var">rigaddabmonoid</span> <span class="id" title="var">X</span>) <span class="id" title="var">R</span>) <span class="id" title="var">xa1</span> (<span class="id" title="var">dirprodpair</span> (@<span class="id" title="var">rigunel1</span> <span class="id" title="var">X</span>) (@<span class="id" title="var">rigunel1</span> <span class="id" title="var">X</span>))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">abgrdiffrelint</span>. <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">hinhfun2</span>. <span class="id" title="tactic">intros</span> <span class="id" title="var">t22</span> <span class="id" title="var">t21</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">c2</span> := <span class="id" title="var">pr1</span> <span class="id" title="var">t22</span>). <span class="id" title="tactic">set</span> (<span class="id" title="var">c1</span> := <span class="id" title="var">pr1</span> <span class="id" title="var">t21</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">r1</span> := <span class="id" title="var">pr2</span> <span class="id" title="var">t21</span>). <span class="id" title="tactic">set</span> (<span class="id" title="var">r2</span> := <span class="id" title="var">pr2</span> <span class="id" title="var">t22</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">x1</span> := <span class="id" title="var">pr1</span> <span class="id" title="var">xa1</span>). <span class="id" title="tactic">set</span> (<span class="id" title="var">a1</span> := <span class="id" title="var">pr2</span> <span class="id" title="var">xa1</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">x2</span> := <span class="id" title="var">pr1</span> <span class="id" title="var">xa2</span>). <span class="id" title="tactic">set</span> (<span class="id" title="var">a2</span> := <span class="id" title="var">pr2</span> <span class="id" title="var">xa2</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">r2</span>. <span class="id" title="var">clearbody</span> <span class="id" title="var">r2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">change</span> (<span class="id" title="var">pr1</span> (<span class="id" title="var">R</span> (<span class="id" title="var">x1</span> * <span class="id" title="var">x2</span> + <span class="id" title="var">a1</span> * <span class="id" title="var">a2</span> + 0 + <span class="id" title="var">c2</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(0 + (<span class="id" title="var">x1</span> * <span class="id" title="var">a2</span> + <span class="id" title="var">a1</span> * <span class="id" title="var">x2</span>) + <span class="id" title="var">c2</span>))) <span class="id" title="tactic">in</span> <span class="id" title="var">r2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="var">riglunax1</span> <span class="id" title="var">X</span> <span class="id" title="var">_</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">r2</span>. <span class="id" title="tactic">rewrite</span> (<span class="id" title="var">rigrunax1</span> <span class="id" title="var">X</span> <span class="id" title="var">_</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">r2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="var">rigrunax1</span> <span class="id" title="var">X</span> <span class="id" title="var">_</span>). <span class="id" title="tactic">rewrite</span> (<span class="id" title="var">riglunax1</span> <span class="id" title="var">X</span> <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">r2'</span> := (<span class="id" title="var">pr2</span> <span class="id" title="var">is1</span>) <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">c2</span> <span class="id" title="var">r2</span>). <span class="id" title="var">clearbody</span> <span class="id" title="var">r1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">change</span> (<span class="id" title="var">pr1</span> (<span class="id" title="var">R</span> (<span class="id" title="var">x2</span> + 0 + <span class="id" title="var">c1</span>) (0 + <span class="id" title="var">a2</span> + <span class="id" title="var">c1</span>))) <span class="id" title="tactic">in</span> <span class="id" title="var">r1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="var">riglunax1</span> <span class="id" title="var">X</span> <span class="id" title="var">_</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">r1</span>. <span class="id" title="tactic">rewrite</span> (<span class="id" title="var">rigrunax1</span> <span class="id" title="var">X</span> <span class="id" title="var">_</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">r1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">r1'</span> := (<span class="id" title="var">pr2</span> <span class="id" title="var">is1</span>) <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">c1</span> <span class="id" title="var">r1</span>). <span class="id" title="tactic">split</span> <span class="id" title="keyword">with</span> 0.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="var">rigrunax1</span> <span class="id" title="var">X</span> <span class="id" title="var">_</span>). <span class="id" title="tactic">rewrite</span> (<span class="id" title="var">rigrunax1</span> <span class="id" title="var">X</span> <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> ((<span class="id" title="var">pr2</span> <span class="id" title="keyword">is</span>) <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">r2'</span> <span class="id" title="var">r1'</span>).<br/>
</div>
<span class="id" title="keyword">Opaque</span> <span class="id" title="var">isinvringrigtoringmultgt</span>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab513"></a><h4 class="section">Realations and the canonical homomorphism to the ring associated with a rig (ring of differences)</h4>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">iscomptoringdiff</span> (<span class="id" title="var">X</span> : <span class="id" title="var">rig</span>) {<span class="id" title="var">L</span> : <span class="id" title="var">hrel</span> <span class="id" title="var">X</span>} (<span class="id" title="var">is0</span> : @<span class="id" title="var">isbinophrel</span> (<span class="id" title="var">rigaddabmonoid</span> <span class="id" title="var">X</span>) <span class="id" title="var">L</span>) :<br/>
&nbsp;&nbsp;<span class="id" title="var">iscomprelrelfun</span> <span class="id" title="var">L</span> (<span class="id" title="var">rigtoringrel</span> <span class="id" title="var">X</span> <span class="id" title="var">is0</span>) (<span class="id" title="var">toringdiff</span> <span class="id" title="var">X</span>) := <span class="id" title="var">iscomptoabgrdiff</span> (<span class="id" title="var">rigaddabmonoid</span> <span class="id" title="var">X</span>) <span class="id" title="var">is0</span>.<br/>
<span class="id" title="keyword">Opaque</span> <span class="id" title="var">iscomptoringdiff</span>.<br/>

<br/>
<span class="id" title="keyword">Close</span> <span class="id" title="keyword">Scope</span> <span class="id" title="var">rig_scope</span>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab514"></a><h3 class="section">Commutative rings</h3>

<div class="paragraph"> </div>

<a name="lab515"></a><h4 class="section">General definitions</h4>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">iscommring</span> (<span class="id" title="var">X</span> : <span class="id" title="var">setwith2binop</span>) : <span class="id" title="var">UU</span> := <span class="id" title="var">iscommringops</span> (@<span class="id" title="var">op1</span> <span class="id" title="var">X</span>) (@<span class="id" title="var">op2</span> <span class="id" title="var">X</span>).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">commring</span> : <span class="id" title="var">UU</span> := <span class="id" title="var">total2</span> (<span class="id" title="var">λ</span> <span class="id" title="var">X</span> : <span class="id" title="var">setwith2binop</span>, <span class="id" title="var">iscommringops</span> (@<span class="id" title="var">op1</span> <span class="id" title="var">X</span>) (@<span class="id" title="var">op2</span> <span class="id" title="var">X</span>)).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">commringpair</span> (<span class="id" title="var">X</span> : <span class="id" title="var">setwith2binop</span>) (<span class="id" title="keyword">is</span> : <span class="id" title="var">iscommringops</span> (@<span class="id" title="var">op1</span> <span class="id" title="var">X</span>) (@<span class="id" title="var">op2</span> <span class="id" title="var">X</span>)) :<br/>
&nbsp;&nbsp;∑ <span class="id" title="var">X0</span> : <span class="id" title="var">setwith2binop</span>, <span class="id" title="var">iscommringops</span> <span class="id" title="var">op1</span> <span class="id" title="var">op2</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="var">tpair</span> (<span class="id" title="var">λ</span> <span class="id" title="var">X</span> : <span class="id" title="var">setwith2binop</span>, <span class="id" title="var">iscommringops</span> (@<span class="id" title="var">op1</span> <span class="id" title="var">X</span>) (@<span class="id" title="var">op2</span> <span class="id" title="var">X</span>)) <span class="id" title="var">X</span> <span class="id" title="keyword">is</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">commringconstr</span> {<span class="id" title="var">X</span> : <span class="id" title="var">hSet</span>} (<span class="id" title="var">opp1</span> <span class="id" title="var">opp2</span> : <span class="id" title="var">binop</span> <span class="id" title="var">X</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">ax11</span> : <span class="id" title="var">isgrop</span> <span class="id" title="var">opp1</span>) (<span class="id" title="var">ax12</span> : <span class="id" title="var">iscomm</span> <span class="id" title="var">opp1</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">ax21</span> : <span class="id" title="var">ismonoidop</span> <span class="id" title="var">opp2</span>) (<span class="id" title="var">ax22</span> : <span class="id" title="var">iscomm</span> <span class="id" title="var">opp2</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">dax</span> : <span class="id" title="var">isdistr</span> <span class="id" title="var">opp1</span> <span class="id" title="var">opp2</span>) : <span class="id" title="var">commring</span> :=<br/>
&nbsp;&nbsp;@<span class="id" title="var">commringpair</span> (<span class="id" title="var">setwith2binoppair</span> <span class="id" title="var">X</span> (<span class="id" title="var">dirprodpair</span> <span class="id" title="var">opp1</span> <span class="id" title="var">opp2</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">dirprodpair</span> (<span class="id" title="var">dirprodpair</span> (<span class="id" title="var">dirprodpair</span> (<span class="id" title="var">dirprodpair</span> <span class="id" title="var">ax11</span> <span class="id" title="var">ax12</span>) <span class="id" title="var">ax21</span>) <span class="id" title="var">dax</span>) <span class="id" title="var">ax22</span>).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">commringtoring</span> : <span class="id" title="var">commring</span> -&gt; <span class="id" title="tactic">ring</span> := <span class="id" title="var">λ</span> <span class="id" title="var">X</span> : <span class="id" title="var">_</span>, @<span class="id" title="var">ringpair</span> (<span class="id" title="var">pr1</span> <span class="id" title="var">X</span>) (<span class="id" title="var">pr1</span> (<span class="id" title="var">pr2</span> <span class="id" title="var">X</span>)).<br/>
<span class="id" title="keyword">Coercion</span> <span class="id" title="var">commringtoring</span> : <span class="id" title="var">commring</span> &gt;-&gt; <span class="id" title="tactic">ring</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">ringcomm2</span> (<span class="id" title="var">X</span> : <span class="id" title="var">commring</span>) : <span class="id" title="var">iscomm</span> (@<span class="id" title="var">op2</span> <span class="id" title="var">X</span>) := <span class="id" title="var">pr2</span> (<span class="id" title="var">pr2</span> <span class="id" title="var">X</span>).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">commringop2axs</span> (<span class="id" title="var">X</span> : <span class="id" title="var">commring</span>) : <span class="id" title="var">isabmonoidop</span> (@<span class="id" title="var">op2</span> <span class="id" title="var">X</span>) :=<br/>
&nbsp;&nbsp;<span class="id" title="var">tpair</span> <span class="id" title="var">_</span> (<span class="id" title="var">ringop2axs</span> <span class="id" title="var">X</span>) (<span class="id" title="var">ringcomm2</span> <span class="id" title="var">X</span>).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">ringmultabmonoid</span> (<span class="id" title="var">X</span> : <span class="id" title="var">commring</span>) : <span class="id" title="var">abmonoid</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="var">abmonoidpair</span> (<span class="id" title="var">setwithbinoppair</span> <span class="id" title="var">X</span> <span class="id" title="var">op2</span>) (<span class="id" title="var">dirprodpair</span> (<span class="id" title="var">ringop2axs</span> <span class="id" title="var">X</span>) (<span class="id" title="var">ringcomm2</span> <span class="id" title="var">X</span>)).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">commringtocommrig</span> (<span class="id" title="var">X</span> : <span class="id" title="var">commring</span>) : <span class="id" title="var">commrig</span> := <span class="id" title="var">commrigpair</span> <span class="id" title="var">_</span> (<span class="id" title="var">pr2</span> <span class="id" title="var">X</span>).<br/>
<span class="id" title="keyword">Coercion</span> <span class="id" title="var">commringtocommrig</span> : <span class="id" title="var">commring</span> &gt;-&gt; <span class="id" title="var">commrig</span>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab516"></a><h4 class="section">(X = Y) ≃ (ringiso X Y)</h4>

    We use the following composition

<div class="paragraph"> </div>

                          (X = Y) ≃ (mk_commring' X = mk_commring' Y)
                                  ≃ ((pr1 (mk_commring' X)) = (pr1 (mk_commring' Y)))
                                  ≃ (ringiso X Y)

<div class="paragraph"> </div>

    where the third weak equivalence is given by univalence for ring, <span class="inlinecode"><span class="id" title="var">ring_univalence</span></span>. We define
    <span class="inlinecode"><span class="id" title="var">commring'</span></span> to be able to use <span class="inlinecode"><span class="id" title="var">ring_univalence</span></span>.
 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Local</span> <span class="id" title="keyword">Definition</span> <span class="id" title="var">commring'</span> : <span class="id" title="var">UU</span> :=<br/>
&nbsp;&nbsp;∑ <span class="id" title="var">D</span> : (∑ <span class="id" title="var">X</span> : <span class="id" title="var">setwith2binop</span>, <span class="id" title="var">isringops</span> (@<span class="id" title="var">op1</span> <span class="id" title="var">X</span>) (@<span class="id" title="var">op2</span> <span class="id" title="var">X</span>)), <span class="id" title="var">iscomm</span> (@<span class="id" title="var">op2</span> (<span class="id" title="var">pr1</span> <span class="id" title="var">D</span>)).<br/>

<br/>
<span class="id" title="keyword">Local</span> <span class="id" title="keyword">Definition</span> <span class="id" title="var">mk_commring'</span> (<span class="id" title="var">CR</span> : <span class="id" title="var">commring</span>) : <span class="id" title="var">commring'</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="var">tpair</span> <span class="id" title="var">_</span> (<span class="id" title="var">tpair</span> <span class="id" title="var">_</span> (<span class="id" title="var">pr1</span> <span class="id" title="var">CR</span>) (<span class="id" title="var">dirprod_pr1</span> (<span class="id" title="var">pr2</span> <span class="id" title="var">CR</span>))) (<span class="id" title="var">dirprod_pr2</span> (<span class="id" title="var">pr2</span> <span class="id" title="var">CR</span>)).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">commring_univalence_weq1</span> : <span class="id" title="var">commring</span> ≃ <span class="id" title="var">commring'</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="var">weqtotal2asstol</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">λ</span> <span class="id" title="var">X</span> : <span class="id" title="var">setwith2binop</span>, <span class="id" title="var">isringops</span> (@<span class="id" title="var">op1</span> <span class="id" title="var">X</span>) (@<span class="id" title="var">op2</span> <span class="id" title="var">X</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">fun</span> <span class="id" title="var">y</span> : (∑ (<span class="id" title="var">X</span> : <span class="id" title="var">setwith2binop</span>), <span class="id" title="var">isringops</span> (@<span class="id" title="var">op1</span> <span class="id" title="var">X</span>) (@<span class="id" title="var">op2</span> <span class="id" title="var">X</span>)) =&gt; <span class="id" title="var">iscomm</span> (@<span class="id" title="var">op2</span> (<span class="id" title="var">pr1</span> <span class="id" title="var">y</span>))).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">commring_univalence_weq1'</span> (<span class="id" title="var">X</span> <span class="id" title="var">Y</span> : <span class="id" title="var">commring</span>) : (<span class="id" title="var">X</span> = <span class="id" title="var">Y</span>) ≃ (<span class="id" title="var">mk_commring'</span> <span class="id" title="var">X</span> = <span class="id" title="var">mk_commring'</span> <span class="id" title="var">Y</span>) :=<br/>
&nbsp;&nbsp;<span class="id" title="var">weqpair</span> <span class="id" title="var">_</span> (@<span class="id" title="var">isweqmaponpaths</span> <span class="id" title="var">commring</span> <span class="id" title="var">commring'</span> <span class="id" title="var">commring_univalence_weq1</span> <span class="id" title="var">X</span> <span class="id" title="var">Y</span>).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">commring_univalence_weq2</span> (<span class="id" title="var">X</span> <span class="id" title="var">Y</span> : <span class="id" title="var">commring</span>) :<br/>
&nbsp;&nbsp;((<span class="id" title="var">mk_commring'</span> <span class="id" title="var">X</span>) = (<span class="id" title="var">mk_commring'</span> <span class="id" title="var">Y</span>)) ≃ ((<span class="id" title="var">pr1</span> (<span class="id" title="var">mk_commring'</span> <span class="id" title="var">X</span>)) = (<span class="id" title="var">pr1</span> (<span class="id" title="var">mk_commring'</span> <span class="id" title="var">Y</span>))).<br/>
<a class="proof" href="#">Show proof.</a><br/><div class="proof">
&nbsp;&nbsp;<span class="id" title="var">use</span> <span class="id" title="var">subtypeInjectivity</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">w</span>. <span class="id" title="var">use</span> <span class="id" title="var">isapropiscomm</span>.<br/>
</div>
<span class="id" title="keyword">Opaque</span> <span class="id" title="var">commring_univalence_weq2</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">commring_univalence_weq3</span> (<span class="id" title="var">X</span> <span class="id" title="var">Y</span> : <span class="id" title="var">commring</span>) :<br/>
&nbsp;&nbsp;((<span class="id" title="var">pr1</span> (<span class="id" title="var">mk_commring'</span> <span class="id" title="var">X</span>)) = (<span class="id" title="var">pr1</span> (<span class="id" title="var">mk_commring'</span> <span class="id" title="var">Y</span>))) ≃ (<span class="id" title="var">ringiso</span> <span class="id" title="var">X</span> <span class="id" title="var">Y</span>) :=<br/>
&nbsp;&nbsp;<span class="id" title="var">ring_univalence</span> (<span class="id" title="var">pr1</span> (<span class="id" title="var">mk_commring'</span> <span class="id" title="var">X</span>)) (<span class="id" title="var">pr1</span> (<span class="id" title="var">mk_commring'</span> <span class="id" title="var">Y</span>)).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">commring_univalence_map</span> (<span class="id" title="var">X</span> <span class="id" title="var">Y</span> : <span class="id" title="var">commring</span>) : (<span class="id" title="var">X</span> = <span class="id" title="var">Y</span>) -&gt; (<span class="id" title="var">ringiso</span> <span class="id" title="var">X</span> <span class="id" title="var">Y</span>).<br/>
<a class="proof" href="#">Show proof.</a><br/><div class="proof">
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">e</span>. <span class="id" title="tactic">induction</span> <span class="id" title="var">e</span>. <span class="id" title="tactic">exact</span> (<span class="id" title="var">idrigiso</span> <span class="id" title="var">X</span>).<br/>
</div>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">commring_univalence_isweq</span> (<span class="id" title="var">X</span> <span class="id" title="var">Y</span> : <span class="id" title="var">commring</span>) : <span class="id" title="var">isweq</span> (<span class="id" title="var">commring_univalence_map</span> <span class="id" title="var">X</span> <span class="id" title="var">Y</span>).<br/>
<a class="proof" href="#">Show proof.</a><br/><div class="proof">
&nbsp;&nbsp;<span class="id" title="var">use</span> <span class="id" title="var">isweqhomot</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">exact</span> (<span class="id" title="var">weqcomp</span> (<span class="id" title="var">commring_univalence_weq1'</span> <span class="id" title="var">X</span> <span class="id" title="var">Y</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">weqcomp</span> (<span class="id" title="var">commring_univalence_weq2</span> <span class="id" title="var">X</span> <span class="id" title="var">Y</span>) (<span class="id" title="var">commring_univalence_weq3</span> <span class="id" title="var">X</span> <span class="id" title="var">Y</span>))).<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">e</span>. <span class="id" title="tactic">induction</span> <span class="id" title="var">e</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">use</span> (<span class="id" title="var">pathscomp0</span> <span class="id" title="var">weqcomp_to_funcomp_app</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">use</span> <span class="id" title="var">weqcomp_to_funcomp_app</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">use</span> <span class="id" title="var">weqproperty</span>.<br/>
</div>
<span class="id" title="keyword">Opaque</span> <span class="id" title="var">commring_univalence_isweq</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">commring_univalence</span> (<span class="id" title="var">X</span> <span class="id" title="var">Y</span> : <span class="id" title="var">commring</span>) : (<span class="id" title="var">X</span> = <span class="id" title="var">Y</span>) ≃ (<span class="id" title="var">ringiso</span> <span class="id" title="var">X</span> <span class="id" title="var">Y</span>).<br/>
<a class="proof" href="#">Show proof.</a><br/><div class="proof">
&nbsp;&nbsp;<span class="id" title="var">use</span> <span class="id" title="var">weqpair</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">exact</span> (<span class="id" title="var">commring_univalence_map</span> <span class="id" title="var">X</span> <span class="id" title="var">Y</span>).<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">exact</span> (<span class="id" title="var">commring_univalence_isweq</span> <span class="id" title="var">X</span> <span class="id" title="var">Y</span>).<br/>
</div>
<span class="id" title="keyword">Opaque</span> <span class="id" title="var">commring_univalence</span>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab517"></a><h4 class="section">Computational lemmas for commutative rings</h4>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Local Open</span> <span class="id" title="keyword">Scope</span> <span class="id" title="var">ring_scope</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">commringismultcancelableif</span> (<span class="id" title="var">X</span> : <span class="id" title="var">commring</span>) (<span class="id" title="var">x</span> : <span class="id" title="var">X</span>) (<span class="id" title="var">isl</span> : ∏ <span class="id" title="var">y</span>, <span class="id" title="var">paths</span> (<span class="id" title="var">x</span> * <span class="id" title="var">y</span>) 0 -&gt; <span class="id" title="var">y</span> = 0) :<br/>
&nbsp;&nbsp;<span class="id" title="var">iscancelable</span> <span class="id" title="var">op2</span> <span class="id" title="var">x</span>.<br/>
<a class="proof" href="#">Show proof.</a><br/><div class="proof">
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> (<span class="id" title="var">ringismultlcancelableif</span> <span class="id" title="var">X</span> <span class="id" title="var">x</span> <span class="id" title="var">isl</span>).<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">assert</span> (<span class="id" title="var">isr</span> : ∏ <span class="id" title="var">y</span>, <span class="id" title="var">paths</span> (<span class="id" title="var">y</span> * <span class="id" title="var">x</span>) 0 -&gt; <span class="id" title="var">y</span> = 0).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">y</span> <span class="id" title="var">e</span>. <span class="id" title="tactic">rewrite</span> (<span class="id" title="var">ringcomm2</span> <span class="id" title="var">X</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">e</span>. <span class="id" title="tactic">apply</span> (<span class="id" title="var">isl</span> <span class="id" title="var">y</span> <span class="id" title="var">e</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">ringismultrcancelableif</span> <span class="id" title="var">X</span> <span class="id" title="var">x</span> <span class="id" title="var">isr</span>).<br/>
</div>
<span class="id" title="keyword">Opaque</span> <span class="id" title="var">commringismultcancelableif</span>.<br/>

<br/>
<span class="id" title="keyword">Close</span> <span class="id" title="keyword">Scope</span> <span class="id" title="var">ring_scope</span>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab518"></a><h4 class="section">Subobjects</h4>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">iscommringcarrier</span> {<span class="id" title="var">X</span> : <span class="id" title="var">commring</span>} (<span class="id" title="var">A</span> : @<span class="id" title="var">subring</span> <span class="id" title="var">X</span>) : <span class="id" title="var">iscommringops</span> (@<span class="id" title="var">op1</span> <span class="id" title="var">A</span>) (@<span class="id" title="var">op2</span> <span class="id" title="var">A</span>).<br/>
<a class="proof" href="#">Show proof.</a><br/><div class="proof">
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">split</span> <span class="id" title="keyword">with</span> (<span class="id" title="var">isringcarrier</span> <span class="id" title="var">A</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">pr2</span> (@<span class="id" title="var">isabmonoidcarrier</span> (<span class="id" title="var">ringmultabmonoid</span> <span class="id" title="var">X</span>) (<span class="id" title="var">multsubmonoid</span> <span class="id" title="var">A</span>))).<br/>
</div>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">carrierofasubcommring</span> {<span class="id" title="var">X</span> : <span class="id" title="var">commring</span>} (<span class="id" title="var">A</span> : @<span class="id" title="var">subring</span> <span class="id" title="var">X</span>) : <span class="id" title="var">commring</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="var">commringpair</span> <span class="id" title="var">A</span> (<span class="id" title="var">iscommringcarrier</span> <span class="id" title="var">A</span>).<br/>

<br/>
</div>

<div class="doc">
<a name="lab519"></a><h4 class="section">Quotient objects</h4>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">iscommringquot</span> {<span class="id" title="var">X</span> : <span class="id" title="var">commring</span>} (<span class="id" title="var">R</span> : @<span class="id" title="var">ringeqrel</span> <span class="id" title="var">X</span>) :<br/>
&nbsp;&nbsp;<span class="id" title="var">iscommringops</span> (@<span class="id" title="var">op1</span> (<span class="id" title="var">setwith2binopquot</span> <span class="id" title="var">R</span>)) (@<span class="id" title="var">op2</span> (<span class="id" title="var">setwith2binopquot</span> <span class="id" title="var">R</span>)).<br/>
<a class="proof" href="#">Show proof.</a><br/><div class="proof">
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">split</span> <span class="id" title="keyword">with</span> (<span class="id" title="var">isringquot</span> <span class="id" title="var">R</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">pr2</span> (@<span class="id" title="var">isabmonoidquot</span> (<span class="id" title="var">ringmultabmonoid</span> <span class="id" title="var">X</span>) (<span class="id" title="var">ringmultmonoideqrel</span> <span class="id" title="var">R</span>))).<br/>
</div>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">commringquot</span> {<span class="id" title="var">X</span> : <span class="id" title="var">commring</span>} (<span class="id" title="var">R</span> : @<span class="id" title="var">ringeqrel</span> <span class="id" title="var">X</span>) : <span class="id" title="var">commring</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="var">commringpair</span> (<span class="id" title="var">setwith2binopquot</span> <span class="id" title="var">R</span>) (<span class="id" title="var">iscommringquot</span> <span class="id" title="var">R</span>).<br/>

<br/>
</div>

<div class="doc">
<a name="lab520"></a><h4 class="section">Direct products</h4>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">iscommringdirprod</span> (<span class="id" title="var">X</span> <span class="id" title="var">Y</span> : <span class="id" title="var">commring</span>) :<br/>
&nbsp;&nbsp;<span class="id" title="var">iscommringops</span> (@<span class="id" title="var">op1</span> (<span class="id" title="var">setwith2binopdirprod</span> <span class="id" title="var">X</span> <span class="id" title="var">Y</span>)) (@<span class="id" title="var">op2</span> (<span class="id" title="var">setwith2binopdirprod</span> <span class="id" title="var">X</span> <span class="id" title="var">Y</span>)).<br/>
<a class="proof" href="#">Show proof.</a><br/><div class="proof">
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">split</span> <span class="id" title="keyword">with</span> (<span class="id" title="var">isringdirprod</span> <span class="id" title="var">X</span> <span class="id" title="var">Y</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">pr2</span> (<span class="id" title="var">isabmonoiddirprod</span> (<span class="id" title="var">ringmultabmonoid</span> <span class="id" title="var">X</span>) (<span class="id" title="var">ringmultabmonoid</span> <span class="id" title="var">Y</span>))).<br/>
</div>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">commringdirprod</span> (<span class="id" title="var">X</span> <span class="id" title="var">Y</span> : <span class="id" title="var">commring</span>) : <span class="id" title="var">commring</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="var">commringpair</span> (<span class="id" title="var">setwith2binopdirprod</span> <span class="id" title="var">X</span> <span class="id" title="var">Y</span>) (<span class="id" title="var">iscommringdirprod</span> <span class="id" title="var">X</span> <span class="id" title="var">Y</span>).<br/>

<br/>
</div>

<div class="doc">
<a name="lab521"></a><h4 class="section">Opposite commutative rings</h4>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Local Open</span> <span class="id" title="keyword">Scope</span> <span class="id" title="tactic">ring</span>.<br/>

<br/>
</div>

<div class="doc">
We reuse much of the proof for general rigs 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <span class="id" title="var">opposite_commring</span> (<span class="id" title="var">X</span> : <span class="id" title="var">commring</span>) : <span class="id" title="var">commring</span> :=<br/>
&nbsp;&nbsp;((<span class="id" title="var">pr1</span> (<span class="id" title="var">X⁰</span>)),, (<span class="id" title="var">dirprodpair</span> (<span class="id" title="var">pr2</span> (<span class="id" title="var">X⁰</span>)) (<span class="id" title="keyword">fun</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> =&gt; @<span class="id" title="var">ringcomm2</span> <span class="id" title="var">X</span> <span class="id" title="var">y</span> <span class="id" title="var">x</span>))).<br/>

<br/>
</div>

<div class="doc">
Commutativity makes taking the opposite trivial 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <span class="id" title="var">iso_commring_opposite</span> (<span class="id" title="var">X</span> : <span class="id" title="var">commring</span>) : <span class="id" title="var">rigiso</span> <span class="id" title="var">X</span> (<span class="id" title="var">opposite_commring</span> <span class="id" title="var">X</span>) :=<br/>
&nbsp;&nbsp;<span class="id" title="var">iso_commrig_opposite</span> <span class="id" title="var">X</span>.<br/>

<br/>
<span class="id" title="keyword">Local Close</span> <span class="id" title="keyword">Scope</span> <span class="id" title="var">rig</span>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab522"></a><h4 class="section">Commutative rigs to commutative rings</h4>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Local Open</span> <span class="id" title="keyword">Scope</span> <span class="id" title="var">rig_scope</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">commrigtocommringcomm2</span> (<span class="id" title="var">X</span> : <span class="id" title="var">commrig</span>) : <span class="id" title="var">iscomm</span> (<span class="id" title="var">rigtoringop2</span> <span class="id" title="var">X</span>).<br/>
<a class="proof" href="#">Show proof.</a><br/><div class="proof">
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">iscomm</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">setquotuniv2prop</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">eqrelrigtoring</span> <span class="id" title="var">X</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">λ</span> <span class="id" title="var">x</span> <span class="id" title="var">x'</span> : <span class="id" title="var">rigtoringcarrier</span> <span class="id" title="var">X</span>,  <span class="id" title="var">eqset</span> (<span class="id" title="var">rigtoringop2</span> <span class="id" title="var">X</span> <span class="id" title="var">x</span> <span class="id" title="var">x'</span>) (<span class="id" title="var">rigtoringop2</span> <span class="id" title="var">X</span> <span class="id" title="var">x'</span> <span class="id" title="var">x</span>))).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">x</span> <span class="id" title="var">x'</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">change</span> (<span class="id" title="var">paths</span> (<span class="id" title="var">setquotpr</span> (<span class="id" title="var">eqrelrigtoring</span> <span class="id" title="var">X</span>) (<span class="id" title="var">rigtoringop2int</span> <span class="id" title="var">X</span> <span class="id" title="var">x</span> <span class="id" title="var">x'</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">setquotpr</span> (<span class="id" title="var">eqrelrigtoring</span> <span class="id" title="var">X</span>) (<span class="id" title="var">rigtoringop2int</span> <span class="id" title="var">X</span> <span class="id" title="var">x'</span> <span class="id" title="var">x</span>))).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">maponpaths</span> (<span class="id" title="var">setquotpr</span> (<span class="id" title="var">eqrelrigtoring</span> <span class="id" title="var">X</span>))).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">rigtoringop2int</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">cm1</span> := <span class="id" title="var">rigcomm1</span> <span class="id" title="var">X</span>). <span class="id" title="tactic">set</span> (<span class="id" title="var">cm2</span> := <span class="id" title="var">rigcomm2</span> <span class="id" title="var">X</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">pathsdirprod</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> (<span class="id" title="var">cm2</span> (<span class="id" title="var">pr1</span> <span class="id" title="var">x</span>) (<span class="id" title="var">pr1</span> <span class="id" title="var">x'</span>)). <span class="id" title="tactic">rewrite</span> (<span class="id" title="var">cm2</span> (<span class="id" title="var">pr2</span> <span class="id" title="var">x</span>) (<span class="id" title="var">pr2</span> <span class="id" title="var">x'</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">idpath</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> (<span class="id" title="var">cm2</span> (<span class="id" title="var">pr1</span> <span class="id" title="var">x</span>) (<span class="id" title="var">pr2</span> <span class="id" title="var">x'</span>)). <span class="id" title="tactic">rewrite</span> (<span class="id" title="var">cm2</span> (<span class="id" title="var">pr2</span> <span class="id" title="var">x</span>) (<span class="id" title="var">pr1</span> <span class="id" title="var">x'</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">cm1</span>.<br/>
</div>
<span class="id" title="keyword">Opaque</span> <span class="id" title="var">commrigtocommringcomm2</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">commrigtocommring</span> (<span class="id" title="var">X</span> : <span class="id" title="var">commrig</span>) : <span class="id" title="var">commring</span>.<br/>
<a class="proof" href="#">Show proof.</a><br/><div class="proof">
&nbsp;&nbsp;<span class="id" title="tactic">split</span> <span class="id" title="keyword">with</span> (<span class="id" title="var">rigtoring</span> <span class="id" title="var">X</span>). <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> (<span class="id" title="var">pr2</span> (<span class="id" title="var">rigtoring</span> <span class="id" title="var">X</span>)).<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> (<span class="id" title="var">commrigtocommringcomm2</span> <span class="id" title="var">X</span>).<br/>
</div>

<br/>
<span class="id" title="keyword">Close</span> <span class="id" title="keyword">Scope</span> <span class="id" title="var">rig_scope</span>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab523"></a><h4 class="section">Rings of fractions</h4>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Local Open</span> <span class="id" title="keyword">Scope</span> <span class="id" title="var">ring_scope</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">commringfracop1int</span> (<span class="id" title="var">X</span> : <span class="id" title="var">commring</span>) (<span class="id" title="var">S</span> : @<span class="id" title="var">subabmonoid</span> (<span class="id" title="var">ringmultabmonoid</span> <span class="id" title="var">X</span>)) :<br/>
&nbsp;&nbsp;<span class="id" title="var">binop</span> (<span class="id" title="var">X</span> × <span class="id" title="var">S</span>) := <span class="id" title="var">λ</span> <span class="id" title="var">x1s1</span> <span class="id" title="var">x2s2</span> : <span class="id" title="var">dirprod</span> <span class="id" title="var">X</span> <span class="id" title="var">S</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@<span class="id" title="var">dirprodpair</span> <span class="id" title="var">X</span> <span class="id" title="var">S</span> (((<span class="id" title="var">pr1</span> (<span class="id" title="var">pr2</span> <span class="id" title="var">x2s2</span>)) * (<span class="id" title="var">pr1</span> <span class="id" title="var">x1s1</span>)) +<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;((<span class="id" title="var">pr1</span> (<span class="id" title="var">pr2</span> <span class="id" title="var">x1s1</span>)) * (<span class="id" title="var">pr1</span> <span class="id" title="var">x2s2</span>)))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(@<span class="id" title="var">op</span> <span class="id" title="var">S</span> (<span class="id" title="var">pr2</span> <span class="id" title="var">x1s1</span>) (<span class="id" title="var">pr2</span> <span class="id" title="var">x2s2</span>)).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">commringfracop2int</span> (<span class="id" title="var">X</span> : <span class="id" title="var">commring</span>) (<span class="id" title="var">S</span> : @<span class="id" title="var">subabmonoid</span> (<span class="id" title="var">ringmultabmonoid</span> <span class="id" title="var">X</span>)) :<br/>
&nbsp;&nbsp;<span class="id" title="var">binop</span> (<span class="id" title="var">X</span> × <span class="id" title="var">S</span>) := <span class="id" title="var">abmonoidfracopint</span> (<span class="id" title="var">ringmultabmonoid</span> <span class="id" title="var">X</span>) <span class="id" title="var">S</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">commringfracunel1int</span> (<span class="id" title="var">X</span> : <span class="id" title="var">commring</span>) (<span class="id" title="var">S</span> : @<span class="id" title="var">subabmonoid</span> (<span class="id" title="var">ringmultabmonoid</span> <span class="id" title="var">X</span>)) :<br/>
&nbsp;&nbsp;<span class="id" title="var">dirprod</span> <span class="id" title="var">X</span> <span class="id" title="var">S</span> := <span class="id" title="var">dirprodpair</span> 0 (<span class="id" title="var">unel</span> <span class="id" title="var">S</span>).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">commringfracunel2int</span> (<span class="id" title="var">X</span> : <span class="id" title="var">commring</span>) (<span class="id" title="var">S</span> : @<span class="id" title="var">subabmonoid</span> (<span class="id" title="var">ringmultabmonoid</span> <span class="id" title="var">X</span>)) :<br/>
&nbsp;&nbsp;<span class="id" title="var">dirprod</span> <span class="id" title="var">X</span> <span class="id" title="var">S</span> := <span class="id" title="var">dirprodpair</span> 1 (<span class="id" title="var">unel</span> <span class="id" title="var">S</span>).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">commringfracinv1int</span> (<span class="id" title="var">X</span> : <span class="id" title="var">commring</span>) (<span class="id" title="var">S</span> : @<span class="id" title="var">subabmonoid</span> (<span class="id" title="var">ringmultabmonoid</span> <span class="id" title="var">X</span>)) :<br/>
&nbsp;&nbsp;<span class="id" title="var">dirprod</span> <span class="id" title="var">X</span> <span class="id" title="var">S</span> -&gt; <span class="id" title="var">dirprod</span> <span class="id" title="var">X</span> <span class="id" title="var">S</span> := <span class="id" title="var">λ</span> <span class="id" title="var">xs</span> : <span class="id" title="var">_</span>, <span class="id" title="var">dirprodpair</span> ((-1) * (<span class="id" title="var">pr1</span> <span class="id" title="var">xs</span>)) (<span class="id" title="var">pr2</span> <span class="id" title="var">xs</span>).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">eqrelcommringfrac</span> (<span class="id" title="var">X</span> : <span class="id" title="var">commring</span>) (<span class="id" title="var">S</span> : @<span class="id" title="var">subabmonoid</span> (<span class="id" title="var">ringmultabmonoid</span> <span class="id" title="var">X</span>)) :<br/>
&nbsp;&nbsp;<span class="id" title="var">eqrel</span> (<span class="id" title="var">X</span> × <span class="id" title="var">S</span>) := <span class="id" title="var">eqrelabmonoidfrac</span> (<span class="id" title="var">ringmultabmonoid</span> <span class="id" title="var">X</span>) <span class="id" title="var">S</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">commringfracl1</span> (<span class="id" title="var">X</span> : <span class="id" title="var">commring</span>) (<span class="id" title="var">x1</span> <span class="id" title="var">x2</span> <span class="id" title="var">x3</span> <span class="id" title="var">x4</span> <span class="id" title="var">a1</span> <span class="id" title="var">a2</span> <span class="id" title="var">s1</span> <span class="id" title="var">s2</span> <span class="id" title="var">s3</span> <span class="id" title="var">s4</span> : <span class="id" title="var">X</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">eq1</span> : <span class="id" title="var">paths</span> ((<span class="id" title="var">x1</span> * <span class="id" title="var">s2</span>) * <span class="id" title="var">a1</span>) ((<span class="id" title="var">x2</span> * <span class="id" title="var">s1</span>) * <span class="id" title="var">a1</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">eq2</span> : <span class="id" title="var">paths</span> ((<span class="id" title="var">x3</span> * <span class="id" title="var">s4</span>) * <span class="id" title="var">a2</span>) ((<span class="id" title="var">x4</span> * <span class="id" title="var">s3</span>) * <span class="id" title="var">a2</span>)) :<br/>
&nbsp;&nbsp;<span class="id" title="var">paths</span> ((((<span class="id" title="var">s3</span> * <span class="id" title="var">x1</span>) + (<span class="id" title="var">s1</span> * <span class="id" title="var">x3</span>)) * (<span class="id" title="var">s2</span> * <span class="id" title="var">s4</span>)) * (<span class="id" title="var">a1</span> * <span class="id" title="var">a2</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;((((<span class="id" title="var">s4</span> * <span class="id" title="var">x2</span>) + (<span class="id" title="var">s2</span> * <span class="id" title="var">x4</span>)) * (<span class="id" title="var">s1</span> * <span class="id" title="var">s3</span>)) * (<span class="id" title="var">a1</span> * <span class="id" title="var">a2</span>)).<br/>
<a class="proof" href="#">Show proof.</a><br/><div class="proof">
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">rdistr</span> := <span class="id" title="var">ringrdistr</span> <span class="id" title="var">X</span>). <span class="id" title="tactic">set</span> (<span class="id" title="var">assoc2</span> := <span class="id" title="var">ringassoc2</span> <span class="id" title="var">X</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">op2axs</span> := <span class="id" title="var">commringop2axs</span> <span class="id" title="var">X</span>). <span class="id" title="tactic">set</span> (<span class="id" title="var">comm2</span> := <span class="id" title="var">ringcomm2</span> <span class="id" title="var">X</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">rer</span> := <span class="id" title="var">abmonoidoprer</span> <span class="id" title="var">op2axs</span>).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="var">rdistr</span> (<span class="id" title="var">s3</span> * <span class="id" title="var">x1</span>) (<span class="id" title="var">s1</span> * <span class="id" title="var">x3</span>)  (<span class="id" title="var">s2</span> * <span class="id" title="var">s4</span>)).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="var">rdistr</span> (<span class="id" title="var">s4</span> * <span class="id" title="var">x2</span>) (<span class="id" title="var">s2</span> * <span class="id" title="var">x4</span>) (<span class="id" title="var">s1</span> * <span class="id" title="var">s3</span>)).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="var">rdistr</span> ((<span class="id" title="var">s3</span> * <span class="id" title="var">x1</span>) * (<span class="id" title="var">s2</span> * <span class="id" title="var">s4</span>)) ((<span class="id" title="var">s1</span> * <span class="id" title="var">x3</span>) * (<span class="id" title="var">s2</span> * <span class="id" title="var">s4</span>)) (<span class="id" title="var">a1</span> * <span class="id" title="var">a2</span>)).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="var">rdistr</span> ((<span class="id" title="var">s4</span> * <span class="id" title="var">x2</span>) * (<span class="id" title="var">s1</span> * <span class="id" title="var">s3</span>)) ((<span class="id" title="var">s2</span> * <span class="id" title="var">x4</span>) * (<span class="id" title="var">s1</span> * <span class="id" title="var">s3</span>)) (<span class="id" title="var">a1</span> * <span class="id" title="var">a2</span>)).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">clear</span> <span class="id" title="var">rdistr</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">e1</span> : <span class="id" title="var">paths</span> (((<span class="id" title="var">s3</span> * <span class="id" title="var">x1</span>) * (<span class="id" title="var">s2</span> * <span class="id" title="var">s4</span>)) * (<span class="id" title="var">a1</span> * <span class="id" title="var">a2</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(((<span class="id" title="var">s4</span> * <span class="id" title="var">x2</span>) * (<span class="id" title="var">s1</span> * <span class="id" title="var">s3</span>)) * (<span class="id" title="var">a1</span> * <span class="id" title="var">a2</span>))).<br/>
&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">assoc2</span> (<span class="id" title="var">s3</span> * <span class="id" title="var">x1</span>) <span class="id" title="var">s2</span> <span class="id" title="var">s4</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="var">assoc2</span> <span class="id" title="var">s3</span> <span class="id" title="var">x1</span> <span class="id" title="var">s2</span>). <span class="id" title="tactic">rewrite</span> (<span class="id" title="var">rer</span> (<span class="id" title="var">s3</span> * (<span class="id" title="var">x1</span> * <span class="id" title="var">s2</span>)) <span class="id" title="var">s4</span> <span class="id" title="var">a1</span> <span class="id" title="var">a2</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="var">assoc2</span> <span class="id" title="var">s3</span> (<span class="id" title="var">x1</span> * <span class="id" title="var">s2</span>) <span class="id" title="var">a1</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">assoc2</span> (<span class="id" title="var">s4</span> * <span class="id" title="var">x2</span>) <span class="id" title="var">s1</span> <span class="id" title="var">s3</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="var">assoc2</span> <span class="id" title="var">s4</span> <span class="id" title="var">x2</span> <span class="id" title="var">s1</span>). <span class="id" title="tactic">rewrite</span> (<span class="id" title="var">rer</span> (<span class="id" title="var">s4</span> * (<span class="id" title="var">x2</span> * <span class="id" title="var">s1</span>)) <span class="id" title="var">s3</span> <span class="id" title="var">a1</span> <span class="id" title="var">a2</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="var">assoc2</span> <span class="id" title="var">s4</span> (<span class="id" title="var">x2</span> * <span class="id" title="var">s1</span>) <span class="id" title="var">a1</span>). <span class="id" title="tactic">destruct</span> <span class="id" title="var">eq1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="var">comm2</span> <span class="id" title="var">s3</span> ((<span class="id" title="var">x1</span> * <span class="id" title="var">s2</span>) * <span class="id" title="var">a1</span>)). <span class="id" title="tactic">rewrite</span> (<span class="id" title="var">comm2</span> <span class="id" title="var">s4</span> ((<span class="id" title="var">x1</span> * <span class="id" title="var">s2</span>) * <span class="id" title="var">a1</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="var">rer</span> ((<span class="id" title="var">x1</span> * <span class="id" title="var">s2</span>) * <span class="id" title="var">a1</span>) <span class="id" title="var">s3</span> <span class="id" title="var">s4</span> <span class="id" title="var">a2</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">idpath</span>.<br/>
&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">e2</span> : <span class="id" title="var">paths</span> (((<span class="id" title="var">s1</span> * <span class="id" title="var">x3</span>) * (<span class="id" title="var">s2</span> * <span class="id" title="var">s4</span>)) * (<span class="id" title="var">a1</span> * <span class="id" title="var">a2</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(((<span class="id" title="var">s2</span> * <span class="id" title="var">x4</span>) * (<span class="id" title="var">s1</span> * <span class="id" title="var">s3</span>)) * (<span class="id" title="var">a1</span> * <span class="id" title="var">a2</span>))).<br/>
&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">comm2</span> <span class="id" title="var">s4</span> <span class="id" title="var">s2</span>). <span class="id" title="tactic">destruct</span> (<span class="id" title="var">comm2</span> <span class="id" title="var">s3</span> <span class="id" title="var">s1</span>). <span class="id" title="tactic">destruct</span> (<span class="id" title="var">comm2</span> <span class="id" title="var">a2</span> <span class="id" title="var">a1</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">assoc2</span> (<span class="id" title="var">s1</span> * <span class="id" title="var">x3</span>) <span class="id" title="var">s4</span> <span class="id" title="var">s2</span>). <span class="id" title="tactic">destruct</span> (<span class="id" title="var">assoc2</span> (<span class="id" title="var">s2</span> * <span class="id" title="var">x4</span>) <span class="id" title="var">s3</span> <span class="id" title="var">s1</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="var">assoc2</span> <span class="id" title="var">s1</span> <span class="id" title="var">x3</span> <span class="id" title="var">s4</span>). <span class="id" title="tactic">rewrite</span> (<span class="id" title="var">assoc2</span> <span class="id" title="var">s2</span> <span class="id" title="var">x4</span> <span class="id" title="var">s3</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="var">rer</span> (<span class="id" title="var">s1</span> * (<span class="id" title="var">x3</span> * <span class="id" title="var">s4</span>)) <span class="id" title="var">s2</span> <span class="id" title="var">a2</span> <span class="id" title="var">a1</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="var">rer</span> (<span class="id" title="var">s2</span> * (<span class="id" title="var">x4</span> * <span class="id" title="var">s3</span>)) <span class="id" title="var">s1</span> <span class="id" title="var">a2</span> <span class="id" title="var">a1</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="var">assoc2</span> <span class="id" title="var">s1</span> (<span class="id" title="var">x3</span> * <span class="id" title="var">s4</span>) <span class="id" title="var">a2</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="var">assoc2</span> <span class="id" title="var">s2</span> (<span class="id" title="var">x4</span> * <span class="id" title="var">s3</span>) <span class="id" title="var">a2</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">eq2</span>. <span class="id" title="tactic">destruct</span> (<span class="id" title="var">comm2</span> ((<span class="id" title="var">x3</span> * <span class="id" title="var">s4</span>) * <span class="id" title="var">a2</span>) <span class="id" title="var">s1</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">comm2</span> ((<span class="id" title="var">x3</span> *<span class="id" title="var">s4</span>) * <span class="id" title="var">a2</span>) <span class="id" title="var">s2</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="var">rer</span> ((<span class="id" title="var">x3</span> * <span class="id" title="var">s4</span>) * <span class="id" title="var">a2</span>) <span class="id" title="var">s1</span> <span class="id" title="var">s2</span> <span class="id" title="var">a1</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">idpath</span>.<br/>
&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">e1</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">e2</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">idpath</span>.<br/>
</div>
<span class="id" title="keyword">Opaque</span> <span class="id" title="var">commringfracl1</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">commringfracop1comp</span> (<span class="id" title="var">X</span> : <span class="id" title="var">commring</span>) (<span class="id" title="var">S</span> : @<span class="id" title="var">subabmonoid</span> (<span class="id" title="var">ringmultabmonoid</span> <span class="id" title="var">X</span>)) :<br/>
&nbsp;&nbsp;<span class="id" title="var">iscomprelrelfun2</span> (<span class="id" title="var">eqrelcommringfrac</span> <span class="id" title="var">X</span> <span class="id" title="var">S</span>) (<span class="id" title="var">eqrelcommringfrac</span> <span class="id" title="var">X</span> <span class="id" title="var">S</span>) (<span class="id" title="var">commringfracop1int</span> <span class="id" title="var">X</span> <span class="id" title="var">S</span>).<br/>
<a class="proof" href="#">Show proof.</a><br/><div class="proof">
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">intros</span> <span class="id" title="var">xs1</span> <span class="id" title="var">xs2</span> <span class="id" title="var">xs3</span> <span class="id" title="var">xs4</span>. <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">ff</span> := @<span class="id" title="var">hinhfun2</span>). <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">ff</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">ff</span>. <span class="id" title="tactic">clear</span> <span class="id" title="var">ff</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">tt1</span> <span class="id" title="var">tt2</span>. <span class="id" title="tactic">split</span> <span class="id" title="keyword">with</span> (@<span class="id" title="var">op</span> <span class="id" title="var">S</span> (<span class="id" title="var">pr1</span> <span class="id" title="var">tt1</span>) (<span class="id" title="var">pr1</span> <span class="id" title="var">tt2</span>)).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">eq1</span> := <span class="id" title="var">pr2</span> <span class="id" title="var">tt1</span>). <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">eq1</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">eq2</span> := <span class="id" title="var">pr2</span> <span class="id" title="var">tt2</span>). <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">eq2</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">pr1carrier</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">commringfracl1</span> <span class="id" title="var">X</span> (<span class="id" title="var">pr1</span> <span class="id" title="var">xs1</span>) (<span class="id" title="var">pr1</span> <span class="id" title="var">xs2</span>) (<span class="id" title="var">pr1</span> <span class="id" title="var">xs3</span>) (<span class="id" title="var">pr1</span> <span class="id" title="var">xs4</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">pr1</span> (<span class="id" title="var">pr1</span> <span class="id" title="var">tt1</span>)) (<span class="id" title="var">pr1</span> (<span class="id" title="var">pr1</span> <span class="id" title="var">tt2</span>)) (<span class="id" title="var">pr1</span> (<span class="id" title="var">pr2</span> <span class="id" title="var">xs1</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">pr1</span> (<span class="id" title="var">pr2</span> <span class="id" title="var">xs2</span>)) (<span class="id" title="var">pr1</span> (<span class="id" title="var">pr2</span> <span class="id" title="var">xs3</span>)) (<span class="id" title="var">pr1</span> (<span class="id" title="var">pr2</span> <span class="id" title="var">xs4</span>)) <span class="id" title="var">eq1</span> <span class="id" title="var">eq2</span>).<br/>
</div>
<span class="id" title="keyword">Opaque</span> <span class="id" title="var">commringfracop1comp</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">commringfracop1</span> (<span class="id" title="var">X</span> : <span class="id" title="var">commring</span>) (<span class="id" title="var">S</span> : @<span class="id" title="var">subabmonoid</span> (<span class="id" title="var">ringmultabmonoid</span> <span class="id" title="var">X</span>)) :<br/>
&nbsp;&nbsp;<span class="id" title="var">binop</span> (<span class="id" title="var">setquotinset</span> (<span class="id" title="var">eqrelcommringfrac</span> <span class="id" title="var">X</span> <span class="id" title="var">S</span>)) :=<br/>
&nbsp;&nbsp;<span class="id" title="var">setquotfun2</span> (<span class="id" title="var">eqrelcommringfrac</span> <span class="id" title="var">X</span> <span class="id" title="var">S</span>) (<span class="id" title="var">eqrelcommringfrac</span> <span class="id" title="var">X</span> <span class="id" title="var">S</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">commringfracop1int</span> <span class="id" title="var">X</span> <span class="id" title="var">S</span>) (<span class="id" title="var">commringfracop1comp</span> <span class="id" title="var">X</span> <span class="id" title="var">S</span>).<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">commringfracl2</span> (<span class="id" title="var">X</span> : <span class="id" title="var">commring</span>) (<span class="id" title="var">x</span> <span class="id" title="var">x'</span> <span class="id" title="var">x''</span> <span class="id" title="var">s</span> <span class="id" title="var">s'</span> <span class="id" title="var">s''</span> : <span class="id" title="var">X</span>) :<br/>
&nbsp;&nbsp;<span class="id" title="var">paths</span> ((<span class="id" title="var">s''</span> * ((<span class="id" title="var">s'</span> * <span class="id" title="var">x</span>) + (<span class="id" title="var">s</span> * <span class="id" title="var">x'</span>))) + ((<span class="id" title="var">s</span> * <span class="id" title="var">s'</span>) * <span class="id" title="var">x''</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(((<span class="id" title="var">s'</span> * <span class="id" title="var">s''</span>) * <span class="id" title="var">x</span>) + (<span class="id" title="var">s</span> * ((<span class="id" title="var">s''</span> * <span class="id" title="var">x'</span>) + (<span class="id" title="var">s'</span> * <span class="id" title="var">x''</span>)))).<br/>
<a class="proof" href="#">Show proof.</a><br/><div class="proof">
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">ldistr</span> := <span class="id" title="var">ringldistr</span> <span class="id" title="var">X</span>). <span class="id" title="tactic">set</span> (<span class="id" title="var">comm2</span> := <span class="id" title="var">ringcomm2</span> <span class="id" title="var">X</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">assoc2</span> := <span class="id" title="var">ringassoc2</span> <span class="id" title="var">X</span>). <span class="id" title="tactic">set</span> (<span class="id" title="var">assoc1</span> := <span class="id" title="var">ringassoc1</span> <span class="id" title="var">X</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="var">ldistr</span> (<span class="id" title="var">s'</span> * <span class="id" title="var">x</span>) (<span class="id" title="var">s</span> * <span class="id" title="var">x'</span>) <span class="id" title="var">s''</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="var">ldistr</span> (<span class="id" title="var">s''</span> * <span class="id" title="var">x'</span>) (<span class="id" title="var">s'</span> * <span class="id" title="var">x''</span>) <span class="id" title="var">s</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">comm2</span> <span class="id" title="var">s''</span> <span class="id" title="var">s'</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">assoc2</span> <span class="id" title="var">s''</span> <span class="id" title="var">s'</span> <span class="id" title="var">x</span>). <span class="id" title="tactic">destruct</span> (<span class="id" title="var">assoc2</span> <span class="id" title="var">s''</span> <span class="id" title="var">s</span> <span class="id" title="var">x'</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">assoc2</span> <span class="id" title="var">s</span> <span class="id" title="var">s''</span> <span class="id" title="var">x'</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">comm2</span> <span class="id" title="var">s</span> <span class="id" title="var">s''</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">assoc2</span> <span class="id" title="var">s</span> <span class="id" title="var">s'</span> <span class="id" title="var">x''</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">assoc1</span> ((<span class="id" title="var">s''</span> * <span class="id" title="var">s'</span>) * <span class="id" title="var">x</span>) ((<span class="id" title="var">s</span> * <span class="id" title="var">s''</span>) * <span class="id" title="var">x'</span>) ((<span class="id" title="var">s</span> * <span class="id" title="var">s'</span>) * <span class="id" title="var">x''</span>)).<br/>
</div>
<span class="id" title="keyword">Opaque</span> <span class="id" title="var">commringfracl2</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">commringfracassoc1</span> (<span class="id" title="var">X</span> : <span class="id" title="var">commring</span>) (<span class="id" title="var">S</span> : @<span class="id" title="var">subabmonoid</span> (<span class="id" title="var">ringmultabmonoid</span> <span class="id" title="var">X</span>)) :<br/>
&nbsp;&nbsp;<span class="id" title="var">isassoc</span> (<span class="id" title="var">commringfracop1</span> <span class="id" title="var">X</span> <span class="id" title="var">S</span>).<br/>
<a class="proof" href="#">Show proof.</a><br/><div class="proof">
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">R</span> := <span class="id" title="var">eqrelcommringfrac</span> <span class="id" title="var">X</span> <span class="id" title="var">S</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">add1int</span> := <span class="id" title="var">commringfracop1int</span> <span class="id" title="var">X</span> <span class="id" title="var">S</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">add1</span> := <span class="id" title="var">commringfracop1</span> <span class="id" title="var">X</span> <span class="id" title="var">S</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">isassoc</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">int</span> : ∏ (<span class="id" title="var">xs</span> <span class="id" title="var">xs'</span> <span class="id" title="var">xs''</span> : <span class="id" title="var">dirprod</span> <span class="id" title="var">X</span> <span class="id" title="var">S</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">paths</span> (<span class="id" title="var">setquotpr</span> <span class="id" title="var">R</span> (<span class="id" title="var">add1int</span> (<span class="id" title="var">add1int</span> <span class="id" title="var">xs</span> <span class="id" title="var">xs'</span>) <span class="id" title="var">xs''</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">setquotpr</span> <span class="id" title="var">R</span> (<span class="id" title="var">add1int</span> <span class="id" title="var">xs</span> (<span class="id" title="var">add1int</span> <span class="id" title="var">xs'</span> <span class="id" title="var">xs''</span>)))).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">add1int</span>. <span class="id" title="tactic">unfold</span> <span class="id" title="var">commringfracop1int</span>. <span class="id" title="tactic">intros</span> <span class="id" title="var">xs</span> <span class="id" title="var">xs'</span> <span class="id" title="var">xs''</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (@<span class="id" title="var">maponpaths</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> (<span class="id" title="var">setquotpr</span> <span class="id" title="var">R</span>)). <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">pathsdirprod</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">unfold</span> <span class="id" title="var">pr1carrier</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">commringfracl2</span> <span class="id" title="var">X</span> (<span class="id" title="var">pr1</span> <span class="id" title="var">xs</span>) (<span class="id" title="var">pr1</span> <span class="id" title="var">xs'</span>) (<span class="id" title="var">pr1</span> <span class="id" title="var">xs''</span>) (<span class="id" title="var">pr1</span> (<span class="id" title="var">pr2</span> <span class="id" title="var">xs</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">pr1</span> (<span class="id" title="var">pr2</span> <span class="id" title="var">xs'</span>)) (<span class="id" title="var">pr1</span> (<span class="id" title="var">pr2</span> <span class="id" title="var">xs''</span>))).<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> (<span class="id" title="var">invmaponpathsincl</span> <span class="id" title="var">_</span> (<span class="id" title="var">isinclpr1carrier</span> (<span class="id" title="var">pr1</span> <span class="id" title="var">S</span>))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">pr1carrier</span>. <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">set</span> (<span class="id" title="var">assoc2</span> := <span class="id" title="var">ringassoc2</span> <span class="id" title="var">X</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">assoc2</span> (<span class="id" title="var">pr1</span> (<span class="id" title="var">pr2</span> <span class="id" title="var">xs</span>)) (<span class="id" title="var">pr1</span> (<span class="id" title="var">pr2</span> <span class="id" title="var">xs'</span>)) (<span class="id" title="var">pr1</span> (<span class="id" title="var">pr2</span> <span class="id" title="var">xs''</span>))).<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> (<span class="id" title="var">setquotuniv3prop</span> <span class="id" title="var">R</span> (<span class="id" title="var">λ</span> <span class="id" title="var">x</span> <span class="id" title="var">x'</span> <span class="id" title="var">x''</span> : <span class="id" title="var">setquotinset</span> <span class="id" title="var">R</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@<span class="id" title="var">eqset</span> (<span class="id" title="var">setquotinset</span> <span class="id" title="var">R</span>) (<span class="id" title="var">add1</span> (<span class="id" title="var">add1</span> <span class="id" title="var">x</span> <span class="id" title="var">x'</span>) <span class="id" title="var">x''</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">add1</span> <span class="id" title="var">x</span> (<span class="id" title="var">add1</span> <span class="id" title="var">x'</span> <span class="id" title="var">x''</span>))) <span class="id" title="var">int</span>).<br/>
</div>
<span class="id" title="keyword">Opaque</span> <span class="id" title="var">commringfracassoc1</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">commringfraccomm1</span> (<span class="id" title="var">X</span> : <span class="id" title="var">commring</span>) (<span class="id" title="var">S</span> : @<span class="id" title="var">subabmonoid</span> (<span class="id" title="var">ringmultabmonoid</span> <span class="id" title="var">X</span>)) :<br/>
&nbsp;&nbsp;<span class="id" title="var">iscomm</span> (<span class="id" title="var">commringfracop1</span> <span class="id" title="var">X</span> <span class="id" title="var">S</span>).<br/>
<a class="proof" href="#">Show proof.</a><br/><div class="proof">
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">R</span> := <span class="id" title="var">eqrelcommringfrac</span> <span class="id" title="var">X</span> <span class="id" title="var">S</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">add1int</span> := <span class="id" title="var">commringfracop1int</span> <span class="id" title="var">X</span> <span class="id" title="var">S</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">add1</span> := <span class="id" title="var">commringfracop1</span> <span class="id" title="var">X</span> <span class="id" title="var">S</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">iscomm</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">setquotuniv2prop</span> <span class="id" title="var">R</span> (<span class="id" title="var">λ</span> <span class="id" title="var">x</span> <span class="id" title="var">x'</span> : <span class="id" title="var">setquotinset</span> <span class="id" title="var">R</span> ,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@<span class="id" title="var">eqset</span> (<span class="id" title="var">setquotinset</span> <span class="id" title="var">R</span>) (<span class="id" title="var">add1</span> <span class="id" title="var">x</span> <span class="id" title="var">x'</span>) (<span class="id" title="var">add1</span> <span class="id" title="var">x'</span> <span class="id" title="var">x</span>))).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">xs</span> <span class="id" title="var">xs'</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (@<span class="id" title="var">maponpaths</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> (<span class="id" title="var">setquotpr</span> <span class="id" title="var">R</span>) (<span class="id" title="var">add1int</span> <span class="id" title="var">xs</span> <span class="id" title="var">xs'</span>) (<span class="id" title="var">add1int</span> <span class="id" title="var">xs'</span> <span class="id" title="var">xs</span>)).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">add1int</span>. <span class="id" title="tactic">unfold</span> <span class="id" title="var">commringfracop1int</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">xs</span> <span class="id" title="keyword">as</span> [ <span class="id" title="var">x</span> <span class="id" title="var">s</span> ]. <span class="id" title="tactic">destruct</span> <span class="id" title="var">s</span> <span class="id" title="keyword">as</span> [ <span class="id" title="var">s</span> <span class="id" title="var">iss</span> ].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">xs'</span> <span class="id" title="keyword">as</span> [ <span class="id" title="var">x'</span> <span class="id" title="var">s'</span> ]. <span class="id" title="tactic">destruct</span> <span class="id" title="var">s'</span> <span class="id" title="keyword">as</span> [ <span class="id" title="var">s'</span> <span class="id" title="var">iss'</span> ].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">pathsdirprod</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">change</span> (<span class="id" title="var">paths</span> ((<span class="id" title="var">s'</span> * <span class="id" title="var">x</span>) + (<span class="id" title="var">s</span> * <span class="id" title="var">x'</span>)) ((<span class="id" title="var">s</span> * <span class="id" title="var">x'</span>) + (<span class="id" title="var">s'</span> * <span class="id" title="var">x</span>))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">ringcomm1</span> <span class="id" title="var">X</span> (<span class="id" title="var">s'</span> * <span class="id" title="var">x</span>) (<span class="id" title="var">s</span> * <span class="id" title="var">x'</span>)). <span class="id" title="tactic">apply</span> <span class="id" title="var">idpath</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> (<span class="id" title="var">invmaponpathsincl</span> <span class="id" title="var">_</span> (<span class="id" title="var">isinclpr1carrier</span> (<span class="id" title="var">pr1</span> <span class="id" title="var">S</span>))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">change</span> (<span class="id" title="var">paths</span> (<span class="id" title="var">s</span> * <span class="id" title="var">s'</span>) (<span class="id" title="var">s'</span> * <span class="id" title="var">s</span>)). <span class="id" title="tactic">apply</span> (<span class="id" title="var">ringcomm2</span> <span class="id" title="var">X</span>).<br/>
</div>
<span class="id" title="keyword">Opaque</span> <span class="id" title="var">commringfraccomm1</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">commringfracunel1</span> (<span class="id" title="var">X</span> : <span class="id" title="var">commring</span>) (<span class="id" title="var">S</span> : @<span class="id" title="var">subabmonoid</span> (<span class="id" title="var">ringmultabmonoid</span> <span class="id" title="var">X</span>)) :<br/>
&nbsp;&nbsp;<span class="id" title="var">setquot</span> (<span class="id" title="var">eqrelcommringfrac</span> <span class="id" title="var">X</span> <span class="id" title="var">S</span>) := <span class="id" title="var">setquotpr</span> (<span class="id" title="var">eqrelcommringfrac</span> <span class="id" title="var">X</span> <span class="id" title="var">S</span>) (<span class="id" title="var">commringfracunel1int</span> <span class="id" title="var">X</span> <span class="id" title="var">S</span>).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">commringfracunel2</span> (<span class="id" title="var">X</span> : <span class="id" title="var">commring</span>) (<span class="id" title="var">S</span> : @<span class="id" title="var">subabmonoid</span> (<span class="id" title="var">ringmultabmonoid</span> <span class="id" title="var">X</span>)) :<br/>
&nbsp;&nbsp;<span class="id" title="var">setquot</span> (<span class="id" title="var">eqrelcommringfrac</span> <span class="id" title="var">X</span> <span class="id" title="var">S</span>) := <span class="id" title="var">setquotpr</span> (<span class="id" title="var">eqrelcommringfrac</span> <span class="id" title="var">X</span> <span class="id" title="var">S</span>) (<span class="id" title="var">commringfracunel2int</span> <span class="id" title="var">X</span> <span class="id" title="var">S</span>).<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">commringfracinv1comp</span> (<span class="id" title="var">X</span> : <span class="id" title="var">commring</span>) (<span class="id" title="var">S</span> : @<span class="id" title="var">subabmonoid</span> (<span class="id" title="var">ringmultabmonoid</span> <span class="id" title="var">X</span>)) :<br/>
&nbsp;&nbsp;<span class="id" title="var">iscomprelrelfun</span> (<span class="id" title="var">eqrelcommringfrac</span> <span class="id" title="var">X</span> <span class="id" title="var">S</span>) (<span class="id" title="var">eqrelcommringfrac</span> <span class="id" title="var">X</span> <span class="id" title="var">S</span>) (<span class="id" title="var">commringfracinv1int</span> <span class="id" title="var">X</span> <span class="id" title="var">S</span>).<br/>
<a class="proof" href="#">Show proof.</a><br/><div class="proof">
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">assoc2</span> := <span class="id" title="var">ringassoc2</span> <span class="id" title="var">X</span>). <span class="id" title="tactic">intros</span> <span class="id" title="var">xs</span> <span class="id" title="var">xs'</span>. <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">ff</span> := @<span class="id" title="var">hinhfun</span>). <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">ff</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">ff</span>. <span class="id" title="tactic">clear</span> <span class="id" title="var">ff</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intro</span> <span class="id" title="var">tt0</span>. <span class="id" title="tactic">split</span> <span class="id" title="keyword">with</span> (<span class="id" title="var">pr1</span> <span class="id" title="var">tt0</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">x</span> := <span class="id" title="var">pr1</span> <span class="id" title="var">xs</span>). <span class="id" title="tactic">set</span> (<span class="id" title="var">s</span> := <span class="id" title="var">pr1</span> (<span class="id" title="var">pr2</span> <span class="id" title="var">xs</span>)).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">x'</span> := <span class="id" title="var">pr1</span> <span class="id" title="var">xs'</span>). <span class="id" title="tactic">set</span> (<span class="id" title="var">s'</span> := <span class="id" title="var">pr1</span> (<span class="id" title="var">pr2</span> <span class="id" title="var">xs'</span>)).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">a0</span> := <span class="id" title="var">pr1</span> (<span class="id" title="var">pr1</span> <span class="id" title="var">tt0</span>)).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">change</span> (<span class="id" title="var">paths</span> (-1 * <span class="id" title="var">x</span> * <span class="id" title="var">s'</span> * <span class="id" title="var">a0</span>) (-1 * <span class="id" title="var">x'</span> * <span class="id" title="var">s</span> * <span class="id" title="var">a0</span>)).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="var">assoc2</span> -1 <span class="id" title="var">x</span> <span class="id" title="var">s'</span>). <span class="id" title="tactic">rewrite</span> (<span class="id" title="var">assoc2</span> -1 <span class="id" title="var">x'</span> <span class="id" title="var">s</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="var">assoc2</span> -1 (<span class="id" title="var">x</span> * <span class="id" title="var">s'</span>) <span class="id" title="var">a0</span>). <span class="id" title="tactic">rewrite</span> (<span class="id" title="var">assoc2</span> -1 (<span class="id" title="var">x'</span> * <span class="id" title="var">s</span>) <span class="id" title="var">a0</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">maponpaths</span> (<span class="id" title="var">λ</span> <span class="id" title="var">x0</span> : <span class="id" title="var">X</span>, -1 * <span class="id" title="var">x0</span>) (<span class="id" title="var">pr2</span> <span class="id" title="var">tt0</span>)).<br/>
</div>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">commringfracinv1</span> (<span class="id" title="var">X</span> : <span class="id" title="var">commring</span>) (<span class="id" title="var">S</span> : @<span class="id" title="var">subabmonoid</span> (<span class="id" title="var">ringmultabmonoid</span> <span class="id" title="var">X</span>)) :<br/>
&nbsp;&nbsp;<span class="id" title="var">setquot</span> (<span class="id" title="var">eqrelcommringfrac</span> <span class="id" title="var">X</span> <span class="id" title="var">S</span>) → <span class="id" title="var">setquot</span> (<span class="id" title="var">eqrelcommringfrac</span> <span class="id" title="var">X</span> <span class="id" title="var">S</span>) :=<br/>
&nbsp;&nbsp;<span class="id" title="var">setquotfun</span> (<span class="id" title="var">eqrelcommringfrac</span> <span class="id" title="var">X</span> <span class="id" title="var">S</span>) (<span class="id" title="var">eqrelcommringfrac</span> <span class="id" title="var">X</span> <span class="id" title="var">S</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">commringfracinv1int</span> <span class="id" title="var">X</span> <span class="id" title="var">S</span>) (<span class="id" title="var">commringfracinv1comp</span> <span class="id" title="var">X</span> <span class="id" title="var">S</span>).<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">commringfracisinv1</span> (<span class="id" title="var">X</span> : <span class="id" title="var">commring</span>) (<span class="id" title="var">S</span> : @<span class="id" title="var">subabmonoid</span> (<span class="id" title="var">ringmultabmonoid</span> <span class="id" title="var">X</span>)) :<br/>
&nbsp;&nbsp;<span class="id" title="var">isinv</span> (<span class="id" title="var">commringfracop1</span> <span class="id" title="var">X</span> <span class="id" title="var">S</span>) (<span class="id" title="var">commringfracunel1</span> <span class="id" title="var">X</span> <span class="id" title="var">S</span>) (<span class="id" title="var">commringfracinv1</span> <span class="id" title="var">X</span> <span class="id" title="var">S</span>).<br/>
<a class="proof" href="#">Show proof.</a><br/><div class="proof">
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">isl</span> : <span class="id" title="var">islinv</span> (<span class="id" title="var">commringfracop1</span> <span class="id" title="var">X</span> <span class="id" title="var">S</span>) (<span class="id" title="var">commringfracunel1</span> <span class="id" title="var">X</span> <span class="id" title="var">S</span>) (<span class="id" title="var">commringfracinv1</span> <span class="id" title="var">X</span> <span class="id" title="var">S</span>)).<br/>
&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">R</span> := <span class="id" title="var">eqrelcommringfrac</span> <span class="id" title="var">X</span> <span class="id" title="var">S</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">add1int</span> := <span class="id" title="var">commringfracop1int</span> <span class="id" title="var">X</span> <span class="id" title="var">S</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">add1</span> := <span class="id" title="var">commringfracop1</span> <span class="id" title="var">X</span> <span class="id" title="var">S</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">inv1</span> := <span class="id" title="var">commringfracinv1</span> <span class="id" title="var">X</span> <span class="id" title="var">S</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">inv1int</span> := <span class="id" title="var">commringfracinv1int</span> <span class="id" title="var">X</span> <span class="id" title="var">S</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">qunel1int</span> := <span class="id" title="var">commringfracunel1int</span> <span class="id" title="var">X</span> <span class="id" title="var">S</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">qunel1</span> := <span class="id" title="var">commringfracunel1</span> <span class="id" title="var">X</span> <span class="id" title="var">S</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">assoc2</span> := <span class="id" title="var">ringassoc2</span> <span class="id" title="var">X</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">islinv</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">setquotunivprop</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">R</span> (<span class="id" title="var">λ</span> <span class="id" title="var">x</span> : <span class="id" title="var">setquotinset</span> <span class="id" title="var">R</span>, @<span class="id" title="var">eqset</span> (<span class="id" title="var">setquotinset</span> <span class="id" title="var">R</span>) (<span class="id" title="var">add1</span> (<span class="id" title="var">inv1</span> <span class="id" title="var">x</span>) <span class="id" title="var">x</span>) <span class="id" title="var">qunel1</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intro</span> <span class="id" title="var">xs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">iscompsetquotpr</span> <span class="id" title="var">R</span>  (<span class="id" title="var">add1int</span> (<span class="id" title="var">inv1int</span> <span class="id" title="var">xs</span>) <span class="id" title="var">xs</span>) <span class="id" title="var">qunel1int</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">hinhpr</span>. <span class="id" title="tactic">split</span> <span class="id" title="keyword">with</span> (<span class="id" title="var">unel</span> <span class="id" title="var">S</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">x</span> := <span class="id" title="var">pr1</span> <span class="id" title="var">xs</span>). <span class="id" title="tactic">set</span> (<span class="id" title="var">s</span> := <span class="id" title="var">pr1</span> (<span class="id" title="var">pr2</span> <span class="id" title="var">xs</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">change</span> (<span class="id" title="var">paths</span> ((<span class="id" title="var">s</span> * (-1 * <span class="id" title="var">x</span>) + <span class="id" title="var">s</span> * <span class="id" title="var">x</span>) * 1 * 1) (0 * (<span class="id" title="var">s</span> * <span class="id" title="var">s</span>) * 1)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">ringldistr</span> <span class="id" title="var">X</span> (-1 * <span class="id" title="var">x</span>) <span class="id" title="var">x</span> <span class="id" title="var">s</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="var">ringmultwithminus1</span> <span class="id" title="var">X</span> <span class="id" title="var">x</span>). <span class="id" title="tactic">rewrite</span> (<span class="id" title="var">ringlinvax1</span> <span class="id" title="var">X</span> <span class="id" title="var">x</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="var">ringmultx0</span> <span class="id" title="var">X</span> <span class="id" title="var">s</span>). <span class="id" title="tactic">rewrite</span> (<span class="id" title="var">ringmult0x</span> <span class="id" title="var">X</span> 1).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="var">ringmult0x</span> <span class="id" title="var">X</span> 1). <span class="id" title="tactic">rewrite</span> (<span class="id" title="var">ringmult0x</span> <span class="id" title="var">X</span> (<span class="id" title="var">s</span> * <span class="id" title="var">s</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">pathsinv0</span> (<span class="id" title="var">ringmult0x</span> <span class="id" title="var">X</span> 1)).<br/>
&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">dirprodpair</span> <span class="id" title="var">isl</span> (<span class="id" title="var">weqlinvrinv</span> (<span class="id" title="var">commringfracop1</span> <span class="id" title="var">X</span> <span class="id" title="var">S</span>) (<span class="id" title="var">commringfraccomm1</span> <span class="id" title="var">X</span> <span class="id" title="var">S</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">commringfracunel1</span> <span class="id" title="var">X</span> <span class="id" title="var">S</span>) (<span class="id" title="var">commringfracinv1</span> <span class="id" title="var">X</span> <span class="id" title="var">S</span>) <span class="id" title="var">isl</span>)).<br/>
</div>
<span class="id" title="keyword">Opaque</span> <span class="id" title="var">commringfracisinv1</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">commringfraclunit1</span> (<span class="id" title="var">X</span> : <span class="id" title="var">commring</span>) (<span class="id" title="var">S</span> : @<span class="id" title="var">subabmonoid</span> (<span class="id" title="var">ringmultabmonoid</span> <span class="id" title="var">X</span>)) :<br/>
&nbsp;&nbsp;<span class="id" title="var">islunit</span> (<span class="id" title="var">commringfracop1</span> <span class="id" title="var">X</span> <span class="id" title="var">S</span>) (<span class="id" title="var">commringfracunel1</span> <span class="id" title="var">X</span> <span class="id" title="var">S</span>).<br/>
<a class="proof" href="#">Show proof.</a><br/><div class="proof">
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">R</span> := <span class="id" title="var">eqrelcommringfrac</span> <span class="id" title="var">X</span> <span class="id" title="var">S</span>). <span class="id" title="tactic">set</span> (<span class="id" title="var">add1int</span> := <span class="id" title="var">commringfracop1int</span> <span class="id" title="var">X</span> <span class="id" title="var">S</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">add1</span> := <span class="id" title="var">commringfracop1</span> <span class="id" title="var">X</span> <span class="id" title="var">S</span>). <span class="id" title="tactic">set</span> (<span class="id" title="var">un1</span> := <span class="id" title="var">commringfracunel1</span> <span class="id" title="var">X</span> <span class="id" title="var">S</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">islunit</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">setquotunivprop</span> <span class="id" title="var">R</span> (<span class="id" title="var">λ</span> <span class="id" title="var">x</span> : <span class="id" title="var">_</span>, @<span class="id" title="var">eqset</span> (<span class="id" title="var">setquotinset</span> <span class="id" title="var">R</span>) (<span class="id" title="var">add1</span> <span class="id" title="var">un1</span> <span class="id" title="var">x</span>) <span class="id" title="var">x</span>)).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intro</span> <span class="id" title="var">xs</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">e0</span> : <span class="id" title="var">paths</span> (<span class="id" title="var">add1int</span> (<span class="id" title="var">commringfracunel1int</span> <span class="id" title="var">X</span> <span class="id" title="var">S</span>) <span class="id" title="var">xs</span>) <span class="id" title="var">xs</span>).<br/>
&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">add1int</span>. <span class="id" title="tactic">unfold</span> <span class="id" title="var">commringfracop1int</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">xs</span> <span class="id" title="keyword">as</span> [ <span class="id" title="var">x</span> <span class="id" title="var">s</span> ]. <span class="id" title="tactic">destruct</span> <span class="id" title="var">s</span> <span class="id" title="keyword">as</span> [ <span class="id" title="var">s</span> <span class="id" title="var">iss</span> ].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">pathsdirprod</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">change</span> (<span class="id" title="var">paths</span> ((<span class="id" title="var">s</span> * 0) + (1 * <span class="id" title="var">x</span>)) <span class="id" title="var">x</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (@<span class="id" title="var">ringmultx0</span> <span class="id" title="var">X</span> <span class="id" title="var">s</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="var">ringlunax2</span> <span class="id" title="var">X</span> <span class="id" title="var">x</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="var">ringlunax1</span> <span class="id" title="var">X</span> <span class="id" title="var">x</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">idpath</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> (<span class="id" title="var">invmaponpathsincl</span> <span class="id" title="var">_</span> (<span class="id" title="var">isinclpr1carrier</span> (<span class="id" title="var">pr1</span> <span class="id" title="var">S</span>))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">change</span> (<span class="id" title="var">paths</span> (1 * <span class="id" title="var">s</span>) <span class="id" title="var">s</span>). <span class="id" title="tactic">apply</span> (<span class="id" title="var">ringlunax2</span> <span class="id" title="var">X</span> <span class="id" title="var">s</span>).<br/>
&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">maponpaths</span> (<span class="id" title="var">setquotpr</span> <span class="id" title="var">R</span>) <span class="id" title="var">e0</span>).<br/>
</div>
<span class="id" title="keyword">Opaque</span> <span class="id" title="var">commringfraclunit1</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">commringfracrunit1</span> (<span class="id" title="var">X</span> : <span class="id" title="var">commring</span>) (<span class="id" title="var">S</span> : @<span class="id" title="var">subabmonoid</span> (<span class="id" title="var">ringmultabmonoid</span> <span class="id" title="var">X</span>)) :<br/>
&nbsp;&nbsp;<span class="id" title="var">isrunit</span> (<span class="id" title="var">commringfracop1</span> <span class="id" title="var">X</span> <span class="id" title="var">S</span>) (<span class="id" title="var">commringfracunel1</span> <span class="id" title="var">X</span> <span class="id" title="var">S</span>).<br/>
<a class="proof" href="#">Show proof.</a><br/><div class="proof">
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">weqlunitrunit</span> (<span class="id" title="var">commringfracop1</span> <span class="id" title="var">X</span> <span class="id" title="var">S</span>) (<span class="id" title="var">commringfraccomm1</span> <span class="id" title="var">X</span> <span class="id" title="var">S</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">commringfracunel1</span> <span class="id" title="var">X</span> <span class="id" title="var">S</span>) (<span class="id" title="var">commringfraclunit1</span> <span class="id" title="var">X</span> <span class="id" title="var">S</span>)).<br/>
</div>
<span class="id" title="keyword">Opaque</span> <span class="id" title="var">commringfracrunit1</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">commringfracunit1</span> (<span class="id" title="var">X</span> : <span class="id" title="var">commring</span>) (<span class="id" title="var">S</span> : @<span class="id" title="var">subabmonoid</span> (<span class="id" title="var">ringmultabmonoid</span> <span class="id" title="var">X</span>)) :<br/>
&nbsp;&nbsp;<span class="id" title="var">ismonoidop</span> (<span class="id" title="var">commringfracop1</span> <span class="id" title="var">X</span> <span class="id" title="var">S</span>) :=<br/>
&nbsp;&nbsp;<span class="id" title="var">tpair</span> <span class="id" title="var">_</span> (<span class="id" title="var">commringfracassoc1</span> <span class="id" title="var">X</span> <span class="id" title="var">S</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">tpair</span> <span class="id" title="var">_</span> (<span class="id" title="var">commringfracunel1</span> <span class="id" title="var">X</span> <span class="id" title="var">S</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">dirprodpair</span> (<span class="id" title="var">commringfraclunit1</span> <span class="id" title="var">X</span> <span class="id" title="var">S</span>) (<span class="id" title="var">commringfracrunit1</span> <span class="id" title="var">X</span> <span class="id" title="var">S</span>))).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">commringfracop2</span> (<span class="id" title="var">X</span> : <span class="id" title="var">commring</span>) (<span class="id" title="var">S</span> : @<span class="id" title="var">subabmonoid</span> (<span class="id" title="var">ringmultabmonoid</span> <span class="id" title="var">X</span>)) :<br/>
&nbsp;&nbsp;<span class="id" title="var">binop</span> (<span class="id" title="var">setquotinset</span> (<span class="id" title="var">eqrelcommringfrac</span> <span class="id" title="var">X</span> <span class="id" title="var">S</span>)) := <span class="id" title="var">abmonoidfracop</span> (<span class="id" title="var">ringmultabmonoid</span> <span class="id" title="var">X</span>) <span class="id" title="var">S</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">commringfraccomm2</span> (<span class="id" title="var">X</span> : <span class="id" title="var">commring</span>) (<span class="id" title="var">S</span> : @<span class="id" title="var">subabmonoid</span> (<span class="id" title="var">ringmultabmonoid</span> <span class="id" title="var">X</span>)) :<br/>
&nbsp;&nbsp;<span class="id" title="var">iscomm</span> (<span class="id" title="var">commringfracop2</span> <span class="id" title="var">X</span> <span class="id" title="var">S</span>).<br/>
<a class="proof" href="#">Show proof.</a><br/><div class="proof"> <span class="id" title="tactic">intros</span>. <span class="id" title="tactic">apply</span> (<span class="id" title="var">commax</span> (<span class="id" title="var">abmonoidfrac</span> (<span class="id" title="var">ringmultabmonoid</span> <span class="id" title="var">X</span>) <span class="id" title="var">S</span>)). </div>
<span class="id" title="keyword">Opaque</span> <span class="id" title="var">commringfraccomm2</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">commringfracldistr</span> (<span class="id" title="var">X</span> : <span class="id" title="var">commring</span>) (<span class="id" title="var">S</span> : @<span class="id" title="var">subabmonoid</span> (<span class="id" title="var">ringmultabmonoid</span> <span class="id" title="var">X</span>)) :<br/>
&nbsp;&nbsp;<span class="id" title="var">isldistr</span> (<span class="id" title="var">commringfracop1</span> <span class="id" title="var">X</span> <span class="id" title="var">S</span>) (<span class="id" title="var">commringfracop2</span> <span class="id" title="var">X</span> <span class="id" title="var">S</span>).<br/>
<a class="proof" href="#">Show proof.</a><br/><div class="proof">
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">R</span> := <span class="id" title="var">eqrelcommringfrac</span> <span class="id" title="var">X</span> <span class="id" title="var">S</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">mult1int</span> := <span class="id" title="var">commringfracop2int</span> <span class="id" title="var">X</span> <span class="id" title="var">S</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">mult1</span> := <span class="id" title="var">commringfracop2</span> <span class="id" title="var">X</span> <span class="id" title="var">S</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">add1int</span> := <span class="id" title="var">commringfracop1int</span> <span class="id" title="var">X</span> <span class="id" title="var">S</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">add1</span> := <span class="id" title="var">commringfracop1</span> <span class="id" title="var">X</span> <span class="id" title="var">S</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">isldistr</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">setquotuniv3prop</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">R</span> (<span class="id" title="var">λ</span> <span class="id" title="var">x</span> <span class="id" title="var">x'</span> <span class="id" title="var">x''</span> : <span class="id" title="var">setquotinset</span> <span class="id" title="var">R</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@<span class="id" title="var">eqset</span> (<span class="id" title="var">setquotinset</span> <span class="id" title="var">R</span>) (<span class="id" title="var">mult1</span> <span class="id" title="var">x''</span> (<span class="id" title="var">add1</span> <span class="id" title="var">x</span> <span class="id" title="var">x'</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">add1</span> (<span class="id" title="var">mult1</span> <span class="id" title="var">x''</span> <span class="id" title="var">x</span>) (<span class="id" title="var">mult1</span>  <span class="id" title="var">x''</span> <span class="id" title="var">x'</span>)))).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">xs</span> <span class="id" title="var">xs'</span> <span class="id" title="var">xs''</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">iscompsetquotpr</span> <span class="id" title="var">R</span> (<span class="id" title="var">mult1int</span> <span class="id" title="var">xs''</span> (<span class="id" title="var">add1int</span> <span class="id" title="var">xs</span> <span class="id" title="var">xs'</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">add1int</span> (<span class="id" title="var">mult1int</span> <span class="id" title="var">xs''</span> <span class="id" title="var">xs</span>) (<span class="id" title="var">mult1int</span> <span class="id" title="var">xs''</span> <span class="id" title="var">xs'</span>))).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">xs</span> <span class="id" title="keyword">as</span> [ <span class="id" title="var">x</span> <span class="id" title="var">s</span> ]. <span class="id" title="tactic">destruct</span> <span class="id" title="var">xs'</span> <span class="id" title="keyword">as</span> [ <span class="id" title="var">x'</span> <span class="id" title="var">s'</span> ].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">xs''</span> <span class="id" title="keyword">as</span> [ <span class="id" title="var">x''</span> <span class="id" title="var">s''</span> ]. <span class="id" title="tactic">destruct</span> <span class="id" title="var">s''</span> <span class="id" title="keyword">as</span> [ <span class="id" title="var">s''</span> <span class="id" title="var">iss''</span> ].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">hinhpr</span>. <span class="id" title="tactic">split</span> <span class="id" title="keyword">with</span> (<span class="id" title="var">unel</span> <span class="id" title="var">S</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">s</span> <span class="id" title="keyword">as</span> [ <span class="id" title="var">s</span> <span class="id" title="var">iss</span> ]. <span class="id" title="tactic">destruct</span> <span class="id" title="var">s'</span> <span class="id" title="keyword">as</span> [ <span class="id" title="var">s'</span> <span class="id" title="var">iss'</span> ]. <span class="id" title="tactic">simpl</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="tactic">change</span> (<span class="id" title="var">paths</span> (((<span class="id" title="var">x''</span> * ((<span class="id" title="var">s'</span> * <span class="id" title="var">x</span>) + (<span class="id" title="var">s</span> * <span class="id" title="var">x'</span>))) * ((<span class="id" title="var">s''</span> * <span class="id" title="var">s</span>) * (<span class="id" title="var">s''</span> * <span class="id" title="var">s'</span>))) * 1)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(((((<span class="id" title="var">s''</span> * <span class="id" title="var">s'</span>) * (<span class="id" title="var">x''</span> * <span class="id" title="var">x</span>)) + ((<span class="id" title="var">s''</span> * <span class="id" title="var">s</span>) * (<span class="id" title="var">x''</span> * <span class="id" title="var">x'</span>))) *<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">s''</span> * (<span class="id" title="var">s</span> * <span class="id" title="var">s'</span>))) * 1)).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="var">ringldistr</span> <span class="id" title="var">X</span> (<span class="id" title="var">s'</span> * <span class="id" title="var">x</span>) (<span class="id" title="var">s</span> * <span class="id" title="var">x'</span>) <span class="id" title="var">x''</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="var">ringrdistr</span> <span class="id" title="var">X</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> ((<span class="id" title="var">s''</span> * <span class="id" title="var">s</span>) * (<span class="id" title="var">s''</span> * <span class="id" title="var">s'</span>))).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="var">ringrdistr</span> <span class="id" title="var">X</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> (<span class="id" title="var">s''</span> * (<span class="id" title="var">s</span> * <span class="id" title="var">s'</span>))).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">assoc</span> := <span class="id" title="var">ringassoc2</span> <span class="id" title="var">X</span>). <span class="id" title="tactic">set</span> (<span class="id" title="var">comm</span> := <span class="id" title="var">ringcomm2</span> <span class="id" title="var">X</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">rer</span> := @<span class="id" title="var">abmonoidoprer</span> <span class="id" title="var">X</span> (@<span class="id" title="var">op2</span> <span class="id" title="var">X</span>) (<span class="id" title="var">commringop2axs</span> <span class="id" title="var">X</span>)).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">e1</span> : <span class="id" title="var">paths</span> ((<span class="id" title="var">x''</span> * (<span class="id" title="var">s'</span> * <span class="id" title="var">x</span>)) * ((<span class="id" title="var">s''</span> * <span class="id" title="var">s</span>) * (<span class="id" title="var">s''</span> * <span class="id" title="var">s'</span>)))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(((<span class="id" title="var">s''</span> * <span class="id" title="var">s'</span>) * (<span class="id" title="var">x''</span> * <span class="id" title="var">x</span>)) * (<span class="id" title="var">s''</span> * (<span class="id" title="var">s</span> * <span class="id" title="var">s'</span>)))).<br/>
&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">assoc</span> <span class="id" title="var">x''</span> <span class="id" title="var">s'</span> <span class="id" title="var">x</span>). <span class="id" title="tactic">destruct</span> (<span class="id" title="var">comm</span> <span class="id" title="var">s'</span> <span class="id" title="var">x''</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="var">assoc</span> <span class="id" title="var">s'</span> <span class="id" title="var">x''</span> <span class="id" title="var">x</span>). <span class="id" title="tactic">destruct</span> (<span class="id" title="var">comm</span> (<span class="id" title="var">x''</span> * <span class="id" title="var">x</span>) <span class="id" title="var">s'</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">comm</span> (<span class="id" title="var">x''</span> * <span class="id" title="var">x</span>) (<span class="id" title="var">s''</span> * <span class="id" title="var">s'</span>)). <span class="id" title="tactic">destruct</span> (<span class="id" title="var">assoc</span> <span class="id" title="var">s''</span> <span class="id" title="var">s</span> <span class="id" title="var">s'</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">comm</span> (<span class="id" title="var">s''</span> * <span class="id" title="var">s'</span>) (<span class="id" title="var">s''</span> * <span class="id" title="var">s</span>)). <span class="id" title="tactic">destruct</span> (<span class="id" title="var">comm</span> <span class="id" title="var">s'</span> (<span class="id" title="var">s''</span> * <span class="id" title="var">s</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">rer</span> (<span class="id" title="var">x''</span> * <span class="id" title="var">x</span>) <span class="id" title="var">s'</span> (<span class="id" title="var">s''</span> * <span class="id" title="var">s'</span>) (<span class="id" title="var">s''</span> * <span class="id" title="var">s</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">idpath</span>.<br/>
&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">e2</span> : <span class="id" title="var">paths</span> ((<span class="id" title="var">x''</span> * (<span class="id" title="var">s</span> * <span class="id" title="var">x'</span>)) * ((<span class="id" title="var">s''</span> * <span class="id" title="var">s</span>) * (<span class="id" title="var">s''</span> * <span class="id" title="var">s'</span>)))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(((<span class="id" title="var">s''</span> * <span class="id" title="var">s</span>) * (<span class="id" title="var">x''</span> * <span class="id" title="var">x'</span>)) * (<span class="id" title="var">s''</span> * (<span class="id" title="var">s</span> * <span class="id" title="var">s'</span>)))).<br/>
&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">assoc</span> <span class="id" title="var">x''</span> <span class="id" title="var">s</span> <span class="id" title="var">x'</span>). <span class="id" title="tactic">destruct</span> (<span class="id" title="var">comm</span> <span class="id" title="var">s</span> <span class="id" title="var">x''</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="var">assoc</span> <span class="id" title="var">s</span> <span class="id" title="var">x''</span> <span class="id" title="var">x'</span>). <span class="id" title="tactic">destruct</span> (<span class="id" title="var">comm</span> (<span class="id" title="var">x''</span> * <span class="id" title="var">x'</span>) <span class="id" title="var">s</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">comm</span> (<span class="id" title="var">x''</span> * <span class="id" title="var">x'</span>) (<span class="id" title="var">s''</span> * <span class="id" title="var">s</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">rer</span> (<span class="id" title="var">x''</span> * <span class="id" title="var">x'</span>) (<span class="id" title="var">s''</span> * <span class="id" title="var">s</span>) <span class="id" title="var">s</span> (<span class="id" title="var">s''</span> * <span class="id" title="var">s'</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">assoc</span> <span class="id" title="var">s</span> <span class="id" title="var">s''</span> <span class="id" title="var">s'</span>). <span class="id" title="tactic">destruct</span> (<span class="id" title="var">assoc</span> <span class="id" title="var">s''</span> <span class="id" title="var">s</span> <span class="id" title="var">s'</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">comm</span> <span class="id" title="var">s</span> <span class="id" title="var">s''</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">idpath</span>.<br/>
&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">e1</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">e2</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">idpath</span>.<br/>
</div>
<span class="id" title="keyword">Opaque</span> <span class="id" title="var">commringfracldistr</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">commringfracrdistr</span> (<span class="id" title="var">X</span> : <span class="id" title="var">commring</span>) (<span class="id" title="var">S</span> : @<span class="id" title="var">subabmonoid</span> (<span class="id" title="var">ringmultabmonoid</span> <span class="id" title="var">X</span>)) :<br/>
&nbsp;&nbsp;<span class="id" title="var">isrdistr</span> (<span class="id" title="var">commringfracop1</span> <span class="id" title="var">X</span> <span class="id" title="var">S</span>) (<span class="id" title="var">commringfracop2</span> <span class="id" title="var">X</span> <span class="id" title="var">S</span>).<br/>
<a class="proof" href="#">Show proof.</a><br/><div class="proof">
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">weqldistrrdistr</span> (<span class="id" title="var">commringfracop1</span> <span class="id" title="var">X</span> <span class="id" title="var">S</span>) (<span class="id" title="var">commringfracop2</span> <span class="id" title="var">X</span> <span class="id" title="var">S</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">commringfraccomm2</span> <span class="id" title="var">X</span> <span class="id" title="var">S</span>) (<span class="id" title="var">commringfracldistr</span> <span class="id" title="var">X</span> <span class="id" title="var">S</span>)).<br/>
</div>

<br/>
</div>

<div class="doc">
Notes :

<div class="paragraph"> </div>

1. Construction of the addition on the multiplicative monoid of fractions
   requires only commutativity and associativity of multiplication and (right)
   distributivity. No properties of the addition are used.

<div class="paragraph"> </div>

2. The proof of associtivity for the addition on the multiplicative monoid of
   fractions requires in the associativity of the original addition but no other
   properties.

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">commringfrac</span> (<span class="id" title="var">X</span> : <span class="id" title="var">commring</span>) (<span class="id" title="var">S</span> : @<span class="id" title="var">subabmonoid</span> (<span class="id" title="var">ringmultabmonoid</span> <span class="id" title="var">X</span>)) : <span class="id" title="var">commring</span>.<br/>
<a class="proof" href="#">Show proof.</a><br/><div class="proof">
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">R</span> := <span class="id" title="var">eqrelcommringfrac</span>  <span class="id" title="var">X</span> <span class="id" title="var">S</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">mult1</span> := <span class="id" title="var">commringfracop2</span> <span class="id" title="var">X</span> <span class="id" title="var">S</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">add1</span> := <span class="id" title="var">commringfracop1</span> <span class="id" title="var">X</span> <span class="id" title="var">S</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">uset</span> := <span class="id" title="var">setquotinset</span> <span class="id" title="var">R</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">commringconstr</span> <span class="id" title="var">add1</span> <span class="id" title="var">mult1</span>).<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">split</span> <span class="id" title="keyword">with</span> (<span class="id" title="var">commringfracunit1</span> <span class="id" title="var">X</span> <span class="id" title="var">S</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span> <span class="id" title="keyword">with</span> (<span class="id" title="var">commringfracinv1</span> <span class="id" title="var">X</span> <span class="id" title="var">S</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">commringfracisinv1</span> <span class="id" title="var">X</span> <span class="id" title="var">S</span>).<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> (<span class="id" title="var">commringfraccomm1</span> <span class="id" title="var">X</span> <span class="id" title="var">S</span>).<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> (<span class="id" title="var">pr2</span> (<span class="id" title="var">abmonoidfrac</span> (<span class="id" title="var">ringmultabmonoid</span> <span class="id" title="var">X</span>) <span class="id" title="var">S</span>)).<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> (<span class="id" title="var">commringfraccomm2</span> <span class="id" title="var">X</span> <span class="id" title="var">S</span>).<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> (<span class="id" title="var">dirprodpair</span> (<span class="id" title="var">commringfracldistr</span> <span class="id" title="var">X</span> <span class="id" title="var">S</span>) (<span class="id" title="var">commringfracrdistr</span> <span class="id" title="var">X</span> <span class="id" title="var">S</span>)).<br/>
</div>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">prcommringfrac</span> (<span class="id" title="var">X</span> : <span class="id" title="var">commring</span>) (<span class="id" title="var">S</span> : @<span class="id" title="var">subabmonoid</span> (<span class="id" title="var">ringmultabmonoid</span> <span class="id" title="var">X</span>)) :<br/>
&nbsp;&nbsp;<span class="id" title="var">X</span> -&gt; <span class="id" title="var">S</span> -&gt; <span class="id" title="var">commringfrac</span> <span class="id" title="var">X</span> <span class="id" title="var">S</span> := <span class="id" title="var">λ</span> <span class="id" title="var">x</span> <span class="id" title="var">s</span>, <span class="id" title="var">setquotpr</span> <span class="id" title="var">_</span> (<span class="id" title="var">dirprodpair</span> <span class="id" title="var">x</span> <span class="id" title="var">s</span>).<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">invertibilityincommringfrac</span> (<span class="id" title="var">X</span> : <span class="id" title="var">commring</span>) (<span class="id" title="var">S</span> : @<span class="id" title="var">subabmonoid</span> (<span class="id" title="var">ringmultabmonoid</span> <span class="id" title="var">X</span>)) :<br/>
&nbsp;&nbsp;∏ <span class="id" title="var">a</span> <span class="id" title="var">a'</span> : <span class="id" title="var">S</span>, <span class="id" title="var">isinvertible</span> (@<span class="id" title="var">op2</span> (<span class="id" title="var">commringfrac</span> <span class="id" title="var">X</span> <span class="id" title="var">S</span>)) (<span class="id" title="var">prcommringfrac</span> <span class="id" title="var">X</span> <span class="id" title="var">S</span> (<span class="id" title="var">pr1</span> <span class="id" title="var">a</span>) <span class="id" title="var">a'</span>).<br/>
<a class="proof" href="#">Show proof.</a><br/><div class="proof">
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">invertibilityinabmonoidfrac</span> (<span class="id" title="var">ringmultabmonoid</span> <span class="id" title="var">X</span>) <span class="id" title="var">S</span>).<br/>
</div>

<br/>
</div>

<div class="doc">
<a name="lab524"></a><h4 class="section">Canonical homomorphism to the ring of fractions</h4>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">tocommringfrac</span> (<span class="id" title="var">X</span> : <span class="id" title="var">commring</span>) (<span class="id" title="var">S</span> : @<span class="id" title="var">subabmonoid</span> (<span class="id" title="var">ringmultabmonoid</span> <span class="id" title="var">X</span>)) (<span class="id" title="var">x</span> : <span class="id" title="var">X</span>) :<br/>
&nbsp;&nbsp;<span class="id" title="var">commringfrac</span> <span class="id" title="var">X</span> <span class="id" title="var">S</span> := <span class="id" title="var">setquotpr</span> <span class="id" title="var">_</span> (<span class="id" title="var">dirprodpair</span> <span class="id" title="var">x</span> (<span class="id" title="var">unel</span> <span class="id" title="var">S</span>)).<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">isbinop1funtocommringfrac</span> (<span class="id" title="var">X</span> : <span class="id" title="var">commring</span>) (<span class="id" title="var">S</span> : @<span class="id" title="var">subabmonoid</span> (<span class="id" title="var">ringmultabmonoid</span> <span class="id" title="var">X</span>)) :<br/>
&nbsp;&nbsp;@<span class="id" title="var">isbinopfun</span> <span class="id" title="var">X</span> (<span class="id" title="var">commringfrac</span> <span class="id" title="var">X</span> <span class="id" title="var">S</span>) (<span class="id" title="var">tocommringfrac</span> <span class="id" title="var">X</span> <span class="id" title="var">S</span>).<br/>
<a class="proof" href="#">Show proof.</a><br/><div class="proof">
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">unfold</span> <span class="id" title="var">isbinopfun</span>. <span class="id" title="tactic">intros</span> <span class="id" title="var">x</span> <span class="id" title="var">x'</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">change</span> (<span class="id" title="var">paths</span> (<span class="id" title="var">setquotpr</span> <span class="id" title="var">_</span> (<span class="id" title="var">dirprodpair</span> (<span class="id" title="var">x</span> + <span class="id" title="var">x'</span>) (<span class="id" title="var">unel</span> <span class="id" title="var">S</span>)))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">setquotpr</span> (<span class="id" title="var">eqrelcommringfrac</span> <span class="id" title="var">X</span> <span class="id" title="var">S</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">commringfracop1int</span> <span class="id" title="var">X</span> <span class="id" title="var">S</span> (<span class="id" title="var">dirprodpair</span> <span class="id" title="var">x</span> (<span class="id" title="var">unel</span> <span class="id" title="var">S</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">dirprodpair</span> <span class="id" title="var">x'</span> (<span class="id" title="var">unel</span> <span class="id" title="var">S</span>))))).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">maponpaths</span> (<span class="id" title="var">setquotpr</span> <span class="id" title="var">_</span>)). <span class="id" title="tactic">unfold</span> <span class="id" title="var">commringfracop1int</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">pathsdirprod</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> (<span class="id" title="var">ringlunax2</span> <span class="id" title="var">X</span> <span class="id" title="var">_</span>). <span class="id" title="tactic">rewrite</span> (<span class="id" title="var">ringlunax2</span> <span class="id" title="var">X</span> <span class="id" title="var">_</span>). <span class="id" title="tactic">apply</span> <span class="id" title="var">idpath</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">change</span> (<span class="id" title="var">paths</span> (<span class="id" title="var">unel</span> <span class="id" title="var">S</span>) (<span class="id" title="var">op</span> (<span class="id" title="var">unel</span> <span class="id" title="var">S</span>) (<span class="id" title="var">unel</span> <span class="id" title="var">S</span>))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">pathsinv0</span> (<span class="id" title="var">runax</span> <span class="id" title="var">S</span> <span class="id" title="var">_</span>)).<br/>
</div>
<span class="id" title="keyword">Opaque</span> <span class="id" title="var">isbinop1funtocommringfrac</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">isunital1funtocommringfrac</span> (<span class="id" title="var">X</span> : <span class="id" title="var">commring</span>) (<span class="id" title="var">S</span> : @<span class="id" title="var">subabmonoid</span> (<span class="id" title="var">ringmultabmonoid</span> <span class="id" title="var">X</span>)) :<br/>
&nbsp;&nbsp;(<span class="id" title="var">tocommringfrac</span> <span class="id" title="var">X</span> <span class="id" title="var">S</span> 0) = 0.<br/>
<a class="proof" href="#">Show proof.</a><br/><div class="proof"> <span class="id" title="tactic">intros</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">idpath</span>. </div>
<span class="id" title="keyword">Opaque</span> <span class="id" title="var">isunital1funtocommringfrac</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">isaddmonoidfuntocommringfrac</span> (<span class="id" title="var">X</span> : <span class="id" title="var">commring</span>) (<span class="id" title="var">S</span> : @<span class="id" title="var">subabmonoid</span> (<span class="id" title="var">ringmultabmonoid</span> <span class="id" title="var">X</span>)) :<br/>
&nbsp;&nbsp;@<span class="id" title="var">ismonoidfun</span> <span class="id" title="var">X</span> (<span class="id" title="var">commringfrac</span> <span class="id" title="var">X</span> <span class="id" title="var">S</span>) (<span class="id" title="var">tocommringfrac</span> <span class="id" title="var">X</span> <span class="id" title="var">S</span>) :=<br/>
&nbsp;&nbsp;<span class="id" title="var">dirprodpair</span> (<span class="id" title="var">isbinop1funtocommringfrac</span> <span class="id" title="var">X</span> <span class="id" title="var">S</span>) (<span class="id" title="var">isunital1funtocommringfrac</span> <span class="id" title="var">X</span> <span class="id" title="var">S</span>).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">tocommringfracandminus0</span> (<span class="id" title="var">X</span> : <span class="id" title="var">commring</span>) (<span class="id" title="var">S</span> : @<span class="id" title="var">subabmonoid</span> (<span class="id" title="var">ringmultabmonoid</span> <span class="id" title="var">X</span>)) (<span class="id" title="var">x</span> : <span class="id" title="var">X</span>) :<br/>
&nbsp;&nbsp;<span class="id" title="var">paths</span> (<span class="id" title="var">tocommringfrac</span> <span class="id" title="var">X</span> <span class="id" title="var">S</span> (- <span class="id" title="var">x</span>)) (- <span class="id" title="var">tocommringfrac</span> <span class="id" title="var">X</span> <span class="id" title="var">S</span> <span class="id" title="var">x</span>) :=<br/>
&nbsp;&nbsp;<span class="id" title="var">grinvandmonoidfun</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> (<span class="id" title="var">isaddmonoidfuntocommringfrac</span> <span class="id" title="var">X</span> <span class="id" title="var">S</span>) <span class="id" title="var">x</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">tocommringfracandminus</span> (<span class="id" title="var">X</span> : <span class="id" title="var">commring</span>) (<span class="id" title="var">S</span> : @<span class="id" title="var">subabmonoid</span> (<span class="id" title="var">ringmultabmonoid</span> <span class="id" title="var">X</span>)) (<span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">X</span>) :<br/>
&nbsp;&nbsp;<span class="id" title="var">paths</span> (<span class="id" title="var">tocommringfrac</span> <span class="id" title="var">X</span> <span class="id" title="var">S</span> (<span class="id" title="var">x</span> - <span class="id" title="var">y</span>)) (<span class="id" title="var">tocommringfrac</span> <span class="id" title="var">X</span> <span class="id" title="var">S</span> <span class="id" title="var">x</span> - <span class="id" title="var">tocommringfrac</span> <span class="id" title="var">X</span> <span class="id" title="var">S</span> <span class="id" title="var">y</span>).<br/>
<a class="proof" href="#">Show proof.</a><br/><div class="proof">
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> ((<span class="id" title="var">isbinop1funtocommringfrac</span> <span class="id" title="var">X</span> <span class="id" title="var">S</span> <span class="id" title="var">x</span> (- <span class="id" title="var">y</span>)) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">paths</span> (<span class="id" title="var">tocommringfrac</span> <span class="id" title="var">X</span> <span class="id" title="var">S</span> (<span class="id" title="var">x</span> - <span class="id" title="var">y</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;((<span class="id" title="var">tocommringfrac</span> <span class="id" title="var">X</span> <span class="id" title="var">S</span> <span class="id" title="var">x</span> + <span class="id" title="var">tocommringfrac</span> <span class="id" title="var">X</span> <span class="id" title="var">S</span> (- <span class="id" title="var">y</span>)))).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="var">tocommringfracandminus0</span> <span class="id" title="var">X</span> <span class="id" title="var">S</span> <span class="id" title="var">y</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">idpath</span>.<br/>
</div>
<span class="id" title="keyword">Opaque</span> <span class="id" title="var">tocommringfracandminus</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">isbinop2funtocommringfrac</span> (<span class="id" title="var">X</span> : <span class="id" title="var">commring</span>) (<span class="id" title="var">S</span> : @<span class="id" title="var">subabmonoid</span> (<span class="id" title="var">ringmultabmonoid</span> <span class="id" title="var">X</span>)) :<br/>
&nbsp;&nbsp;@<span class="id" title="var">isbinopfun</span> (<span class="id" title="var">ringmultmonoid</span> <span class="id" title="var">X</span>) (<span class="id" title="var">ringmultmonoid</span> (<span class="id" title="var">commringfrac</span> <span class="id" title="var">X</span> <span class="id" title="var">S</span>)) (<span class="id" title="var">tocommringfrac</span> <span class="id" title="var">X</span> <span class="id" title="var">S</span>) :=<br/>
&nbsp;&nbsp;<span class="id" title="var">isbinopfuntoabmonoidfrac</span> (<span class="id" title="var">ringmultabmonoid</span> <span class="id" title="var">X</span>) <span class="id" title="var">S</span>.<br/>
<span class="id" title="keyword">Opaque</span> <span class="id" title="var">isbinop2funtocommringfrac</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">isunital2funtocommringfrac</span> (<span class="id" title="var">X</span> : <span class="id" title="var">commring</span>) (<span class="id" title="var">S</span> : @<span class="id" title="var">subabmonoid</span> (<span class="id" title="var">ringmultabmonoid</span> <span class="id" title="var">X</span>)) :<br/>
&nbsp;&nbsp;(<span class="id" title="var">tocommringfrac</span> <span class="id" title="var">X</span> <span class="id" title="var">S</span> 1) = 1.<br/>
<a class="proof" href="#">Show proof.</a><br/><div class="proof"> <span class="id" title="tactic">intros</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">idpath</span>. </div>
<span class="id" title="keyword">Opaque</span> <span class="id" title="var">isunital2funtocommringfrac</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">ismultmonoidfuntocommringfrac</span> (<span class="id" title="var">X</span> : <span class="id" title="var">commring</span>) (<span class="id" title="var">S</span> : @<span class="id" title="var">subabmonoid</span> (<span class="id" title="var">ringmultabmonoid</span> <span class="id" title="var">X</span>)) :<br/>
&nbsp;&nbsp;@<span class="id" title="var">ismonoidfun</span> (<span class="id" title="var">ringmultmonoid</span> <span class="id" title="var">X</span>) (<span class="id" title="var">ringmultmonoid</span> (<span class="id" title="var">commringfrac</span> <span class="id" title="var">X</span> <span class="id" title="var">S</span>)) (<span class="id" title="var">tocommringfrac</span> <span class="id" title="var">X</span> <span class="id" title="var">S</span>) :=<br/>
&nbsp;&nbsp;<span class="id" title="var">dirprodpair</span> (<span class="id" title="var">isbinop2funtocommringfrac</span> <span class="id" title="var">X</span> <span class="id" title="var">S</span>) (<span class="id" title="var">isunital2funtocommringfrac</span> <span class="id" title="var">X</span> <span class="id" title="var">S</span>).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">isringfuntocommringfrac</span> (<span class="id" title="var">X</span> : <span class="id" title="var">commring</span>) (<span class="id" title="var">S</span> : @<span class="id" title="var">subabmonoid</span> (<span class="id" title="var">ringmultabmonoid</span> <span class="id" title="var">X</span>)) :<br/>
&nbsp;&nbsp;@<span class="id" title="var">isringfun</span> <span class="id" title="var">X</span> (<span class="id" title="var">commringfrac</span> <span class="id" title="var">X</span> <span class="id" title="var">S</span>) (<span class="id" title="var">tocommringfrac</span> <span class="id" title="var">X</span> <span class="id" title="var">S</span>) :=<br/>
&nbsp;&nbsp;<span class="id" title="var">dirprodpair</span> (<span class="id" title="var">isaddmonoidfuntocommringfrac</span> <span class="id" title="var">X</span> <span class="id" title="var">S</span>) (<span class="id" title="var">ismultmonoidfuntocommringfrac</span> <span class="id" title="var">X</span> <span class="id" title="var">S</span>).<br/>

<br/>
</div>

<div class="doc">
<a name="lab525"></a><h4 class="section">Ring of fractions in the case when all elements which are being inverted are cancelable</h4>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">hrelcommringfrac0</span> (<span class="id" title="var">X</span> : <span class="id" title="var">commring</span>) (<span class="id" title="var">S</span> : @<span class="id" title="var">submonoid</span> (<span class="id" title="var">ringmultabmonoid</span> <span class="id" title="var">X</span>)) :<br/>
&nbsp;&nbsp;<span class="id" title="var">hrel</span> (<span class="id" title="var">X</span> × <span class="id" title="var">S</span>) :=<br/>
&nbsp;&nbsp;<span class="id" title="var">λ</span> <span class="id" title="var">xa</span> <span class="id" title="var">yb</span> : <span class="id" title="var">setdirprod</span> <span class="id" title="var">X</span> <span class="id" title="var">S</span>, <span class="id" title="var">eqset</span> ((<span class="id" title="var">pr1</span> <span class="id" title="var">xa</span>) * (<span class="id" title="var">pr1</span> (<span class="id" title="var">pr2</span> <span class="id" title="var">yb</span>))) ((<span class="id" title="var">pr1</span> <span class="id" title="var">yb</span>) * (<span class="id" title="var">pr1</span> (<span class="id" title="var">pr2</span> <span class="id" title="var">xa</span>))).<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">weqhrelhrel0commringfrac</span> (<span class="id" title="var">X</span> : <span class="id" title="var">commring</span>) (<span class="id" title="var">S</span> : @<span class="id" title="var">submonoid</span> (<span class="id" title="var">ringmultabmonoid</span> <span class="id" title="var">X</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">iscanc</span> : ∏ <span class="id" title="var">a</span> : <span class="id" title="var">S</span>, <span class="id" title="var">isrcancelable</span> (@<span class="id" title="var">op2</span> <span class="id" title="var">X</span>) (<span class="id" title="var">pr1carrier</span> <span class="id" title="var">_</span> <span class="id" title="var">a</span>)) (<span class="id" title="var">xa</span> <span class="id" title="var">xa'</span> : <span class="id" title="var">dirprod</span> <span class="id" title="var">X</span> <span class="id" title="var">S</span>) :<br/>
&nbsp;&nbsp;(<span class="id" title="var">eqrelcommringfrac</span> <span class="id" title="var">X</span> <span class="id" title="var">S</span> <span class="id" title="var">xa</span> <span class="id" title="var">xa'</span>) ≃ (<span class="id" title="var">hrelcommringfrac0</span> <span class="id" title="var">X</span> <span class="id" title="var">S</span> <span class="id" title="var">xa</span> <span class="id" title="var">xa'</span>).<br/>
<a class="proof" href="#">Show proof.</a><br/><div class="proof">
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">unfold</span> <span class="id" title="var">eqrelabmonoidfrac</span>. <span class="id" title="tactic">unfold</span> <span class="id" title="var">hrelabmonoidfrac</span>. <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">weqimplimpl</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> (@<span class="id" title="var">hinhuniv</span> <span class="id" title="var">_</span> (<span class="id" title="var">eqset</span> (<span class="id" title="var">pr1</span> <span class="id" title="var">xa</span> * <span class="id" title="var">pr1</span> (<span class="id" title="var">pr2</span> <span class="id" title="var">xa'</span>)) (<span class="id" title="var">pr1</span> <span class="id" title="var">xa'</span> * <span class="id" title="var">pr1</span> (<span class="id" title="var">pr2</span> <span class="id" title="var">xa</span>)))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intro</span> <span class="id" title="var">ae</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">ae</span> <span class="id" title="keyword">as</span> [ <span class="id" title="var">a</span> <span class="id" title="var">eq</span> ].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">invmaponpathsincl</span> <span class="id" title="var">_</span> (<span class="id" title="var">iscanc</span> <span class="id" title="var">a</span>) <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">eq</span>).<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intro</span> <span class="id" title="var">eq</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">hinhpr</span>. <span class="id" title="tactic">split</span> <span class="id" title="keyword">with</span> (<span class="id" title="var">unel</span> <span class="id" title="var">S</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="var">ringrunax2</span> <span class="id" title="var">X</span>). <span class="id" title="tactic">rewrite</span> (<span class="id" title="var">ringrunax2</span> <span class="id" title="var">X</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">eq</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> (<span class="id" title="var">isapropishinh</span> <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> (<span class="id" title="var">setproperty</span> <span class="id" title="var">X</span>).<br/>
</div>
<span class="id" title="keyword">Opaque</span> <span class="id" title="var">weqhrelhrel0abmonoidfrac</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">isinclprcommringfrac</span> (<span class="id" title="var">X</span> : <span class="id" title="var">commring</span>) (<span class="id" title="var">S</span> : @<span class="id" title="var">submonoid</span> (<span class="id" title="var">ringmultabmonoid</span> <span class="id" title="var">X</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">iscanc</span> : ∏ <span class="id" title="var">a</span> : <span class="id" title="var">S</span>, <span class="id" title="var">isrcancelable</span> (@<span class="id" title="var">op2</span> <span class="id" title="var">X</span>) (<span class="id" title="var">pr1carrier</span> <span class="id" title="var">_</span> <span class="id" title="var">a</span>)) :<br/>
&nbsp;&nbsp;∏ <span class="id" title="var">a'</span> : <span class="id" title="var">S</span>, <span class="id" title="var">isincl</span> (<span class="id" title="var">λ</span> <span class="id" title="var">x</span>, <span class="id" title="var">prcommringfrac</span> <span class="id" title="var">X</span> <span class="id" title="var">S</span> <span class="id" title="var">x</span> <span class="id" title="var">a'</span>).<br/>
<a class="proof" href="#">Show proof.</a><br/><div class="proof">
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">isinclbetweensets</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">setproperty</span> <span class="id" title="var">X</span>). <span class="id" title="tactic">apply</span> (<span class="id" title="var">setproperty</span> (<span class="id" title="var">commringfrac</span> <span class="id" title="var">X</span> <span class="id" title="var">S</span>)).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">x</span> <span class="id" title="var">x'</span>. <span class="id" title="tactic">intro</span> <span class="id" title="var">e</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">e'</span> := <span class="id" title="var">invweq</span> (<span class="id" title="var">weqpathsinsetquot</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">eqrelcommringfrac</span> <span class="id" title="var">X</span> <span class="id" title="var">S</span>) (<span class="id" title="var">dirprodpair</span> <span class="id" title="var">x</span> <span class="id" title="var">a'</span>) (<span class="id" title="var">dirprodpair</span> <span class="id" title="var">x'</span> <span class="id" title="var">a'</span>)) <span class="id" title="var">e</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">e''</span> := <span class="id" title="var">weqhrelhrel0commringfrac</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">X</span> <span class="id" title="var">S</span> <span class="id" title="var">iscanc</span> (<span class="id" title="var">dirprodpair</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>) (<span class="id" title="var">dirprodpair</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>) <span class="id" title="var">e'</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">e''</span>. <span class="id" title="tactic">apply</span> (<span class="id" title="var">invmaponpathsincl</span> <span class="id" title="var">_</span> (<span class="id" title="var">iscanc</span> <span class="id" title="var">a'</span>)). <span class="id" title="tactic">apply</span> <span class="id" title="var">e''</span>.<br/>
</div>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">isincltocommringfrac</span> (<span class="id" title="var">X</span> : <span class="id" title="var">commring</span>) (<span class="id" title="var">S</span> : @<span class="id" title="var">submonoid</span> (<span class="id" title="var">ringmultabmonoid</span> <span class="id" title="var">X</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">iscanc</span> : ∏ <span class="id" title="var">a</span> : <span class="id" title="var">S</span>, <span class="id" title="var">isrcancelable</span> (@<span class="id" title="var">op2</span> <span class="id" title="var">X</span>) (<span class="id" title="var">pr1carrier</span> <span class="id" title="var">_</span> <span class="id" title="var">a</span>)) :<br/>
&nbsp;&nbsp;<span class="id" title="var">isincl</span> (<span class="id" title="var">tocommringfrac</span> <span class="id" title="var">X</span> <span class="id" title="var">S</span>) := <span class="id" title="var">isinclprcommringfrac</span> <span class="id" title="var">X</span> <span class="id" title="var">S</span> <span class="id" title="var">iscanc</span> (<span class="id" title="var">unel</span> <span class="id" title="var">S</span>).<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">isdeceqcommringfrac</span> (<span class="id" title="var">X</span> : <span class="id" title="var">commring</span>) (<span class="id" title="var">S</span> : @<span class="id" title="var">submonoid</span> (<span class="id" title="var">ringmultabmonoid</span> <span class="id" title="var">X</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">iscanc</span> : ∏ <span class="id" title="var">a</span> : <span class="id" title="var">S</span>, <span class="id" title="var">isrcancelable</span> (@<span class="id" title="var">op2</span> <span class="id" title="var">X</span>) (<span class="id" title="var">pr1carrier</span> <span class="id" title="var">_</span> <span class="id" title="var">a</span>)) (<span class="id" title="keyword">is</span> : <span class="id" title="var">isdeceq</span> <span class="id" title="var">X</span>) :<br/>
&nbsp;&nbsp;<span class="id" title="var">isdeceq</span> (<span class="id" title="var">commringfrac</span> <span class="id" title="var">X</span> <span class="id" title="var">S</span>).<br/>
<a class="proof" href="#">Show proof.</a><br/><div class="proof">
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">apply</span> (<span class="id" title="var">isdeceqsetquot</span> (<span class="id" title="var">eqrelcommringfrac</span> <span class="id" title="var">X</span> <span class="id" title="var">S</span>)). <span class="id" title="tactic">intros</span> <span class="id" title="var">xa</span> <span class="id" title="var">xa'</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">isdecpropweqb</span> (<span class="id" title="var">weqhrelhrel0commringfrac</span> <span class="id" title="var">X</span> <span class="id" title="var">S</span> <span class="id" title="var">iscanc</span> <span class="id" title="var">xa</span> <span class="id" title="var">xa'</span>)).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">isdecpropif</span>. <span class="id" title="tactic">unfold</span> <span class="id" title="var">isaprop</span>. <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">int</span> := <span class="id" title="var">setproperty</span> <span class="id" title="var">X</span> (<span class="id" title="var">pr1</span> <span class="id" title="var">xa</span> * <span class="id" title="var">pr1</span> (<span class="id" title="var">pr2</span> <span class="id" title="var">xa'</span>)) (<span class="id" title="var">pr1</span> <span class="id" title="var">xa'</span> * <span class="id" title="var">pr1</span> (<span class="id" title="var">pr2</span> <span class="id" title="var">xa</span>))).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">int</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">int</span>. <span class="id" title="tactic">unfold</span> <span class="id" title="var">hrelcommringfrac0</span>. <span class="id" title="tactic">unfold</span> <span class="id" title="var">eqset</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">apply</span> (<span class="id" title="keyword">is</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>).<br/>
</div>

<br/>
</div>

<div class="doc">
<a name="lab526"></a><h4 class="section">Relations similar to "greater" or "greater or equal"  on the rings of fractions</h4>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">ispartbinopcommringfracgt</span> (<span class="id" title="var">X</span> : <span class="id" title="var">commring</span>) (<span class="id" title="var">S</span> : @<span class="id" title="var">submonoid</span> (<span class="id" title="var">ringmultabmonoid</span> <span class="id" title="var">X</span>)) {<span class="id" title="var">R</span> : <span class="id" title="var">hrel</span> <span class="id" title="var">X</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">is0</span> : @<span class="id" title="var">isbinophrel</span> (<span class="id" title="var">rigaddabmonoid</span> <span class="id" title="var">X</span>) <span class="id" title="var">R</span>) (<span class="id" title="var">is1</span> : <span class="id" title="var">isringmultgt</span> <span class="id" title="var">X</span> <span class="id" title="var">R</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">is2</span> : ∏ <span class="id" title="var">c</span> : <span class="id" title="var">X</span>, <span class="id" title="var">S</span> <span class="id" title="var">c</span> -&gt; <span class="id" title="var">R</span> <span class="id" title="var">c</span> 0) : @<span class="id" title="var">ispartbinophrel</span> (<span class="id" title="var">ringmultabmonoid</span> <span class="id" title="var">X</span>) <span class="id" title="var">S</span> <span class="id" title="var">R</span>.<br/>
<a class="proof" href="#">Show proof.</a><br/><div class="proof">
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span> <span class="id" title="var">c</span> <span class="id" title="var">s</span> <span class="id" title="var">rab</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">isringmultgttoislringmultgt</span> <span class="id" title="var">X</span> <span class="id" title="var">is0</span> <span class="id" title="var">is1</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> (<span class="id" title="var">is2</span> <span class="id" title="var">c</span> <span class="id" title="var">s</span>) <span class="id" title="var">rab</span>).<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span> <span class="id" title="var">c</span> <span class="id" title="var">s</span> <span class="id" title="var">rab</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">isringmultgttoisrringmultgt</span> <span class="id" title="var">X</span> <span class="id" title="var">is0</span> <span class="id" title="var">is1</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> (<span class="id" title="var">is2</span> <span class="id" title="var">c</span> <span class="id" title="var">s</span>) <span class="id" title="var">rab</span>).<br/>
</div>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">commringfracgt</span> (<span class="id" title="var">X</span> : <span class="id" title="var">commring</span>) (<span class="id" title="var">S</span> : @<span class="id" title="var">submonoid</span> (<span class="id" title="var">ringmultabmonoid</span> <span class="id" title="var">X</span>)) {<span class="id" title="var">R</span> : <span class="id" title="var">hrel</span> <span class="id" title="var">X</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">is0</span> : @<span class="id" title="var">isbinophrel</span> (<span class="id" title="var">rigaddabmonoid</span> <span class="id" title="var">X</span>) <span class="id" title="var">R</span>) (<span class="id" title="var">is1</span> : <span class="id" title="var">isringmultgt</span> <span class="id" title="var">X</span> <span class="id" title="var">R</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">is2</span> : ∏ <span class="id" title="var">c</span> : <span class="id" title="var">X</span>, <span class="id" title="var">S</span> <span class="id" title="var">c</span> -&gt; <span class="id" title="var">R</span> <span class="id" title="var">c</span> 0) : <span class="id" title="var">hrel</span> (<span class="id" title="var">commringfrac</span> <span class="id" title="var">X</span> <span class="id" title="var">S</span>) :=<br/>
&nbsp;&nbsp;<span class="id" title="var">abmonoidfracrel</span> (<span class="id" title="var">ringmultabmonoid</span> <span class="id" title="var">X</span>) <span class="id" title="var">S</span> (<span class="id" title="var">ispartbinopcommringfracgt</span> <span class="id" title="var">X</span> <span class="id" title="var">S</span> <span class="id" title="var">is0</span> <span class="id" title="var">is1</span> <span class="id" title="var">is2</span>).<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">isringmultcommringfracgt</span> (<span class="id" title="var">X</span> : <span class="id" title="var">commring</span>) (<span class="id" title="var">S</span> : @<span class="id" title="var">submonoid</span> (<span class="id" title="var">ringmultabmonoid</span> <span class="id" title="var">X</span>)) {<span class="id" title="var">R</span> : <span class="id" title="var">hrel</span> <span class="id" title="var">X</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">is0</span> : @<span class="id" title="var">isbinophrel</span> (<span class="id" title="var">rigaddabmonoid</span> <span class="id" title="var">X</span>) <span class="id" title="var">R</span>) (<span class="id" title="var">is1</span> : <span class="id" title="var">isringmultgt</span> <span class="id" title="var">X</span> <span class="id" title="var">R</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">is2</span> : ∏ <span class="id" title="var">c</span> : <span class="id" title="var">X</span>, <span class="id" title="var">S</span> <span class="id" title="var">c</span> -&gt; <span class="id" title="var">R</span> <span class="id" title="var">c</span> 0) : <span class="id" title="var">isringmultgt</span> (<span class="id" title="var">commringfrac</span> <span class="id" title="var">X</span> <span class="id" title="var">S</span>) (<span class="id" title="var">commringfracgt</span> <span class="id" title="var">X</span> <span class="id" title="var">S</span> <span class="id" title="var">is0</span> <span class="id" title="var">is1</span> <span class="id" title="var">is2</span>).<br/>
<a class="proof" href="#">Show proof.</a><br/><div class="proof">
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">rer2</span> := (<span class="id" title="var">abmonoidrer</span> (<span class="id" title="var">ringmultabmonoid</span> <span class="id" title="var">X</span>)) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;∏ <span class="id" title="var">a</span> <span class="id" title="var">b</span> <span class="id" title="var">c</span> <span class="id" title="var">d</span> : <span class="id" title="var">X</span>, <span class="id" title="var">paths</span> ((<span class="id" title="var">a</span> * <span class="id" title="var">b</span>) * (<span class="id" title="var">c</span> * <span class="id" title="var">d</span>)) ((<span class="id" title="var">a</span> * <span class="id" title="var">c</span>) * (<span class="id" title="var">b</span> * <span class="id" title="var">d</span>))).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">islringmultgttoisringmultgt</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">int</span> : ∏ (<span class="id" title="var">a</span> <span class="id" title="var">b</span> <span class="id" title="var">c</span> : <span class="id" title="var">ringaddabgr</span> (<span class="id" title="var">commringfrac</span> <span class="id" title="var">X</span> <span class="id" title="var">S</span>)),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">isaprop</span> (<span class="id" title="var">commringfracgt</span> <span class="id" title="var">X</span> <span class="id" title="var">S</span> <span class="id" title="var">is0</span> <span class="id" title="var">is1</span> <span class="id" title="var">is2</span> <span class="id" title="var">c</span> 0 -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">commringfracgt</span> <span class="id" title="var">X</span> <span class="id" title="var">S</span> <span class="id" title="var">is0</span> <span class="id" title="var">is1</span> <span class="id" title="var">is2</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">commringfracgt</span> <span class="id" title="var">X</span> <span class="id" title="var">S</span> <span class="id" title="var">is0</span> <span class="id" title="var">is1</span> <span class="id" title="var">is2</span> (<span class="id" title="var">c</span> * <span class="id" title="var">a</span>) (<span class="id" title="var">c</span> * <span class="id" title="var">b</span>))).<br/>
&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span> <span class="id" title="var">c</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">impred</span>. <span class="id" title="tactic">intro</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">impred</span>. <span class="id" title="tactic">intro</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">pr2</span> <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">setquotuniv3prop</span> <span class="id" title="var">_</span> (<span class="id" title="var">λ</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span> <span class="id" title="var">c</span>, <span class="id" title="var">hProppair</span> <span class="id" title="var">_</span> (<span class="id" title="var">int</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span> <span class="id" title="var">c</span>))).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">xa1</span> <span class="id" title="var">xa2</span> <span class="id" title="var">xa3</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">change</span> (<span class="id" title="var">abmonoidfracrelint</span> (<span class="id" title="var">ringmultabmonoid</span> <span class="id" title="var">X</span>) <span class="id" title="var">S</span> <span class="id" title="var">R</span> <span class="id" title="var">xa3</span> (<span class="id" title="var">dirprodpair</span> 0 (<span class="id" title="var">unel</span> <span class="id" title="var">S</span>)) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">abmonoidfracrelint</span> (<span class="id" title="var">ringmultabmonoid</span> <span class="id" title="var">X</span>) <span class="id" title="var">S</span> <span class="id" title="var">R</span> <span class="id" title="var">xa1</span> <span class="id" title="var">xa2</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">abmonoidfracrelint</span> (<span class="id" title="var">ringmultabmonoid</span> <span class="id" title="var">X</span>) <span class="id" title="var">S</span> <span class="id" title="var">R</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">commringfracop2int</span> <span class="id" title="var">X</span> <span class="id" title="var">S</span> <span class="id" title="var">xa3</span> <span class="id" title="var">xa1</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">commringfracop2int</span> <span class="id" title="var">X</span> <span class="id" title="var">S</span> <span class="id" title="var">xa3</span> <span class="id" title="var">xa2</span>)).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">hinhfun2</span>. <span class="id" title="tactic">intros</span> <span class="id" title="var">t21</span> <span class="id" title="var">t22</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">c1s</span> := <span class="id" title="var">pr1</span> <span class="id" title="var">t21</span>). <span class="id" title="tactic">set</span> (<span class="id" title="var">c1</span> := <span class="id" title="var">pr1</span> <span class="id" title="var">c1s</span>). <span class="id" title="tactic">set</span> (<span class="id" title="var">r1</span> := <span class="id" title="var">pr2</span> <span class="id" title="var">t21</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">c2s</span> := <span class="id" title="var">pr1</span> <span class="id" title="var">t22</span>). <span class="id" title="tactic">set</span> (<span class="id" title="var">c2</span> := <span class="id" title="var">pr1</span> <span class="id" title="var">c2s</span>). <span class="id" title="tactic">set</span> (<span class="id" title="var">r2</span> := <span class="id" title="var">pr2</span> <span class="id" title="var">t22</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">x1</span> := <span class="id" title="var">pr1</span> <span class="id" title="var">xa1</span>). <span class="id" title="tactic">set</span> (<span class="id" title="var">a1</span> := <span class="id" title="var">pr1</span> (<span class="id" title="var">pr2</span> <span class="id" title="var">xa1</span>)).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">x2</span> := <span class="id" title="var">pr1</span> <span class="id" title="var">xa2</span>). <span class="id" title="tactic">set</span> (<span class="id" title="var">a2</span> := <span class="id" title="var">pr1</span> (<span class="id" title="var">pr2</span> <span class="id" title="var">xa2</span>)).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">x3</span> := <span class="id" title="var">pr1</span> <span class="id" title="var">xa3</span>). <span class="id" title="tactic">set</span> (<span class="id" title="var">a3</span> := <span class="id" title="var">pr1</span> (<span class="id" title="var">pr2</span> <span class="id" title="var">xa3</span>)).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span> <span class="id" title="keyword">with</span> (@<span class="id" title="var">op</span> <span class="id" title="var">S</span> <span class="id" title="var">c1s</span> <span class="id" title="var">c2s</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">change</span> (<span class="id" title="var">pr1</span> (<span class="id" title="var">R</span> (<span class="id" title="var">x3</span> * <span class="id" title="var">x1</span> * (<span class="id" title="var">a3</span> * <span class="id" title="var">a2</span>) * (<span class="id" title="var">c1</span> * <span class="id" title="var">c2</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">x3</span> * <span class="id" title="var">x2</span> * (<span class="id" title="var">a3</span> * <span class="id" title="var">a1</span>) * (<span class="id" title="var">c1</span> * <span class="id" title="var">c2</span>)))).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="var">ringcomm2</span> <span class="id" title="var">X</span> <span class="id" title="var">a3</span> <span class="id" title="var">a2</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="var">ringcomm2</span> <span class="id" title="var">X</span> <span class="id" title="var">a3</span> <span class="id" title="var">a1</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="var">ringassoc2</span> <span class="id" title="var">X</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> (<span class="id" title="var">c1</span> * <span class="id" title="var">c2</span>)).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="var">ringassoc2</span> <span class="id" title="var">X</span> (<span class="id" title="var">x3</span> * <span class="id" title="var">x2</span>) <span class="id" title="var">_</span> (<span class="id" title="var">c1</span> * <span class="id" title="var">c2</span>)).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="var">rer2</span> <span class="id" title="var">_</span> <span class="id" title="var">a3</span> <span class="id" title="var">c1</span> <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="var">rer2</span> <span class="id" title="var">_</span> <span class="id" title="var">a3</span> <span class="id" title="var">c1</span> <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="var">ringcomm2</span> <span class="id" title="var">X</span> <span class="id" title="var">a2</span> <span class="id" title="var">c1</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="var">ringcomm2</span> <span class="id" title="var">X</span> <span class="id" title="var">a1</span> <span class="id" title="var">c1</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="var">pathsinv0</span> (<span class="id" title="var">ringassoc2</span> <span class="id" title="var">X</span> (<span class="id" title="var">x3</span> * <span class="id" title="var">x1</span>) <span class="id" title="var">_</span> <span class="id" title="var">_</span>)).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="var">pathsinv0</span> (<span class="id" title="var">ringassoc2</span> <span class="id" title="var">X</span> (<span class="id" title="var">x3</span> * <span class="id" title="var">x2</span>) <span class="id" title="var">_</span> <span class="id" title="var">_</span>)).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="var">rer2</span> <span class="id" title="var">_</span> <span class="id" title="var">x1</span> <span class="id" title="var">c1</span> <span class="id" title="var">_</span>). <span class="id" title="tactic">rewrite</span> (<span class="id" title="var">rer2</span> <span class="id" title="var">_</span> <span class="id" title="var">x2</span> <span class="id" title="var">c1</span> <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="var">ringcomm2</span> <span class="id" title="var">X</span> <span class="id" title="var">a3</span> <span class="id" title="var">c2</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="var">pathsinv0</span> (<span class="id" title="var">ringassoc2</span> <span class="id" title="var">X</span> <span class="id" title="var">_</span> <span class="id" title="var">c2</span> <span class="id" title="var">a3</span>)).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="var">pathsinv0</span> (<span class="id" title="var">ringassoc2</span> <span class="id" title="var">X</span> <span class="id" title="var">_</span> <span class="id" title="var">c2</span> <span class="id" title="var">_</span>)).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> ((<span class="id" title="var">isringmultgttoisrringmultgt</span> <span class="id" title="var">X</span> <span class="id" title="var">is0</span> <span class="id" title="var">is1</span>) <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> (<span class="id" title="var">is2</span> <span class="id" title="var">_</span> (<span class="id" title="var">pr2</span> (<span class="id" title="var">pr2</span> <span class="id" title="var">xa3</span>)))).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="var">ringassoc2</span> <span class="id" title="var">X</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">c2</span>). <span class="id" title="tactic">rewrite</span> (<span class="id" title="var">ringassoc2</span> <span class="id" title="var">X</span> <span class="id" title="var">_</span> (<span class="id" title="var">x2</span> * <span class="id" title="var">a1</span>) <span class="id" title="var">c2</span>).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">r1</span>. <span class="id" title="var">clearbody</span> <span class="id" title="var">r1</span>. <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">r2</span>. <span class="id" title="var">clearbody</span> <span class="id" title="var">r2</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">change</span> (<span class="id" title="var">pr1</span> (<span class="id" title="var">R</span> (<span class="id" title="var">x3</span> * 1 * <span class="id" title="var">c1</span>) (0 * <span class="id" title="var">a3</span> * <span class="id" title="var">c1</span>))) <span class="id" title="tactic">in</span> <span class="id" title="var">r1</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="var">ringrunax2</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">r1</span>. <span class="id" title="tactic">rewrite</span> (<span class="id" title="var">ringmult0x</span> <span class="id" title="var">X</span> <span class="id" title="var">_</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">r1</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="var">ringmult0x</span> <span class="id" title="var">X</span> <span class="id" title="var">_</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">r1</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> ((<span class="id" title="var">isringmultgttoislringmultgt</span> <span class="id" title="var">X</span> <span class="id" title="var">is0</span> <span class="id" title="var">is1</span>) <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">r1</span> <span class="id" title="var">r2</span>).<br/>
</div>
<span class="id" title="keyword">Opaque</span> <span class="id" title="var">isringmultcommringfracgt</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">isringaddcommringfracgt</span> (<span class="id" title="var">X</span> : <span class="id" title="var">commring</span>) (<span class="id" title="var">S</span> : @<span class="id" title="var">submonoid</span> (<span class="id" title="var">ringmultabmonoid</span> <span class="id" title="var">X</span>)) {<span class="id" title="var">R</span> : <span class="id" title="var">hrel</span> <span class="id" title="var">X</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">is0</span> : @<span class="id" title="var">isbinophrel</span> (<span class="id" title="var">rigaddabmonoid</span> <span class="id" title="var">X</span>) <span class="id" title="var">R</span>) (<span class="id" title="var">is1</span> : <span class="id" title="var">isringmultgt</span> <span class="id" title="var">X</span> <span class="id" title="var">R</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">is2</span> : ∏ <span class="id" title="var">c</span> : <span class="id" title="var">X</span>, <span class="id" title="var">S</span> <span class="id" title="var">c</span> -&gt; <span class="id" title="var">R</span> <span class="id" title="var">c</span> 0) : @<span class="id" title="var">isbinophrel</span> (<span class="id" title="var">commringfrac</span> <span class="id" title="var">X</span> <span class="id" title="var">S</span>) (<span class="id" title="var">commringfracgt</span> <span class="id" title="var">X</span> <span class="id" title="var">S</span> <span class="id" title="var">is0</span> <span class="id" title="var">is1</span> <span class="id" title="var">is2</span>).<br/>
<a class="proof" href="#">Show proof.</a><br/><div class="proof">
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">rer2</span> := (<span class="id" title="var">abmonoidrer</span> (<span class="id" title="var">ringmultabmonoid</span> <span class="id" title="var">X</span>)) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;∏ <span class="id" title="var">a</span> <span class="id" title="var">b</span> <span class="id" title="var">c</span> <span class="id" title="var">d</span> : <span class="id" title="var">X</span>, <span class="id" title="var">paths</span> ((<span class="id" title="var">a</span> * <span class="id" title="var">b</span>) * (<span class="id" title="var">c</span> * <span class="id" title="var">d</span>)) ((<span class="id" title="var">a</span> * <span class="id" title="var">c</span>) * (<span class="id" title="var">b</span> * <span class="id" title="var">d</span>))).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">isbinophrelif</span>. <span class="id" title="tactic">intros</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span>. <span class="id" title="tactic">apply</span> (<span class="id" title="var">ringcomm1</span> (<span class="id" title="var">commringfrac</span> <span class="id" title="var">X</span> <span class="id" title="var">S</span>) <span class="id" title="var">a</span> <span class="id" title="var">b</span>).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">int</span> : ∏ (<span class="id" title="var">a</span> <span class="id" title="var">b</span> <span class="id" title="var">c</span> : <span class="id" title="var">ringaddabgr</span> (<span class="id" title="var">commringfrac</span> <span class="id" title="var">X</span> <span class="id" title="var">S</span>)),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">isaprop</span> (<span class="id" title="var">commringfracgt</span> <span class="id" title="var">X</span> <span class="id" title="var">S</span> <span class="id" title="var">is0</span> <span class="id" title="var">is1</span> <span class="id" title="var">is2</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">commringfracgt</span> <span class="id" title="var">X</span> <span class="id" title="var">S</span> <span class="id" title="var">is0</span> <span class="id" title="var">is1</span> <span class="id" title="var">is2</span> (<span class="id" title="var">op</span> <span class="id" title="var">c</span> <span class="id" title="var">a</span>) (<span class="id" title="var">op</span> <span class="id" title="var">c</span> <span class="id" title="var">b</span>))).<br/>
&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span> <span class="id" title="var">c</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">impred</span>. <span class="id" title="tactic">intro</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">pr2</span> <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">setquotuniv3prop</span> <span class="id" title="var">_</span> (<span class="id" title="var">λ</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span> <span class="id" title="var">c</span>, <span class="id" title="var">hProppair</span> <span class="id" title="var">_</span> (<span class="id" title="var">int</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span> <span class="id" title="var">c</span>))).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">xa1</span> <span class="id" title="var">xa2</span> <span class="id" title="var">xa3</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">change</span> (<span class="id" title="var">abmonoidfracrelint</span> (<span class="id" title="var">ringmultabmonoid</span> <span class="id" title="var">X</span>) <span class="id" title="var">S</span> <span class="id" title="var">R</span> <span class="id" title="var">xa1</span> <span class="id" title="var">xa2</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">abmonoidfracrelint</span> (<span class="id" title="var">ringmultabmonoid</span> <span class="id" title="var">X</span>) <span class="id" title="var">S</span> <span class="id" title="var">R</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">commringfracop1int</span> <span class="id" title="var">X</span> <span class="id" title="var">S</span> <span class="id" title="var">xa3</span> <span class="id" title="var">xa1</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">commringfracop1int</span> <span class="id" title="var">X</span> <span class="id" title="var">S</span> <span class="id" title="var">xa3</span> <span class="id" title="var">xa2</span>)).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">hinhfun</span>. <span class="id" title="tactic">intro</span> <span class="id" title="var">t2</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">c0s</span> := <span class="id" title="var">pr1</span> <span class="id" title="var">t2</span>). <span class="id" title="tactic">set</span> (<span class="id" title="var">c0</span> := <span class="id" title="var">pr1</span> <span class="id" title="var">c0s</span>). <span class="id" title="tactic">set</span> (<span class="id" title="var">r</span> := <span class="id" title="var">pr2</span> <span class="id" title="var">t2</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span> <span class="id" title="keyword">with</span> <span class="id" title="var">c0s</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">x1</span> := <span class="id" title="var">pr1</span> <span class="id" title="var">xa1</span>). <span class="id" title="tactic">set</span> (<span class="id" title="var">a1</span> := <span class="id" title="var">pr1</span> (<span class="id" title="var">pr2</span> <span class="id" title="var">xa1</span>)).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">x2</span> := <span class="id" title="var">pr1</span> <span class="id" title="var">xa2</span>). <span class="id" title="tactic">set</span> (<span class="id" title="var">a2</span> := <span class="id" title="var">pr1</span> (<span class="id" title="var">pr2</span> <span class="id" title="var">xa2</span>)).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">x3</span> := <span class="id" title="var">pr1</span> <span class="id" title="var">xa3</span>). <span class="id" title="tactic">set</span> (<span class="id" title="var">a3</span> := <span class="id" title="var">pr1</span> (<span class="id" title="var">pr2</span> <span class="id" title="var">xa3</span>)).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">change</span> (<span class="id" title="var">pr1</span> (<span class="id" title="var">R</span> ((<span class="id" title="var">a1</span> * <span class="id" title="var">x3</span> + <span class="id" title="var">a3</span> * <span class="id" title="var">x1</span>) * (<span class="id" title="var">a3</span> * <span class="id" title="var">a2</span>) * <span class="id" title="var">c0</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;((<span class="id" title="var">a2</span> * <span class="id" title="var">x3</span> + <span class="id" title="var">a3</span> * <span class="id" title="var">x2</span>) * (<span class="id" title="var">a3</span> * <span class="id" title="var">a1</span>) * <span class="id" title="var">c0</span>))).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="var">ringassoc2</span> <span class="id" title="var">X</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">c0</span>). <span class="id" title="tactic">rewrite</span> (<span class="id" title="var">ringassoc2</span> <span class="id" title="var">X</span> <span class="id" title="var">_</span> (<span class="id" title="var">a3</span> * <span class="id" title="var">_</span>) <span class="id" title="var">c0</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="var">ringrdistr</span> <span class="id" title="var">X</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>). <span class="id" title="tactic">rewrite</span> (<span class="id" title="var">ringrdistr</span> <span class="id" title="var">X</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="var">rer2</span> <span class="id" title="var">_</span> <span class="id" title="var">x3</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>). <span class="id" title="tactic">rewrite</span> (<span class="id" title="var">rer2</span> <span class="id" title="var">_</span> <span class="id" title="var">x3</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="var">ringcomm2</span> <span class="id" title="var">X</span> <span class="id" title="var">a3</span> <span class="id" title="var">a2</span>). <span class="id" title="tactic">rewrite</span> (<span class="id" title="var">ringcomm2</span> <span class="id" title="var">X</span> <span class="id" title="var">a3</span> <span class="id" title="var">a1</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="var">pathsinv0</span> (<span class="id" title="var">ringassoc2</span> <span class="id" title="var">X</span> <span class="id" title="var">a1</span> <span class="id" title="var">a2</span> <span class="id" title="var">a3</span>)).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="var">pathsinv0</span> (<span class="id" title="var">ringassoc2</span> <span class="id" title="var">X</span> <span class="id" title="var">a2</span> <span class="id" title="var">a1</span> <span class="id" title="var">a3</span>)).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="var">ringcomm2</span> <span class="id" title="var">X</span> <span class="id" title="var">a1</span> <span class="id" title="var">a2</span>). <span class="id" title="tactic">apply</span> ((<span class="id" title="var">pr1</span> <span class="id" title="var">is0</span>) <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="var">ringcomm2</span> <span class="id" title="var">X</span> <span class="id" title="var">a2</span> <span class="id" title="var">a3</span>). <span class="id" title="tactic">rewrite</span> (<span class="id" title="var">ringcomm2</span> <span class="id" title="var">X</span>  <span class="id" title="var">a1</span> <span class="id" title="var">a3</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="var">ringassoc2</span> <span class="id" title="var">X</span> <span class="id" title="var">a3</span> <span class="id" title="var">a2</span> <span class="id" title="var">c0</span>). <span class="id" title="tactic">rewrite</span> (<span class="id" title="var">ringassoc2</span> <span class="id" title="var">X</span> <span class="id" title="var">a3</span> <span class="id" title="var">a1</span> <span class="id" title="var">c0</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="var">rer2</span> <span class="id" title="var">_</span> <span class="id" title="var">x1</span> <span class="id" title="var">a3</span> <span class="id" title="var">_</span>). <span class="id" title="tactic">rewrite</span> (<span class="id" title="var">rer2</span> <span class="id" title="var">_</span> <span class="id" title="var">x2</span> <span class="id" title="var">a3</span> <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="var">pathsinv0</span> (<span class="id" title="var">ringassoc2</span> <span class="id" title="var">X</span> <span class="id" title="var">x1</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>)).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="var">pathsinv0</span> (<span class="id" title="var">ringassoc2</span> <span class="id" title="var">X</span> <span class="id" title="var">x2</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>)).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> ((<span class="id" title="var">isringmultgttoislringmultgt</span> <span class="id" title="var">X</span> <span class="id" title="var">is0</span> <span class="id" title="var">is1</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> (<span class="id" title="var">is2</span> <span class="id" title="var">_</span> (<span class="id" title="var">pr2</span> (@<span class="id" title="var">op</span> <span class="id" title="var">S</span> (<span class="id" title="var">pr2</span> <span class="id" title="var">xa3</span>) (<span class="id" title="var">pr2</span> <span class="id" title="var">xa3</span>)))) <span class="id" title="var">r</span>).<br/>
</div>
<span class="id" title="keyword">Opaque</span> <span class="id" title="var">isringaddcommringfracgt</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">isdeccommringfracgt</span> (<span class="id" title="var">X</span> : <span class="id" title="var">commring</span>) (<span class="id" title="var">S</span> : @<span class="id" title="var">submonoid</span> (<span class="id" title="var">ringmultabmonoid</span> <span class="id" title="var">X</span>)) {<span class="id" title="var">R</span> : <span class="id" title="var">hrel</span> <span class="id" title="var">X</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">is0</span> : @<span class="id" title="var">isbinophrel</span> (<span class="id" title="var">rigaddabmonoid</span> <span class="id" title="var">X</span>) <span class="id" title="var">R</span>) (<span class="id" title="var">is1</span> : <span class="id" title="var">isringmultgt</span> <span class="id" title="var">X</span> <span class="id" title="var">R</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">is2</span> : ∏ <span class="id" title="var">c</span> : <span class="id" title="var">X</span>, <span class="id" title="var">S</span> <span class="id" title="var">c</span> -&gt; <span class="id" title="var">R</span> <span class="id" title="var">c</span> 0) (<span class="id" title="var">is'</span> : @<span class="id" title="var">ispartinvbinophrel</span> (<span class="id" title="var">ringmultabmonoid</span> <span class="id" title="var">X</span>) <span class="id" title="var">S</span> <span class="id" title="var">R</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">isd</span> : <span class="id" title="var">isdecrel</span> <span class="id" title="var">R</span>) : <span class="id" title="var">isdecrel</span> (<span class="id" title="var">commringfracgt</span> <span class="id" title="var">X</span> <span class="id" title="var">S</span> <span class="id" title="var">is0</span> <span class="id" title="var">is1</span> <span class="id" title="var">is2</span>).<br/>
<a class="proof" href="#">Show proof.</a><br/><div class="proof">
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">isdecabmonoidfracrel</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">ringmultabmonoid</span> <span class="id" title="var">X</span>) <span class="id" title="var">S</span> (<span class="id" title="var">ispartbinopcommringfracgt</span> <span class="id" title="var">X</span> <span class="id" title="var">S</span> <span class="id" title="var">is0</span> <span class="id" title="var">is1</span> <span class="id" title="var">is2</span>) <span class="id" title="var">is'</span> <span class="id" title="var">isd</span>).<br/>
</div>

<br/>
</div>

<div class="doc">
<a name="lab527"></a><h4 class="section">Realations and the canonical homomorphism to the ring of fractions</h4>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">iscomptocommringfrac</span> (<span class="id" title="var">X</span> : <span class="id" title="var">commring</span>) (<span class="id" title="var">S</span> : @<span class="id" title="var">submonoid</span> (<span class="id" title="var">ringmultabmonoid</span> <span class="id" title="var">X</span>)) {<span class="id" title="var">L</span> : <span class="id" title="var">hrel</span> <span class="id" title="var">X</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">is0</span> : @<span class="id" title="var">isbinophrel</span> (<span class="id" title="var">rigaddabmonoid</span> <span class="id" title="var">X</span>) <span class="id" title="var">L</span>) (<span class="id" title="var">is1</span> : <span class="id" title="var">isringmultgt</span> <span class="id" title="var">X</span> <span class="id" title="var">L</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">is2</span> : ∏ <span class="id" title="var">c</span> : <span class="id" title="var">X</span>, <span class="id" title="var">S</span> <span class="id" title="var">c</span> -&gt; <span class="id" title="var">L</span> <span class="id" title="var">c</span> 0) :<br/>
&nbsp;&nbsp;<span class="id" title="var">iscomprelrelfun</span> <span class="id" title="var">L</span> (<span class="id" title="var">commringfracgt</span> <span class="id" title="var">X</span> <span class="id" title="var">S</span> <span class="id" title="var">is0</span> <span class="id" title="var">is1</span> <span class="id" title="var">is2</span>) (<span class="id" title="var">tocommringfrac</span> <span class="id" title="var">X</span> <span class="id" title="var">S</span>) :=<br/>
&nbsp;&nbsp;<span class="id" title="var">iscomptoabmonoidfrac</span> (<span class="id" title="var">ringmultabmonoid</span> <span class="id" title="var">X</span>) <span class="id" title="var">S</span> (<span class="id" title="var">ispartbinopcommringfracgt</span> <span class="id" title="var">X</span> <span class="id" title="var">S</span> <span class="id" title="var">is0</span> <span class="id" title="var">is1</span> <span class="id" title="var">is2</span>).<br/>
<span class="id" title="keyword">Opaque</span> <span class="id" title="var">iscomptocommringfrac</span>.<br/>

<br/>
<span class="id" title="keyword">Close</span> <span class="id" title="keyword">Scope</span> <span class="id" title="var">ring_scope</span>.<br/>

<br/>
</div>
</div>

<div id="footer">
<hr/><a href="index.html">Index</a><hr/>This page has been generated by <a href="https://coq.inria.fr/">coqdoc</a>
</div>

</div>

</body>
</html>