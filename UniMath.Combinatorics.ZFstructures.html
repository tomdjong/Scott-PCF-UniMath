<!DOCTYPE html>
<html>
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
	<link href="coqdoc.css" rel="stylesheet" type="text/css"/>
	<script src="http://code.jquery.com/jquery-1.11.0.min.js" type="text/javascript"></script>
	<script src="./proofs-toggle.js" type="text/javascript"></script>
	<style>
		div.proofcomment {
			font-style: italic;
		}
	</style>
	<title>Documentation</title>
</head>
<body>
<div id="page">
<div id="main">
<h1 class="libtitle">Library UniMath.Combinatorics.ZFstructures</h1>

<div class="code">

<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Export</span> <span class="id" title="var">UniMath.Foundations.PartB</span>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Export</span> <span class="id" title="var">UniMath.Foundations.Propositions</span>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Export</span> <span class="id" title="var">UniMath.Foundations.Sets</span>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Export</span> <span class="id" title="var">UniMath.Foundations.HLevels</span>.<br/>

<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Export</span> <span class="id" title="var">UniMath.Combinatorics.WellOrderedSets</span>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Export</span> <span class="id" title="var">UniMath.Combinatorics.OrderedSets</span>.<br/>

<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Export</span> <span class="id" title="var">UniMath.MoreFoundations.DecidablePropositions</span>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Export</span> <span class="id" title="var">UniMath.MoreFoundations.Propositions</span>.<br/>
<span class="id" title="keyword">Local Open</span> <span class="id" title="keyword">Scope</span> <span class="id" title="var">logic</span>.<br/>

<br/>

<br/>
</div>

<div class="doc">
Contents 
<div class="paragraph"> </div>

<ul class="doclist">
<li>Some auxilliary lemmas which which are useful stated in this form for this file.

</li>
</ul>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">contr_to_pr1contr</span> (<span class="id" title="var">X</span> : <span class="id" title="var">UU</span>) (<span class="id" title="var">P</span> : <span class="id" title="var">X</span> → <span class="id" title="var">hProp</span>) (<span class="id" title="var">T</span> : ∑ <span class="id" title="var">x</span>, <span class="id" title="var">P</span> <span class="id" title="var">x</span>) (<span class="id" title="var">C</span> : <span class="id" title="var">iscontr</span> (<span class="id" title="var">T</span> = <span class="id" title="var">T</span>)) :<br/>
&nbsp;&nbsp;<span class="id" title="var">iscontr</span> ((<span class="id" title="var">pr1</span> <span class="id" title="var">T</span>) = (<span class="id" title="var">pr1</span> <span class="id" title="var">T</span>)).<br/>
<a class="proof" href="#">Show proof.</a><br/><div class="proof">
&nbsp;&nbsp;<span class="id" title="tactic">exact</span> (@<span class="id" title="var">isofhlevelweqf</span> 0 (<span class="id" title="var">T</span> = <span class="id" title="var">T</span>) (<span class="id" title="var">pr1</span> <span class="id" title="var">T</span> = <span class="id" title="var">pr1</span> <span class="id" title="var">T</span>) (@<span class="id" title="var">total2_paths_hProp_equiv</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">T</span> <span class="id" title="var">T</span>) <span class="id" title="var">C</span>).<br/>
</div>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">pr1contr_to_contr</span> (<span class="id" title="var">X</span> : <span class="id" title="var">UU</span>) (<span class="id" title="var">P</span> : <span class="id" title="var">X</span> → <span class="id" title="var">hProp</span>) (<span class="id" title="var">T</span> : ∑ <span class="id" title="var">x</span>, <span class="id" title="var">P</span> <span class="id" title="var">x</span>) (<span class="id" title="var">C</span> : <span class="id" title="var">iscontr</span> (<span class="id" title="var">pr1</span> <span class="id" title="var">T</span> = <span class="id" title="var">pr1</span> <span class="id" title="var">T</span>)) :<br/>
&nbsp;&nbsp;<span class="id" title="var">iscontr</span> (<span class="id" title="var">T</span> = <span class="id" title="var">T</span>).<br/>
<a class="proof" href="#">Show proof.</a><br/><div class="proof">
&nbsp;&nbsp;<span class="id" title="tactic">exact</span> (@<span class="id" title="var">isofhlevelweqb</span> 0 (<span class="id" title="var">T</span> = <span class="id" title="var">T</span>) (<span class="id" title="var">pr1</span> <span class="id" title="var">T</span> = <span class="id" title="var">pr1</span> <span class="id" title="var">T</span>) (@<span class="id" title="var">total2_paths_hProp_equiv</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">T</span> <span class="id" title="var">T</span>) <span class="id" title="var">C</span>).<br/>
</div>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">substructure_univalence</span> (<span class="id" title="var">S</span> : <span class="id" title="var">UU</span>) (<span class="id" title="var">iso</span> : <span class="id" title="var">S</span> → <span class="id" title="var">S</span> → <span class="id" title="var">UU</span>) (<span class="id" title="var">u</span> : ∏ (<span class="id" title="var">X</span> <span class="id" title="var">Y</span> : <span class="id" title="var">S</span>), (<span class="id" title="var">X</span> = <span class="id" title="var">Y</span>) ≃ (<span class="id" title="var">iso</span> <span class="id" title="var">X</span> <span class="id" title="var">Y</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">Q</span> : <span class="id" title="var">S</span> → <span class="id" title="var">hProp</span>) (<span class="id" title="var">A</span> <span class="id" title="var">B</span> : (∑ (<span class="id" title="var">X</span> : <span class="id" title="var">S</span>), <span class="id" title="var">Q</span> <span class="id" title="var">X</span>)) : (<span class="id" title="var">A</span> = <span class="id" title="var">B</span>) ≃ (<span class="id" title="var">iso</span> (<span class="id" title="var">pr1</span> <span class="id" title="var">A</span>) (<span class="id" title="var">pr1</span> <span class="id" title="var">B</span>)).<br/>
<a class="proof" href="#">Show proof.</a><br/><div class="proof">
&nbsp;&nbsp;<span class="id" title="var">intermediate_weq</span> (<span class="id" title="var">pr1</span> <span class="id" title="var">A</span> = <span class="id" title="var">pr1</span> <span class="id" title="var">B</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">total2_paths_hProp_equiv</span> <span class="id" title="var">Q</span> <span class="id" title="var">A</span> <span class="id" title="var">B</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">u</span> (<span class="id" title="var">pr1</span> <span class="id" title="var">A</span>) (<span class="id" title="var">pr1</span> <span class="id" title="var">B</span>)).<br/>
</div>

<br/>

<br/>

<br/>
</div>

<div class="doc">
Contents 
<div class="paragraph"> </div>

<ul class="doclist">
<li>Transitive reflexive rooted graph <span class="inlinecode"><span class="id" title="var">TRRGraph</span></span>

</li>
<li>Tree <span class="inlinecode"><span class="id" title="var">Tree</span></span>

</li>
<li>Up and Down Well-founded tree <span class="inlinecode"><span class="id" title="var">Tree_isWellFounded</span></span>

</li>
<li>Rigid tree (no non-trivial automorphisms) <span class="inlinecode"><span class="id" title="var">isrigid</span></span>

</li>
<li>ZF structures as rigid well-founded trees <span class="inlinecode"><span class="id" title="var">ZFStructures</span></span>

</li>
<li>Proof that ZFStructures is an h-set <span class="inlinecode"><span class="id" title="var">isaset_ZFStruc</span></span>

</li>
</ul>

<div class="paragraph"> </div>

 The definition of transitive reflexive rooted graphs <span class="inlinecode"><span class="id" title="var">TRRGraph</span></span> 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">PointedGraph</span> := ∑ (<span class="id" title="var">V</span> : <span class="id" title="var">hSet</span>) (<span class="id" title="var">E</span> : <span class="id" title="var">hrel</span> <span class="id" title="var">V</span>), <span class="id" title="var">V</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">isaroot</span> {<span class="id" title="var">V</span> : <span class="id" title="var">hSet</span>} (<span class="id" title="var">E</span> : <span class="id" title="var">hrel</span> <span class="id" title="var">V</span>) (<span class="id" title="var">r</span> : <span class="id" title="var">V</span>) : <span class="id" title="var">UU</span> := (∏ <span class="id" title="var">w</span> : <span class="id" title="var">V</span>, <span class="id" title="var">E</span> <span class="id" title="var">r</span> <span class="id" title="var">w</span>).<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">isaprop_isaroot</span> {<span class="id" title="var">V</span> : <span class="id" title="var">hSet</span>} (<span class="id" title="var">E</span> : <span class="id" title="var">hrel</span> <span class="id" title="var">V</span>) (<span class="id" title="var">r</span> : <span class="id" title="var">V</span>) : <span class="id" title="var">isaprop</span> (<span class="id" title="var">isaroot</span> <span class="id" title="var">E</span> <span class="id" title="var">r</span>).<br/>
<a class="proof" href="#">Show proof.</a><br/><div class="proof">
&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> (<span class="id" title="tactic">apply</span> <span class="id" title="var">impred</span> ; <span class="id" title="tactic">intros</span>). <span class="id" title="tactic">apply</span> <span class="id" title="var">propproperty</span>.<br/>
</div>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">isTRR</span> (<span class="id" title="var">V</span> : <span class="id" title="var">hSet</span>) (<span class="id" title="var">E</span> : <span class="id" title="var">hrel</span> <span class="id" title="var">V</span>) (<span class="id" title="var">r</span> : <span class="id" title="var">V</span>) : <span class="id" title="var">UU</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="var">isrefl</span> <span class="id" title="var">E</span> × <span class="id" title="var">istrans</span> <span class="id" title="var">E</span> × <span class="id" title="var">isaroot</span> <span class="id" title="var">E</span> <span class="id" title="var">r</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">isaprop_isTRR</span> (<span class="id" title="var">V</span> : <span class="id" title="var">hSet</span>) (<span class="id" title="var">E</span> : <span class="id" title="var">hrel</span> <span class="id" title="var">V</span>) (<span class="id" title="var">r</span> : <span class="id" title="var">V</span>) : <span class="id" title="var">isaprop</span> (<span class="id" title="var">isTRR</span> <span class="id" title="var">V</span> <span class="id" title="var">E</span> <span class="id" title="var">r</span>).<br/>
<a class="proof" href="#">Show proof.</a><br/><div class="proof">
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">isapropdirprod</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> (<span class="id" title="var">isaprop_isrefl</span> <span class="id" title="var">E</span>).<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <span class="id" title="var">isapropdirprod</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;-- <span class="id" title="tactic">apply</span> (<span class="id" title="var">isaprop_istrans</span> <span class="id" title="var">E</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;-- <span class="id" title="tactic">apply</span> (<span class="id" title="var">isaprop_isaroot</span> <span class="id" title="var">E</span> <span class="id" title="var">r</span>).<br/>
</div>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">TRRGraphData</span> (<span class="id" title="var">V</span> : <span class="id" title="var">hSet</span>) : <span class="id" title="var">UU</span> := ∑ (<span class="id" title="var">E</span> : <span class="id" title="var">hrel</span> <span class="id" title="var">V</span>) (<span class="id" title="var">r</span> : <span class="id" title="var">V</span>), <span class="id" title="var">isTRR</span> <span class="id" title="var">V</span> <span class="id" title="var">E</span> <span class="id" title="var">r</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">isaset_TRRGraphData</span> (<span class="id" title="var">V</span> : <span class="id" title="var">hSet</span>) : <span class="id" title="var">isaset</span> (<span class="id" title="var">TRRGraphData</span> <span class="id" title="var">V</span>).<br/>
<a class="proof" href="#">Show proof.</a><br/><div class="proof">
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">TRRGraphData</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">isofhleveltotal2</span> 2).<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <span class="id" title="var">isaset_hrel</span>.<br/>
&nbsp;&nbsp;-  <span class="id" title="tactic">intros</span> <span class="id" title="var">x</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">isofhleveltotal2</span> 2).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-- <span class="id" title="tactic">apply</span> <span class="id" title="var">setproperty</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-- <span class="id" title="tactic">intros</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">hlevelntosn</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">isaprop_isTRR</span>.<br/>
</div>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">TRRGraph</span> : <span class="id" title="var">UU</span> := ∑ (<span class="id" title="var">V</span> : <span class="id" title="var">hSet</span>), <span class="id" title="var">TRRGraphData</span> <span class="id" title="var">V</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">TRRG_edgerel</span> (<span class="id" title="var">G</span> : <span class="id" title="var">TRRGraph</span>) : <span class="id" title="var">hrel</span> (<span class="id" title="var">pr1</span> <span class="id" title="var">G</span>) := <span class="id" title="var">pr12</span> <span class="id" title="var">G</span>.<br/>

<br/>
<span class="id" title="keyword">Local</span> <span class="id" title="keyword">Notation</span> "x ≤ y" := (<span class="id" title="var">TRRG_edgerel</span> <span class="id" title="var">_</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>)(<span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 70).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">TRRG_root</span> (<span class="id" title="var">G</span> : <span class="id" title="var">TRRGraph</span>) : <span class="id" title="var">pr1</span> <span class="id" title="var">G</span> := <span class="id" title="var">pr122</span> <span class="id" title="var">G</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">TRRG_transitivity</span> (<span class="id" title="var">G</span> : <span class="id" title="var">TRRGraph</span>) : <span class="id" title="var">istrans</span> (<span class="id" title="var">TRRG_edgerel</span> <span class="id" title="var">G</span>) := <span class="id" title="var">pr12</span> (<span class="id" title="var">pr222</span> <span class="id" title="var">G</span>).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">selfedge</span> (<span class="id" title="var">G</span> : <span class="id" title="var">TRRGraph</span>) (<span class="id" title="var">x</span> : <span class="id" title="var">pr1</span> <span class="id" title="var">G</span>) : <span class="id" title="var">pr1</span> (<span class="id" title="var">pr2</span> <span class="id" title="var">G</span>) <span class="id" title="var">x</span> <span class="id" title="var">x</span> :=<br/>
&nbsp;&nbsp;(<span class="id" title="var">pr1</span> (<span class="id" title="var">pr2</span> (<span class="id" title="var">pr2</span> (<span class="id" title="var">pr2</span> <span class="id" title="var">G</span>))) <span class="id" title="var">x</span>).<br/>

<br/>
</div>

<div class="doc">
Definition of <span class="inlinecode"><span class="id" title="var">TRRGraph</span></span> homomorphisms <span class="inlinecode"><span class="id" title="var">isTRRGhomo</span></span>, isomorphisms <span class="inlinecode"><span class="id" title="var">TRRGraphiso</span></span>, and a proof
    that isomorphisms are equivalent to identities <span class="inlinecode"><span class="id" title="var">TRRGraph_univalence</span></span> 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">isTRRGhomo</span> {<span class="id" title="var">G</span> <span class="id" title="var">H</span> : <span class="id" title="var">TRRGraph</span>} (<span class="id" title="var">f</span> : <span class="id" title="var">pr1</span> <span class="id" title="var">G</span> → <span class="id" title="var">pr1</span> <span class="id" title="var">H</span>) : <span class="id" title="var">UU</span> :=<br/>
&nbsp;&nbsp;(∏ (<span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">pr1</span> <span class="id" title="var">G</span>), (<span class="id" title="var">x</span> ≤ <span class="id" title="var">y</span>) &lt;-&gt; (<span class="id" title="var">f</span> <span class="id" title="var">x</span> ≤ <span class="id" title="var">f</span> <span class="id" title="var">y</span>)) × (<span class="id" title="var">f</span> (<span class="id" title="var">TRRG_root</span> <span class="id" title="var">G</span>) = <span class="id" title="var">TRRG_root</span> <span class="id" title="var">H</span>).<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">isaprop_isTRRGhomo</span> {<span class="id" title="var">G</span> <span class="id" title="var">H</span> : <span class="id" title="var">TRRGraph</span>} (<span class="id" title="var">f</span> : <span class="id" title="var">pr1</span> <span class="id" title="var">G</span> → <span class="id" title="var">pr1</span> <span class="id" title="var">H</span>) : <span class="id" title="var">isaprop</span> (<span class="id" title="var">isTRRGhomo</span> <span class="id" title="var">f</span>).<br/>
<a class="proof" href="#">Show proof.</a><br/><div class="proof">
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">isapropdirprod</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">repeat</span> (<span class="id" title="tactic">apply</span> <span class="id" title="var">impred</span> ; <span class="id" title="tactic">intros</span>). <span class="id" title="tactic">apply</span> <span class="id" title="var">isapropdirprod</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;-- <span class="id" title="tactic">repeat</span> (<span class="id" title="tactic">apply</span> <span class="id" title="var">impred</span>; <span class="id" title="tactic">intros</span>; <span class="id" title="tactic">apply</span> <span class="id" title="var">propproperty</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;-- <span class="id" title="tactic">repeat</span> (<span class="id" title="tactic">apply</span> <span class="id" title="var">impred</span>; <span class="id" title="tactic">intros</span>; <span class="id" title="tactic">apply</span> <span class="id" title="var">propproperty</span>).<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <span class="id" title="var">setproperty</span>.<br/>
</div>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">TRRGhomo_frompath</span> (<span class="id" title="var">X</span> <span class="id" title="var">Y</span> : <span class="id" title="var">hSet</span>) (<span class="id" title="var">G</span> : <span class="id" title="var">TRRGraphData</span> <span class="id" title="var">X</span>) (<span class="id" title="var">H</span> : <span class="id" title="var">TRRGraphData</span> <span class="id" title="var">Y</span>) (<span class="id" title="var">p</span> : <span class="id" title="var">X</span> = <span class="id" title="var">Y</span>) :<br/>
&nbsp;&nbsp;<span class="id" title="var">transportf</span> (<span class="id" title="var">λ</span> <span class="id" title="var">x</span> : <span class="id" title="var">hSet</span>, <span class="id" title="var">TRRGraphData</span> <span class="id" title="var">x</span>) <span class="id" title="var">p</span> <span class="id" title="var">G</span> = <span class="id" title="var">H</span> →<br/>
&nbsp;&nbsp;@<span class="id" title="var">isTRRGhomo</span> (<span class="id" title="var">X</span> ,, <span class="id" title="var">G</span>) (<span class="id" title="var">Y</span> ,, <span class="id" title="var">H</span>) (<span class="id" title="var">pr1weq</span> (<span class="id" title="var">hSet_univalence</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">p</span>)).<br/>
<a class="proof" href="#">Show proof.</a><br/><div class="proof">
&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">p</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">isTRRGhomo</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">q</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -&gt; <span class="id" title="var">idpath_transportf</span> <span class="id" title="tactic">in</span> <span class="id" title="var">q</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -&gt; <span class="id" title="var">q</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">P</span> ; <span class="id" title="tactic">apply</span> <span class="id" title="var">P</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -&gt; <span class="id" title="var">q</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">P</span> ; <span class="id" title="tactic">apply</span> <span class="id" title="var">P</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> -&gt; <span class="id" title="var">idpath_transportf</span> <span class="id" title="tactic">in</span> <span class="id" title="var">q</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">q</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
</div>

<br/>

<br/>
<span class="id" title="keyword">Local</span> <span class="id" title="keyword">Lemma</span> <span class="id" title="var">helper</span> (<span class="id" title="var">X</span> : <span class="id" title="var">hSet</span>) (<span class="id" title="var">E</span> <span class="id" title="var">E'</span> : <span class="id" title="var">X</span> → <span class="id" title="var">X</span> → <span class="id" title="var">hProp</span>) (<span class="id" title="var">r</span> <span class="id" title="var">r'</span> : <span class="id" title="var">X</span>) (<span class="id" title="var">isE</span> : <span class="id" title="var">isTRR</span> <span class="id" title="var">X</span> <span class="id" title="var">E</span> <span class="id" title="var">r</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">isE'</span> : <span class="id" title="var">isTRR</span> <span class="id" title="var">X</span> <span class="id" title="var">E'</span> <span class="id" title="var">r'</span>) (<span class="id" title="var">q</span> : <span class="id" title="var">E</span> = <span class="id" title="var">E'</span>) (σ : <span class="id" title="var">r</span> = <span class="id" title="var">r'</span>) :<br/>
&nbsp;&nbsp;<span class="id" title="var">transportf</span> (<span class="id" title="var">λ</span> <span class="id" title="var">x</span> : <span class="id" title="var">X</span> → <span class="id" title="var">X</span> → <span class="id" title="var">hProp</span>, ∑ <span class="id" title="var">r</span> : <span class="id" title="var">X</span>, <span class="id" title="var">isTRR</span> <span class="id" title="var">X</span> <span class="id" title="var">x</span> <span class="id" title="var">r</span>) <span class="id" title="var">q</span> (<span class="id" title="var">r</span> ,, <span class="id" title="var">isE</span>) = (<span class="id" title="var">r'</span> ,, <span class="id" title="var">isE'</span>).<br/>
<a class="proof" href="#">Show proof.</a><br/><div class="proof">
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">q</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">idpath_transportf</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">total2_paths_equiv</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">exists</span> σ.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">isaprop_isTRR</span> <span class="id" title="var">X</span> <span class="id" title="var">E</span> <span class="id" title="var">r'</span>).<br/>
</div>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">TRRGhomo_topath</span> (<span class="id" title="var">X</span> <span class="id" title="var">Y</span> : <span class="id" title="var">hSet</span>) (<span class="id" title="var">G</span> : <span class="id" title="var">TRRGraphData</span> <span class="id" title="var">X</span>) (<span class="id" title="var">H</span> : <span class="id" title="var">TRRGraphData</span> <span class="id" title="var">Y</span>) (<span class="id" title="var">p</span> : <span class="id" title="var">X</span> = <span class="id" title="var">Y</span>) :<br/>
&nbsp;&nbsp;@<span class="id" title="var">isTRRGhomo</span> (<span class="id" title="var">X</span> ,, <span class="id" title="var">G</span>) (<span class="id" title="var">Y</span> ,, <span class="id" title="var">H</span>) (<span class="id" title="var">pr1weq</span> (<span class="id" title="var">hSet_univalence</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">p</span>)) →<br/>
&nbsp;&nbsp;<span class="id" title="var">transportf</span> (<span class="id" title="var">λ</span> <span class="id" title="var">x</span> : <span class="id" title="var">hSet</span>, <span class="id" title="var">TRRGraphData</span> <span class="id" title="var">x</span>) <span class="id" title="var">p</span> <span class="id" title="var">G</span> = <span class="id" title="var">H</span>.<br/>
<a class="proof" href="#">Show proof.</a><br/><div class="proof">
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">p</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -&gt; <span class="id" title="var">idpath_transportf</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">P</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">isTRRGhomo</span> <span class="id" title="tactic">in</span> <span class="id" title="var">P</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">P</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">P</span> <span class="id" title="keyword">as</span> [π σ].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">q</span> : <span class="id" title="var">pr1</span> <span class="id" title="var">G</span> = <span class="id" title="var">pr1</span> <span class="id" title="var">H</span>).<br/>
&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">use</span> <span class="id" title="var">funextfun</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">homot</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">x</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">use</span> <span class="id" title="var">funextfun</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">homot</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">y</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">hPropUnivalence</span> (<span class="id" title="var">pr1</span> <span class="id" title="var">G</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>) (<span class="id" title="var">pr1</span> <span class="id" title="var">H</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>) (<span class="id" title="var">pr1</span> (π <span class="id" title="var">x</span> <span class="id" title="var">y</span>)) (<span class="id" title="var">pr2</span> (π <span class="id" title="var">x</span> <span class="id" title="var">y</span>))).<br/>
&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">total2_paths_equiv</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="var">q</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">helper</span> <span class="id" title="var">X</span> (<span class="id" title="var">pr1</span> <span class="id" title="var">G</span>) (<span class="id" title="var">pr1</span> <span class="id" title="var">H</span>) (<span class="id" title="var">pr12</span> <span class="id" title="var">G</span>) (<span class="id" title="var">pr12</span> <span class="id" title="var">H</span>) <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">q</span> σ).<br/>
</div>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">TRRGraphiso</span> (<span class="id" title="var">G</span> <span class="id" title="var">H</span> : <span class="id" title="var">TRRGraph</span>) : <span class="id" title="var">UU</span> := ∑ (<span class="id" title="var">f</span> : <span class="id" title="var">pr1</span> <span class="id" title="var">G</span> ≃ <span class="id" title="var">pr1</span> <span class="id" title="var">H</span>), <span class="id" title="var">isTRRGhomo</span> <span class="id" title="var">f</span>.<br/>

<br/>
<span class="id" title="keyword">Local</span> <span class="id" title="keyword">Notation</span> "G ≅ H" := (<span class="id" title="var">TRRGraphiso</span> <span class="id" title="var">G</span> <span class="id" title="var">H</span>).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">id_TRRGraphiso</span> (<span class="id" title="var">G</span> : <span class="id" title="var">TRRGraph</span>) : <span class="id" title="var">TRRGraphiso</span> <span class="id" title="var">G</span> <span class="id" title="var">G</span>.<br/>
<a class="proof" href="#">Show proof.</a><br/><div class="proof">
&nbsp;&nbsp;<span class="id" title="tactic">exists</span> (<span class="id" title="var">idweq</span> (<span class="id" title="var">pr1</span> <span class="id" title="var">G</span>)).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span>. <span class="id" title="var">use</span> <span class="id" title="var">isrefl_logeq</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">reflexivity</span>.<br/>
</div>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">TRRGraph_univalence_map</span> (<span class="id" title="var">G</span> <span class="id" title="var">H</span> : <span class="id" title="var">TRRGraph</span>) : (<span class="id" title="var">G</span> = <span class="id" title="var">H</span>) → (<span class="id" title="var">G</span> ≅ <span class="id" title="var">H</span>).<br/>
<a class="proof" href="#">Show proof.</a><br/><div class="proof">
&nbsp;&nbsp;<span class="id" title="tactic">intro</span> <span class="id" title="var">p</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">p</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">exact</span> (<span class="id" title="var">id_TRRGraphiso</span> <span class="id" title="var">G</span>).<br/>
</div>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">TRRGraph_univalence_weq1</span> (<span class="id" title="var">G</span> <span class="id" title="var">H</span> : <span class="id" title="var">TRRGraph</span>) : <span class="id" title="var">G</span> = <span class="id" title="var">H</span> ≃ <span class="id" title="var">G</span> ╝ <span class="id" title="var">H</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="var">total2_paths_equiv</span> <span class="id" title="var">_</span> <span class="id" title="var">G</span> <span class="id" title="var">H</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">TRRGraph_univalence_weq2</span> (<span class="id" title="var">G</span> <span class="id" title="var">H</span> : <span class="id" title="var">TRRGraph</span>) : <span class="id" title="var">G</span> ╝ <span class="id" title="var">H</span> ≃ <span class="id" title="var">G</span> ≅ <span class="id" title="var">H</span>.<br/>
<a class="proof" href="#">Show proof.</a><br/><div class="proof">
&nbsp;&nbsp;<span class="id" title="var">use</span> <span class="id" title="var">weqbandf</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">exact</span> (<span class="id" title="var">hSet_univalence</span> (<span class="id" title="var">pr1</span> <span class="id" title="var">G</span>) (<span class="id" title="var">pr1</span> <span class="id" title="var">H</span>)).<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intro</span> <span class="id" title="var">p</span>. <span class="id" title="tactic">simpl</span>. <span class="id" title="var">use</span> <span class="id" title="var">weqimplimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">intros</span> <span class="id" title="var">q</span>. <span class="id" title="tactic">exact</span> (<span class="id" title="var">TRRGhomo_frompath</span> (<span class="id" title="var">pr1</span> <span class="id" title="var">G</span>) (<span class="id" title="var">pr1</span> <span class="id" title="var">H</span>) (<span class="id" title="var">pr2</span> <span class="id" title="var">G</span>) (<span class="id" title="var">pr2</span> <span class="id" title="var">H</span>) <span class="id" title="var">p</span> <span class="id" title="var">q</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">intros</span> <span class="id" title="var">q</span>. <span class="id" title="tactic">exact</span> (<span class="id" title="var">TRRGhomo_topath</span> (<span class="id" title="var">pr1</span> <span class="id" title="var">G</span>) (<span class="id" title="var">pr1</span> <span class="id" title="var">H</span>) (<span class="id" title="var">pr2</span> <span class="id" title="var">G</span>) (<span class="id" title="var">pr2</span> <span class="id" title="var">H</span>) <span class="id" title="var">p</span> <span class="id" title="var">q</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">exact</span> (<span class="id" title="var">isaset_TRRGraphData</span> (<span class="id" title="var">pr1</span> <span class="id" title="var">H</span>) ((<span class="id" title="var">p</span> # <span class="id" title="var">pr2</span> <span class="id" title="var">G</span>)%<span class="id" title="var">transport</span>) (<span class="id" title="var">pr2</span> <span class="id" title="var">H</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">exact</span> (<span class="id" title="var">isaprop_isTRRGhomo</span> (<span class="id" title="var">hSet_univalence_map</span> (<span class="id" title="var">pr1</span> <span class="id" title="var">G</span>) (<span class="id" title="var">pr1</span> <span class="id" title="var">H</span>) <span class="id" title="var">p</span>)).<br/>
</div>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">TRRGraph_univalence_weq2_idpath</span> (<span class="id" title="var">G</span> : <span class="id" title="var">TRRGraph</span>) :<br/>
&nbsp;&nbsp;<span class="id" title="var">TRRGraph_univalence_weq2</span> <span class="id" title="var">G</span> <span class="id" title="var">G</span> (<span class="id" title="var">idpath</span> (<span class="id" title="var">pr1</span> <span class="id" title="var">G</span>) ,, <span class="id" title="var">idpath</span> (((<span class="id" title="var">idpath</span> (<span class="id" title="var">pr1</span> <span class="id" title="var">G</span>)) # <span class="id" title="var">pr2</span> <span class="id" title="var">G</span>)%<span class="id" title="var">transport</span>)) =<br/>
&nbsp;&nbsp;<span class="id" title="var">id_TRRGraphiso</span> <span class="id" title="var">G</span>.<br/>
<a class="proof" href="#">Show proof.</a><br/><div class="proof">
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">total2_paths_equiv</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">exists</span> (<span class="id" title="var">idpath</span> (<span class="id" title="var">idweq</span> (<span class="id" title="var">pr1</span> <span class="id" title="var">G</span>))).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">isaprop_isTRRGhomo</span>.<br/>
</div>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">TRRGraph_univalence_weq1_idpath</span> (<span class="id" title="var">G</span> : <span class="id" title="var">TRRGraph</span>) :<br/>
&nbsp;&nbsp;((<span class="id" title="var">TRRGraph_univalence_weq1</span> <span class="id" title="var">G</span> <span class="id" title="var">G</span>) (<span class="id" title="var">idpath</span> <span class="id" title="var">G</span>)) =<br/>
&nbsp;&nbsp;(<span class="id" title="var">idpath</span> (<span class="id" title="var">pr1</span> <span class="id" title="var">G</span>) ,, <span class="id" title="var">idpath</span> (((<span class="id" title="var">idpath</span> (<span class="id" title="var">pr1</span> <span class="id" title="var">G</span>)) # <span class="id" title="var">pr2</span> <span class="id" title="var">G</span>)%<span class="id" title="var">transport</span>)).<br/>
<a class="proof" href="#">Show proof.</a><br/><div class="proof">
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">total2_paths_equiv</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">exists</span> (<span class="id" title="var">idpath</span> (<span class="id" title="var">idpath</span> (<span class="id" title="var">pr1</span> <span class="id" title="var">G</span>))).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
</div>

<br/>
<span class="id" title="keyword">Theorem</span> <span class="id" title="var">isweq_TRRGraph_univalence_map</span> (<span class="id" title="var">G</span> <span class="id" title="var">H</span> : <span class="id" title="var">TRRGraph</span>) : <span class="id" title="var">isweq</span> (<span class="id" title="var">TRRGraph_univalence_map</span> <span class="id" title="var">G</span> <span class="id" title="var">H</span>).<br/>
<a class="proof" href="#">Show proof.</a><br/><div class="proof">
&nbsp;&nbsp;<span class="id" title="var">use</span> <span class="id" title="var">isweqhomot</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">exact</span> (<span class="id" title="var">weqcomp</span> (<span class="id" title="var">TRRGraph_univalence_weq1</span> <span class="id" title="var">G</span> <span class="id" title="var">H</span>) (<span class="id" title="var">TRRGraph_univalence_weq2</span> <span class="id" title="var">G</span> <span class="id" title="var">H</span>)).<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">e</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">e</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">use</span> (<span class="id" title="var">pathscomp0</span> <span class="id" title="var">weqcomp_to_funcomp_app</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">TRRGraph_univalence_weq1_idpath</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">TRRGraph_univalence_weq2_idpath</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">use</span> <span class="id" title="var">weqproperty</span>.<br/>
</div>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">TRRGraph_univalence</span> (<span class="id" title="var">G</span> <span class="id" title="var">H</span> : <span class="id" title="var">TRRGraph</span>) : (<span class="id" title="var">G</span> = <span class="id" title="var">H</span>) ≃ (<span class="id" title="var">G</span> ≅ <span class="id" title="var">H</span>).<br/>
<a class="proof" href="#">Show proof.</a><br/><div class="proof">
&nbsp;&nbsp;<span class="id" title="var">use</span> <span class="id" title="var">weqpair</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">exact</span> (<span class="id" title="var">TRRGraph_univalence_map</span> <span class="id" title="var">G</span> <span class="id" title="var">H</span>).<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">exact</span> (<span class="id" title="var">isweq_TRRGraph_univalence_map</span> <span class="id" title="var">G</span> <span class="id" title="var">H</span>).<br/>
</div>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">TRRGraph_univalence_compute</span> (<span class="id" title="var">G</span> <span class="id" title="var">H</span> : <span class="id" title="var">TRRGraph</span>) :<br/>
&nbsp;&nbsp;<span class="id" title="var">pr1</span> (<span class="id" title="var">TRRGraph_univalence</span> <span class="id" title="var">G</span> <span class="id" title="var">H</span>) = <span class="id" title="var">TRRGraph_univalence_map</span> <span class="id" title="var">G</span> <span class="id" title="var">H</span>.<br/>
<a class="proof" href="#">Show proof.</a><br/><div class="proof">
&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
</div>

<br/>
</div>

<div class="doc">
Definition of trees as a subtype <span class="inlinecode"><span class="id" title="var">Tree</span></span> of <span class="inlinecode"><span class="id" title="var">TRRGraph</span></span> and proof of univalence for trees
    <span class="inlinecode"><span class="id" title="var">Tree_univalence</span></span> 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">DownwardClosure</span> {<span class="id" title="var">G</span> : <span class="id" title="var">TRRGraph</span>} (<span class="id" title="var">x</span> : <span class="id" title="var">pr1</span> <span class="id" title="var">G</span>) : <span class="id" title="var">UU</span> :=<br/>
&nbsp;&nbsp;∑ <span class="id" title="var">y</span> : <span class="id" title="var">pr1</span> <span class="id" title="var">G</span>, <span class="id" title="var">y</span> ≤ <span class="id" title="var">x</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">antisymmetric</span> {<span class="id" title="var">G</span> :<span class="id" title="var">TRRGraph</span>} (<span class="id" title="var">y</span> <span class="id" title="var">z</span> : <span class="id" title="var">pr1</span> <span class="id" title="var">G</span>) : <span class="id" title="var">UU</span> :=<br/>
&nbsp;&nbsp;(<span class="id" title="var">y</span> ≤ <span class="id" title="var">z</span>) × (<span class="id" title="var">z</span> ≤ <span class="id" title="var">y</span>) → (<span class="id" title="var">z</span> = <span class="id" title="var">y</span>).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">total</span> {<span class="id" title="var">G</span> : <span class="id" title="var">TRRGraph</span>} (<span class="id" title="var">y</span> <span class="id" title="var">z</span> : <span class="id" title="var">pr1</span> <span class="id" title="var">G</span>) : <span class="id" title="var">hProp</span> :=<br/>
&nbsp;&nbsp;(<span class="id" title="var">y</span> ≤ <span class="id" title="var">z</span>) ∨ (<span class="id" title="var">z</span> ≤ <span class="id" title="var">y</span>).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">isatree</span> (<span class="id" title="var">G</span> : <span class="id" title="var">TRRGraph</span>) : <span class="id" title="var">UU</span> :=<br/>
&nbsp;&nbsp;∏ (<span class="id" title="var">x</span> : <span class="id" title="var">pr1</span> <span class="id" title="var">G</span>) (<span class="id" title="var">y</span> <span class="id" title="var">z</span> : <span class="id" title="var">DownwardClosure</span> <span class="id" title="var">x</span>), <span class="id" title="var">antisymmetric</span> (<span class="id" title="var">pr1</span> <span class="id" title="var">y</span>) (<span class="id" title="var">pr1</span> <span class="id" title="var">z</span>) × <span class="id" title="var">total</span> (<span class="id" title="var">pr1</span> <span class="id" title="var">y</span>) (<span class="id" title="var">pr1</span> <span class="id" title="var">z</span>).<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">isaprop_isatree</span> (<span class="id" title="var">G</span> : <span class="id" title="var">TRRGraph</span>) : <span class="id" title="var">isaprop</span> (<span class="id" title="var">isatree</span> <span class="id" title="var">G</span>).<br/>
<a class="proof" href="#">Show proof.</a><br/><div class="proof">
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">impred</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">t</span> ; <span class="id" title="tactic">apply</span> <span class="id" title="var">impred</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">x</span> ; <span class="id" title="tactic">apply</span> <span class="id" title="var">impred</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">y</span> ; <span class="id" title="tactic">apply</span> <span class="id" title="var">isapropdirprod</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <span class="id" title="var">impred</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">P</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">setproperty</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <span class="id" title="var">propproperty</span>.<br/>
</div>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">Tree</span> : <span class="id" title="var">UU</span> :=  ∑ <span class="id" title="var">G</span> : <span class="id" title="var">TRRGraph</span>, <span class="id" title="var">isatree</span> <span class="id" title="var">G</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">Tree_iso</span> (<span class="id" title="var">T1</span> <span class="id" title="var">T2</span> : <span class="id" title="var">Tree</span>) : <span class="id" title="var">UU</span> := <span class="id" title="var">pr1</span> <span class="id" title="var">T1</span> ≅ <span class="id" title="var">pr1</span> <span class="id" title="var">T2</span>.<br/>

<br/>
<span class="id" title="keyword">Theorem</span> <span class="id" title="var">Tree_univalence</span> (<span class="id" title="var">T1</span> <span class="id" title="var">T2</span> : <span class="id" title="var">Tree</span>) : (<span class="id" title="var">T1</span> = <span class="id" title="var">T2</span>) ≃ (<span class="id" title="var">Tree_iso</span> <span class="id" title="var">T1</span> <span class="id" title="var">T2</span>).<br/>
<a class="proof" href="#">Show proof.</a><br/><div class="proof">
&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">P</span> := <span class="id" title="var">λ</span> <span class="id" title="var">G</span>, <span class="id" title="var">λ</span> <span class="id" title="var">H</span>, <span class="id" title="var">TRRGraph_univalence</span> <span class="id" title="var">G</span> <span class="id" title="var">H</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">Q</span> := <span class="id" title="var">λ</span> <span class="id" title="var">G</span>, (<span class="id" title="var">isatree</span> <span class="id" title="var">G</span> ,, <span class="id" title="var">isaprop_isatree</span> <span class="id" title="var">G</span>)).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">substructure_univalence</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">P</span> <span class="id" title="var">Q</span> <span class="id" title="var">T1</span> <span class="id" title="var">T2</span>).<br/>
</div>

<br/>
</div>

<div class="doc">
Definition of branches ("upward closures") for <span class="inlinecode"><span class="id" title="var">Tree</span></span>s as a tree <span class="inlinecode"><span class="id" title="var">Up</span></span> <span class="inlinecode"><a class="idref" href="UniMath.Foundations.PartA.html#x"><span class="id" title="variable">x</span></a></span> for a point x of T 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">Upw_underlying</span> (<span class="id" title="var">T</span> : <span class="id" title="var">Tree</span>) (<span class="id" title="var">x</span> : <span class="id" title="var">pr11</span> <span class="id" title="var">T</span>) := ∑ (<span class="id" title="var">y</span> : <span class="id" title="var">pr11</span> <span class="id" title="var">T</span>), <span class="id" title="var">x</span> ≤ <span class="id" title="var">y</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">isaset_Upw_underlying</span> (<span class="id" title="var">T</span> : <span class="id" title="var">Tree</span>) (<span class="id" title="var">x</span> : <span class="id" title="var">pr11</span> <span class="id" title="var">T</span>) : <span class="id" title="var">isaset</span> (<span class="id" title="var">Upw_underlying</span> <span class="id" title="var">T</span> <span class="id" title="var">x</span>).<br/>
<a class="proof" href="#">Show proof.</a><br/><div class="proof">
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">isaset_total2</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">setproperty</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">y</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">hProp_to_hSet</span>.<br/>
</div>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">Upw</span> (<span class="id" title="var">T</span> : <span class="id" title="var">Tree</span>) (<span class="id" title="var">x</span> : <span class="id" title="var">pr11</span> <span class="id" title="var">T</span>) : <span class="id" title="var">hSet</span> :=<br/>
&nbsp;&nbsp;(∑ (<span class="id" title="var">y</span> : <span class="id" title="var">pr11</span> <span class="id" title="var">T</span>), <span class="id" title="var">pr121</span> <span class="id" title="var">T</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>) ,, (<span class="id" title="var">isaset_Upw_underlying</span> <span class="id" title="var">T</span> <span class="id" title="var">x</span>).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">Upw_E</span> (<span class="id" title="var">T</span> : <span class="id" title="var">Tree</span>) (<span class="id" title="var">x</span> : <span class="id" title="var">pr11</span> <span class="id" title="var">T</span>) (<span class="id" title="var">y</span> <span class="id" title="var">z</span> : <span class="id" title="var">Upw</span> <span class="id" title="var">T</span> <span class="id" title="var">x</span>) : <span class="id" title="var">hProp</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="var">pr121</span> <span class="id" title="var">T</span> (<span class="id" title="var">pr1</span> <span class="id" title="var">y</span>) (<span class="id" title="var">pr1</span> <span class="id" title="var">z</span>).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">Upw_to_PointedGraph</span> (<span class="id" title="var">T</span> : <span class="id" title="var">Tree</span>) (<span class="id" title="var">x</span> : <span class="id" title="var">pr11</span> <span class="id" title="var">T</span>) : <span class="id" title="var">PointedGraph</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="var">Upw</span> <span class="id" title="var">T</span> <span class="id" title="var">x</span> ,, <span class="id" title="var">Upw_E</span> <span class="id" title="var">T</span> <span class="id" title="var">x</span> ,, (<span class="id" title="var">x</span> ,, <span class="id" title="var">selfedge</span> (<span class="id" title="var">pr1</span> <span class="id" title="var">T</span>) <span class="id" title="var">x</span>).<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">Upw_reflexive</span> (<span class="id" title="var">T</span> : <span class="id" title="var">Tree</span>) (<span class="id" title="var">x</span> : <span class="id" title="var">pr11</span> <span class="id" title="var">T</span>) :<br/>
&nbsp;&nbsp;∏ (<span class="id" title="var">y</span> : <span class="id" title="var">pr1</span> (<span class="id" title="var">Upw_to_PointedGraph</span> <span class="id" title="var">T</span> <span class="id" title="var">x</span>)), <span class="id" title="var">pr12</span> (<span class="id" title="var">Upw_to_PointedGraph</span> <span class="id" title="var">T</span> <span class="id" title="var">x</span>) <span class="id" title="var">y</span> <span class="id" title="var">y</span>.<br/>
<a class="proof" href="#">Show proof.</a><br/><div class="proof">
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">y</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">Upw_E</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">exact</span> (<span class="id" title="var">selfedge</span> (<span class="id" title="var">pr1</span> <span class="id" title="var">T</span>) (<span class="id" title="var">pr1</span> <span class="id" title="var">y</span>)).<br/>
</div>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">Upw_transitive</span> (<span class="id" title="var">T</span> : <span class="id" title="var">Tree</span>) (<span class="id" title="var">x</span> : <span class="id" title="var">pr11</span> <span class="id" title="var">T</span>) :<br/>
&nbsp;&nbsp;∏ <span class="id" title="var">y</span> <span class="id" title="var">z</span> <span class="id" title="var">w</span>, (<span class="id" title="var">Upw_E</span> <span class="id" title="var">T</span> <span class="id" title="var">x</span>) <span class="id" title="var">y</span> <span class="id" title="var">z</span> → (<span class="id" title="var">Upw_E</span> <span class="id" title="var">T</span> <span class="id" title="var">x</span>) <span class="id" title="var">z</span> <span class="id" title="var">w</span> → (<span class="id" title="var">Upw_E</span> <span class="id" title="var">T</span> <span class="id" title="var">x</span>) <span class="id" title="var">y</span> <span class="id" title="var">w</span>.<br/>
<a class="proof" href="#">Show proof.</a><br/><div class="proof">
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">y</span> <span class="id" title="var">z</span> <span class="id" title="var">w</span> <span class="id" title="var">P</span> <span class="id" title="var">Q</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">Upw_E</span> <span class="id" title="tactic">in</span> <span class="id" title="var">P</span>. <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">P</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">exact</span> (<span class="id" title="var">TRRG_transitivity</span> (<span class="id" title="var">pr1</span> <span class="id" title="var">T</span>) (<span class="id" title="var">pr1</span> <span class="id" title="var">y</span>) (<span class="id" title="var">pr1</span> <span class="id" title="var">z</span>) (<span class="id" title="var">pr1</span> <span class="id" title="var">w</span>) <span class="id" title="var">P</span> <span class="id" title="var">Q</span>).<br/>
</div>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">Upw_rooted</span> (<span class="id" title="var">T</span> : <span class="id" title="var">Tree</span>) (<span class="id" title="var">x</span> : <span class="id" title="var">pr11</span> <span class="id" title="var">T</span>) : ∏ <span class="id" title="var">y</span>, (<span class="id" title="var">Upw_E</span> <span class="id" title="var">T</span> <span class="id" title="var">x</span>) (<span class="id" title="var">x</span> ,, <span class="id" title="var">selfedge</span> (<span class="id" title="var">pr1</span> <span class="id" title="var">T</span>)  <span class="id" title="var">x</span>) <span class="id" title="var">y</span>.<br/>
<a class="proof" href="#">Show proof.</a><br/><div class="proof">
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">y</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">exact</span> (<span class="id" title="var">pr2</span> <span class="id" title="var">y</span>).<br/>
</div>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">Upw_to_TRRGraph</span> (<span class="id" title="var">T</span> : <span class="id" title="var">Tree</span>) (<span class="id" title="var">x</span> : <span class="id" title="var">pr11</span> <span class="id" title="var">T</span>) : <span class="id" title="var">TRRGraph</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="var">pr1</span> (<span class="id" title="var">Upw_to_PointedGraph</span> <span class="id" title="var">T</span> <span class="id" title="var">x</span>) ,, <span class="id" title="var">pr12</span> (<span class="id" title="var">Upw_to_PointedGraph</span> <span class="id" title="var">T</span> <span class="id" title="var">x</span>) ,, <span class="id" title="var">pr22</span> (<span class="id" title="var">Upw_to_PointedGraph</span> <span class="id" title="var">T</span> <span class="id" title="var">x</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;,, <span class="id" title="var">Upw_reflexive</span> <span class="id" title="var">T</span> <span class="id" title="var">x</span> ,, <span class="id" title="var">Upw_transitive</span> <span class="id" title="var">T</span> <span class="id" title="var">x</span> ,, <span class="id" title="var">Upw_rooted</span> <span class="id" title="var">T</span> <span class="id" title="var">x</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">isatree_Upw</span> (<span class="id" title="var">T</span> : <span class="id" title="var">Tree</span>) (<span class="id" title="var">x</span> : <span class="id" title="var">pr11</span> <span class="id" title="var">T</span>) : <span class="id" title="var">isatree</span> (<span class="id" title="var">Upw_to_TRRGraph</span> <span class="id" title="var">T</span> <span class="id" title="var">x</span>).<br/>
<a class="proof" href="#">Show proof.</a><br/><div class="proof">
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">isatree</span>. <span class="id" title="tactic">intros</span> <span class="id" title="var">a</span>. <span class="id" title="tactic">intros</span> <span class="id" title="var">y</span> <span class="id" title="var">z</span>. <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">zzz</span> := ((<span class="id" title="var">pr1</span> (<span class="id" title="var">pr1</span> <span class="id" title="var">z</span>)))). <span class="id" title="tactic">set</span> (<span class="id" title="var">zz</span> := (<span class="id" title="var">pr1</span> <span class="id" title="var">z</span>)).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">yyy</span> := ((<span class="id" title="var">pr1</span> (<span class="id" title="var">pr1</span> <span class="id" title="var">y</span>)))). <span class="id" title="tactic">set</span> (<span class="id" title="var">yy</span> := (<span class="id" title="var">pr1</span> <span class="id" title="var">y</span>)).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">Eya</span> : <span class="id" title="var">pr121</span> <span class="id" title="var">T</span> <span class="id" title="var">yyy</span> (<span class="id" title="var">pr1</span> <span class="id" title="var">a</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">DownwardClosure</span> <span class="id" title="tactic">in</span> <span class="id" title="var">y</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">y</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">y</span> σ]. <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">apply</span> σ.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">Eza</span> : <span class="id" title="var">pr121</span> <span class="id" title="var">T</span> <span class="id" title="var">zzz</span> (<span class="id" title="var">pr1</span> <span class="id" title="var">a</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">DownwardClosure</span> <span class="id" title="tactic">in</span> <span class="id" title="var">z</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">z</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">z</span> σ]. <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">apply</span> σ.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;-  <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">antisymmetric</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">X</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">X</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">yz</span> <span class="id" title="var">zy</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">L1</span> : <span class="id" title="var">zzz</span> = <span class="id" title="var">yyy</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">a</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">pr1</span> (<span class="id" title="var">pr2</span> (<span class="id" title="var">T</span>) (<span class="id" title="var">pr1</span> <span class="id" title="var">a</span>) (<span class="id" title="var">yyy</span> ,, <span class="id" title="var">Eya</span>) (<span class="id" title="var">zzz</span> ,, <span class="id" title="var">Eza</span>)) (<span class="id" title="var">yz</span> ,, <span class="id" title="var">zy</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">p</span> : <span class="id" title="var">pr1</span> <span class="id" title="var">zz</span> = <span class="id" title="var">pr1</span> <span class="id" title="var">yy</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">L1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">Upw_to_TRRGraph</span> <span class="id" title="tactic">in</span> <span class="id" title="var">zz</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">Upw_to_TRRGraph</span> <span class="id" title="tactic">in</span> <span class="id" title="var">yy</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">zz</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">yy</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">q</span> : <span class="id" title="var">pr2</span> <span class="id" title="var">zz</span> = <span class="id" title="var">transportb</span> (<span class="id" title="var">λ</span> <span class="id" title="var">w</span>, <span class="id" title="var">pr121</span> <span class="id" title="var">T</span> <span class="id" title="var">x</span> <span class="id" title="var">w</span>) <span class="id" title="var">p</span> (<span class="id" title="var">pr2</span> <span class="id" title="var">yy</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">proofirrelevance</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">pr2</span> (<span class="id" title="var">pr121</span> <span class="id" title="var">T</span> <span class="id" title="var">x</span> (<span class="id" title="var">pr1</span> <span class="id" title="var">zz</span>))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">total2_paths_b</span> <span class="id" title="var">p</span> <span class="id" title="var">q</span>).<br/>
&nbsp;&nbsp;-  <span class="id" title="tactic">assert</span> (<span class="id" title="var">L</span> : <span class="id" title="var">pr121</span> <span class="id" title="var">T</span> <span class="id" title="var">yyy</span> <span class="id" title="var">zzz</span> ∨ <span class="id" title="var">pr121</span> <span class="id" title="var">T</span> <span class="id" title="var">zzz</span> <span class="id" title="var">yyy</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">pr2</span> ((<span class="id" title="var">pr2</span> (<span class="id" title="var">T</span>)) (<span class="id" title="var">pr1</span> <span class="id" title="var">a</span>) (<span class="id" title="var">yyy</span> ,, <span class="id" title="var">Eya</span>) (<span class="id" title="var">zzz</span> ,, <span class="id" title="var">Eza</span>))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">L</span>.<br/>
</div>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">Up</span> {<span class="id" title="var">T</span> : <span class="id" title="var">Tree</span>} (<span class="id" title="var">x</span> : <span class="id" title="var">pr11</span> <span class="id" title="var">T</span>) : <span class="id" title="var">Tree</span> := (<span class="id" title="var">Upw_to_TRRGraph</span> <span class="id" title="var">T</span> <span class="id" title="var">x</span> ,, <span class="id" title="var">isatree_Upw</span> <span class="id" title="var">T</span> <span class="id" title="var">x</span>).<br/>

<br/>
</div>

<div class="doc">
Definition of rigid <span class="inlinecode"><span class="id" title="var">isrigid</span></span> and superrigid <span class="inlinecode"><span class="id" title="var">issuperrigid</span></span> trees 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">isrigid</span> (<span class="id" title="var">T</span> : <span class="id" title="var">Tree</span>) : <span class="id" title="var">UU</span><br/>
&nbsp;&nbsp;:= <span class="id" title="var">iscontr</span> (<span class="id" title="var">T</span> = <span class="id" title="var">T</span>).<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">isaprop_isrigid</span> (<span class="id" title="var">T</span> : <span class="id" title="var">Tree</span>) : <span class="id" title="var">isaprop</span> (<span class="id" title="var">isrigid</span> <span class="id" title="var">T</span>).<br/>
<a class="proof" href="#">Show proof.</a><br/><div class="proof">
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">isrigid</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">isapropiscontr</span>.<br/>
</div>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">issuperrigid</span> (<span class="id" title="var">T</span> : <span class="id" title="var">Tree</span>) : <span class="id" title="var">UU</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="var">isrigid</span> <span class="id" title="var">T</span> × (∏ (<span class="id" title="var">x</span> : <span class="id" title="var">pr11</span> <span class="id" title="var">T</span>), <span class="id" title="var">isrigid</span> (<span class="id" title="var">Up</span> <span class="id" title="var">x</span>)).<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">isaprop_issuperrigid</span> (<span class="id" title="var">T</span> : <span class="id" title="var">Tree</span>) : <span class="id" title="var">isaprop</span> (<span class="id" title="var">issuperrigid</span> <span class="id" title="var">T</span>).<br/>
<a class="proof" href="#">Show proof.</a><br/><div class="proof">
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">issuperrigid</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">isapropdirprod</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">isaprop_isrigid</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">impred</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">t</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">isaprop_isrigid</span>.<br/>
</div>

<br/>
</div>

<div class="doc">
Definition of bi-well-founded trees (well-founded both "up" and "down") <span class="inlinecode"><span class="id" title="var">Tree_isWellFounded</span></span> 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">isWellFoundedUp</span> (<span class="id" title="var">T</span> : <span class="id" title="var">Tree</span>) : <span class="id" title="var">hProp</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="var">hasSmallest</span> (<span class="id" title="var">pr121</span> <span class="id" title="var">T</span>).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">hasLargest</span> {<span class="id" title="var">X</span> : <span class="id" title="var">UU</span>} (<span class="id" title="var">R</span> : <span class="id" title="var">hrel</span> <span class="id" title="var">X</span>) : <span class="id" title="var">hProp</span> :=<br/>
&nbsp;&nbsp;∀ <span class="id" title="var">S</span> : <span class="id" title="var">hsubtype</span> <span class="id" title="var">X</span>, (∃ <span class="id" title="var">x</span>, <span class="id" title="var">S</span> <span class="id" title="var">x</span>) ⇒ ∃ <span class="id" title="var">x</span>:<span class="id" title="var">X</span>, <span class="id" title="var">S</span> <span class="id" title="var">x</span> ∧ ∀ <span class="id" title="var">y</span>:<span class="id" title="var">X</span>, <span class="id" title="var">S</span> <span class="id" title="var">y</span> ⇒ <span class="id" title="var">R</span> <span class="id" title="var">y</span> <span class="id" title="var">x</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">isWellFoundedDown</span> (<span class="id" title="var">T</span> : <span class="id" title="var">Tree</span>) := <span class="id" title="var">hasLargest</span> (<span class="id" title="var">pr121</span> <span class="id" title="var">T</span>).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">Tree_isWellFounded</span> (<span class="id" title="var">T</span> : <span class="id" title="var">Tree</span>) := (<span class="id" title="var">isWellFoundedUp</span> <span class="id" title="var">T</span>) × (<span class="id" title="var">isWellFoundedDown</span> <span class="id" title="var">T</span>).<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">isaprop_Tree_isWellFounded</span> (<span class="id" title="var">T</span> : <span class="id" title="var">Tree</span>) : <span class="id" title="var">isaprop</span> (<span class="id" title="var">Tree_isWellFounded</span> <span class="id" title="var">T</span>).<br/>
<a class="proof" href="#">Show proof.</a><br/><div class="proof">
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">isapropdirprod</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">propproperty</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">propproperty</span>.<br/>
</div>

<br/>
</div>

<div class="doc">
The definition of pre-ZF structures <span class="inlinecode"><span class="id" title="var">preZFS</span></span>. 
<div class="paragraph"> </div>


<div class="paragraph"> </div>

   <span class="inlinecode"><span class="id" title="var">preZFS</span></span> is classically equivalent to the <span class="inlinecode"><span class="id" title="var">ZFS</span></span> we define below but, as far as we can tell,
   constructively inequivalent.

<div class="paragraph"> </div>


</div>
<div class="code">

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">ispreZFS</span> (<span class="id" title="var">T</span> : <span class="id" title="var">Tree</span>) : <span class="id" title="var">UU</span> := (<span class="id" title="var">Tree_isWellFounded</span> <span class="id" title="var">T</span>) × (<span class="id" title="var">issuperrigid</span> <span class="id" title="var">T</span>).<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">isaprop_ispreZFS</span> (<span class="id" title="var">T</span> : <span class="id" title="var">Tree</span>) : <span class="id" title="var">isaprop</span> (<span class="id" title="var">ispreZFS</span> <span class="id" title="var">T</span>).<br/>
<a class="proof" href="#">Show proof.</a><br/><div class="proof">
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">isapropdirprod</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">isaprop_Tree_isWellFounded</span> <span class="id" title="var">T</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">isaprop_issuperrigid</span> <span class="id" title="var">T</span>).<br/>
</div>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">preZFS</span> : <span class="id" title="var">UU</span> := ∑ (<span class="id" title="var">T</span> : <span class="id" title="var">Tree</span>), <span class="id" title="var">ispreZFS</span> <span class="id" title="var">T</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">Ve</span> (<span class="id" title="var">X</span> : <span class="id" title="var">preZFS</span>) : <span class="id" title="var">hSet</span> := <span class="id" title="var">pr111</span> <span class="id" title="var">X</span>.<br/>
<span class="id" title="keyword">Coercion</span> <span class="id" title="var">Ve</span> : <span class="id" title="var">preZFS</span> &gt;-&gt; <span class="id" title="var">hSet</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">Ed</span> (<span class="id" title="var">X</span> : <span class="id" title="var">preZFS</span>) : (<span class="id" title="var">Ve</span> <span class="id" title="var">X</span>) → (<span class="id" title="var">Ve</span> <span class="id" title="var">X</span>) → <span class="id" title="var">hProp</span> := <span class="id" title="var">pr1</span> (<span class="id" title="var">pr2</span> (<span class="id" title="var">pr1</span> (<span class="id" title="var">pr1</span> <span class="id" title="var">X</span>))).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">root</span> (<span class="id" title="var">X</span> : <span class="id" title="var">preZFS</span>) : <span class="id" title="var">Ve</span> <span class="id" title="var">X</span> := <span class="id" title="var">pr1</span> (<span class="id" title="var">pr2</span> (<span class="id" title="var">pr2</span> (<span class="id" title="var">pr1</span> (<span class="id" title="var">pr1</span> <span class="id" title="var">X</span>)))).<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">preZFS_isrigid</span> (<span class="id" title="var">X</span> : <span class="id" title="var">preZFS</span>) : <span class="id" title="var">iscontr</span> (<span class="id" title="var">X</span> = <span class="id" title="var">X</span>).<br/>
<a class="proof" href="#">Show proof.</a><br/><div class="proof">
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">pr1contr_to_contr</span> <span class="id" title="var">_</span> (<span class="id" title="var">λ</span> <span class="id" title="var">x</span>, (<span class="id" title="var">ispreZFS</span> <span class="id" title="var">x</span> ,, <span class="id" title="var">isaprop_ispreZFS</span> <span class="id" title="var">x</span>)) <span class="id" title="var">X</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">exact</span> (<span class="id" title="var">pr122</span> <span class="id" title="var">X</span>).<br/>
</div>

<br/>
<span class="id" title="keyword">Theorem</span> <span class="id" title="var">isaset_preZFS</span> : <span class="id" title="var">isaset</span> <span class="id" title="var">preZFS</span>.<br/>
<a class="proof" href="#">Show proof.</a><br/><div class="proof">
&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">isaset</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">isaprop</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">p</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">p</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">q</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">hlevelntosn</span> 0 (<span class="id" title="var">x</span> = <span class="id" title="var">x</span>) (<span class="id" title="var">preZFS_isrigid</span> <span class="id" title="var">x</span>) (<span class="id" title="var">idpath</span> <span class="id" title="var">x</span>) <span class="id" title="var">q</span>).<br/>
</div>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">preZFS_iso</span> (<span class="id" title="var">X</span> <span class="id" title="var">Y</span> : <span class="id" title="var">preZFS</span>) : <span class="id" title="var">UU</span> := <span class="id" title="var">Tree_iso</span> (<span class="id" title="var">pr1</span> <span class="id" title="var">X</span>) (<span class="id" title="var">pr1</span> <span class="id" title="var">Y</span>).<br/>

<br/>
<span class="id" title="keyword">Theorem</span> <span class="id" title="var">preZFS_univalence</span> (<span class="id" title="var">X</span> <span class="id" title="var">Y</span> : <span class="id" title="var">preZFS</span>) : (<span class="id" title="var">X</span> = <span class="id" title="var">Y</span>) ≃ (<span class="id" title="var">preZFS_iso</span> <span class="id" title="var">X</span> <span class="id" title="var">Y</span>).<br/>
<a class="proof" href="#">Show proof.</a><br/><div class="proof">
&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">P</span> := <span class="id" title="var">λ</span> <span class="id" title="var">x</span>, <span class="id" title="var">λ</span> <span class="id" title="var">y</span>, <span class="id" title="var">Tree_univalence</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">Q</span> := <span class="id" title="var">λ</span> <span class="id" title="var">x</span>, (<span class="id" title="var">ispreZFS</span> <span class="id" title="var">x</span> ,, <span class="id" title="var">isaprop_ispreZFS</span> <span class="id" title="var">x</span>)).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">exact</span> (<span class="id" title="var">substructure_univalence</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">P</span> <span class="id" title="var">Q</span> <span class="id" title="var">X</span> <span class="id" title="var">Y</span>).<br/>
</div>

<br/>

<br/>

<br/>
</div>

<div class="doc">
Contents 
<div class="paragraph"> </div>


<div class="paragraph"> </div>

<ul class="doclist">
<li>Upward Closure ("Branch") of a node x in a pre-ZF structure T

</li>
<li>Proof that it is a pre-ZF structure <span class="inlinecode"><span class="id" title="var">Branch</span></span>

</li>
</ul>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">preZFS_Branch</span> (<span class="id" title="var">T</span> : <span class="id" title="var">preZFS</span>) (<span class="id" title="var">x</span> : <span class="id" title="var">T</span>) : <span class="id" title="var">Tree</span> := <span class="id" title="var">Up</span> <span class="id" title="var">x</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">preZFS_Branch_hsubtype_tohsubtype</span> (<span class="id" title="var">T</span> : <span class="id" title="var">preZFS</span>) (<span class="id" title="var">x</span> : <span class="id" title="var">T</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">S</span> : <span class="id" title="var">hsubtype</span> (<span class="id" title="var">pr11</span> (<span class="id" title="var">preZFS_Branch</span> <span class="id" title="var">T</span> <span class="id" title="var">x</span>))) : <span class="id" title="var">hsubtype</span> (<span class="id" title="var">pr111</span> <span class="id" title="var">T</span>) :=<br/>
&nbsp;&nbsp;<span class="id" title="var">λ</span> <span class="id" title="var">t</span>, ∃ <span class="id" title="var">e</span>, <span class="id" title="var">S</span> (<span class="id" title="var">t</span> ,, <span class="id" title="var">e</span>).<br/>

<br/>
</div>

<div class="doc">
REMARK : The definition <span class="inlinecode"><span class="id" title="var">preZFS_Branch_hsubtype_tohsubtype</span></span> probably does not need to be
truncated. One can define it without truncation and prove the lemmas that it is a proposition.

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">hsubtype_to_preZFS_Branch_hsubtype</span> (<span class="id" title="var">T</span> : <span class="id" title="var">preZFS</span>) (<span class="id" title="var">x</span> : <span class="id" title="var">T</span>) (<span class="id" title="var">S</span> : <span class="id" title="var">hsubtype</span> (<span class="id" title="var">pr111</span> <span class="id" title="var">T</span>)) :<br/>
&nbsp;&nbsp;<span class="id" title="var">hsubtype</span> (<span class="id" title="var">pr11</span> (<span class="id" title="var">preZFS_Branch</span> <span class="id" title="var">T</span> <span class="id" title="var">x</span>)) := <span class="id" title="var">λ</span> <span class="id" title="var">z</span>, <span class="id" title="var">S</span> (<span class="id" title="var">pr1</span> <span class="id" title="var">z</span>) ∧ <span class="id" title="var">Ed</span> <span class="id" title="var">T</span> <span class="id" title="var">x</span> (<span class="id" title="var">pr1</span> <span class="id" title="var">z</span>).<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">Branch_to_subtype</span> (<span class="id" title="var">T</span> : <span class="id" title="var">preZFS</span>) (<span class="id" title="var">x</span> : <span class="id" title="var">T</span>) (<span class="id" title="var">S</span> : <span class="id" title="var">hsubtype</span> (<span class="id" title="var">pr11</span> (<span class="id" title="var">preZFS_Branch</span> <span class="id" title="var">T</span> <span class="id" title="var">x</span>)))<br/>
&nbsp;&nbsp;: <span class="id" title="var">hsubtype_to_preZFS_Branch_hsubtype</span> <span class="id" title="var">T</span> <span class="id" title="var">x</span> (<span class="id" title="var">preZFS_Branch_hsubtype_tohsubtype</span> <span class="id" title="var">T</span> <span class="id" title="var">x</span> <span class="id" title="var">S</span>) = <span class="id" title="var">S</span>.<br/>
<a class="proof" href="#">Show proof.</a><br/><div class="proof">
&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">H</span> := (<span class="id" title="var">hsubtype_to_preZFS_Branch_hsubtype</span> <span class="id" title="var">T</span> <span class="id" title="var">x</span> (<span class="id" title="var">preZFS_Branch_hsubtype_tohsubtype</span> <span class="id" title="var">T</span> <span class="id" title="var">x</span> <span class="id" title="var">S</span>))).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">funextfunPreliminaryUAH</span> <span class="id" title="var">univalenceAxiom</span> (<span class="id" title="var">pr11</span> (<span class="id" title="var">preZFS_Branch</span> <span class="id" title="var">T</span> <span class="id" title="var">x</span>)) <span class="id" title="var">hProp</span> <span class="id" title="var">H</span> <span class="id" title="var">S</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">homot</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">y</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">preZFS_Branch_hsubtype_tohsubtype</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">hsubtype_to_preZFS_Branch_hsubtype</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">ES</span> : ((∃ <span class="id" title="var">e</span> : <span class="id" title="var">Ed</span> <span class="id" title="var">T</span> <span class="id" title="var">x</span> (<span class="id" title="var">pr1</span> <span class="id" title="var">y</span>), <span class="id" title="var">S</span> (<span class="id" title="var">pr1</span> <span class="id" title="var">y</span>,, <span class="id" title="var">e</span>)) ∧ <span class="id" title="var">Ed</span> <span class="id" title="var">T</span> <span class="id" title="var">x</span> (<span class="id" title="var">pr1</span> <span class="id" title="var">y</span>)) -&gt; <span class="id" title="var">S</span> <span class="id" title="var">y</span>).<br/>
&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">X</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">X</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">ε</span> <span class="id" title="var">e</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">ε</span> (<span class="id" title="var">S</span> <span class="id" title="var">y</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">X</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">y</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">X</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">y</span> <span class="id" title="var">z</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">z</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">y</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> ( <span class="id" title="var">p</span> : <span class="id" title="var">y</span> = <span class="id" title="var">pr2</span> ).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">propproperty</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">p</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">z</span>.<br/>
&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">SE</span> : ((∃ <span class="id" title="var">e</span> : <span class="id" title="var">Ed</span> <span class="id" title="var">T</span> <span class="id" title="var">x</span> (<span class="id" title="var">pr1</span> <span class="id" title="var">y</span>), <span class="id" title="var">S</span> (<span class="id" title="var">pr1</span> <span class="id" title="var">y</span>,, <span class="id" title="var">e</span>)) ∧ <span class="id" title="var">Ed</span> <span class="id" title="var">T</span> <span class="id" title="var">x</span> (<span class="id" title="var">pr1</span> <span class="id" title="var">y</span>)) &lt;- <span class="id" title="var">S</span> <span class="id" title="var">y</span>).<br/>
&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">X</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">ishinh_UU</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">P</span> <span class="id" title="var">Q</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">Q</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> (<span class="id" title="var">pr2</span> <span class="id" title="var">y</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">X</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> (<span class="id" title="var">pr2</span> <span class="id" title="var">y</span>).<br/>
&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">hPropUnivalence</span> ((∃ <span class="id" title="var">e</span> : <span class="id" title="var">Ed</span> <span class="id" title="var">T</span> <span class="id" title="var">x</span> (<span class="id" title="var">pr1</span> <span class="id" title="var">y</span>), <span class="id" title="var">S</span> (<span class="id" title="var">pr1</span> <span class="id" title="var">y</span>,, <span class="id" title="var">e</span>)) ∧ <span class="id" title="var">Ed</span> <span class="id" title="var">T</span> <span class="id" title="var">x</span> (<span class="id" title="var">pr1</span> <span class="id" title="var">y</span>)) (<span class="id" title="var">S</span> <span class="id" title="var">y</span>) <span class="id" title="var">ES</span> <span class="id" title="var">SE</span>).<br/>
</div>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">fromBranch_hsubtype</span> {<span class="id" title="var">T</span> : <span class="id" title="var">preZFS</span>} {<span class="id" title="var">x</span> : <span class="id" title="var">T</span>} {<span class="id" title="var">S</span> : <span class="id" title="var">hsubtype</span> (<span class="id" title="var">pr11</span> (<span class="id" title="var">preZFS_Branch</span> <span class="id" title="var">T</span> <span class="id" title="var">x</span>))}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id" title="var">t</span> :<span class="id" title="var">pr11</span> (<span class="id" title="var">preZFS_Branch</span> <span class="id" title="var">T</span> <span class="id" title="var">x</span>)} (<span class="id" title="var">s</span> : <span class="id" title="var">S</span> <span class="id" title="var">t</span>) : <span class="id" title="var">preZFS_Branch_hsubtype_tohsubtype</span> <span class="id" title="var">T</span> <span class="id" title="var">x</span> <span class="id" title="var">S</span> (<span class="id" title="var">pr1</span> <span class="id" title="var">t</span>).<br/>
<a class="proof" href="#">Show proof.</a><br/><div class="proof">
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">preZFS_Branch_hsubtype_tohsubtype</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">ishinh_UU</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">P</span> <span class="id" title="var">X</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">X</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">exists</span> (<span class="id" title="var">pr2</span> <span class="id" title="var">t</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">s</span>.<br/>
</div>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">toBranch_hsubtype</span> {<span class="id" title="var">T</span> : <span class="id" title="var">preZFS</span>} {<span class="id" title="var">x</span> : <span class="id" title="var">T</span>} {<span class="id" title="var">S</span> : <span class="id" title="var">hsubtype</span> (<span class="id" title="var">pr111</span> <span class="id" title="var">T</span>)} {<span class="id" title="var">t</span> : <span class="id" title="var">pr111</span> <span class="id" title="var">T</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">e</span> : <span class="id" title="var">Ed</span> <span class="id" title="var">T</span> <span class="id" title="var">x</span> <span class="id" title="var">t</span>) (<span class="id" title="var">s</span> : <span class="id" title="var">S</span> <span class="id" title="var">t</span>) : <span class="id" title="var">hsubtype_to_preZFS_Branch_hsubtype</span> <span class="id" title="var">T</span> <span class="id" title="var">x</span> <span class="id" title="var">S</span> (<span class="id" title="var">t</span> ,, <span class="id" title="var">e</span>).<br/>
<a class="proof" href="#">Show proof.</a><br/><div class="proof">
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">hsubtype_to_preZFS_Branch_hsubtype</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">s</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">e</span>.<br/>
</div>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">preZFS_Branch_isWellFounded</span> (<span class="id" title="var">T</span> : <span class="id" title="var">preZFS</span>) (<span class="id" title="var">x</span> : <span class="id" title="var">T</span>) : <span class="id" title="var">Tree_isWellFounded</span> (<span class="id" title="var">preZFS_Branch</span> <span class="id" title="var">T</span> <span class="id" title="var">x</span>).<br/>
<a class="proof" href="#">Show proof.</a><br/><div class="proof">
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">Tree_isWellFounded</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">unfold</span> <span class="id" title="var">isWellFoundedUp</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">S</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">SS</span> := <span class="id" title="var">preZFS_Branch_hsubtype_tohsubtype</span> <span class="id" title="var">T</span> <span class="id" title="var">x</span> <span class="id" title="var">S</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">X</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">wfunder</span> : <span class="id" title="var">Tree_isWellFounded</span> (<span class="id" title="var">pr1</span> <span class="id" title="var">T</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">pr12</span> <span class="id" title="var">T</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">Tree_isWellFounded</span> <span class="id" title="tactic">in</span> <span class="id" title="var">wfunder</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">isWellFoundedUp</span> <span class="id" title="tactic">in</span> <span class="id" title="var">wfunder</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">hasSmallest</span> <span class="id" title="tactic">in</span> <span class="id" title="var">wfunder</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">pr1</span> <span class="id" title="tactic">in</span> <span class="id" title="var">wfunder</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">wfunder</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">L1</span> := <span class="id" title="var">wfunder</span> <span class="id" title="var">SS</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">L2</span> : (∃ <span class="id" title="var">x</span> : <span class="id" title="var">pr11</span> (<span class="id" title="var">preZFS_Branch</span> <span class="id" title="var">T</span> <span class="id" title="var">x</span>), <span class="id" title="var">S</span> <span class="id" title="var">x</span>) → <span class="id" title="var">ishinh_UU</span> (∑ <span class="id" title="var">y</span> : <span class="id" title="var">pr111</span> <span class="id" title="var">T</span>, <span class="id" title="var">SS</span> <span class="id" title="var">y</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">P</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">P</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">P</span> (<span class="id" title="var">ishinh</span> (∑ <span class="id" title="var">y</span> : <span class="id" title="var">pr111</span> <span class="id" title="var">T</span>, <span class="id" title="var">SS</span> <span class="id" title="var">y</span>))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">X1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">X1</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">te</span> <span class="id" title="var">s</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">te</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">t</span> <span class="id" title="var">e</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">ishinh_UU</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Q</span> <span class="id" title="var">X1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">X1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="var">t</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">fromBranch_hsubtype</span> <span class="id" title="var">s</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">L2</span> <span class="id" title="tactic">in</span> <span class="id" title="var">X</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">L1</span> <span class="id" title="tactic">in</span> <span class="id" title="var">X</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">X</span> (∃ <span class="id" title="var">x0</span> : <span class="id" title="var">pr11</span> (<span class="id" title="var">preZFS_Branch</span> <span class="id" title="var">T</span> <span class="id" title="var">x</span>), <span class="id" title="var">S</span> <span class="id" title="var">x0</span> ∧ (∀ <span class="id" title="var">y</span> : <span class="id" title="var">pr11</span> (<span class="id" title="var">preZFS_Branch</span> <span class="id" title="var">T</span> <span class="id" title="var">x</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">S</span> <span class="id" title="var">y</span> ⇒ <span class="id" title="var">pr121</span> (<span class="id" title="var">preZFS_Branch</span> <span class="id" title="var">T</span> <span class="id" title="var">x</span>) <span class="id" title="var">x0</span> <span class="id" title="var">y</span>))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Y</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Y</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">t</span> [<span class="id" title="var">s</span> π]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">e</span> : <span class="id" title="var">Ed</span> <span class="id" title="var">T</span> <span class="id" title="var">x</span> <span class="id" title="var">t</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">SS</span> <span class="id" title="tactic">in</span> <span class="id" title="var">s</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">preZFS_Branch_hsubtype_tohsubtype</span> <span class="id" title="tactic">in</span> <span class="id" title="var">s</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">s</span> (<span class="id" title="var">Ed</span> <span class="id" title="var">T</span> <span class="id" title="var">x</span> <span class="id" title="var">t</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Y</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Y</span> <span class="id" title="keyword">as</span> [τ <span class="id" title="var">ξ</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> τ.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">L4</span> : <span class="id" title="var">S</span> (<span class="id" title="var">t</span> ,, <span class="id" title="var">e</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- (<span class="id" title="var">Branch_to_subtype</span> <span class="id" title="var">T</span> <span class="id" title="var">x</span> <span class="id" title="var">S</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">toBranch_hsubtype</span> <span class="id" title="var">e</span> <span class="id" title="var">s</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">ishinh_UU</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">P</span> <span class="id" title="var">Y</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">Y</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> (<span class="id" title="var">t</span> ,, <span class="id" title="var">e</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;-- <span class="id" title="tactic">apply</span> <span class="id" title="var">L4</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;-- <span class="id" title="tactic">intros</span> <span class="id" title="var">xx</span> <span class="id" title="var">Q</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">Upw_E</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> π.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">SS</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">ishinh_UU</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">R</span> <span class="id" title="var">Z</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">Z</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> (<span class="id" title="var">pr2</span> <span class="id" title="var">xx</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">Q</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">unfold</span> <span class="id" title="var">isWellFoundedDown</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">S</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">SS</span> := <span class="id" title="var">preZFS_Branch_hsubtype_tohsubtype</span> <span class="id" title="var">T</span> <span class="id" title="var">x</span> <span class="id" title="var">S</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">X</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">wfunder</span> := <span class="id" title="var">pr212</span> <span class="id" title="var">T</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">isWellFoundedDown</span> <span class="id" title="tactic">in</span> <span class="id" title="var">wfunder</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">hasLargest</span> <span class="id" title="tactic">in</span> <span class="id" title="var">wfunder</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">wfunder</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">L1</span> := <span class="id" title="var">wfunder</span> <span class="id" title="var">SS</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">L2</span> : (∃ <span class="id" title="var">x</span> : <span class="id" title="var">pr11</span> (<span class="id" title="var">preZFS_Branch</span> <span class="id" title="var">T</span> <span class="id" title="var">x</span>), <span class="id" title="var">S</span> <span class="id" title="var">x</span>) → <span class="id" title="var">ishinh_UU</span> (∑ <span class="id" title="var">y</span> : <span class="id" title="var">pr111</span> <span class="id" title="var">T</span>, <span class="id" title="var">SS</span> <span class="id" title="var">y</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Y</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Y</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">Y</span> (<span class="id" title="var">ishinh</span> (∑ <span class="id" title="var">y</span> : <span class="id" title="var">pr111</span> <span class="id" title="var">T</span>, <span class="id" title="var">SS</span> <span class="id" title="var">y</span>))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Z</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Z</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">te</span> <span class="id" title="var">s</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">te</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">t</span> <span class="id" title="var">e</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">ishinh_UU</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">P</span> <span class="id" title="var">W</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">W</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="var">t</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">fromBranch_hsubtype</span> <span class="id" title="var">s</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">L2</span> <span class="id" title="tactic">in</span> <span class="id" title="var">X</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">L1</span> <span class="id" title="tactic">in</span> <span class="id" title="var">X</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">X</span> (∃ <span class="id" title="var">xx</span> : <span class="id" title="var">pr11</span> (<span class="id" title="var">preZFS_Branch</span> <span class="id" title="var">T</span> <span class="id" title="var">x</span>), <span class="id" title="var">S</span> <span class="id" title="var">xx</span> ∧ (∀ <span class="id" title="var">y</span> : <span class="id" title="var">pr11</span> (<span class="id" title="var">preZFS_Branch</span> <span class="id" title="var">T</span> <span class="id" title="var">x</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">S</span> <span class="id" title="var">y</span> ⇒ <span class="id" title="var">pr121</span> (<span class="id" title="var">preZFS_Branch</span> <span class="id" title="var">T</span> <span class="id" title="var">x</span>) <span class="id" title="var">y</span> <span class="id" title="var">xx</span>))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Y</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Y</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">t</span> [<span class="id" title="var">s</span> π]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">e</span> : <span class="id" title="var">Ed</span> <span class="id" title="var">T</span> <span class="id" title="var">x</span> <span class="id" title="var">t</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">SS</span> <span class="id" title="tactic">in</span> <span class="id" title="var">s</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">preZFS_Branch_hsubtype_tohsubtype</span> <span class="id" title="tactic">in</span> <span class="id" title="var">s</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">s</span> (<span class="id" title="var">Ed</span> <span class="id" title="var">T</span> <span class="id" title="var">x</span> <span class="id" title="var">t</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Y</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Y</span> <span class="id" title="keyword">as</span> [τ <span class="id" title="var">ξ</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> τ.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">L4</span> : <span class="id" title="var">S</span> (<span class="id" title="var">t</span> ,, <span class="id" title="var">e</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- (<span class="id" title="var">Branch_to_subtype</span> <span class="id" title="var">T</span> <span class="id" title="var">x</span> <span class="id" title="var">S</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">toBranch_hsubtype</span> <span class="id" title="var">e</span> <span class="id" title="var">s</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">ishinh_UU</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">P</span> <span class="id" title="var">Y</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">Y</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> (<span class="id" title="var">t</span> ,, <span class="id" title="var">e</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;-- <span class="id" title="tactic">apply</span> <span class="id" title="var">L4</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;-- <span class="id" title="tactic">intros</span> <span class="id" title="var">xx</span> <span class="id" title="var">Q</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">Upw_E</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> π.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">SS</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">ishinh_UU</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">R</span> <span class="id" title="var">Z</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">Z</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> (<span class="id" title="var">pr2</span> <span class="id" title="var">xx</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">Q</span>.<br/>
</div>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">iscontrauto_Tree_TRRGraph</span> (<span class="id" title="var">T</span> : <span class="id" title="var">Tree</span>) : <span class="id" title="var">isrigid</span> <span class="id" title="var">T</span> → <span class="id" title="var">iscontr</span> ((<span class="id" title="var">pr1</span> <span class="id" title="var">T</span>) = (<span class="id" title="var">pr1</span> <span class="id" title="var">T</span>)).<br/>
<a class="proof" href="#">Show proof.</a><br/><div class="proof">
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (@<span class="id" title="var">contr_to_pr1contr</span> <span class="id" title="var">_</span> (<span class="id" title="var">λ</span> <span class="id" title="var">x</span>, (<span class="id" title="var">isatree</span> <span class="id" title="var">x</span> ,, <span class="id" title="var">isaprop_isatree</span> <span class="id" title="var">x</span>)) <span class="id" title="var">T</span>).<br/>
</div>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">Up_to_Up</span> (<span class="id" title="var">T</span> : <span class="id" title="var">Tree</span>) (<span class="id" title="var">x</span> : <span class="id" title="var">pr11</span> <span class="id" title="var">T</span>) (<span class="id" title="var">y</span> : <span class="id" title="var">pr11</span> (<span class="id" title="var">Up</span> <span class="id" title="var">x</span>)) :<br/>
&nbsp;&nbsp;<span class="id" title="var">pr1</span> (<span class="id" title="var">Upw_to_TRRGraph</span> <span class="id" title="var">T</span> (<span class="id" title="var">pr1</span> <span class="id" title="var">y</span>)) → <span class="id" title="var">pr1</span> (<span class="id" title="var">Upw_to_TRRGraph</span> (<span class="id" title="var">Up</span> <span class="id" title="var">x</span>) <span class="id" title="var">y</span>).<br/>
<a class="proof" href="#">Show proof.</a><br/><div class="proof">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">X</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">X</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">t</span> π].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">y</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">y</span> σ].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exact</span> ((<span class="id" title="var">t</span> ,, ((<span class="id" title="var">pr122</span> (<span class="id" title="var">pr221</span> <span class="id" title="var">T</span>)) <span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">t</span> σ π)) ,, π).<br/>
</div>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">Up_to_Up_inv</span> (<span class="id" title="var">T</span> : <span class="id" title="var">Tree</span>) (<span class="id" title="var">x</span> : <span class="id" title="var">pr11</span> <span class="id" title="var">T</span>) (<span class="id" title="var">y</span> : <span class="id" title="var">pr11</span> (<span class="id" title="var">Up</span> <span class="id" title="var">x</span>)) :<br/>
&nbsp;&nbsp;<span class="id" title="var">pr1</span> (<span class="id" title="var">Upw_to_TRRGraph</span> (<span class="id" title="var">Up</span> <span class="id" title="var">x</span>) <span class="id" title="var">y</span>) → <span class="id" title="var">pr1</span> (<span class="id" title="var">Upw_to_TRRGraph</span> <span class="id" title="var">T</span> (<span class="id" title="var">pr1</span> <span class="id" title="var">y</span>)).<br/>
<a class="proof" href="#">Show proof.</a><br/><div class="proof">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">X</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">X</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">t</span> π].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">y</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">y</span> σ].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">t</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">tt</span> <span class="id" title="var">θ</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">Upw_E</span> <span class="id" title="tactic">in</span> π.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> π.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exact</span> (<span class="id" title="var">tt</span> ,, π).<br/>
</div>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">isweq_Up_to_Up</span>  (<span class="id" title="var">T</span> : <span class="id" title="var">Tree</span>) (<span class="id" title="var">x</span> : <span class="id" title="var">pr11</span> <span class="id" title="var">T</span>) (<span class="id" title="var">y</span> : <span class="id" title="var">pr11</span> (<span class="id" title="var">Up</span> <span class="id" title="var">x</span>)): <span class="id" title="var">isweq</span> (<span class="id" title="var">Up_to_Up</span> <span class="id" title="var">T</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>).<br/>
<a class="proof" href="#">Show proof.</a><br/><div class="proof">
&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">f</span> := <span class="id" title="var">Up_to_Up</span> <span class="id" title="var">T</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">g</span> := <span class="id" title="var">Up_to_Up_inv</span> <span class="id" title="var">T</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">L</span> : ∏ <span class="id" title="var">x</span>, <span class="id" title="var">f</span> (<span class="id" title="var">g</span> <span class="id" title="var">x</span>) = <span class="id" title="var">x</span>).<br/>
&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">z</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">g</span> ; <span class="id" title="tactic">unfold</span> <span class="id" title="var">Up_to_Up_inv</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">f</span> ; <span class="id" title="tactic">unfold</span> <span class="id" title="var">Up_to_Up</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">z</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">z</span> π].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">total2_paths_equiv</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">H</span> : (<span class="id" title="var">pr1</span> <span class="id" title="var">z</span>,, <span class="id" title="var">pr122</span> (<span class="id" title="var">pr221</span> <span class="id" title="var">T</span>) <span class="id" title="var">x</span> (<span class="id" title="var">pr1</span> <span class="id" title="var">y</span>) (<span class="id" title="var">pr1</span> <span class="id" title="var">z</span>) (<span class="id" title="var">pr2</span> <span class="id" title="var">y</span>) π) = <span class="id" title="var">z</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">total2_paths_equiv</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> (<span class="id" title="var">idpath</span> (<span class="id" title="var">pr1</span> <span class="id" title="var">z</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">propproperty</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">propproperty</span>.<br/>
&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">LL</span> : ∏ <span class="id" title="var">x</span>, <span class="id" title="var">g</span> (<span class="id" title="var">f</span> <span class="id" title="var">x</span>) = <span class="id" title="var">x</span>).<br/>
&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">z</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">g</span> ; <span class="id" title="tactic">unfold</span> <span class="id" title="var">Up_to_Up_inv</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">f</span> ; <span class="id" title="tactic">unfold</span> <span class="id" title="var">Up_to_Up</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (@<span class="id" title="var">weq_iso</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">LL</span> <span class="id" title="var">L</span>).<br/>
</div>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">isTRRGhomo_Up_to_Up</span> (<span class="id" title="var">T</span> : <span class="id" title="var">Tree</span>) (<span class="id" title="var">x</span> : <span class="id" title="var">pr11</span> <span class="id" title="var">T</span>) (<span class="id" title="var">y</span> : <span class="id" title="var">pr11</span> (<span class="id" title="var">Up</span> <span class="id" title="var">x</span>)) : <span class="id" title="var">isTRRGhomo</span> (<span class="id" title="var">Up_to_Up</span> <span class="id" title="var">T</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>).<br/>
<a class="proof" href="#">Show proof.</a><br/><div class="proof">
&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">xx</span> <span class="id" title="var">yy</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;-- <span class="id" title="tactic">intros</span> <span class="id" title="var">P</span> ; <span class="id" title="tactic">apply</span> <span class="id" title="var">P</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;-- <span class="id" title="tactic">intros</span> <span class="id" title="var">P</span> ; <span class="id" title="tactic">apply</span> <span class="id" title="var">P</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">Up_to_Up</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">selfedge</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">total2_paths_equiv</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">y</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">y</span> π].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">q</span> : <span class="id" title="var">pr122</span> (<span class="id" title="var">pr221</span> <span class="id" title="var">T</span>) <span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">y</span> π (<span class="id" title="var">selfedge</span> (<span class="id" title="var">pr1</span> <span class="id" title="var">T</span>) <span class="id" title="var">y</span>) = π).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">propproperty</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -&gt; <span class="id" title="var">q</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> (<span class="id" title="var">idpath</span> (<span class="id" title="var">y</span> ,, π)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">propproperty</span>.<br/>
</div>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">UpUpid</span>  (<span class="id" title="var">T</span> : <span class="id" title="var">Tree</span>) (<span class="id" title="var">x</span> : <span class="id" title="var">pr11</span> <span class="id" title="var">T</span>) (<span class="id" title="var">y</span> : <span class="id" title="var">pr11</span> (<span class="id" title="var">Up</span> <span class="id" title="var">x</span>)) :<br/>
&nbsp;&nbsp;<span class="id" title="var">pr1</span> (<span class="id" title="var">Up</span> (<span class="id" title="var">pr1</span> <span class="id" title="var">y</span>)) = <span class="id" title="var">Upw_to_TRRGraph</span> (<span class="id" title="var">Up</span> <span class="id" title="var">x</span>) <span class="id" title="var">y</span>.<br/>
<a class="proof" href="#">Show proof.</a><br/><div class="proof">
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">TRRGraph_univalence</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">exists</span> (<span class="id" title="var">weqpair</span> (<span class="id" title="var">Up_to_Up</span> <span class="id" title="var">T</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>) (<span class="id" title="var">isweq_Up_to_Up</span> <span class="id" title="var">T</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>)).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">isTRRGhomo_Up_to_Up</span> <span class="id" title="var">T</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>).<br/>
</div>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">preZFS_Branch_issuperrigid</span> (<span class="id" title="var">T</span> : <span class="id" title="var">preZFS</span>) (<span class="id" title="var">x</span> : <span class="id" title="var">T</span>) : <span class="id" title="var">issuperrigid</span> (<span class="id" title="var">preZFS_Branch</span> <span class="id" title="var">T</span> <span class="id" title="var">x</span>).<br/>
&nbsp;<a class="proof" href="#">Show proof.</a><br/><div class="proof">
&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> (<span class="id" title="var">pr1contr_to_contr</span> <span class="id" title="var">_</span> (<span class="id" title="var">λ</span> <span class="id" title="var">x</span>, (<span class="id" title="var">isatree</span> <span class="id" title="var">x</span> ,, <span class="id" title="var">isaprop_isatree</span> <span class="id" title="var">x</span>)) (<span class="id" title="var">preZFS_Branch</span> <span class="id" title="var">T</span> <span class="id" title="var">x</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">iscontrauto_Tree_TRRGraph</span> (<span class="id" title="var">Up</span> <span class="id" title="var">x</span>) ((<span class="id" title="var">pr222</span> <span class="id" title="var">T</span>) <span class="id" title="var">x</span>)).<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">y</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">pr1contr_to_contr</span> <span class="id" title="var">_</span> (<span class="id" title="var">λ</span> <span class="id" title="var">x</span>, (<span class="id" title="var">isatree</span> <span class="id" title="var">x</span> ,, <span class="id" title="var">isaprop_isatree</span> <span class="id" title="var">x</span>)) (<span class="id" title="var">Up</span> <span class="id" title="var">y</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">preZFS_Branch</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">preZFS_Branch</span> <span class="id" title="tactic">in</span> <span class="id" title="var">y</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">UpUpid</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">iscontrauto_Tree_TRRGraph</span> (<span class="id" title="var">Up</span> (<span class="id" title="var">pr1</span> <span class="id" title="var">y</span>)) ((<span class="id" title="var">pr222</span> <span class="id" title="var">T</span>) (<span class="id" title="var">pr1</span> <span class="id" title="var">y</span>))).<br/>
</div>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">Branch</span> (<span class="id" title="var">T</span> : <span class="id" title="var">preZFS</span>) (<span class="id" title="var">x</span> : <span class="id" title="var">T</span>) : <span class="id" title="var">preZFS</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="var">preZFS_Branch</span> <span class="id" title="var">T</span> <span class="id" title="var">x</span> ,, <span class="id" title="var">preZFS_Branch_isWellFounded</span> <span class="id" title="var">T</span> <span class="id" title="var">x</span> ,, <span class="id" title="var">preZFS_Branch_issuperrigid</span> <span class="id" title="var">T</span> <span class="id" title="var">x</span>.<br/>

<br/>
</div>

<div class="doc">
The definition of <span class="inlinecode"><span class="id" title="var">ZFS</span></span> as a subtype of <span class="inlinecode"><span class="id" title="var">preZFS</span></span> consisting of those pre-ZF structures each of
    whose branches have uniqe representatives <span class="inlinecode"><span class="id" title="var">hasuniquerepbranch</span></span> 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">hasuniquerepbranch</span> (<span class="id" title="var">T</span> : <span class="id" title="var">preZFS</span>) : <span class="id" title="var">UU</span> :=<br/>
&nbsp;&nbsp;∏ (<span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">T</span>), (<span class="id" title="var">Branch</span> <span class="id" title="var">T</span> <span class="id" title="var">x</span>) = (<span class="id" title="var">Branch</span> <span class="id" title="var">T</span> <span class="id" title="var">y</span>) → <span class="id" title="var">x</span> = <span class="id" title="var">y</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">isaprop_hasuniquerepbranch</span> (<span class="id" title="var">T</span> : <span class="id" title="var">preZFS</span>) : <span class="id" title="var">isaprop</span> (<span class="id" title="var">hasuniquerepbranch</span> <span class="id" title="var">T</span>).<br/>
<a class="proof" href="#">Show proof.</a><br/><div class="proof">
&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> (<span class="id" title="tactic">apply</span> <span class="id" title="var">impred</span> ; <span class="id" title="tactic">intros</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">setproperty</span>.<br/>
</div>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">ZFS</span> : <span class="id" title="var">UU</span> := ∑ (<span class="id" title="var">X</span> : <span class="id" title="var">preZFS</span>), <span class="id" title="var">hasuniquerepbranch</span> <span class="id" title="var">X</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">pr1ZFS</span> (<span class="id" title="var">X</span> : <span class="id" title="var">ZFS</span>) : <span class="id" title="var">preZFS</span> := <span class="id" title="var">pr1</span> <span class="id" title="var">X</span>.<br/>
<span class="id" title="keyword">Coercion</span> <span class="id" title="var">pr1ZFS</span> : <span class="id" title="var">ZFS</span> &gt;-&gt; <span class="id" title="var">preZFS</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">ZFS_iso</span> (<span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">ZFS</span>) := <span class="id" title="var">preZFS_iso</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>.<br/>

<br/>
<span class="id" title="keyword">Theorem</span> <span class="id" title="var">ZFS_univalence</span> (<span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">ZFS</span>) : (<span class="id" title="var">x</span> = <span class="id" title="var">y</span>) ≃ (<span class="id" title="var">ZFS_iso</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>).<br/>
<a class="proof" href="#">Show proof.</a><br/><div class="proof">
&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">P</span> := <span class="id" title="var">λ</span> <span class="id" title="var">x</span>, <span class="id" title="var">λ</span> <span class="id" title="var">y</span>, <span class="id" title="var">preZFS_univalence</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">Q</span> := <span class="id" title="var">λ</span> <span class="id" title="var">x</span>, (<span class="id" title="var">hasuniquerepbranch</span> <span class="id" title="var">x</span> ,, <span class="id" title="var">isaprop_hasuniquerepbranch</span> <span class="id" title="var">x</span>)).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">substructure_univalence</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">P</span> <span class="id" title="var">Q</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>).<br/>
</div>

<br/>
<span class="id" title="keyword">Theorem</span> <span class="id" title="var">isaset_ZFS</span> : <span class="id" title="var">isaset</span> <span class="id" title="var">ZFS</span>.<br/>
<a class="proof" href="#">Show proof.</a><br/><div class="proof">
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">isofhleveltotal2</span> 2).<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <span class="id" title="var">isaset_preZFS</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">x</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">hlevelntosn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">isaprop_hasuniquerepbranch</span>.<br/>
</div>

<br/>

<br/>

<br/>
</div>

<div class="doc">
Contents 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">Branch_of_Branch_to_Branch</span> {<span class="id" title="var">T</span> : <span class="id" title="var">preZFS</span>} (<span class="id" title="var">x</span> : <span class="id" title="var">T</span>) (<span class="id" title="var">y</span> : <span class="id" title="var">Branch</span> <span class="id" title="var">T</span> <span class="id" title="var">x</span>) :<br/>
&nbsp;&nbsp;<span class="id" title="var">pr1</span> (<span class="id" title="var">Upw_to_TRRGraph</span> (<span class="id" title="var">preZFS_Branch</span> <span class="id" title="var">T</span> <span class="id" title="var">x</span>) <span class="id" title="var">y</span>) → <span class="id" title="var">pr1</span> (<span class="id" title="var">Upw_to_TRRGraph</span> (<span class="id" title="var">pr1</span> <span class="id" title="var">T</span>) (<span class="id" title="var">pr1</span> <span class="id" title="var">y</span>)).<br/>
<a class="proof" href="#">Show proof.</a><br/><div class="proof">
&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">X</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">X</span> <span class="id" title="keyword">as</span> [[<span class="id" title="var">e</span> <span class="id" title="var">ε</span>] π].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">e</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> π.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">Upw_E</span> <span class="id" title="tactic">in</span> π.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> π.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">exact</span> (<span class="id" title="var">e</span> ,, π).<br/>
</div>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">Branch_of_Branch_to_Branch_inv</span> {<span class="id" title="var">T</span> : <span class="id" title="var">preZFS</span>} (<span class="id" title="var">x</span> : <span class="id" title="var">T</span>) (<span class="id" title="var">y</span> : <span class="id" title="var">Branch</span> <span class="id" title="var">T</span> <span class="id" title="var">x</span>) :<br/>
&nbsp;&nbsp;<span class="id" title="var">pr1</span> (<span class="id" title="var">Upw_to_TRRGraph</span> (<span class="id" title="var">pr1</span> <span class="id" title="var">T</span>) (<span class="id" title="var">pr1</span> <span class="id" title="var">y</span>)) → <span class="id" title="var">pr1</span> (<span class="id" title="var">Upw_to_TRRGraph</span> (<span class="id" title="var">preZFS_Branch</span> <span class="id" title="var">T</span> <span class="id" title="var">x</span>) <span class="id" title="var">y</span>) :=<br/>
&nbsp;&nbsp;<span class="id" title="var">λ</span> <span class="id" title="var">X</span>, ((<span class="id" title="var">pr1</span> <span class="id" title="var">X</span> ,, <span class="id" title="var">pr12</span> (<span class="id" title="var">pr222</span> (<span class="id" title="var">pr11</span> <span class="id" title="var">T</span>)) <span class="id" title="var">x</span> (<span class="id" title="var">pr1</span> <span class="id" title="var">y</span>) (<span class="id" title="var">pr1</span> <span class="id" title="var">X</span>) (<span class="id" title="var">pr2</span> <span class="id" title="var">y</span>) (<span class="id" title="var">pr2</span> <span class="id" title="var">X</span>)) ,, <span class="id" title="var">pr2</span> <span class="id" title="var">X</span>).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">isweq_Branch_of_Branch_to_Branch</span> {<span class="id" title="var">T</span> : <span class="id" title="var">preZFS</span>} (<span class="id" title="var">x</span> : <span class="id" title="var">T</span>) (<span class="id" title="var">y</span> : <span class="id" title="var">Branch</span> <span class="id" title="var">T</span> <span class="id" title="var">x</span>) :<br/>
&nbsp;&nbsp;<span class="id" title="var">isweq</span> (<span class="id" title="var">Branch_of_Branch_to_Branch</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>).<br/>
<a class="proof" href="#">Show proof.</a><br/><div class="proof">
&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">f</span> := <span class="id" title="var">Branch_of_Branch_to_Branch</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">g</span> := <span class="id" title="var">Branch_of_Branch_to_Branch_inv</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">L</span> : ∏ <span class="id" title="var">x</span>, <span class="id" title="var">f</span> (<span class="id" title="var">g</span> <span class="id" title="var">x</span>) = <span class="id" title="var">x</span>).<br/>
&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">z</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">f</span> ; <span class="id" title="tactic">unfold</span> <span class="id" title="var">Branch_of_Branch_to_Branch</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">g</span> ; <span class="id" title="tactic">unfold</span> <span class="id" title="var">Branch_of_Branch_to_Branch_inv</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">z</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">z</span> π].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">idpath</span>.<br/>
&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">LL</span> : ∏ <span class="id" title="var">x</span>, <span class="id" title="var">g</span> (<span class="id" title="var">f</span> <span class="id" title="var">x</span>) = <span class="id" title="var">x</span>).<br/>
&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">z</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">f</span> ; <span class="id" title="tactic">unfold</span> <span class="id" title="var">Branch_of_Branch_to_Branch</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">g</span> ; <span class="id" title="tactic">unfold</span> <span class="id" title="var">Branch_of_Branch_to_Branch_inv</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">z</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">z</span> π].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">total2_paths_equiv</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">H</span> : (<span class="id" title="var">pr1</span> <span class="id" title="var">z</span>,, <span class="id" title="var">pr122</span> (<span class="id" title="var">pr221</span> (<span class="id" title="var">pr1</span> <span class="id" title="var">T</span>)) <span class="id" title="var">x</span> (<span class="id" title="var">pr1</span> <span class="id" title="var">y</span>) (<span class="id" title="var">pr1</span> <span class="id" title="var">z</span>) (<span class="id" title="var">pr2</span> <span class="id" title="var">y</span>) π) = <span class="id" title="var">z</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">total2_paths_equiv</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> (<span class="id" title="var">idpath</span> (<span class="id" title="var">pr1</span> <span class="id" title="var">z</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">propproperty</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">propproperty</span>.<br/>
&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (@<span class="id" title="var">weq_iso</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">LL</span> <span class="id" title="var">L</span>).<br/>
</div>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">isTRRGhomo_Branch_of_Branch_to_Branch</span> {<span class="id" title="var">T</span> : <span class="id" title="var">preZFS</span>} (<span class="id" title="var">x</span> : <span class="id" title="var">T</span>) (<span class="id" title="var">y</span> : <span class="id" title="var">Branch</span> <span class="id" title="var">T</span> <span class="id" title="var">x</span>) :<br/>
&nbsp;&nbsp;<span class="id" title="var">isTRRGhomo</span> (<span class="id" title="var">Branch_of_Branch_to_Branch</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>).<br/>
<a class="proof" href="#">Show proof.</a><br/><div class="proof">
&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">xx</span> <span class="id" title="var">yy</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;-- <span class="id" title="tactic">intros</span> <span class="id" title="var">P</span> ; <span class="id" title="tactic">apply</span> <span class="id" title="var">P</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;-- <span class="id" title="tactic">intros</span> <span class="id" title="var">P</span> ; <span class="id" title="tactic">apply</span> <span class="id" title="var">P</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">Branch_of_Branch_to_Branch</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">selfedge</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">total2_paths_equiv</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">y</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">y</span> π].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> (<span class="id" title="var">idpath</span> <span class="id" title="var">y</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">propproperty</span>.<br/>
</div>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">Branch_of_Branch_eq_Branch</span> {<span class="id" title="var">T</span> : <span class="id" title="var">preZFS</span>} (<span class="id" title="var">x</span> : <span class="id" title="var">T</span>) (<span class="id" title="var">y</span> : <span class="id" title="var">Branch</span> <span class="id" title="var">T</span> <span class="id" title="var">x</span>) :<br/>
&nbsp;&nbsp;<span class="id" title="var">Branch</span> (<span class="id" title="var">Branch</span> <span class="id" title="var">T</span> <span class="id" title="var">x</span>) <span class="id" title="var">y</span> = <span class="id" title="var">Branch</span> <span class="id" title="var">T</span> (<span class="id" title="var">pr1</span> <span class="id" title="var">y</span>).<br/>
<a class="proof" href="#">Show proof.</a><br/><div class="proof">
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">preZFS_univalence</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">preZFS_iso</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">Tree_iso</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">exact</span> ((<span class="id" title="var">Branch_of_Branch_to_Branch</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> ,, <span class="id" title="var">isweq_Branch_of_Branch_to_Branch</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;,, <span class="id" title="var">isTRRGhomo_Branch_of_Branch_to_Branch</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>).<br/>
</div>

<br/>
<span class="id" title="keyword">Theorem</span> <span class="id" title="var">ZFS_Branch_is_ZFS</span> (<span class="id" title="var">X</span> : <span class="id" title="var">ZFS</span>) (<span class="id" title="var">x</span> : <span class="id" title="var">X</span>) : <span class="id" title="var">hasuniquerepbranch</span> (<span class="id" title="var">Branch</span> <span class="id" title="var">X</span> <span class="id" title="var">x</span>).<br/>
<a class="proof" href="#">Show proof.</a><br/><div class="proof">
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">hasuniquerepbranch</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">y</span> <span class="id" title="var">z</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -&gt; (<span class="id" title="var">Branch_of_Branch_eq_Branch</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -&gt; (<span class="id" title="var">Branch_of_Branch_eq_Branch</span> <span class="id" title="var">x</span> <span class="id" title="var">z</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">p</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">set</span> (π := <span class="id" title="var">pr2</span> <span class="id" title="var">X</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> π.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">set</span> (τ := π (<span class="id" title="var">pr1</span> <span class="id" title="var">y</span>) (<span class="id" title="var">pr1</span> <span class="id" title="var">z</span>) <span class="id" title="var">p</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">total2_paths_equiv</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">exists</span> τ.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">propproperty</span>.<br/>
</div>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">ZFS_Branch</span> (<span class="id" title="var">X</span> : <span class="id" title="var">ZFS</span>) (<span class="id" title="var">x</span> : <span class="id" title="var">X</span>) : <span class="id" title="var">ZFS</span> := (<span class="id" title="var">Branch</span> <span class="id" title="var">X</span> <span class="id" title="var">x</span> ,, <span class="id" title="var">ZFS_Branch_is_ZFS</span> <span class="id" title="var">X</span> <span class="id" title="var">x</span>).<br/>

<br/>
<span class="id" title="keyword">Local</span> <span class="id" title="keyword">Notation</span> "T ↑ x" := (<span class="id" title="var">ZFS_Branch</span> <span class="id" title="var">T</span> <span class="id" title="var">x</span>)(<span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 40).<br/>

<br/>
<span class="id" title="keyword">Local</span> <span class="id" title="keyword">Notation</span> "x ⊏ y" := ((<span class="id" title="var">pr121</span> (<span class="id" title="var">pr111</span> <span class="id" title="var">_</span>)) <span class="id" title="var">x</span> <span class="id" title="var">y</span>)(<span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 50).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">Root</span> (<span class="id" title="var">X</span> : <span class="id" title="var">ZFS</span>) := <span class="id" title="var">pr122</span> (<span class="id" title="var">pr111</span> <span class="id" title="var">X</span>).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">isapoint</span> {<span class="id" title="var">X</span> : <span class="id" title="var">ZFS</span>} (<span class="id" title="var">x</span> : <span class="id" title="var">X</span>) := ¬ (<span class="id" title="var">x</span> = <span class="id" title="var">Root</span> <span class="id" title="var">X</span>).<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">isaprop_isapoint</span> {<span class="id" title="var">X</span> : <span class="id" title="var">ZFS</span>} (<span class="id" title="var">x</span> : <span class="id" title="var">X</span>) : <span class="id" title="var">isaprop</span> (<span class="id" title="var">isapoint</span> <span class="id" title="var">x</span>).<br/>
<a class="proof" href="#">Show proof.</a><br/><div class="proof">
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">impred</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">isapropempty</span>.<br/>
</div>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">ZFS_elementof</span> (<span class="id" title="var">X</span> <span class="id" title="var">Y</span> : <span class="id" title="var">ZFS</span>) := ∑ (<span class="id" title="var">a</span> : <span class="id" title="var">Y</span>), (<span class="id" title="var">isapoint</span> <span class="id" title="var">a</span>) × (<span class="id" title="var">X</span> = <span class="id" title="var">Y</span> ↑ <span class="id" title="var">a</span>).<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">isaprop_ZFS_elementof</span> (<span class="id" title="var">X</span> <span class="id" title="var">Y</span> : <span class="id" title="var">ZFS</span>) : <span class="id" title="var">isaprop</span> (<span class="id" title="var">ZFS_elementof</span> <span class="id" title="var">X</span> <span class="id" title="var">Y</span>).<br/>
<a class="proof" href="#">Show proof.</a><br/><div class="proof">
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">invproofirrelevance</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">isProofIrrelevant</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">z</span> <span class="id" title="var">w</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">ZFS_elementof</span> <span class="id" title="tactic">in</span> <span class="id" title="var">z</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">ZFS_elementof</span> <span class="id" title="tactic">in</span> <span class="id" title="var">w</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">z</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">z</span> [ <span class="id" title="var">ispp</span> <span class="id" title="var">p</span>]].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">w</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">w</span> [ <span class="id" title="var">ispq</span> <span class="id" title="var">q</span>]].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">r</span> := (! <span class="id" title="var">q</span>) @ <span class="id" title="var">p</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">total2_paths_equiv</span> <span class="id" title="tactic">in</span> <span class="id" title="var">r</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">r</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">r</span> ρ].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">s</span> := (<span class="id" title="var">pr2</span> <span class="id" title="var">Y</span> <span class="id" title="var">w</span> <span class="id" title="var">z</span> <span class="id" title="var">r</span>)).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> ρ.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">set</span> (τ <span class="id" title="var">y</span> := @<span class="id" title="var">isapropdirprod</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> (<span class="id" title="var">isaprop_isapoint</span> <span class="id" title="var">y</span>) (<span class="id" title="var">isaset_ZFS</span> <span class="id" title="var">X</span> (<span class="id" title="var">Y</span> ↑ <span class="id" title="var">y</span>))).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">P</span> := <span class="id" title="var">λ</span> <span class="id" title="var">y</span> : <span class="id" title="var">Y</span>, (<span class="id" title="var">isapoint</span> <span class="id" title="var">y</span> × <span class="id" title="var">X</span> = <span class="id" title="var">Y</span> ↑ <span class="id" title="var">y</span>) ,, τ <span class="id" title="var">y</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">total2_paths_hProp_equiv</span> <span class="id" title="var">P</span> (<span class="id" title="var">z</span>,, (<span class="id" title="var">ispp</span>,, <span class="id" title="var">p</span>)) (<span class="id" title="var">w</span>,, (<span class="id" title="var">ispq</span>,, <span class="id" title="var">q</span>))).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (! <span class="id" title="var">s</span>).<br/>
</div>

<br/>
<span class="id" title="keyword">Local</span> <span class="id" title="keyword">Notation</span> "x ∈ y" := (<span class="id" title="var">ZFS_elementof</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>)(<span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 30).<br/>

<br/>
</div>
</div>

<div id="footer">
<hr/><a href="index.html">Index</a><hr/>This page has been generated by <a href="http://coq.inria.fr/">coqdoc</a>
</div>

</div>

</body>
</html>