<!DOCTYPE html>
<html>
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
	<link href="coqdoc.css" rel="stylesheet" type="text/css"/>
	<script src="http://code.jquery.com/jquery-1.11.0.min.js" type="text/javascript"></script>
	<script src="./proofs-toggle.js" type="text/javascript"></script>
	<style>
		div.proofcomment {
			font-style: italic;
		}
	</style>
	<title>Documentation</title>
</head>
<body>
<div id="page">
<div id="main">
<h1 class="libtitle">Library UniMath.Ktheory.AffineLine</h1>

<div class="code">

<br/>
<span class="id" title="keyword">Unset</span> <span class="id" title="var">Kernel</span> <span class="id" title="var">Term</span> <span class="id" title="var">Sharing</span>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab1818"></a><h1 class="section">Construction of affine lines</h1>


<div class="paragraph"> </div>

 We show that the propositional truncation of a ℤ-torsor, where ℤ
 is the additive group of the integers, behaves like an affine line.
 It's a contractible type, but maps from it to another type Y are determined
 by specifying where the points of T should go, and where the paths
 joining consecutive points of T should go. 
<div class="paragraph"> </div>

<a name="lab1819"></a><h2 class="section">Preliminaries</h2>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="var">UniMath.Ktheory.Nat</span>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Export</span> <span class="id" title="var">UniMath.Foundations.Sets</span>.<br/>

<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="var">UniMath.MoreFoundations.Tactics</span>.<br/>

<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="var">UniMath.Algebra.Monoids</span>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="var">UniMath.Algebra.Groups</span>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="var">UniMath.Ktheory.Utilities</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">UniMath.Foundations.UnivalenceAxiom</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">UniMath.Ktheory.GroupAction</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">UniMath.NumberSystems.Integers</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">UniMath.Ktheory.Integers</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">UniMath.Ktheory.Nat</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">UniMath.Ktheory.Tactics</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">UniMath.Ktheory.MoreEquivalences</span>.<br/>

<br/>
<span class="id" title="keyword">Local</span> <span class="id" title="keyword">Notation</span> "g * x" := (<span class="id" title="var">ac_mult</span> <span class="id" title="var">_</span> <span class="id" title="var">g</span> <span class="id" title="var">x</span>) : <span class="id" title="var">action_scope</span>.<br/>
<span class="id" title="keyword">Local Open</span> <span class="id" title="keyword">Scope</span> <span class="id" title="var">hz_scope</span>.<br/>
<span class="id" title="keyword">Local Open</span> <span class="id" title="keyword">Scope</span> <span class="id" title="var">transport</span>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab1820"></a><h2 class="section">Recursion for ℤ</h2>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">ℤRecursionData0</span> (<span class="id" title="var">P</span>:<span class="id" title="var">ℤ</span>-&gt;<span class="id" title="keyword">Type</span>) (<span class="id" title="var">p0</span>:<span class="id" title="var">P</span> <span class="id" title="var">zero</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">IH</span> :∏ <span class="id" title="var">n</span>, <span class="id" title="var">P</span>(  <span class="id" title="var">toℤ</span> <span class="id" title="var">n</span>) -&gt; <span class="id" title="var">P</span>(  <span class="id" title="var">toℤ</span> (<span class="id" title="var">S</span> <span class="id" title="var">n</span>)))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">IH'</span>:∏ <span class="id" title="var">n</span>, <span class="id" title="var">P</span>(- <span class="id" title="var">toℤ</span> <span class="id" title="var">n</span>) -&gt; <span class="id" title="var">P</span>(- <span class="id" title="var">toℤ</span> (<span class="id" title="var">S</span> <span class="id" title="var">n</span>))) := <span class="id" title="keyword">fun</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">f</span>:∏ <span class="id" title="var">i</span>, <span class="id" title="var">P</span> <span class="id" title="var">i</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">f</span> <span class="id" title="var">zero</span> = <span class="id" title="var">p0</span>) ×<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(∏ <span class="id" title="var">n</span>, <span class="id" title="var">f</span>(  <span class="id" title="var">toℤ</span> (<span class="id" title="var">S</span> <span class="id" title="var">n</span>)) = <span class="id" title="var">IH</span>  <span class="id" title="var">n</span> (<span class="id" title="var">f</span> (  <span class="id" title="var">toℤ</span> <span class="id" title="var">n</span>))) ×<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(∏ <span class="id" title="var">n</span>, <span class="id" title="var">f</span>(- <span class="id" title="var">toℤ</span> (<span class="id" title="var">S</span> <span class="id" title="var">n</span>)) = <span class="id" title="var">IH'</span> <span class="id" title="var">n</span> (<span class="id" title="var">f</span> (- <span class="id" title="var">toℤ</span> <span class="id" title="var">n</span>))).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">ℤRecursionData</span> (<span class="id" title="var">P</span>:<span class="id" title="var">ℤ</span>-&gt;<span class="id" title="keyword">Type</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">IH</span> :∏ <span class="id" title="var">n</span>, <span class="id" title="var">P</span>(  <span class="id" title="var">toℤ</span> <span class="id" title="var">n</span>) -&gt; <span class="id" title="var">P</span>(  <span class="id" title="var">toℤ</span> (<span class="id" title="var">S</span> <span class="id" title="var">n</span>)))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">IH'</span>:∏ <span class="id" title="var">n</span>, <span class="id" title="var">P</span>(- <span class="id" title="var">toℤ</span> <span class="id" title="var">n</span>) -&gt; <span class="id" title="var">P</span>(- <span class="id" title="var">toℤ</span> (<span class="id" title="var">S</span> <span class="id" title="var">n</span>))) := <span class="id" title="keyword">fun</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">f</span>:∏ <span class="id" title="var">i</span>, <span class="id" title="var">P</span> <span class="id" title="var">i</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(∏ <span class="id" title="var">n</span>, <span class="id" title="var">f</span>(  <span class="id" title="var">toℤ</span> (<span class="id" title="var">S</span> <span class="id" title="var">n</span>)) = <span class="id" title="var">IH</span>  <span class="id" title="var">n</span> (<span class="id" title="var">f</span> (  <span class="id" title="var">toℤ</span> <span class="id" title="var">n</span>))) ×<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(∏ <span class="id" title="var">n</span>, <span class="id" title="var">f</span>(- <span class="id" title="var">toℤ</span> (<span class="id" title="var">S</span> <span class="id" title="var">n</span>)) = <span class="id" title="var">IH'</span> <span class="id" title="var">n</span> (<span class="id" title="var">f</span> (- <span class="id" title="var">toℤ</span> <span class="id" title="var">n</span>))).<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">ℤRecursionUniq</span> (<span class="id" title="var">P</span>:<span class="id" title="var">ℤ</span>-&gt;<span class="id" title="keyword">Type</span>) (<span class="id" title="var">p0</span>:<span class="id" title="var">P</span> <span class="id" title="var">zero</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">IH</span> :∏ <span class="id" title="var">n</span>, <span class="id" title="var">P</span>(  <span class="id" title="var">toℤ</span> <span class="id" title="var">n</span>) -&gt; <span class="id" title="var">P</span>(  <span class="id" title="var">toℤ</span> (<span class="id" title="var">S</span> <span class="id" title="var">n</span>)))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">IH'</span>:∏ <span class="id" title="var">n</span>, <span class="id" title="var">P</span>(- <span class="id" title="var">toℤ</span> <span class="id" title="var">n</span>) -&gt; <span class="id" title="var">P</span>(- <span class="id" title="var">toℤ</span> (<span class="id" title="var">S</span> <span class="id" title="var">n</span>))) :<br/>
&nbsp;&nbsp;<span class="id" title="var">iscontr</span> (<span class="id" title="var">total2</span> (<span class="id" title="var">ℤRecursionData0</span> <span class="id" title="var">P</span> <span class="id" title="var">p0</span> <span class="id" title="var">IH</span> <span class="id" title="var">IH'</span>)).<br/>
<a class="proof" href="#">Show proof.</a><br/><div class="proof"> <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">ℤRecursionData0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">iscontrweqb</span> (<span class="id" title="var">Y</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;∑ <span class="id" title="var">f</span>:∏ <span class="id" title="var">w</span>, <span class="id" title="var">P</span> (<span class="id" title="var">negpos</span> <span class="id" title="var">w</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">f</span> (<span class="id" title="var">ii2</span> <span class="id" title="var">O</span>) = <span class="id" title="var">p0</span>) ×<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(∏ <span class="id" title="var">n</span> : <span class="id" title="var">nat</span>, <span class="id" title="var">f</span> (<span class="id" title="var">ii2</span> (<span class="id" title="var">S</span> <span class="id" title="var">n</span>)) = <span class="id" title="var">IH</span> <span class="id" title="var">n</span> (<span class="id" title="var">f</span> (<span class="id" title="var">ii2</span> <span class="id" title="var">n</span>))) ×<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">f</span> (<span class="id" title="var">ii1</span> <span class="id" title="var">O</span>) = <span class="id" title="var">IH'</span> <span class="id" title="var">O</span> (<span class="id" title="var">f</span> (<span class="id" title="var">ii2</span> <span class="id" title="var">O</span>))) ×<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(∏ <span class="id" title="var">n</span> : <span class="id" title="var">nat</span>, <span class="id" title="var">f</span> (<span class="id" title="var">ii1</span> (<span class="id" title="var">S</span> <span class="id" title="var">n</span>)) = <span class="id" title="var">IH'</span> (<span class="id" title="var">S</span> <span class="id" title="var">n</span>) (<span class="id" title="var">f</span> (<span class="id" title="var">ii1</span> <span class="id" title="var">n</span>))))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">apply</span> (<span class="id" title="var">weqbandf</span> (<span class="id" title="var">weqonsecbase</span> <span class="id" title="var">_</span> <span class="id" title="var">negpos</span>)). <span class="id" title="tactic">intro</span> <span class="id" title="var">f</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simple</span> <span class="id" title="tactic">refine</span> (<span class="id" title="var">weqpair</span> <span class="id" title="var">_</span> (<span class="id" title="var">isweq_iso</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">intros</span> [<span class="id" title="var">h0</span> [<span class="id" title="var">hp</span> <span class="id" title="var">hn</span>]]. <span class="id" title="tactic">simple</span> <span class="id" title="tactic">refine</span> (<span class="id" title="var">_</span>,,<span class="id" title="var">_</span>,,<span class="id" title="var">_</span>,,<span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">exact</span> <span class="id" title="var">h0</span>. } { <span class="id" title="tactic">exact</span> <span class="id" title="var">hp</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">exact</span> (<span class="id" title="var">hn</span> <span class="id" title="var">O</span>). } { <span class="id" title="tactic">intro</span> <span class="id" title="var">n</span>. <span class="id" title="tactic">exact</span> (<span class="id" title="var">hn</span> (<span class="id" title="var">S</span> <span class="id" title="var">n</span>)). } }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">intros</span> [<span class="id" title="var">h0</span> [<span class="id" title="var">hp</span> [<span class="id" title="var">h1'</span> <span class="id" title="var">hn</span>]]]. <span class="id" title="tactic">simple</span> <span class="id" title="tactic">refine</span> (<span class="id" title="var">_</span>,,<span class="id" title="var">_</span>,,<span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">exact</span> <span class="id" title="var">h0</span>. } { <span class="id" title="tactic">exact</span> <span class="id" title="var">hp</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">intros</span> [|<span class="id" title="var">n'</span>]. { <span class="id" title="tactic">exact</span> <span class="id" title="var">h1'</span>. } { <span class="id" title="tactic">exact</span> (<span class="id" title="var">hn</span> <span class="id" title="var">n'</span>). } } }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">intros</span> [<span class="id" title="var">h0</span> [<span class="id" title="var">hp</span> <span class="id" title="var">hn</span>]]. <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">paths3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">reflexivity</span>. } { <span class="id" title="tactic">reflexivity</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">apply</span> <span class="id" title="var">funextsec</span>; <span class="id" title="tactic">intros</span> [|<span class="id" title="var">n'</span>]; <span class="id" title="tactic">reflexivity</span>; <span class="id" title="tactic">reflexivity</span>. } }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">intros</span> [<span class="id" title="var">h0</span> [<span class="id" title="var">h1'</span> [<span class="id" title="var">hp</span> <span class="id" title="var">hn</span>]]]. <span class="id" title="tactic">reflexivity</span>. } }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">intermediate_iscontr</span> (<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;∑ <span class="id" title="var">f</span> : (∏ <span class="id" title="var">n</span>, <span class="id" title="var">P</span> (<span class="id" title="var">negpos</span> (<span class="id" title="var">ii1</span> <span class="id" title="var">n</span>))) ×<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(∏ <span class="id" title="var">n</span>, <span class="id" title="var">P</span> (<span class="id" title="var">negpos</span> (<span class="id" title="var">ii2</span> <span class="id" title="var">n</span>))),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">pr2</span> <span class="id" title="var">f</span> <span class="id" title="var">O</span> = <span class="id" title="var">p0</span>) ×<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(∏ <span class="id" title="var">n</span> : <span class="id" title="var">nat</span>, <span class="id" title="var">pr2</span> <span class="id" title="var">f</span> (<span class="id" title="var">S</span> <span class="id" title="var">n</span>) = <span class="id" title="var">IH</span> <span class="id" title="var">n</span> (<span class="id" title="var">pr2</span> <span class="id" title="var">f</span> <span class="id" title="var">n</span>)) ×<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">pr1</span> <span class="id" title="var">f</span> <span class="id" title="var">O</span> = <span class="id" title="var">IH'</span> <span class="id" title="var">O</span> (<span class="id" title="var">pr2</span> <span class="id" title="var">f</span> <span class="id" title="var">O</span>)) ×<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(∏ <span class="id" title="var">n</span> : <span class="id" title="var">nat</span>, <span class="id" title="var">pr1</span> <span class="id" title="var">f</span> (<span class="id" title="var">S</span> <span class="id" title="var">n</span>) = <span class="id" title="var">IH'</span> (<span class="id" title="var">S</span> <span class="id" title="var">n</span>) (<span class="id" title="var">pr1</span> <span class="id" title="var">f</span> <span class="id" title="var">n</span>))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">apply</span> (<span class="id" title="var">weqbandf</span> (<span class="id" title="var">weqsecovercoprodtoprod</span> (<span class="id" title="var">λ</span> <span class="id" title="var">w</span>, <span class="id" title="var">P</span> (<span class="id" title="var">negpos</span> <span class="id" title="var">w</span>)))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intro</span> <span class="id" title="var">f</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">idweq</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">intermediate_iscontr</span> (<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;∑ <span class="id" title="var">f</span> : (∏ <span class="id" title="var">n</span>, <span class="id" title="var">P</span> (<span class="id" title="var">negpos</span> (<span class="id" title="var">ii2</span> <span class="id" title="var">n</span>))) ×<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(∏ <span class="id" title="var">n</span>, <span class="id" title="var">P</span> (<span class="id" title="var">negpos</span> (<span class="id" title="var">ii1</span> <span class="id" title="var">n</span>))),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">pr1</span> <span class="id" title="var">f</span> <span class="id" title="var">O</span> = <span class="id" title="var">p0</span>) ×<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(∏ <span class="id" title="var">n</span> : <span class="id" title="var">nat</span>, <span class="id" title="var">pr1</span> <span class="id" title="var">f</span> (<span class="id" title="var">S</span> <span class="id" title="var">n</span>) = <span class="id" title="var">IH</span> <span class="id" title="var">n</span> (<span class="id" title="var">pr1</span> <span class="id" title="var">f</span> <span class="id" title="var">n</span>)) ×<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">pr2</span> <span class="id" title="var">f</span> <span class="id" title="var">O</span> = <span class="id" title="var">IH'</span> <span class="id" title="var">O</span> (<span class="id" title="var">pr1</span> <span class="id" title="var">f</span> <span class="id" title="var">O</span>)) ×<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(∏ <span class="id" title="var">n</span> : <span class="id" title="var">nat</span>, <span class="id" title="var">pr2</span> <span class="id" title="var">f</span> (<span class="id" title="var">S</span> <span class="id" title="var">n</span>) = <span class="id" title="var">IH'</span> (<span class="id" title="var">S</span> <span class="id" title="var">n</span>) (<span class="id" title="var">pr2</span> <span class="id" title="var">f</span> <span class="id" title="var">n</span>))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">apply</span> (<span class="id" title="var">weqbandf</span> (<span class="id" title="var">weqdirprodcomm</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>)). <span class="id" title="tactic">intro</span> <span class="id" title="var">f</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">idweq</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">intermediate_iscontr</span> (<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;∑ (<span class="id" title="var">f2</span> : ∏ <span class="id" title="var">n</span> : <span class="id" title="var">nat</span>, <span class="id" title="var">P</span> (<span class="id" title="var">negpos</span> (<span class="id" title="var">ii2</span> <span class="id" title="var">n</span>)))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">f1</span> : ∏ <span class="id" title="var">n</span> : <span class="id" title="var">nat</span>, <span class="id" title="var">P</span> (<span class="id" title="var">negpos</span> (<span class="id" title="var">ii1</span> <span class="id" title="var">n</span>))),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">f2</span> <span class="id" title="var">O</span> = <span class="id" title="var">p0</span>) ×<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(∏ <span class="id" title="var">n</span> : <span class="id" title="var">nat</span>, <span class="id" title="var">f2</span> (<span class="id" title="var">S</span> <span class="id" title="var">n</span>) = <span class="id" title="var">IH</span> <span class="id" title="var">n</span> (<span class="id" title="var">f2</span> <span class="id" title="var">n</span>)) ×<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">f1</span> <span class="id" title="var">O</span> = <span class="id" title="var">IH'</span> <span class="id" title="var">O</span> (<span class="id" title="var">f2</span> <span class="id" title="var">O</span>)) ×<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(∏ <span class="id" title="var">n</span> : <span class="id" title="var">nat</span>, <span class="id" title="var">f1</span> (<span class="id" title="var">S</span> <span class="id" title="var">n</span>) = <span class="id" title="var">IH'</span> (<span class="id" title="var">S</span> <span class="id" title="var">n</span>) (<span class="id" title="var">f1</span> <span class="id" title="var">n</span>))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">apply</span> <span class="id" title="var">weqtotal2asstor</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">intermediate_iscontr</span> (<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;∑ <span class="id" title="var">f2</span> : ∏ <span class="id" title="var">n</span> : <span class="id" title="var">nat</span>, <span class="id" title="var">P</span> (<span class="id" title="var">negpos</span> (<span class="id" title="var">ii2</span> <span class="id" title="var">n</span>)),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">f2</span> <span class="id" title="var">O</span> = <span class="id" title="var">p0</span>) ×<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;∑ <span class="id" title="var">f1</span> : ∏ <span class="id" title="var">n</span> : <span class="id" title="var">nat</span>, <span class="id" title="var">P</span> (<span class="id" title="var">negpos</span> (<span class="id" title="var">ii1</span> <span class="id" title="var">n</span>)),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(∏ <span class="id" title="var">n</span> : <span class="id" title="var">nat</span>, <span class="id" title="var">f2</span> (<span class="id" title="var">S</span> <span class="id" title="var">n</span>) = <span class="id" title="var">IH</span> <span class="id" title="var">n</span> (<span class="id" title="var">f2</span> <span class="id" title="var">n</span>)) ×<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">f1</span> <span class="id" title="var">O</span> = <span class="id" title="var">IH'</span> <span class="id" title="var">O</span> (<span class="id" title="var">f2</span> <span class="id" title="var">O</span>)) ×<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(∏ <span class="id" title="var">n</span> : <span class="id" title="var">nat</span>, <span class="id" title="var">f1</span> (<span class="id" title="var">S</span> <span class="id" title="var">n</span>) = <span class="id" title="var">IH'</span> (<span class="id" title="var">S</span> <span class="id" title="var">n</span>) (<span class="id" title="var">f1</span> <span class="id" title="var">n</span>))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">apply</span> <span class="id" title="var">weqfibtototal</span>; <span class="id" title="tactic">intro</span> <span class="id" title="var">f2</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">weq_total2_prod</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">intermediate_iscontr</span> (<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;∑ <span class="id" title="var">f2</span> : ∏ <span class="id" title="var">n</span> : <span class="id" title="var">nat</span>, <span class="id" title="var">P</span> (<span class="id" title="var">negpos</span> (<span class="id" title="var">ii2</span> <span class="id" title="var">n</span>)),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">f2</span> <span class="id" title="var">O</span> = <span class="id" title="var">p0</span>) ×<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(∏ <span class="id" title="var">n</span> : <span class="id" title="var">nat</span>, <span class="id" title="var">f2</span> (<span class="id" title="var">S</span> <span class="id" title="var">n</span>) = <span class="id" title="var">IH</span> <span class="id" title="var">n</span> (<span class="id" title="var">f2</span> <span class="id" title="var">n</span>)) ×<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;∑ <span class="id" title="var">f1</span> : ∏ <span class="id" title="var">n</span> : <span class="id" title="var">nat</span>, <span class="id" title="var">P</span> (<span class="id" title="var">negpos</span> (<span class="id" title="var">ii1</span> <span class="id" title="var">n</span>)),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">f1</span> <span class="id" title="var">O</span> = <span class="id" title="var">IH'</span> <span class="id" title="var">O</span> (<span class="id" title="var">f2</span> <span class="id" title="var">O</span>)) ×<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(∏ <span class="id" title="var">n</span> : <span class="id" title="var">nat</span>, <span class="id" title="var">f1</span> (<span class="id" title="var">S</span> <span class="id" title="var">n</span>) = <span class="id" title="var">IH'</span> (<span class="id" title="var">S</span> <span class="id" title="var">n</span>) (<span class="id" title="var">f1</span> <span class="id" title="var">n</span>))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">apply</span> <span class="id" title="var">weqfibtototal</span>; <span class="id" title="tactic">intro</span> <span class="id" title="var">f2</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">weqfibtototal</span>; <span class="id" title="tactic">intro</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">weq_total2_prod</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">intermediate_iscontr</span> (<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;∑ <span class="id" title="var">f2</span> : ∏ <span class="id" title="var">n</span> : <span class="id" title="var">nat</span>, <span class="id" title="var">P</span> (<span class="id" title="var">negpos</span> (<span class="id" title="var">ii2</span> <span class="id" title="var">n</span>)),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">f2</span> <span class="id" title="var">O</span> = <span class="id" title="var">p0</span>) ×<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(∏ <span class="id" title="var">n</span> : <span class="id" title="var">nat</span>, <span class="id" title="var">f2</span> (<span class="id" title="var">S</span> <span class="id" title="var">n</span>) = <span class="id" title="var">IH</span> <span class="id" title="var">n</span> (<span class="id" title="var">f2</span> <span class="id" title="var">n</span>))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">apply</span> <span class="id" title="var">weqfibtototal</span>; <span class="id" title="tactic">intro</span> <span class="id" title="var">f2</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">weqfibtototal</span>; <span class="id" title="tactic">intro</span> <span class="id" title="var">h0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">weqpr1</span>; <span class="id" title="tactic">intro</span> <span class="id" title="var">ih2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exact</span> (<span class="id" title="var">Nat.Uniqueness.hNatRecursionUniq</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">λ</span> <span class="id" title="var">n</span>, <span class="id" title="var">P</span> (<span class="id" title="var">negpos</span> (<span class="id" title="var">ii1</span> <span class="id" title="var">n</span>)))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">IH'</span> <span class="id" title="var">O</span> (<span class="id" title="var">f2</span> <span class="id" title="var">O</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">λ</span> <span class="id" title="var">n</span>, <span class="id" title="var">IH'</span> (<span class="id" title="var">S</span> <span class="id" title="var">n</span>))). }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">Nat.Uniqueness.hNatRecursionUniq</span>.<br/>
</div>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">A</span> (<span class="id" title="var">P</span>:<span class="id" title="var">ℤ</span>-&gt;<span class="id" title="keyword">Type</span>) (<span class="id" title="var">p0</span>:<span class="id" title="var">P</span> <span class="id" title="var">zero</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">IH</span> :∏ <span class="id" title="var">n</span>, <span class="id" title="var">P</span>(  <span class="id" title="var">toℤ</span> <span class="id" title="var">n</span>) -&gt; <span class="id" title="var">P</span>(  <span class="id" title="var">toℤ</span> (<span class="id" title="var">S</span> <span class="id" title="var">n</span>)))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">IH'</span>:∏ <span class="id" title="var">n</span>, <span class="id" title="var">P</span>(- <span class="id" title="var">toℤ</span> <span class="id" title="var">n</span>) -&gt; <span class="id" title="var">P</span>(- <span class="id" title="var">toℤ</span> (<span class="id" title="var">S</span> <span class="id" title="var">n</span>))) :<br/>
&nbsp;&nbsp;<span class="id" title="var">weq</span> (<span class="id" title="var">total2</span> (<span class="id" title="var">ℤRecursionData0</span> <span class="id" title="var">P</span> <span class="id" title="var">p0</span> <span class="id" title="var">IH</span> <span class="id" title="var">IH'</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(@<span class="id" title="var">hfiber</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">total2</span> (<span class="id" title="var">ℤRecursionData</span> <span class="id" title="var">P</span> <span class="id" title="var">IH</span> <span class="id" title="var">IH'</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">P</span> <span class="id" title="var">zero</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">λ</span> <span class="id" title="var">fh</span>, <span class="id" title="var">pr1</span> <span class="id" title="var">fh</span> <span class="id" title="var">zero</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">p0</span>).<br/>
<a class="proof" href="#">Show proof.</a><br/><div class="proof"> <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simple</span> <span class="id" title="tactic">refine</span> (<span class="id" title="var">weqpair</span> <span class="id" title="var">_</span> (<span class="id" title="var">isweq_iso</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">intros</span> [<span class="id" title="var">f</span> [<span class="id" title="var">h0</span> <span class="id" title="var">h</span>]]. <span class="id" title="tactic">exact</span> ((<span class="id" title="var">f</span>,,<span class="id" title="var">h</span>),,<span class="id" title="var">h0</span>). }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">intros</span> [[<span class="id" title="var">f</span> <span class="id" title="var">h</span>] <span class="id" title="var">h0</span>]. <span class="id" title="tactic">exact</span> (<span class="id" title="var">f</span>,,(<span class="id" title="var">h0</span>,,<span class="id" title="var">h</span>)). }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">intros</span> [<span class="id" title="var">f</span> [<span class="id" title="var">h0</span> <span class="id" title="var">h</span>]]. <span class="id" title="tactic">reflexivity</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">intros</span> [[<span class="id" title="var">f</span> <span class="id" title="var">h</span>] <span class="id" title="var">h0</span>]. <span class="id" title="tactic">reflexivity</span>. } </div>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">ℤRecursion_weq</span> (<span class="id" title="var">P</span>:<span class="id" title="var">ℤ</span>-&gt;<span class="id" title="keyword">Type</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">IH</span> :∏ <span class="id" title="var">n</span>, <span class="id" title="var">P</span>(  <span class="id" title="var">toℤ</span> <span class="id" title="var">n</span>) -&gt; <span class="id" title="var">P</span>(  <span class="id" title="var">toℤ</span> (<span class="id" title="var">S</span> <span class="id" title="var">n</span>)))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">IH'</span>:∏ <span class="id" title="var">n</span>, <span class="id" title="var">P</span>(- <span class="id" title="var">toℤ</span> <span class="id" title="var">n</span>) -&gt; <span class="id" title="var">P</span>(- <span class="id" title="var">toℤ</span> (<span class="id" title="var">S</span> <span class="id" title="var">n</span>))) :<br/>
&nbsp;&nbsp;<span class="id" title="var">weq</span> (<span class="id" title="var">total2</span> (<span class="id" title="var">ℤRecursionData</span> <span class="id" title="var">P</span> <span class="id" title="var">IH</span> <span class="id" title="var">IH'</span>)) (<span class="id" title="var">P</span> 0).<br/>
<a class="proof" href="#">Show proof.</a><br/><div class="proof"> <span class="id" title="tactic">intros</span>. <span class="id" title="tactic">exists</span> (<span class="id" title="var">λ</span> <span class="id" title="var">f</span>, <span class="id" title="var">pr1</span> <span class="id" title="var">f</span> <span class="id" title="var">zero</span>). <span class="id" title="tactic">intro</span> <span class="id" title="var">p0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">iscontrweqf</span> (<span class="id" title="var">A</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>)). <span class="id" title="tactic">apply</span> <span class="id" title="var">ℤRecursionUniq</span>. </div>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">ℤRecursion_weq_compute</span> (<span class="id" title="var">P</span>:<span class="id" title="var">ℤ</span>-&gt;<span class="id" title="keyword">Type</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">IH</span> :∏ <span class="id" title="var">n</span>, <span class="id" title="var">P</span>(  <span class="id" title="var">toℤ</span> <span class="id" title="var">n</span>) -&gt; <span class="id" title="var">P</span>(  <span class="id" title="var">toℤ</span> (<span class="id" title="var">S</span> <span class="id" title="var">n</span>)))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">IH'</span>:∏ <span class="id" title="var">n</span>, <span class="id" title="var">P</span>(- <span class="id" title="var">toℤ</span> <span class="id" title="var">n</span>) -&gt; <span class="id" title="var">P</span>(- <span class="id" title="var">toℤ</span> (<span class="id" title="var">S</span> <span class="id" title="var">n</span>)))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">fh</span> : <span class="id" title="var">total2</span> (<span class="id" title="var">ℤRecursionData</span> <span class="id" title="var">P</span> <span class="id" title="var">IH</span> <span class="id" title="var">IH'</span>)) :<br/>
&nbsp;&nbsp;<span class="id" title="var">ℤRecursion_weq</span> <span class="id" title="var">P</span> <span class="id" title="var">IH</span> <span class="id" title="var">IH'</span> <span class="id" title="var">fh</span> = <span class="id" title="var">pr1</span> <span class="id" title="var">fh</span> <span class="id" title="var">zero</span>.<br/>
<a class="proof" href="#">Show proof.</a><br/><div class="proof"> <span class="id" title="tactic">reflexivity</span>. </div>

<br/>
</div>

<div class="doc">
<a name="lab1821"></a><h2 class="section">Bidirectional recursion for ℤ</h2>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">ℤBiRecursionData</span> (<span class="id" title="var">P</span>:<span class="id" title="var">ℤ</span>-&gt;<span class="id" title="keyword">Type</span>) (<span class="id" title="var">IH</span> :∏ <span class="id" title="var">i</span>, <span class="id" title="var">P</span>(<span class="id" title="var">i</span>) -&gt; <span class="id" title="var">P</span>(1+<span class="id" title="var">i</span>)) :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">fun</span> <span class="id" title="var">f</span>:∏ <span class="id" title="var">i</span>, <span class="id" title="var">P</span> <span class="id" title="var">i</span> =&gt; ∏ <span class="id" title="var">i</span>, <span class="id" title="var">f</span>(1+<span class="id" title="var">i</span>)=<span class="id" title="var">IH</span> <span class="id" title="var">i</span> (<span class="id" title="var">f</span> <span class="id" title="var">i</span>).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">ℤBiRecursion_weq</span> (<span class="id" title="var">P</span>:<span class="id" title="var">ℤ</span>-&gt;<span class="id" title="keyword">Type</span>) (<span class="id" title="var">IH</span> :∏ <span class="id" title="var">i</span>, <span class="id" title="var">weq</span> (<span class="id" title="var">P</span> <span class="id" title="var">i</span>) (<span class="id" title="var">P</span>(1+<span class="id" title="var">i</span>))) :<br/>
&nbsp;&nbsp;<span class="id" title="var">weq</span> (<span class="id" title="var">total2</span> (<span class="id" title="var">ℤBiRecursionData</span> <span class="id" title="var">P</span> <span class="id" title="var">IH</span>)) (<span class="id" title="var">P</span> 0).<br/>
<a class="proof" href="#">Show proof.</a><br/><div class="proof"> <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">k</span> : ∏ <span class="id" title="var">n</span>, <span class="id" title="var">one</span> + <span class="id" title="var">toℤ</span> <span class="id" title="var">n</span> = <span class="id" title="var">toℤ</span> (<span class="id" title="var">S</span> <span class="id" title="var">n</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">intro</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">nattohzandS</span>. <span class="id" title="tactic">reflexivity</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">l</span> := <span class="id" title="var">λ</span> <span class="id" title="var">n</span> : <span class="id" title="var">nat</span>, <span class="id" title="var">weq_transportf</span> <span class="id" title="var">P</span> (<span class="id" title="var">k</span> <span class="id" title="var">n</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">k'</span> : ∏ <span class="id" title="var">n</span>, - <span class="id" title="var">toℤ</span> <span class="id" title="var">n</span> = <span class="id" title="var">one</span> + (- <span class="id" title="var">toℤ</span> (<span class="id" title="var">S</span> <span class="id" title="var">n</span>))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">intros</span>. <span class="id" title="tactic">unfold</span> <span class="id" title="var">one</span>, <span class="id" title="var">toℤ</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">nattohzand1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">nattohzandS</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">hzminusplus</span>. <span class="id" title="tactic">rewrite</span> &lt;- (<span class="id" title="var">hzplusassoc</span> <span class="id" title="var">one</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="var">hzpluscomm</span> <span class="id" title="var">one</span>). <span class="id" title="tactic">rewrite</span> <span class="id" title="var">hzlminus</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">hzplusl0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">l'</span> := <span class="id" title="var">λ</span> <span class="id" title="var">n</span>, <span class="id" title="var">weq_transportf</span> <span class="id" title="var">P</span> (<span class="id" title="var">k'</span> <span class="id" title="var">n</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">ih</span> := <span class="id" title="var">λ</span> <span class="id" title="var">n</span>, <span class="id" title="var">weqcomp</span> (<span class="id" title="var">IH</span> (<span class="id" title="var">toℤ</span> <span class="id" title="var">n</span>)) (<span class="id" title="var">l</span> <span class="id" title="var">n</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">ih'</span>:= <span class="id" title="var">λ</span> <span class="id" title="var">n</span>, (<span class="id" title="var">weqcomp</span> (<span class="id" title="var">l'</span> <span class="id" title="var">n</span>) (<span class="id" title="var">invweq</span> (<span class="id" title="var">IH</span> (- <span class="id" title="var">toℤ</span> (<span class="id" title="var">S</span> <span class="id" title="var">n</span>)))))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">G</span> := <span class="id" title="var">ℤRecursion_weq</span> <span class="id" title="var">P</span> <span class="id" title="var">ih</span> <span class="id" title="var">ih'</span>). <span class="id" title="tactic">simple</span> <span class="id" title="tactic">refine</span> (<span class="id" title="var">weqcomp</span> <span class="id" title="var">_</span> <span class="id" title="var">G</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">weqfibtototal</span>. <span class="id" title="tactic">intro</span> <span class="id" title="var">f</span>. <span class="id" title="tactic">unfold</span> <span class="id" title="var">ℤRecursionData</span>, <span class="id" title="var">ℤBiRecursionData</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simple</span> <span class="id" title="tactic">refine</span> (<span class="id" title="var">weqcomp</span> (<span class="id" title="var">weqonsecbase</span> <span class="id" title="var">_</span> <span class="id" title="var">negpos</span>) <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simple</span> <span class="id" title="tactic">refine</span> (<span class="id" title="var">weqcomp</span> (<span class="id" title="var">weqsecovercoprodtoprod</span> <span class="id" title="var">_</span>) <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simple</span> <span class="id" title="tactic">refine</span> (<span class="id" title="var">weqcomp</span> (<span class="id" title="var">weqdirprodcomm</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>) <span class="id" title="var">_</span>). <span class="id" title="tactic">apply</span> <span class="id" title="var">weqdirprodf</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">apply</span> <span class="id" title="var">weqonsecfibers</span>; <span class="id" title="tactic">intro</span> <span class="id" title="var">n</span>. <span class="id" title="tactic">simple</span> <span class="id" title="tactic">refine</span> (<span class="id" title="var">weqonpaths2</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">change</span> (<span class="id" title="var">negpos</span> (<span class="id" title="var">ii2</span> <span class="id" title="var">n</span>)) <span class="id" title="keyword">with</span> (<span class="id" title="var">toℤ</span> <span class="id" title="var">n</span>). <span class="id" title="tactic">exact</span> (<span class="id" title="var">l</span> <span class="id" title="var">n</span>). }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">unfold</span> <span class="id" title="var">l</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">weq_transportf_comp</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">reflexivity</span>. } }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">apply</span> <span class="id" title="var">weqonsecfibers</span>; <span class="id" title="tactic">intro</span> <span class="id" title="var">n</span>. <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simple</span> <span class="id" title="tactic">refine</span> (<span class="id" title="var">weqcomp</span> (<span class="id" title="var">weqpair</span> <span class="id" title="var">_</span> (<span class="id" title="var">isweqpathsinv0</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>)) <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simple</span> <span class="id" title="tactic">refine</span> (<span class="id" title="var">weqonpaths2</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">apply</span> <span class="id" title="var">invweq</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">IH</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">homotinvweqweq</span>. <span class="id" title="tactic">reflexivity</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">change</span> (<span class="id" title="var">natnattohz</span> 0 (<span class="id" title="var">S</span> <span class="id" title="var">n</span>)) <span class="id" title="keyword">with</span> (- <span class="id" title="var">toℤ</span> (<span class="id" title="var">S</span> <span class="id" title="var">n</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">l'</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">weq_transportf_comp</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>. } } </div>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">ℤBiRecursion_weq_compute</span> (<span class="id" title="var">P</span>:<span class="id" title="var">ℤ</span>-&gt;<span class="id" title="keyword">Type</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">IH</span> :∏ <span class="id" title="var">i</span>, <span class="id" title="var">weq</span> (<span class="id" title="var">P</span> <span class="id" title="var">i</span>) (<span class="id" title="var">P</span>(1+<span class="id" title="var">i</span>)))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">fh</span> : <span class="id" title="var">total2</span> (<span class="id" title="var">ℤBiRecursionData</span> <span class="id" title="var">P</span> <span class="id" title="var">IH</span>)) :<br/>
&nbsp;&nbsp;<span class="id" title="var">ℤBiRecursion_weq</span> <span class="id" title="var">P</span> <span class="id" title="var">IH</span> <span class="id" title="var">fh</span> = <span class="id" title="var">pr1</span> <span class="id" title="var">fh</span> 0.<br/>
<a class="proof" href="#">Show proof.</a><br/><div class="proof"> <span class="id" title="tactic">reflexivity</span>. </div>

<br/>
<span class="id" title="keyword">Notation</span> &quot;n + x" := (<span class="id" title="var">ac_mult</span> <span class="id" title="var">_</span> <span class="id" title="var">n</span> <span class="id" title="var">x</span>) : <span class="id" title="var">action_scope</span>.<br/>
<span class="id" title="keyword">Notation</span> &quot;n - m" := (<span class="id" title="var">quotient</span> <span class="id" title="var">_</span> <span class="id" title="var">n</span> <span class="id" title="var">m</span>) : <span class="id" title="var">action_scope</span>.<br/>
<span class="id" title="keyword">Local Open</span> <span class="id" title="keyword">Scope</span> <span class="id" title="var">action_scope</span>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab1822"></a><h2 class="section">Bidirectional recursion for ℤ-torsors</h2>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">GuidedSection</span> {<span class="id" title="var">T</span>:<span class="id" title="var">Torsor</span> <span class="id" title="var">ℤ</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">P</span>:<span class="id" title="var">T</span>-&gt;<span class="id" title="keyword">Type</span>) (<span class="id" title="var">IH</span>:∏ <span class="id" title="var">t</span>, <span class="id" title="var">weq</span> (<span class="id" title="var">P</span> <span class="id" title="var">t</span>) (<span class="id" title="var">P</span> (<span class="id" title="var">one</span> + <span class="id" title="var">t</span>))) := <span class="id" title="keyword">fun</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">f</span>:∏ <span class="id" title="var">t</span>, <span class="id" title="var">P</span> <span class="id" title="var">t</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;∏ <span class="id" title="var">t</span>, <span class="id" title="var">f</span> (<span class="id" title="var">one</span> + <span class="id" title="var">t</span>) = <span class="id" title="var">IH</span> <span class="id" title="var">t</span> (<span class="id" title="var">f</span> <span class="id" title="var">t</span>).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">ℤTorsorRecursion_weq</span> {<span class="id" title="var">T</span>:<span class="id" title="var">Torsor</span> <span class="id" title="var">ℤ</span>} (<span class="id" title="var">P</span>:<span class="id" title="var">T</span>-&gt;<span class="id" title="keyword">Type</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">IH</span>:∏ <span class="id" title="var">t</span>, <span class="id" title="var">weq</span> (<span class="id" title="var">P</span> <span class="id" title="var">t</span>) (<span class="id" title="var">P</span> (<span class="id" title="var">one</span> + <span class="id" title="var">t</span>))) (<span class="id" title="var">t0</span>:<span class="id" title="var">T</span>) :<br/>
&nbsp;&nbsp;<span class="id" title="var">weq</span> (<span class="id" title="var">total2</span> (<span class="id" title="var">GuidedSection</span> <span class="id" title="var">P</span> <span class="id" title="var">IH</span>)) (<span class="id" title="var">P</span> <span class="id" title="var">t0</span>).<br/>
<a class="proof" href="#">Show proof.</a><br/><div class="proof"> <span class="id" title="tactic">intros</span>. <span class="id" title="tactic">exists</span> (<span class="id" title="var">λ</span> <span class="id" title="var">fh</span>, <span class="id" title="var">pr1</span> <span class="id" title="var">fh</span> <span class="id" title="var">t0</span>). <span class="id" title="tactic">intro</span> <span class="id" title="var">q</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">w</span> := <span class="id" title="var">triviality_isomorphism</span> <span class="id" title="var">T</span> <span class="id" title="var">t0</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">k0</span> : ∏ <span class="id" title="var">i</span>, <span class="id" title="var">one</span> + <span class="id" title="var">w</span> <span class="id" title="var">i</span> = <span class="id" title="var">w</span> (1+<span class="id" title="var">i</span>)%<span class="id" title="var">hz</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">intros</span>. <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">unfold</span> <span class="id" title="var">right_mult</span>, <span class="id" title="var">ac_mult</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">act_assoc</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">l0</span> := (<span class="id" title="var">λ</span> <span class="id" title="var">i</span>, <span class="id" title="var">eqweqmap</span> (<span class="id" title="var">ap</span> <span class="id" title="var">P</span> (<span class="id" title="var">k0</span> <span class="id" title="var">i</span>)))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: ∏ <span class="id" title="var">i</span>, <span class="id" title="var">weq</span> (<span class="id" title="var">P</span>(<span class="id" title="var">one</span> + <span class="id" title="var">w</span> <span class="id" title="var">i</span>)) (<span class="id" title="var">P</span>(<span class="id" title="var">w</span>(1+<span class="id" title="var">i</span>)%<span class="id" title="var">hz</span>))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span>( <span class="id" title="var">e</span> : <span class="id" title="var">right_mult</span> <span class="id" title="var">t0</span> <span class="id" title="var">zero</span> = <span class="id" title="var">t0</span> ). { <span class="id" title="tactic">apply</span> <span class="id" title="var">act_unit</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">H</span> := <span class="id" title="var">λ</span> <span class="id" title="var">f</span>, ∏ <span class="id" title="var">t</span> : <span class="id" title="var">T</span>, <span class="id" title="var">f</span> (<span class="id" title="var">one</span> + <span class="id" title="var">t</span>) = (<span class="id" title="var">IH</span> <span class="id" title="var">t</span>) (<span class="id" title="var">f</span> <span class="id" title="var">t</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> ( <span class="id" title="var">IH'</span> := (<span class="id" title="var">λ</span> <span class="id" title="var">i</span>, <span class="id" title="var">weqcomp</span> (<span class="id" title="var">IH</span> (<span class="id" title="var">w</span> <span class="id" title="var">i</span>)) (<span class="id" title="var">l0</span> <span class="id" title="var">i</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: ∏ <span class="id" title="var">i</span>:<span class="id" title="var">ℤ</span>, <span class="id" title="var">weq</span> (<span class="id" title="var">P</span> (<span class="id" title="var">w</span> <span class="id" title="var">i</span>)) (<span class="id" title="var">P</span> (<span class="id" title="var">w</span>(1+<span class="id" title="var">i</span>)%<span class="id" title="var">hz</span>))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">J</span> := <span class="id" title="var">λ</span> <span class="id" title="var">f</span>, ∏ <span class="id" title="var">i</span> : <span class="id" title="var">ℤ</span>, <span class="id" title="var">f</span> (1 + <span class="id" title="var">i</span>)%<span class="id" title="var">hz</span> = (<span class="id" title="var">IH'</span> <span class="id" title="var">i</span>) (<span class="id" title="var">f</span> <span class="id" title="var">i</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simple</span> <span class="id" title="tactic">refine</span> (<span class="id" title="var">iscontrweqb</span> (@<span class="id" title="var">weq_over_sections</span> <span class="id" title="var">ℤ</span> <span class="id" title="var">T</span> <span class="id" title="var">w</span> 0 <span class="id" title="var">t0</span> <span class="id" title="var">e</span> <span class="id" title="var">P</span> <span class="id" title="var">q</span> (<span class="id" title="var">e</span>#'<span class="id" title="var">q</span>) <span class="id" title="var">_</span> <span class="id" title="var">H</span> <span class="id" title="var">J</span> <span class="id" title="var">_</span>) <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">apply</span> <span class="id" title="var">transportfbinv</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">intro</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">invweq</span>. <span class="id" title="tactic">unfold</span> <span class="id" title="var">H</span>,<span class="id" title="var">J</span>,<span class="id" title="var">maponsec1</span>. <span class="id" title="tactic">simple</span> <span class="id" title="tactic">refine</span> (<span class="id" title="var">weqonsec</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">w</span> <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intro</span> <span class="id" title="var">i</span>. <span class="id" title="tactic">simple</span> <span class="id" title="tactic">refine</span> (<span class="id" title="var">weqonpaths2</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">exact</span> (<span class="id" title="var">invweq</span> (<span class="id" title="var">l0</span> <span class="id" title="var">i</span>)). }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">unfold</span> <span class="id" title="var">l0</span>. <span class="id" title="tactic">rewrite</span> (<span class="id" title="var">k0</span> <span class="id" title="var">i</span>). <span class="id" title="tactic">reflexivity</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">unfold</span> <span class="id" title="var">IH'</span>. <span class="id" title="tactic">unfold</span> <span class="id" title="var">weqcomp</span>; <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="var">homotinvweqweq</span> (<span class="id" title="var">l0</span> <span class="id" title="var">i</span>)). <span class="id" title="tactic">reflexivity</span>. } }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exact</span> (<span class="id" title="var">pr2</span> (<span class="id" title="var">ℤBiRecursion_weq</span> (<span class="id" title="var">λ</span> <span class="id" title="var">i</span>, <span class="id" title="var">P</span>(<span class="id" title="var">w</span> <span class="id" title="var">i</span>)) <span class="id" title="var">IH'</span>) (<span class="id" title="var">e</span> #' <span class="id" title="var">q</span>)).<br/>
</div>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">ℤTorsorRecursion_compute</span> {<span class="id" title="var">T</span>:<span class="id" title="var">Torsor</span> <span class="id" title="var">ℤ</span>} (<span class="id" title="var">P</span>:<span class="id" title="var">T</span>-&gt;<span class="id" title="keyword">Type</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">IH</span>:∏ <span class="id" title="var">t</span>, <span class="id" title="var">weq</span> (<span class="id" title="var">P</span> <span class="id" title="var">t</span>) (<span class="id" title="var">P</span> (<span class="id" title="var">one</span> + <span class="id" title="var">t</span>))) <span class="id" title="var">t</span> <span class="id" title="var">h</span> :<br/>
&nbsp;&nbsp;<span class="id" title="var">ℤTorsorRecursion_weq</span> <span class="id" title="var">P</span> <span class="id" title="var">IH</span> <span class="id" title="var">t</span> <span class="id" title="var">h</span> = <span class="id" title="var">pr1</span> <span class="id" title="var">h</span> <span class="id" title="var">t</span>.<br/>
<a class="proof" href="#">Show proof.</a><br/><div class="proof"> <span class="id" title="tactic">reflexivity</span>. </div>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">ℤTorsorRecursion_inv_compute</span> {<span class="id" title="var">T</span>:<span class="id" title="var">Torsor</span> <span class="id" title="var">ℤ</span>} (<span class="id" title="var">P</span>:<span class="id" title="var">T</span>-&gt;<span class="id" title="keyword">Type</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">IH</span>:∏ <span class="id" title="var">t</span>, <span class="id" title="var">weq</span> (<span class="id" title="var">P</span> <span class="id" title="var">t</span>) (<span class="id" title="var">P</span> (<span class="id" title="var">one</span> + <span class="id" title="var">t</span>)))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">t0</span>:<span class="id" title="var">T</span>) (<span class="id" title="var">h0</span>:<span class="id" title="var">P</span> <span class="id" title="var">t0</span>) :<br/>
&nbsp;&nbsp;<span class="id" title="var">pr1</span> (<span class="id" title="var">invmap</span> (<span class="id" title="var">ℤTorsorRecursion_weq</span> <span class="id" title="var">P</span> <span class="id" title="var">IH</span> <span class="id" title="var">t0</span>) <span class="id" title="var">h0</span>) <span class="id" title="var">t0</span> = <span class="id" title="var">h0</span>.<br/>
<a class="proof" href="#">Show proof.</a><br/><div class="proof"> <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exact</span> (! <span class="id" title="var">ℤTorsorRecursion_compute</span> <span class="id" title="var">P</span> <span class="id" title="var">IH</span> <span class="id" title="var">t0</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">invmap</span> (<span class="id" title="var">ℤTorsorRecursion_weq</span> <span class="id" title="var">P</span> <span class="id" title="var">IH</span> <span class="id" title="var">t0</span>) <span class="id" title="var">h0</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">homotweqinvweq</span> (<span class="id" title="var">ℤTorsorRecursion_weq</span> <span class="id" title="var">P</span> <span class="id" title="var">IH</span> <span class="id" title="var">t0</span>) <span class="id" title="var">h0</span>). </div>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">ℤTorsorRecursion_transition</span> {<span class="id" title="var">T</span>:<span class="id" title="var">Torsor</span> <span class="id" title="var">ℤ</span>} (<span class="id" title="var">P</span>:<span class="id" title="var">T</span>-&gt;<span class="id" title="keyword">Type</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">IH</span>:∏ <span class="id" title="var">t</span>, <span class="id" title="var">weq</span> (<span class="id" title="var">P</span> <span class="id" title="var">t</span>) (<span class="id" title="var">P</span> (<span class="id" title="var">one</span> + <span class="id" title="var">t</span>)))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">t</span>:<span class="id" title="var">T</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">h</span>:<span class="id" title="var">total2</span> (<span class="id" title="var">GuidedSection</span> <span class="id" title="var">P</span> <span class="id" title="var">IH</span>)) :<br/>
&nbsp;&nbsp;<span class="id" title="var">ℤTorsorRecursion_weq</span> <span class="id" title="var">P</span> <span class="id" title="var">IH</span> (<span class="id" title="var">one</span>+<span class="id" title="var">t</span>) <span class="id" title="var">h</span><br/>
&nbsp;&nbsp;=<br/>
&nbsp;&nbsp;<span class="id" title="var">IH</span> <span class="id" title="var">t</span> (<span class="id" title="var">ℤTorsorRecursion_weq</span> <span class="id" title="var">P</span> <span class="id" title="var">IH</span> <span class="id" title="var">t</span> <span class="id" title="var">h</span>).<br/>
<a class="proof" href="#">Show proof.</a><br/><div class="proof"> <span class="id" title="tactic">intros</span>. <span class="id" title="tactic">rewrite</span> 2!<span class="id" title="var">ℤTorsorRecursion_compute</span>. <span class="id" title="tactic">exact</span> (<span class="id" title="var">pr2</span> <span class="id" title="var">h</span> <span class="id" title="var">t</span>). </div>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">ℤTorsorRecursion_transition_inv</span> {<span class="id" title="var">T</span>:<span class="id" title="var">Torsor</span> <span class="id" title="var">ℤ</span>} (<span class="id" title="var">P</span>:<span class="id" title="var">T</span>-&gt;<span class="id" title="keyword">Type</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">IH</span>:∏ <span class="id" title="var">t</span>, <span class="id" title="var">weq</span> (<span class="id" title="var">P</span> <span class="id" title="var">t</span>) (<span class="id" title="var">P</span> (<span class="id" title="var">one</span> + <span class="id" title="var">t</span>)))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">t</span>:<span class="id" title="var">T</span>) :<br/>
&nbsp;&nbsp;∏ <span class="id" title="var">h0</span>,<br/>
&nbsp;&nbsp;<span class="id" title="var">invmap</span> (<span class="id" title="var">ℤTorsorRecursion_weq</span> <span class="id" title="var">P</span> <span class="id" title="var">IH</span> <span class="id" title="var">t</span>) <span class="id" title="var">h0</span><br/>
&nbsp;&nbsp;=<br/>
&nbsp;&nbsp;<span class="id" title="var">invmap</span> (<span class="id" title="var">ℤTorsorRecursion_weq</span> <span class="id" title="var">P</span> <span class="id" title="var">IH</span> (<span class="id" title="var">one</span>+<span class="id" title="var">t</span>)) (<span class="id" title="var">IH</span> <span class="id" title="var">t</span> <span class="id" title="var">h0</span>).<br/>
<a class="proof" href="#">Show proof.</a><br/><div class="proof"> <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">a</span> := <span class="id" title="var">ℤTorsorRecursion_transition</span> <span class="id" title="var">P</span> <span class="id" title="var">IH</span> <span class="id" title="var">t</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">invmap</span> (<span class="id" title="var">ℤTorsorRecursion_weq</span> <span class="id" title="var">P</span> <span class="id" title="var">IH</span> <span class="id" title="var">t</span>) <span class="id" title="var">h0</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">homotweqinvweq</span> <span class="id" title="tactic">in</span> <span class="id" title="var">a</span>. <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">a</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">homotinvweqweq</span>. <span class="id" title="tactic">reflexivity</span>. </div>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">ℤTorsorRecursion</span> {<span class="id" title="var">T</span>:<span class="id" title="var">Torsor</span> <span class="id" title="var">ℤ</span>} (<span class="id" title="var">P</span>:<span class="id" title="var">T</span>-&gt;<span class="id" title="keyword">Type</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">IH</span>:∏ <span class="id" title="var">t</span>, <span class="id" title="var">weq</span> (<span class="id" title="var">P</span> <span class="id" title="var">t</span>) (<span class="id" title="var">P</span> (<span class="id" title="var">one</span> + <span class="id" title="var">t</span>)))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">t</span> <span class="id" title="var">t'</span>:<span class="id" title="var">T</span>) :<br/>
&nbsp;&nbsp;(<span class="id" title="var">P</span> <span class="id" title="var">t</span>) ≃ (<span class="id" title="var">P</span> <span class="id" title="var">t'</span>).<br/>
<a class="proof" href="#">Show proof.</a><br/><div class="proof"> <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exact</span> (<span class="id" title="var">weqcomp</span> (<span class="id" title="var">invweq</span> (<span class="id" title="var">ℤTorsorRecursion_weq</span> <span class="id" title="var">P</span> <span class="id" title="var">IH</span> <span class="id" title="var">t</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">ℤTorsorRecursion_weq</span> <span class="id" title="var">P</span> <span class="id" title="var">IH</span> <span class="id" title="var">t'</span>)). </div>

<br/>
</div>

<div class="doc">
<a name="lab1823"></a><h2 class="section">Guided null-homotopies from ℤ-torsors</h2>


<div class="paragraph"> </div>

 Let f be a map from a ℤ-torsor T to a type Y, and let s be a collection
 of target paths, connecting the images under f of consecutive points of T.

<div class="paragraph"> </div>

 A null-homotopy for f is a point y of Y, together with paths from
 y to each point in the image of f.  We say that it is "guided" by s
 if all the consecutive triangles commute.

<div class="paragraph"> </div>

 The main fact is that the type of guided null-homotopies for f is
 contractible.

<div class="paragraph"> </div>

 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">target_paths</span> {<span class="id" title="var">Y</span>} {<span class="id" title="var">T</span>:<span class="id" title="var">Torsor</span> <span class="id" title="var">ℤ</span>} (<span class="id" title="var">f</span>:<span class="id" title="var">T</span>-&gt;<span class="id" title="var">Y</span>) := ∏ <span class="id" title="var">t</span>, <span class="id" title="var">f</span> <span class="id" title="var">t</span>=<span class="id" title="var">f</span>(<span class="id" title="var">one</span> + <span class="id" title="var">t</span>).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">GHomotopy</span> {<span class="id" title="var">Y</span>} {<span class="id" title="var">T</span>:<span class="id" title="var">Torsor</span> <span class="id" title="var">ℤ</span>} (<span class="id" title="var">f</span>:<span class="id" title="var">T</span>-&gt;<span class="id" title="var">Y</span>) (<span class="id" title="var">s</span>:<span class="id" title="var">target_paths</span> <span class="id" title="var">f</span>) := <span class="id" title="keyword">fun</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">y</span>:<span class="id" title="var">Y</span> =&gt; ∑ <span class="id" title="var">h</span>:<span class="id" title="var">nullHomotopyFrom</span> <span class="id" title="var">f</span> <span class="id" title="var">y</span>, ∏ <span class="id" title="var">n</span>, <span class="id" title="var">h</span>(<span class="id" title="var">one</span> + <span class="id" title="var">n</span>) = <span class="id" title="var">h</span> <span class="id" title="var">n</span> @ <span class="id" title="var">s</span> <span class="id" title="var">n</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">GuidedHomotopy</span> {<span class="id" title="var">Y</span>} {<span class="id" title="var">T</span>:<span class="id" title="var">Torsor</span> <span class="id" title="var">ℤ</span>} (<span class="id" title="var">f</span>:<span class="id" title="var">T</span>-&gt;<span class="id" title="var">Y</span>) (<span class="id" title="var">s</span>:<span class="id" title="var">target_paths</span> <span class="id" title="var">f</span>) :=<br/>
&nbsp;&nbsp;<span class="id" title="var">total2</span> (<span class="id" title="var">GHomotopy</span> <span class="id" title="var">f</span> <span class="id" title="var">s</span>).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">GH_to_cone</span> {<span class="id" title="var">Y</span>} {<span class="id" title="var">T</span>:<span class="id" title="var">Torsor</span> <span class="id" title="var">ℤ</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id" title="var">f</span>:<span class="id" title="var">T</span>-&gt;<span class="id" title="var">Y</span>} {<span class="id" title="var">s</span>:<span class="id" title="var">target_paths</span> <span class="id" title="var">f</span>} (<span class="id" title="var">t</span>:<span class="id" title="var">T</span>)  :<br/>
&nbsp;&nbsp;<span class="id" title="var">GuidedHomotopy</span> <span class="id" title="var">f</span> <span class="id" title="var">s</span> -&gt; <span class="id" title="var">coconustot</span> <span class="id" title="var">Y</span> (<span class="id" title="var">f</span> <span class="id" title="var">t</span>).<br/>
<a class="proof" href="#">Show proof.</a><br/><div class="proof"> <span class="id" title="tactic">intros</span> [<span class="id" title="var">y</span> <span class="id" title="var">hp</span>]. <span class="id" title="tactic">exact</span> (<span class="id" title="var">y</span>,,<span class="id" title="var">pr1</span> <span class="id" title="var">hp</span> <span class="id" title="var">t</span>). </div>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">GH_point</span> {<span class="id" title="var">Y</span>} {<span class="id" title="var">T</span>:<span class="id" title="var">Torsor</span> <span class="id" title="var">ℤ</span>} {<span class="id" title="var">f</span>:<span class="id" title="var">T</span>-&gt;<span class="id" title="var">Y</span>} {<span class="id" title="var">s</span>:<span class="id" title="var">target_paths</span> <span class="id" title="var">f</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">yhp</span> : <span class="id" title="var">GuidedHomotopy</span> <span class="id" title="var">f</span> <span class="id" title="var">s</span>) := <span class="id" title="var">pr1</span> <span class="id" title="var">yhp</span> : <span class="id" title="var">Y</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">GH_homotopy</span> {<span class="id" title="var">Y</span>} {<span class="id" title="var">T</span>:<span class="id" title="var">Torsor</span> <span class="id" title="var">ℤ</span>} {<span class="id" title="var">f</span>:<span class="id" title="var">T</span>-&gt;<span class="id" title="var">Y</span>} {<span class="id" title="var">s</span>:<span class="id" title="var">target_paths</span> <span class="id" title="var">f</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">yhp</span> : <span class="id" title="var">GuidedHomotopy</span> <span class="id" title="var">f</span> <span class="id" title="var">s</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id" title="var">pr1</span> (<span class="id" title="var">pr2</span> <span class="id" title="var">yhp</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <span class="id" title="var">nullHomotopyFrom</span> <span class="id" title="var">f</span> (<span class="id" title="var">GH_point</span> <span class="id" title="var">yhp</span>).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">GH_equations</span> {<span class="id" title="var">Y</span>} {<span class="id" title="var">T</span>:<span class="id" title="var">Torsor</span> <span class="id" title="var">ℤ</span>} (<span class="id" title="var">f</span>:<span class="id" title="var">T</span>-&gt;<span class="id" title="var">Y</span>) (<span class="id" title="var">s</span>:<span class="id" title="var">target_paths</span> <span class="id" title="var">f</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">yhp</span> : <span class="id" title="var">GuidedHomotopy</span> <span class="id" title="var">f</span> <span class="id" title="var">s</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id" title="var">pr2</span> (<span class="id" title="var">pr2</span> <span class="id" title="var">yhp</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <span class="id" title="keyword">let</span> <span class="id" title="var">h</span> := <span class="id" title="var">GH_homotopy</span> <span class="id" title="var">yhp</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;∏ <span class="id" title="var">n</span>, <span class="id" title="var">h</span>(<span class="id" title="var">one</span> + <span class="id" title="var">n</span>) = <span class="id" title="var">h</span> <span class="id" title="var">n</span> @ <span class="id" title="var">s</span> <span class="id" title="var">n</span>.<br/>

<br/>
<span class="id" title="keyword">Theorem</span> <span class="id" title="var">iscontrGuidedHomotopy</span> {<span class="id" title="var">Y</span>} (<span class="id" title="var">T</span>:<span class="id" title="var">Torsor</span> <span class="id" title="var">ℤ</span>) (<span class="id" title="var">f</span>:<span class="id" title="var">T</span>-&gt;<span class="id" title="var">Y</span>) (<span class="id" title="var">s</span>:<span class="id" title="var">target_paths</span> <span class="id" title="var">f</span>) :<br/>
&nbsp;&nbsp;<span class="id" title="var">iscontr</span> (<span class="id" title="var">GuidedHomotopy</span> <span class="id" title="var">f</span> <span class="id" title="var">s</span>).<br/>
<a class="proof" href="#">Show proof.</a><br/><div class="proof"> <span class="id" title="tactic">intros</span>. <span class="id" title="tactic">apply</span> (<span class="id" title="var">squash_to_prop</span> (<span class="id" title="var">torsor_nonempty</span> <span class="id" title="var">T</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">apply</span> <span class="id" title="var">isapropiscontr</span>. } <span class="id" title="tactic">intro</span> <span class="id" title="var">t0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> ( <span class="id" title="var">iscontrweqb</span> (<span class="id" title="var">Y</span> := ∑ <span class="id" title="var">y</span>:<span class="id" title="var">Y</span>, <span class="id" title="var">y</span> = <span class="id" title="var">f</span> <span class="id" title="var">t0</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">apply</span> <span class="id" title="var">weqfibtototal</span>; <span class="id" title="tactic">intro</span> <span class="id" title="var">y</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exact</span> (<span class="id" title="var">ℤTorsorRecursion_weq</span> <span class="id" title="var">_</span> (<span class="id" title="var">λ</span> <span class="id" title="var">t</span>, <span class="id" title="var">weq_pathscomp0r</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>) <span class="id" title="var">t0</span>). }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">iscontrcoconustot</span>. </div>

<br/>
<span class="id" title="keyword">Corollary</span> <span class="id" title="var">proofirrGuidedHomotopy</span> {<span class="id" title="var">Y</span>} (<span class="id" title="var">T</span>:<span class="id" title="var">Torsor</span> <span class="id" title="var">ℤ</span>) (<span class="id" title="var">f</span>:<span class="id" title="var">T</span>-&gt;<span class="id" title="var">Y</span>) (<span class="id" title="var">s</span>:<span class="id" title="var">target_paths</span> <span class="id" title="var">f</span>) :<br/>
&nbsp;&nbsp;∏ <span class="id" title="var">v</span> <span class="id" title="var">w</span> : <span class="id" title="var">GuidedHomotopy</span> <span class="id" title="var">f</span> <span class="id" title="var">s</span>, <span class="id" title="var">v</span>=<span class="id" title="var">w</span>.<br/>
<a class="proof" href="#">Show proof.</a><br/><div class="proof"> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">proofirrelevancecontr</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">iscontrGuidedHomotopy</span>. </div>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">iscontrGuidedHomotopy_comp_1</span> {<span class="id" title="var">Y</span>} :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">T</span> := <span class="id" title="var">trivialTorsor</span> <span class="id" title="var">ℤ</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">t0</span> := 0 : <span class="id" title="var">T</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;∏ (<span class="id" title="var">f</span>:<span class="id" title="var">T</span>-&gt;<span class="id" title="var">Y</span>) (<span class="id" title="var">s</span>:<span class="id" title="var">target_paths</span> <span class="id" title="var">f</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">GH_point</span> (<span class="id" title="var">thePoint</span> (<span class="id" title="var">iscontrGuidedHomotopy</span> <span class="id" title="var">T</span> <span class="id" title="var">f</span> <span class="id" title="var">s</span>)) = <span class="id" title="var">f</span> <span class="id" title="var">t0</span>.<br/>
<a class="proof" href="#">Show proof.</a><br/><div class="proof"> <span class="id" title="tactic">reflexivity</span>. </div>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">iscontrGuidedHomotopy_comp_2</span> {<span class="id" title="var">Y</span>} :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">T</span> := <span class="id" title="var">trivialTorsor</span> <span class="id" title="var">ℤ</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">t0</span> := 0 : <span class="id" title="var">T</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;∏ (<span class="id" title="var">f</span>:<span class="id" title="var">T</span>-&gt;<span class="id" title="var">Y</span>) (<span class="id" title="var">s</span>:<span class="id" title="var">target_paths</span> <span class="id" title="var">f</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">GH_homotopy</span> (<span class="id" title="var">thePoint</span> (<span class="id" title="var">iscontrGuidedHomotopy</span> <span class="id" title="var">T</span> <span class="id" title="var">f</span> <span class="id" title="var">s</span>)) <span class="id" title="var">t0</span>) =<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">idpath</span> (<span class="id" title="var">f</span> <span class="id" title="var">t0</span>)).<br/>
<a class="proof" href="#">Show proof.</a><br/><div class="proof"> <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">a2</span> := <span class="id" title="var">fiber_paths</span> (<span class="id" title="var">iscontrweqb_compute</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">weqfibtototal</span> (<span class="id" title="var">GHomotopy</span> <span class="id" title="var">f</span> <span class="id" title="var">s</span>) (<span class="id" title="var">λ</span> <span class="id" title="var">y</span> : <span class="id" title="var">Y</span>, <span class="id" title="var">y</span> = <span class="id" title="var">f</span> <span class="id" title="var">t0</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">λ</span> <span class="id" title="var">y</span> : <span class="id" title="var">Y</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">ℤTorsorRecursion_weq</span> (<span class="id" title="var">λ</span> <span class="id" title="var">t</span> : <span class="id" title="var">T</span>, <span class="id" title="var">y</span> = <span class="id" title="var">f</span> <span class="id" title="var">t</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">λ</span> <span class="id" title="var">t</span> : <span class="id" title="var">T</span>, <span class="id" title="var">weq_pathscomp0r</span> <span class="id" title="var">y</span> (<span class="id" title="var">s</span> <span class="id" title="var">t</span>)) <span class="id" title="var">t0</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">iscontrcoconustot</span> <span class="id" title="var">Y</span> (<span class="id" title="var">f</span> <span class="id" title="var">t0</span>)))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: @<span class="id" title="var">paths</span> (<span class="id" title="var">GHomotopy</span> <span class="id" title="var">f</span> <span class="id" title="var">s</span> (<span class="id" title="var">f</span> <span class="id" title="var">t0</span>)) <span class="id" title="var">_</span> <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">Q1</span> := <span class="id" title="var">eqtohomot</span> (<span class="id" title="var">ap</span> <span class="id" title="var">pr1</span> ((<span class="id" title="var">idpath</span> <span class="id" title="var">_</span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">pr2</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">thePoint</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">iscontrweqb</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">weqfibtototal</span> (<span class="id" title="var">GHomotopy</span> <span class="id" title="var">f</span> <span class="id" title="var">s</span>) (<span class="id" title="var">λ</span> <span class="id" title="var">y</span> : <span class="id" title="var">Y</span>, <span class="id" title="var">y</span> = <span class="id" title="var">f</span> <span class="id" title="var">t0</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">λ</span> <span class="id" title="var">y</span> : <span class="id" title="var">Y</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">ℤTorsorRecursion_weq</span> (<span class="id" title="var">λ</span> <span class="id" title="var">t</span> : <span class="id" title="var">T</span>, <span class="id" title="var">y</span> = <span class="id" title="var">f</span> <span class="id" title="var">t</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">λ</span> <span class="id" title="var">t</span> : <span class="id" title="var">T</span>, <span class="id" title="var">weq_pathscomp0r</span> <span class="id" title="var">y</span> (<span class="id" title="var">s</span> <span class="id" title="var">t</span>)) <span class="id" title="var">t0</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">iscontrcoconustot</span> <span class="id" title="var">Y</span> (<span class="id" title="var">f</span> <span class="id" title="var">t0</span>)))))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">path_start</span> <span class="id" title="var">a2</span>)) @ <span class="id" title="var">a2</span>)) <span class="id" title="var">t0</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">Q2</span> := <span class="id" title="var">eqtohomot</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">ap</span> <span class="id" title="var">pr1</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">compute_pr2_invmap_weqfibtototal</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">λ</span> <span class="id" title="var">y</span> : <span class="id" title="var">Y</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">ℤTorsorRecursion_weq</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">λ</span> <span class="id" title="var">t</span> : <span class="id" title="var">T</span>, <span class="id" title="var">y</span> = <span class="id" title="var">f</span> <span class="id" title="var">t</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">λ</span> <span class="id" title="var">t</span> : <span class="id" title="var">T</span>, <span class="id" title="var">weq_pathscomp0r</span> <span class="id" title="var">y</span> (<span class="id" title="var">s</span> <span class="id" title="var">t</span>)) <span class="id" title="var">t0</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">f</span> <span class="id" title="var">t0</span>,, <span class="id" title="var">idpath</span> (<span class="id" title="var">f</span> <span class="id" title="var">t0</span>))))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">t0</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">Q3</span> := <span class="id" title="var">ℤTorsorRecursion_inv_compute</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">λ</span> <span class="id" title="var">t</span> : <span class="id" title="var">T</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">pr1</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">invmap</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">weqfibtototal</span> (<span class="id" title="var">λ</span> <span class="id" title="var">y</span> : <span class="id" title="var">Y</span>, ∑ <span class="id" title="var">y0</span>, <span class="id" title="var">GuidedSection</span> (<span class="id" title="var">λ</span> <span class="id" title="var">t1</span> : <span class="id" title="var">T</span>, <span class="id" title="var">y</span> = <span class="id" title="var">f</span> <span class="id" title="var">t1</span>) (<span class="id" title="var">λ</span> <span class="id" title="var">t1</span> : <span class="id" title="var">T</span>, <span class="id" title="var">weq_pathscomp0r</span> <span class="id" title="var">y</span> (<span class="id" title="var">s</span> <span class="id" title="var">t1</span>)) <span class="id" title="var">y0</span>) (<span class="id" title="var">λ</span> <span class="id" title="var">y</span> : <span class="id" title="var">Y</span>, (<span class="id" title="var">λ</span> <span class="id" title="var">t1</span> : <span class="id" title="var">T</span>, <span class="id" title="var">y</span> = <span class="id" title="var">f</span> <span class="id" title="var">t1</span>) <span class="id" title="var">t0</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">λ</span> <span class="id" title="var">y</span> : <span class="id" title="var">Y</span>, <span class="id" title="var">ℤTorsorRecursion_weq</span> (<span class="id" title="var">λ</span> <span class="id" title="var">t1</span> : <span class="id" title="var">T</span>, <span class="id" title="var">y</span> = <span class="id" title="var">f</span> <span class="id" title="var">t1</span>) (<span class="id" title="var">λ</span> <span class="id" title="var">t1</span> : <span class="id" title="var">T</span>, <span class="id" title="var">weq_pathscomp0r</span> <span class="id" title="var">y</span> (<span class="id" title="var">s</span> <span class="id" title="var">t1</span>)) <span class="id" title="var">t0</span>)) (<span class="id" title="var">f</span> <span class="id" title="var">t0</span>,, <span class="id" title="var">idpath</span> (<span class="id" title="var">f</span> <span class="id" title="var">t0</span>))) =<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">f</span> <span class="id" title="var">t</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">λ</span> <span class="id" title="var">t</span> : <span class="id" title="var">T</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">weq_pathscomp0r</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">pr1</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">invmap</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">weqfibtototal</span> (<span class="id" title="var">λ</span> <span class="id" title="var">y</span> : <span class="id" title="var">Y</span>, ∑ <span class="id" title="var">y0</span>, <span class="id" title="var">GuidedSection</span> (<span class="id" title="var">λ</span> <span class="id" title="var">t1</span> : <span class="id" title="var">T</span>, <span class="id" title="var">y</span> = <span class="id" title="var">f</span> <span class="id" title="var">t1</span>) (<span class="id" title="var">λ</span> <span class="id" title="var">t1</span> : <span class="id" title="var">T</span>, <span class="id" title="var">weq_pathscomp0r</span> <span class="id" title="var">y</span> (<span class="id" title="var">s</span> <span class="id" title="var">t1</span>)) <span class="id" title="var">y0</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">λ</span> <span class="id" title="var">y</span> : <span class="id" title="var">Y</span>, (<span class="id" title="var">λ</span> <span class="id" title="var">t1</span> : <span class="id" title="var">T</span>, <span class="id" title="var">y</span> = <span class="id" title="var">f</span> <span class="id" title="var">t1</span>) <span class="id" title="var">t0</span>) (<span class="id" title="var">λ</span> <span class="id" title="var">y</span> : <span class="id" title="var">Y</span>, <span class="id" title="var">ℤTorsorRecursion_weq</span> (<span class="id" title="var">λ</span> <span class="id" title="var">t1</span> : <span class="id" title="var">T</span>, <span class="id" title="var">y</span> = <span class="id" title="var">f</span> <span class="id" title="var">t1</span>) (<span class="id" title="var">λ</span> <span class="id" title="var">t1</span> : <span class="id" title="var">T</span>, <span class="id" title="var">weq_pathscomp0r</span> <span class="id" title="var">y</span> (<span class="id" title="var">s</span> <span class="id" title="var">t1</span>)) <span class="id" title="var">t0</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">f</span> <span class="id" title="var">t0</span>,, <span class="id" title="var">idpath</span> (<span class="id" title="var">f</span> <span class="id" title="var">t0</span>)))) (<span class="id" title="var">s</span> <span class="id" title="var">t</span>)) <span class="id" title="var">t0</span> (<span class="id" title="var">pr2</span> (<span class="id" title="var">f</span> <span class="id" title="var">t0</span>,, <span class="id" title="var">idpath</span> (<span class="id" title="var">f</span> <span class="id" title="var">t0</span>)))).<br/>
<span class="id" title="keyword">Abort</span>.<br/>

<br/>

<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">makeGuidedHomotopy</span> {<span class="id" title="var">T</span>:<span class="id" title="var">Torsor</span> <span class="id" title="var">ℤ</span>} {<span class="id" title="var">Y</span>} (<span class="id" title="var">f</span>:<span class="id" title="var">T</span>-&gt;<span class="id" title="var">Y</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">s</span>:<span class="id" title="var">target_paths</span> <span class="id" title="var">f</span>) {<span class="id" title="var">y</span>:<span class="id" title="var">Y</span>} <span class="id" title="var">t0</span> (<span class="id" title="var">h0</span>:<span class="id" title="var">y</span>=<span class="id" title="var">f</span> <span class="id" title="var">t0</span>) :<br/>
&nbsp;&nbsp;<span class="id" title="var">GuidedHomotopy</span> <span class="id" title="var">f</span> <span class="id" title="var">s</span>.<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">intros</span>. <span class="id" title="tactic">exact</span> (<span class="id" title="var">y</span> ,, <span class="id" title="var">invweq</span> (<span class="id" title="var">ℤTorsorRecursion_weq</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">λ</span> <span class="id" title="var">t</span> : <span class="id" title="var">T</span>, <span class="id" title="var">y</span> = <span class="id" title="var">f</span> <span class="id" title="var">t</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">λ</span> <span class="id" title="var">t</span>, <span class="id" title="var">weq_pathscomp0r</span> <span class="id" title="var">y</span> (<span class="id" title="var">s</span> <span class="id" title="var">t</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">t0</span>) <span class="id" title="var">h0</span>). </div>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">makeGuidedHomotopy1</span> {<span class="id" title="var">T</span>:<span class="id" title="var">Torsor</span> <span class="id" title="var">ℤ</span>} {<span class="id" title="var">Y</span>} (<span class="id" title="var">f</span>:<span class="id" title="var">T</span>-&gt;<span class="id" title="var">Y</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">s</span>:<span class="id" title="var">target_paths</span> <span class="id" title="var">f</span>) (<span class="id" title="var">t0</span>:<span class="id" title="var">T</span>) : <span class="id" title="var">GuidedHomotopy</span> <span class="id" title="var">f</span> <span class="id" title="var">s</span>.<br/>
<a class="proof" href="#">Show proof.</a><br/><div class="proof"> <span class="id" title="tactic">intros</span>. <span class="id" title="tactic">exact</span> (<span class="id" title="var">makeGuidedHomotopy</span> <span class="id" title="var">f</span> <span class="id" title="var">s</span> <span class="id" title="var">t0</span> (<span class="id" title="var">idpath</span> (<span class="id" title="var">f</span> <span class="id" title="var">t0</span>))). </div>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">makeGuidedHomotopy_localPath</span> {<span class="id" title="var">T</span>:<span class="id" title="var">Torsor</span> <span class="id" title="var">ℤ</span>} {<span class="id" title="var">Y</span>} (<span class="id" title="var">f</span>:<span class="id" title="var">T</span>-&gt;<span class="id" title="var">Y</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">s</span>:<span class="id" title="var">target_paths</span> <span class="id" title="var">f</span>) {<span class="id" title="var">y</span>:<span class="id" title="var">Y</span>} <span class="id" title="var">t0</span> (<span class="id" title="var">h0</span> <span class="id" title="var">h0'</span>:<span class="id" title="var">y</span>=<span class="id" title="var">f</span> <span class="id" title="var">t0</span>) (<span class="id" title="var">q</span>:<span class="id" title="var">h0</span>=<span class="id" title="var">h0'</span>) :<br/>
&nbsp;&nbsp;<span class="id" title="var">makeGuidedHomotopy</span> <span class="id" title="var">f</span> <span class="id" title="var">s</span> <span class="id" title="var">t0</span> <span class="id" title="var">h0</span> = <span class="id" title="var">makeGuidedHomotopy</span> <span class="id" title="var">f</span> <span class="id" title="var">s</span> <span class="id" title="var">t0</span> <span class="id" title="var">h0'</span>.<br/>
<a class="proof" href="#">Show proof.</a><br/><div class="proof"> <span class="id" title="tactic">intros</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">q</span>. <span class="id" title="tactic">reflexivity</span>. </div>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">makeGuidedHomotopy_localPath_comp</span> {<span class="id" title="var">T</span>:<span class="id" title="var">Torsor</span> <span class="id" title="var">ℤ</span>} {<span class="id" title="var">Y</span>} (<span class="id" title="var">f</span>:<span class="id" title="var">T</span>-&gt;<span class="id" title="var">Y</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">s</span>:<span class="id" title="var">target_paths</span> <span class="id" title="var">f</span>) {<span class="id" title="var">y</span>:<span class="id" title="var">Y</span>} <span class="id" title="var">t0</span> (<span class="id" title="var">h0</span> <span class="id" title="var">h0'</span>:<span class="id" title="var">y</span>=<span class="id" title="var">f</span> <span class="id" title="var">t0</span>) (<span class="id" title="var">q</span>:<span class="id" title="var">h0</span>=<span class="id" title="var">h0'</span>) :<br/>
&nbsp;&nbsp;<span class="id" title="var">ap</span> <span class="id" title="var">pr1</span> (<span class="id" title="var">makeGuidedHomotopy_localPath</span> <span class="id" title="var">f</span> <span class="id" title="var">s</span> <span class="id" title="var">t0</span> <span class="id" title="var">h0</span> <span class="id" title="var">h0'</span> <span class="id" title="var">q</span>) = <span class="id" title="var">idpath</span> <span class="id" title="var">y</span>.<br/>
<a class="proof" href="#">Show proof.</a><br/><div class="proof"> <span class="id" title="tactic">intros</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">q</span>. <span class="id" title="tactic">reflexivity</span>. </div>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">makeGuidedHomotopy_verticalPath</span> {<span class="id" title="var">T</span>:<span class="id" title="var">Torsor</span> <span class="id" title="var">ℤ</span>} {<span class="id" title="var">Y</span>} (<span class="id" title="var">f</span>:<span class="id" title="var">T</span>-&gt;<span class="id" title="var">Y</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">s</span>:<span class="id" title="var">target_paths</span> <span class="id" title="var">f</span>) {<span class="id" title="var">y</span>:<span class="id" title="var">Y</span>} <span class="id" title="var">t0</span> (<span class="id" title="var">h0</span>:<span class="id" title="var">y</span>=<span class="id" title="var">f</span> <span class="id" title="var">t0</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id" title="var">y'</span>:<span class="id" title="var">Y</span>} (<span class="id" title="var">p</span>:<span class="id" title="var">y'</span> = <span class="id" title="var">y</span>) :<br/>
&nbsp;&nbsp;<span class="id" title="var">makeGuidedHomotopy</span> <span class="id" title="var">f</span> <span class="id" title="var">s</span> <span class="id" title="var">t0</span> (<span class="id" title="var">p@h0</span>) = <span class="id" title="var">makeGuidedHomotopy</span> <span class="id" title="var">f</span> <span class="id" title="var">s</span> <span class="id" title="var">t0</span> <span class="id" title="var">h0</span>.<br/>
<a class="proof" href="#">Show proof.</a><br/><div class="proof"> <span class="id" title="tactic">intros</span>. <span class="id" title="tactic">apply</span> (<span class="id" title="var">two_arg_paths_f</span> <span class="id" title="var">p</span>). <span class="id" title="tactic">destruct</span> <span class="id" title="var">p</span>. <span class="id" title="tactic">reflexivity</span>. </div>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">makeGuidedHomotopy_verticalPath_comp</span> {<span class="id" title="var">T</span>:<span class="id" title="var">Torsor</span> <span class="id" title="var">ℤ</span>} {<span class="id" title="var">Y</span>} (<span class="id" title="var">f</span>:<span class="id" title="var">T</span>-&gt;<span class="id" title="var">Y</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">s</span>:<span class="id" title="var">target_paths</span> <span class="id" title="var">f</span>) {<span class="id" title="var">y</span>:<span class="id" title="var">Y</span>} <span class="id" title="var">t0</span> (<span class="id" title="var">h0</span>:<span class="id" title="var">y</span>=<span class="id" title="var">f</span> <span class="id" title="var">t0</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id" title="var">y'</span>:<span class="id" title="var">Y</span>} (<span class="id" title="var">p</span>:<span class="id" title="var">y'</span> = <span class="id" title="var">y</span>) :<br/>
&nbsp;&nbsp;<span class="id" title="var">ap</span> <span class="id" title="var">pr1</span> (<span class="id" title="var">makeGuidedHomotopy_verticalPath</span> <span class="id" title="var">f</span> <span class="id" title="var">s</span> <span class="id" title="var">t0</span> <span class="id" title="var">h0</span> <span class="id" title="var">p</span>) = <span class="id" title="var">p</span>.<br/>
<a class="proof" href="#">Show proof.</a><br/><div class="proof"> <span class="id" title="tactic">intros</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">total2_paths2_comp1</span>. </div>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">makeGuidedHomotopy_transPath</span> {<span class="id" title="var">T</span>:<span class="id" title="var">Torsor</span> <span class="id" title="var">ℤ</span>} {<span class="id" title="var">Y</span>} (<span class="id" title="var">f</span>:<span class="id" title="var">T</span>-&gt;<span class="id" title="var">Y</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">s</span>:<span class="id" title="var">target_paths</span> <span class="id" title="var">f</span>) {<span class="id" title="var">y</span>:<span class="id" title="var">Y</span>} <span class="id" title="var">t0</span> (<span class="id" title="var">h0</span>:<span class="id" title="var">y</span>=<span class="id" title="var">f</span> <span class="id" title="var">t0</span>) :<br/>
&nbsp;&nbsp;<span class="id" title="var">makeGuidedHomotopy</span> <span class="id" title="var">f</span> <span class="id" title="var">s</span> <span class="id" title="var">t0</span> <span class="id" title="var">h0</span> = <span class="id" title="var">makeGuidedHomotopy</span> <span class="id" title="var">f</span> <span class="id" title="var">s</span> (<span class="id" title="var">one</span>+<span class="id" title="var">t0</span>) (<span class="id" title="var">h0</span> @ <span class="id" title="var">s</span> <span class="id" title="var">t0</span>).<br/>
<a class="proof" href="#">Show proof.</a><br/><div class="proof"> <span class="id" title="tactic">intros</span>. <span class="id" title="tactic">apply</span> (<span class="id" title="var">maponpaths</span> (<span class="id" title="var">tpair</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exact</span> (<span class="id" title="var">ℤTorsorRecursion_transition_inv</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">_</span> (<span class="id" title="var">λ</span> <span class="id" title="var">t</span>, <span class="id" title="var">weq_pathscomp0r</span> <span class="id" title="var">y</span> (<span class="id" title="var">s</span> <span class="id" title="var">t</span>)) <span class="id" title="var">_</span> <span class="id" title="var">_</span>). </div>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">makeGuidedHomotopy_transPath_comp</span> {<span class="id" title="var">T</span>:<span class="id" title="var">Torsor</span> <span class="id" title="var">ℤ</span>} {<span class="id" title="var">Y</span>} (<span class="id" title="var">f</span>:<span class="id" title="var">T</span>-&gt;<span class="id" title="var">Y</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">s</span>:<span class="id" title="var">target_paths</span> <span class="id" title="var">f</span>) {<span class="id" title="var">y</span>:<span class="id" title="var">Y</span>} <span class="id" title="var">t0</span> (<span class="id" title="var">h0</span>:<span class="id" title="var">y</span>=<span class="id" title="var">f</span> <span class="id" title="var">t0</span>) :<br/>
&nbsp;&nbsp;<span class="id" title="var">ap</span> <span class="id" title="var">pr1</span> (<span class="id" title="var">makeGuidedHomotopy_transPath</span> <span class="id" title="var">f</span> <span class="id" title="var">s</span> <span class="id" title="var">t0</span> <span class="id" title="var">h0</span>) = <span class="id" title="var">idpath</span> <span class="id" title="var">y</span>.<br/>
<a class="proof" href="#">Show proof.</a><br/><div class="proof"> <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">makeGuidedHomotopy_transPath</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exact</span> (<span class="id" title="var">pair_path_in2_comp1</span> <span class="id" title="var">_</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">ℤTorsorRecursion_transition_inv</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">_</span> (<span class="id" title="var">λ</span> <span class="id" title="var">t</span>, <span class="id" title="var">weq_pathscomp0r</span> <span class="id" title="var">y</span> (<span class="id" title="var">s</span> <span class="id" title="var">t</span>)) <span class="id" title="var">_</span> <span class="id" title="var">_</span>)). </div>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">makeGuidedHomotopy_diagonalPath</span> {<span class="id" title="var">T</span>:<span class="id" title="var">Torsor</span> <span class="id" title="var">ℤ</span>} {<span class="id" title="var">Y</span>} (<span class="id" title="var">f</span>:<span class="id" title="var">T</span>-&gt;<span class="id" title="var">Y</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">s</span>:<span class="id" title="var">target_paths</span> <span class="id" title="var">f</span>) (<span class="id" title="var">t0</span>:<span class="id" title="var">T</span>) :<br/>
&nbsp;&nbsp;<span class="id" title="var">makeGuidedHomotopy1</span> <span class="id" title="var">f</span> <span class="id" title="var">s</span> <span class="id" title="var">t0</span> = <span class="id" title="var">makeGuidedHomotopy1</span> <span class="id" title="var">f</span> <span class="id" title="var">s</span> (<span class="id" title="var">one</span> + <span class="id" title="var">t0</span>).<br/>
<a class="proof" href="#">Show proof.</a><br/><div class="proof"> <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">b</span> := <span class="id" title="var">makeGuidedHomotopy_transPath</span> <span class="id" title="var">f</span> <span class="id" title="var">s</span> <span class="id" title="var">t0</span> (<span class="id" title="var">idpath</span>(<span class="id" title="var">f</span> <span class="id" title="var">t0</span>))); <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">b</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">c</span> := <span class="id" title="var">makeGuidedHomotopy_localPath</span> <span class="id" title="var">f</span> <span class="id" title="var">s</span> (<span class="id" title="var">one</span> + <span class="id" title="var">t0</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">s</span> <span class="id" title="var">t0</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">s</span> <span class="id" title="var">t0</span> @ <span class="id" title="var">idpath</span> (<span class="id" title="var">f</span> (<span class="id" title="var">one</span> + <span class="id" title="var">t0</span>)))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(! <span class="id" title="var">pathscomp0rid</span> (<span class="id" title="var">s</span> <span class="id" title="var">t0</span>))).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">a</span> := <span class="id" title="var">makeGuidedHomotopy_verticalPath</span> <span class="id" title="var">f</span> <span class="id" title="var">s</span> (<span class="id" title="var">one</span>+<span class="id" title="var">t0</span>) (<span class="id" title="var">idpath</span>(<span class="id" title="var">f</span>(<span class="id" title="var">one</span> + <span class="id" title="var">t0</span>))) (<span class="id" title="var">s</span> <span class="id" title="var">t0</span>)) .<br/>
&nbsp;&nbsp;<span class="id" title="tactic">exact</span> (<span class="id" title="var">b</span> @ <span class="id" title="var">c</span> @ <span class="id" title="var">a</span>).<br/>
</div>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">makeGuidedHomotopy_diagonalPath_comp</span> {<span class="id" title="var">T</span>:<span class="id" title="var">Torsor</span> <span class="id" title="var">ℤ</span>} {<span class="id" title="var">Y</span>} (<span class="id" title="var">f</span>:<span class="id" title="var">T</span>-&gt;<span class="id" title="var">Y</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">s</span>:<span class="id" title="var">target_paths</span> <span class="id" title="var">f</span>) (<span class="id" title="var">t0</span>:<span class="id" title="var">T</span>) :<br/>
&nbsp;&nbsp;<span class="id" title="var">ap</span> <span class="id" title="var">pr1</span> (<span class="id" title="var">makeGuidedHomotopy_diagonalPath</span> <span class="id" title="var">f</span> <span class="id" title="var">s</span> <span class="id" title="var">t0</span>) = <span class="id" title="var">s</span> <span class="id" title="var">t0</span>.<br/>
<a class="proof" href="#">Show proof.</a><br/><div class="proof"> <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">makeGuidedHomotopy_diagonalPath</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simple</span> <span class="id" title="tactic">refine</span> (<span class="id" title="var">maponpaths_naturality</span> (<span class="id" title="var">makeGuidedHomotopy_transPath_comp</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>) <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simple</span> <span class="id" title="tactic">refine</span> (<span class="id" title="var">maponpaths_naturality</span> (<span class="id" title="var">makeGuidedHomotopy_localPath_comp</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>) <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exact</span> (<span class="id" title="var">makeGuidedHomotopy_verticalPath_comp</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>).<br/>
</div>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">map</span> {<span class="id" title="var">T</span>:<span class="id" title="var">Torsor</span> <span class="id" title="var">ℤ</span>} {<span class="id" title="var">Y</span>} (<span class="id" title="var">f</span>:<span class="id" title="var">T</span>-&gt;<span class="id" title="var">Y</span>) (<span class="id" title="var">s</span>:<span class="id" title="var">target_paths</span> <span class="id" title="var">f</span>) :<br/>
&nbsp;&nbsp;∥ <span class="id" title="var">T</span> ∥ -&gt; <span class="id" title="var">GuidedHomotopy</span> <span class="id" title="var">f</span> <span class="id" title="var">s</span>.<br/>
<a class="proof" href="#">Show proof.</a><br/><div class="proof"> <span class="id" title="tactic">intros</span> <span class="id" title="var">t'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">squash_to_prop</span> <span class="id" title="var">t'</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">apply</span> <span class="id" title="var">isapropifcontr</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">iscontrGuidedHomotopy</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intro</span> <span class="id" title="var">t</span>; <span class="id" title="tactic">clear</span> <span class="id" title="var">t'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exact</span> (<span class="id" title="var">makeGuidedHomotopy1</span> <span class="id" title="var">f</span> <span class="id" title="var">s</span> <span class="id" title="var">t</span>). </div>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">map_path</span> {<span class="id" title="var">T</span>:<span class="id" title="var">Torsor</span> <span class="id" title="var">ℤ</span>} {<span class="id" title="var">Y</span>} (<span class="id" title="var">f</span>:<span class="id" title="var">T</span>-&gt;<span class="id" title="var">Y</span>) (<span class="id" title="var">s</span>:<span class="id" title="var">target_paths</span> <span class="id" title="var">f</span>) :<br/>
&nbsp;&nbsp;∏ <span class="id" title="var">t</span>, <span class="id" title="var">map</span> <span class="id" title="var">f</span> <span class="id" title="var">s</span> (<span class="id" title="var">squash_element</span> <span class="id" title="var">t</span>) = <span class="id" title="var">map</span> <span class="id" title="var">f</span> <span class="id" title="var">s</span> (<span class="id" title="var">squash_element</span> (<span class="id" title="var">one</span> + <span class="id" title="var">t</span>)).<br/>
<a class="proof" href="#">Show proof.</a><br/><div class="proof"> <span class="id" title="tactic">intros</span>. <span class="id" title="tactic">exact</span> (<span class="id" title="var">makeGuidedHomotopy_diagonalPath</span> <span class="id" title="var">f</span> <span class="id" title="var">s</span> <span class="id" title="var">t</span>). </div>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">map_path_check</span> {<span class="id" title="var">T</span>:<span class="id" title="var">Torsor</span> <span class="id" title="var">ℤ</span>} {<span class="id" title="var">Y</span>} (<span class="id" title="var">f</span>:<span class="id" title="var">T</span>-&gt;<span class="id" title="var">Y</span>) (<span class="id" title="var">s</span>:<span class="id" title="var">target_paths</span> <span class="id" title="var">f</span>) :<br/>
&nbsp;&nbsp;∏ <span class="id" title="var">t</span>, ∏ <span class="id" title="var">p</span> : <span class="id" title="var">map</span> <span class="id" title="var">f</span> <span class="id" title="var">s</span> (<span class="id" title="var">squash_element</span> <span class="id" title="var">t</span>) =<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">map</span> <span class="id" title="var">f</span> <span class="id" title="var">s</span> (<span class="id" title="var">squash_element</span> (<span class="id" title="var">one</span> + <span class="id" title="var">t</span>)),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">ap</span> <span class="id" title="var">pr1</span> <span class="id" title="var">p</span> = <span class="id" title="var">s</span> <span class="id" title="var">t</span>.<br/>
<a class="proof" href="#">Show proof.</a><br/><div class="proof"> <span class="id" title="tactic">intros</span>. <span class="id" title="tactic">set</span> (<span class="id" title="var">q</span> := <span class="id" title="var">map_path</span> <span class="id" title="var">f</span> <span class="id" title="var">s</span> <span class="id" title="var">t</span>). <span class="id" title="tactic">assert</span> (<span class="id" title="var">k</span> : <span class="id" title="var">q</span>=<span class="id" title="var">p</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">apply</span> (<span class="id" title="var">hlevelntosn</span> 1). <span class="id" title="tactic">apply</span> (<span class="id" title="var">hlevelntosn</span> 0).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">iscontrGuidedHomotopy</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">k</span>. <span class="id" title="tactic">exact</span> (<span class="id" title="var">makeGuidedHomotopy_diagonalPath_comp</span> <span class="id" title="var">f</span> <span class="id" title="var">s</span> <span class="id" title="var">t</span>). </div>

<br/>
</div>

<div class="doc">
<a name="lab1824"></a><h2 class="section">From each torsor we get a guided homotopy</h2>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">makeGuidedHomotopy2</span> (<span class="id" title="var">T</span>:<span class="id" title="var">Torsor</span> <span class="id" title="var">ℤ</span>) {<span class="id" title="var">Y</span>} (<span class="id" title="var">f</span>:<span class="id" title="var">T</span>-&gt;<span class="id" title="var">Y</span>) (<span class="id" title="var">s</span>:<span class="id" title="var">target_paths</span> <span class="id" title="var">f</span>) :<br/>
&nbsp;&nbsp;<span class="id" title="var">GuidedHomotopy</span> <span class="id" title="var">f</span> <span class="id" title="var">s</span>.<br/>
<a class="proof" href="#">Show proof.</a><br/><div class="proof"> <span class="id" title="tactic">intros</span>. <span class="id" title="tactic">exact</span> (<span class="id" title="var">map</span> <span class="id" title="var">f</span> <span class="id" title="var">s</span> (<span class="id" title="var">torsor_nonempty</span> <span class="id" title="var">T</span>)). </div>

<br/>
</div>

<div class="doc">
<a name="lab1825"></a><h2 class="section">The construction of the affine line</h2>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">affine_line</span> (<span class="id" title="var">T</span>:<span class="id" title="var">Torsor</span> <span class="id" title="var">ℤ</span>) := ∥ <span class="id" title="var">T</span> ∥.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">affine_line_point</span> (<span class="id" title="var">T</span>:<span class="id" title="var">Torsor</span> <span class="id" title="var">ℤ</span>) : <span class="id" title="var">affine_line</span> <span class="id" title="var">T</span>.<br/>
<a class="proof" href="#">Show proof.</a><br/><div class="proof"> <span class="id" title="tactic">intros</span>. <span class="id" title="tactic">exact</span> (<span class="id" title="var">torsor_nonempty</span> <span class="id" title="var">T</span>). </div>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">iscontr_affine_line</span> (<span class="id" title="var">T</span>:<span class="id" title="var">Torsor</span> <span class="id" title="var">ℤ</span>) : <span class="id" title="var">iscontr</span> (<span class="id" title="var">affine_line</span> <span class="id" title="var">T</span>).<br/>
<a class="proof" href="#">Show proof.</a><br/><div class="proof"> <span class="id" title="tactic">intros</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">iscontraprop1</span>. { <span class="id" title="tactic">apply</span> <span class="id" title="var">propproperty</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exact</span> (<span class="id" title="var">torsor_nonempty</span> <span class="id" title="var">T</span>). </div>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">affine_line_path</span> {<span class="id" title="var">T</span>:<span class="id" title="var">Torsor</span> <span class="id" title="var">ℤ</span>} (<span class="id" title="var">t</span> <span class="id" title="var">u</span>:<span class="id" title="var">affine_line</span> <span class="id" title="var">T</span>) : <span class="id" title="var">t</span> = <span class="id" title="var">u</span>.<br/>
<a class="proof" href="#">Show proof.</a><br/><div class="proof"> <span class="id" title="tactic">intros</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">proofirrelevance</span>, <span class="id" title="var">isapropifcontr</span>, <span class="id" title="var">iscontr_affine_line</span>. </div>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">affine_line_map</span> {<span class="id" title="var">T</span>:<span class="id" title="var">Torsor</span> <span class="id" title="var">ℤ</span>} {<span class="id" title="var">Y</span>} (<span class="id" title="var">f</span>:<span class="id" title="var">T</span>-&gt;<span class="id" title="var">Y</span>) (<span class="id" title="var">s</span>:<span class="id" title="var">target_paths</span> <span class="id" title="var">f</span>) :<br/>
&nbsp;&nbsp;<span class="id" title="var">affine_line</span> <span class="id" title="var">T</span> -&gt; <span class="id" title="var">Y</span>.<br/>
<a class="proof" href="#">Show proof.</a><br/><div class="proof"> <span class="id" title="tactic">intros</span> <span class="id" title="var">t'</span>. <span class="id" title="tactic">exact</span> (<span class="id" title="var">pr1</span> (<span class="id" title="var">map</span> <span class="id" title="var">f</span> <span class="id" title="var">s</span> <span class="id" title="var">t'</span>)). </div>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">check_values</span> {<span class="id" title="var">T</span>:<span class="id" title="var">Torsor</span> <span class="id" title="var">ℤ</span>} {<span class="id" title="var">Y</span>} (<span class="id" title="var">f</span>:<span class="id" title="var">T</span>-&gt;<span class="id" title="var">Y</span>) (<span class="id" title="var">s</span>:<span class="id" title="var">target_paths</span> <span class="id" title="var">f</span>) <span class="id" title="var">t</span> :<br/>
&nbsp;&nbsp;<span class="id" title="var">affine_line_map</span> <span class="id" title="var">f</span> <span class="id" title="var">s</span> (<span class="id" title="var">squash_element</span> <span class="id" title="var">t</span>) = <span class="id" title="var">f</span> <span class="id" title="var">t</span>.<br/>
<a class="proof" href="#">Show proof.</a><br/><div class="proof"> <span class="id" title="tactic">reflexivity</span>. </div>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">check_paths</span> {<span class="id" title="var">T</span>:<span class="id" title="var">Torsor</span> <span class="id" title="var">ℤ</span>} {<span class="id" title="var">Y</span>} (<span class="id" title="var">f</span>:<span class="id" title="var">T</span>-&gt;<span class="id" title="var">Y</span>) (<span class="id" title="var">s</span>:<span class="id" title="var">target_paths</span> <span class="id" title="var">f</span>) (<span class="id" title="var">t</span>:<span class="id" title="var">T</span>) :<br/>
&nbsp;&nbsp;<span class="id" title="var">ap</span> (<span class="id" title="var">affine_line_map</span> <span class="id" title="var">f</span> <span class="id" title="var">s</span>) (<span class="id" title="var">squash_path</span> <span class="id" title="var">t</span> (<span class="id" title="var">one</span> + <span class="id" title="var">t</span>)) = <span class="id" title="var">s</span> <span class="id" title="var">t</span>.<br/>
<a class="proof" href="#">Show proof.</a><br/><div class="proof"> <span class="id" title="tactic">intros</span>. <span class="id" title="var">unshelve</span> <span class="id" title="tactic">refine</span> (<span class="id" title="var">_</span> @ <span class="id" title="var">map_path_check</span> <span class="id" title="var">f</span> <span class="id" title="var">s</span> <span class="id" title="var">t</span> <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <span class="id" title="var">maponpaths</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">squash_path</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <span class="id" title="var">pathsinv0</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">maponpathscomp</span>. </div>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">check_paths_any</span> {<span class="id" title="var">T</span>:<span class="id" title="var">Torsor</span> <span class="id" title="var">ℤ</span>} {<span class="id" title="var">Y</span>} (<span class="id" title="var">f</span>:<span class="id" title="var">T</span>-&gt;<span class="id" title="var">Y</span>) (<span class="id" title="var">s</span>:<span class="id" title="var">target_paths</span> <span class="id" title="var">f</span>) (<span class="id" title="var">t</span>:<span class="id" title="var">T</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">p</span> : <span class="id" title="var">squash_element</span> <span class="id" title="var">t</span> = <span class="id" title="var">squash_element</span> (<span class="id" title="var">one</span> + <span class="id" title="var">t</span>)) :<br/>
&nbsp;&nbsp;<span class="id" title="var">ap</span> (<span class="id" title="var">affine_line_map</span> <span class="id" title="var">f</span> <span class="id" title="var">s</span>) <span class="id" title="var">p</span> = <span class="id" title="var">s</span> <span class="id" title="var">t</span>.<br/>
<a class="proof" href="#">Show proof.</a><br/><div class="proof"> <span class="id" title="tactic">intros</span>. <span class="id" title="tactic">set</span> (<span class="id" title="var">p'</span> := <span class="id" title="var">squash_path</span> <span class="id" title="var">t</span> (<span class="id" title="var">one</span> + <span class="id" title="var">t</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">e</span> : <span class="id" title="var">p'</span> = <span class="id" title="var">p</span>). { <span class="id" title="tactic">apply</span> (<span class="id" title="var">hlevelntosn</span> 1). <span class="id" title="tactic">apply</span> <span class="id" title="var">propproperty</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">e</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">check_paths</span>. </div>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">add_one</span> {<span class="id" title="var">T</span>:<span class="id" title="var">Torsor</span> <span class="id" title="var">ℤ</span>} : <span class="id" title="var">affine_line</span> <span class="id" title="var">T</span> -&gt; <span class="id" title="var">affine_line</span> <span class="id" title="var">T</span>.<br/>
<a class="proof" href="#">Show proof.</a><br/><div class="proof"> <span class="id" title="tactic">exact</span> (<span class="id" title="var">squash_fun</span> (<span class="id" title="var">λ</span> <span class="id" title="var">t</span>, <span class="id" title="var">one</span> + <span class="id" title="var">t</span>)). </div>

<br/>
</div>

<div class="doc">
<a name="lab1826"></a><h2 class="section">The image of the mere point in an affine line</h2>


<div class="paragraph"> </div>

 A torsor is nonempty, so it merely has a point, as does the
 corresponding affine line.  Here we name its image in Y. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">affine_line_value</span> {<span class="id" title="var">T</span>:<span class="id" title="var">Torsor</span> <span class="id" title="var">ℤ</span>} {<span class="id" title="var">Y</span>} (<span class="id" title="var">f</span>:<span class="id" title="var">T</span>-&gt;<span class="id" title="var">Y</span>) (<span class="id" title="var">s</span>:<span class="id" title="var">target_paths</span> <span class="id" title="var">f</span>) : <span class="id" title="var">Y</span>.<br/>
<a class="proof" href="#">Show proof.</a><br/><div class="proof"> <span class="id" title="tactic">exact</span> (<span class="id" title="var">affine_line_map</span> <span class="id" title="var">f</span> <span class="id" title="var">s</span> (<span class="id" title="var">affine_line_point</span> <span class="id" title="var">T</span>)). </div>

<br/>
</div>
</div>

<div id="footer">
<hr/><a href="index.html">Index</a><hr/>This page has been generated by <a href="http://coq.inria.fr/">coqdoc</a>
</div>

</div>

</body>
</html>