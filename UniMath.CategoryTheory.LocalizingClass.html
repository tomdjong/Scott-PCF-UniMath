<!DOCTYPE html>
<html>
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
	<link href="coqdoc.css" rel="stylesheet" type="text/css"/>
	<script src="http://code.jquery.com/jquery-1.11.0.min.js" type="text/javascript"></script>
	<script src="./proofs-toggle.js" type="text/javascript"></script>
	<style>
		div.proofcomment {
			font-style: italic;
		}
	</style>
	<title>Documentation</title>
</head>
<body>
<div id="page">
<div id="main">
<h1 class="libtitle">Library UniMath.CategoryTheory.LocalizingClass</h1>

<div class="code">
</div>

<div class="doc">
<a name="lab1233"></a><h1 class="section">Localizing class</h1>

</div>
<div class="code">
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="var">UniMath.Foundations.PartD</span>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="var">UniMath.Foundations.Propositions</span>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="var">UniMath.Foundations.Sets</span>.<br/>

<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="var">UniMath.CategoryTheory.total2_paths</span>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="var">UniMath.CategoryTheory.Core.Categories</span>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="var">UniMath.CategoryTheory.Core.Isos</span>.<br/>
<span class="id" title="keyword">Local Open</span> <span class="id" title="keyword">Scope</span> <span class="id" title="var">cat</span>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="var">UniMath.CategoryTheory.Core.Functors</span>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab1234"></a><h1 class="section">Localizing class and localization of categories.</h1>

    In this section we define localization of categories when the collection of morphisms forms
    so called localizing class. The axioms of localizing class S are the following
<ul class="doclist">
<li> every identity morphism must be in the collection

</li>
<li> if f and g are in S, then so is f · g

</li>
<li> Suppose we morphisms s : X --&gt; Y and f : Z --&gt; Y such that s in in S. Then we can find a
      square, that is morphisms, s' : W --&gt; Z and f' : W --&gt; X, such that s' in in S and we have
      s' · f = f' · s.

</li>
<li> Dual version of the previous. Suppose s : X --&gt; Y and f : X --&gt; Z such that s in in S. Then
      we can find a square, that is morphisms, s' : Z --&gt; W and f' : Y --&gt; W, such that s' is in S
      and we have s' · f = f' · s.

</li>
<li> Suppose we have a morphism s : X --&gt; Y contained in S and two morphisms f g : Y --&gt; Z such
      that s · f = s · g. Then S contains a morphism s' such that f · s' = f · s'.

</li>
<li> Dual of the above. Suppose we have a morphism s : Z --&gt; W in S and two morphisms
      f g : Y --&gt; Z such that f · s = g · s. Then we can find a morphism s' in S such that
      s' · f = s' · g.

</li>
</ul>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Section</span> <span class="id" title="var">def_roofs</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Variable</span> <span class="id" title="var">C</span> : <span class="id" title="var">precategory</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Hypothesis</span> <span class="id" title="var">hs</span> : <span class="id" title="var">has_homsets</span> <span class="id" title="var">C</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <span class="id" title="var">SubsetsOfMors</span> : <span class="id" title="var">UU</span> := ∏ (<span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">ob</span> <span class="id" title="var">C</span>), <span class="id" title="var">hsubtype</span> (<span class="id" title="var">hSetpair</span> (<span class="id" title="var">C</span>⟦<span class="id" title="var">x</span>, <span class="id" title="var">y</span>⟧) (<span class="id" title="var">hs</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>)).<br/>

<br/>
</div>

<div class="doc">
<a name="lab1235"></a><h2 class="section">Localizing classes</h2>

<div class="paragraph"> </div>

<a name="lab1236"></a><h3 class="section">Identities and compositions are in the subset of morphisms</h3>

</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <span class="id" title="var">isLocalizingClass1</span> (<span class="id" title="var">SOM</span> : <span class="id" title="var">SubsetsOfMors</span>) : <span class="id" title="var">UU</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(∏ (<span class="id" title="var">x</span> : <span class="id" title="var">ob</span> <span class="id" title="var">C</span>), <span class="id" title="var">SOM</span> <span class="id" title="var">x</span> <span class="id" title="var">x</span> (<span class="id" title="var">identity</span> <span class="id" title="var">x</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;× (∏ (<span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">z</span> : <span class="id" title="var">ob</span> <span class="id" title="var">C</span>) (<span class="id" title="var">f</span> : <span class="id" title="var">x</span> --&gt; <span class="id" title="var">y</span>) (<span class="id" title="var">e1</span> : <span class="id" title="var">SOM</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">f</span>) (<span class="id" title="var">g</span> : <span class="id" title="var">y</span> --&gt; <span class="id" title="var">z</span>) (<span class="id" title="var">e2</span> : <span class="id" title="var">SOM</span> <span class="id" title="var">y</span> <span class="id" title="var">z</span> <span class="id" title="var">g</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">SOM</span> <span class="id" title="var">x</span> <span class="id" title="var">z</span> (<span class="id" title="var">f</span> · <span class="id" title="var">g</span>)).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <span class="id" title="var">isLocClassIs</span> {<span class="id" title="var">SOM</span> : <span class="id" title="var">SubsetsOfMors</span>} (<span class="id" title="var">H</span> : <span class="id" title="var">isLocalizingClass1</span> <span class="id" title="var">SOM</span>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;∏ (<span class="id" title="var">x</span> : <span class="id" title="var">ob</span> <span class="id" title="var">C</span>), <span class="id" title="var">SOM</span> <span class="id" title="var">x</span> <span class="id" title="var">x</span> (<span class="id" title="var">identity</span> <span class="id" title="var">x</span>) := <span class="id" title="var">pr1</span> <span class="id" title="var">H</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <span class="id" title="var">isLocClassComp</span> {<span class="id" title="var">SOM</span> : <span class="id" title="var">SubsetsOfMors</span>} (<span class="id" title="var">H</span> : <span class="id" title="var">isLocalizingClass1</span> <span class="id" title="var">SOM</span>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;∏ (<span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">z</span> : <span class="id" title="var">ob</span> <span class="id" title="var">C</span>) (<span class="id" title="var">f</span> : <span class="id" title="var">x</span> --&gt; <span class="id" title="var">y</span>) (<span class="id" title="var">e1</span> : <span class="id" title="var">SOM</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">f</span>) (<span class="id" title="var">g</span> : <span class="id" title="var">y</span> --&gt; <span class="id" title="var">z</span>) (<span class="id" title="var">e2</span> : <span class="id" title="var">SOM</span> <span class="id" title="var">y</span> <span class="id" title="var">z</span> <span class="id" title="var">g</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">SOM</span> <span class="id" title="var">x</span> <span class="id" title="var">z</span> (<span class="id" title="var">f</span> · <span class="id" title="var">g</span>) := <span class="id" title="var">pr2</span> <span class="id" title="var">H</span>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab1237"></a><h4 class="section">Squares</h4>

</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <span class="id" title="var">LocSqr1</span> (<span class="id" title="var">SOM</span> : <span class="id" title="var">SubsetsOfMors</span>) {<span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">z</span> : <span class="id" title="var">ob</span> <span class="id" title="var">C</span>} (<span class="id" title="var">s</span> : <span class="id" title="var">x</span> --&gt; <span class="id" title="var">y</span>) (<span class="id" title="var">e1</span> : <span class="id" title="var">SOM</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">s</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">f</span> : <span class="id" title="var">x</span> --&gt; <span class="id" title="var">z</span>) : <span class="id" title="var">UU</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;∑ <span class="id" title="var">D</span> : (∑ (<span class="id" title="var">w</span> : <span class="id" title="var">ob</span> <span class="id" title="var">C</span>), <span class="id" title="var">C</span>⟦<span class="id" title="var">y</span>, <span class="id" title="var">w</span>⟧ × <span class="id" title="var">C</span>⟦<span class="id" title="var">z</span>, <span class="id" title="var">w</span>⟧),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">SOM</span> <span class="id" title="var">z</span> (<span class="id" title="var">pr1</span> <span class="id" title="var">D</span>) (<span class="id" title="var">dirprod_pr2</span> (<span class="id" title="var">pr2</span> <span class="id" title="var">D</span>)))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;× (<span class="id" title="var">s</span> · (<span class="id" title="var">dirprod_pr1</span> (<span class="id" title="var">pr2</span> <span class="id" title="var">D</span>)) = <span class="id" title="var">f</span> · (<span class="id" title="var">dirprod_pr2</span> (<span class="id" title="var">pr2</span> <span class="id" title="var">D</span>))).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <span class="id" title="var">LocSqr1Ob</span> {<span class="id" title="var">SOM</span> : <span class="id" title="var">SubsetsOfMors</span>} {<span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">z</span> : <span class="id" title="var">ob</span> <span class="id" title="var">C</span>} {<span class="id" title="var">s</span> : <span class="id" title="var">x</span> --&gt; <span class="id" title="var">y</span>} {<span class="id" title="var">e1</span> : <span class="id" title="var">SOM</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">s</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id" title="var">f</span> : <span class="id" title="var">x</span> --&gt; <span class="id" title="var">z</span>} (<span class="id" title="var">LS1</span> : <span class="id" title="var">LocSqr1</span> <span class="id" title="var">SOM</span> <span class="id" title="var">s</span> <span class="id" title="var">e1</span> <span class="id" title="var">f</span>) : <span class="id" title="var">ob</span> <span class="id" title="var">C</span> := <span class="id" title="var">pr1</span> (<span class="id" title="var">pr1</span> <span class="id" title="var">LS1</span>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Coercion</span> <span class="id" title="var">LocSqr1Ob</span> : <span class="id" title="var">LocSqr1</span> &gt;-&gt; <span class="id" title="var">ob</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <span class="id" title="var">LocSqr1Mor1</span> {<span class="id" title="var">SOM</span> : <span class="id" title="var">SubsetsOfMors</span>} {<span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">z</span> : <span class="id" title="var">ob</span> <span class="id" title="var">C</span>} {<span class="id" title="var">s</span> : <span class="id" title="var">x</span> --&gt; <span class="id" title="var">y</span>} {<span class="id" title="var">e1</span> : <span class="id" title="var">SOM</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">s</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id" title="var">f</span> : <span class="id" title="var">x</span> --&gt; <span class="id" title="var">z</span>} (<span class="id" title="var">LS1</span> : <span class="id" title="var">LocSqr1</span> <span class="id" title="var">SOM</span> <span class="id" title="var">s</span> <span class="id" title="var">e1</span> <span class="id" title="var">f</span>) : <span class="id" title="var">C</span>⟦<span class="id" title="var">y</span>, <span class="id" title="var">LS1</span>⟧ := <span class="id" title="var">dirprod_pr1</span> (<span class="id" title="var">pr2</span> (<span class="id" title="var">pr1</span> <span class="id" title="var">LS1</span>)).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <span class="id" title="var">LocSqr1Mor2</span> {<span class="id" title="var">SOM</span> : <span class="id" title="var">SubsetsOfMors</span>} {<span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">z</span> : <span class="id" title="var">ob</span> <span class="id" title="var">C</span>} {<span class="id" title="var">s</span> : <span class="id" title="var">x</span> --&gt; <span class="id" title="var">y</span>} {<span class="id" title="var">e1</span> : <span class="id" title="var">SOM</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">s</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id" title="var">f</span> : <span class="id" title="var">x</span> --&gt; <span class="id" title="var">z</span>} (<span class="id" title="var">LS1</span> : <span class="id" title="var">LocSqr1</span> <span class="id" title="var">SOM</span> <span class="id" title="var">s</span> <span class="id" title="var">e1</span> <span class="id" title="var">f</span>) : <span class="id" title="var">C</span>⟦<span class="id" title="var">z</span>, <span class="id" title="var">LS1</span>⟧ := <span class="id" title="var">dirprod_pr2</span> (<span class="id" title="var">pr2</span> (<span class="id" title="var">pr1</span> <span class="id" title="var">LS1</span>)).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <span class="id" title="var">LocSqr1Mor2Is</span> {<span class="id" title="var">SOM</span> : <span class="id" title="var">SubsetsOfMors</span>} {<span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">z</span> : <span class="id" title="var">ob</span> <span class="id" title="var">C</span>} {<span class="id" title="var">s</span> : <span class="id" title="var">x</span> --&gt; <span class="id" title="var">y</span>} {<span class="id" title="var">e1</span> : <span class="id" title="var">SOM</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">s</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id" title="var">f</span> : <span class="id" title="var">x</span> --&gt; <span class="id" title="var">z</span>} (<span class="id" title="var">LS1</span> : <span class="id" title="var">LocSqr1</span> <span class="id" title="var">SOM</span> <span class="id" title="var">s</span> <span class="id" title="var">e1</span> <span class="id" title="var">f</span>) : <span class="id" title="var">SOM</span> <span class="id" title="var">z</span> <span class="id" title="var">LS1</span> (<span class="id" title="var">LocSqr1Mor2</span> <span class="id" title="var">LS1</span>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">pr1</span> (<span class="id" title="var">pr2</span> <span class="id" title="var">LS1</span>).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <span class="id" title="var">LocSqr1Comm</span> {<span class="id" title="var">SOM</span> : <span class="id" title="var">SubsetsOfMors</span>} {<span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">z</span> : <span class="id" title="var">ob</span> <span class="id" title="var">C</span>} {<span class="id" title="var">s</span> : <span class="id" title="var">x</span> --&gt; <span class="id" title="var">y</span>} {<span class="id" title="var">e1</span> : <span class="id" title="var">SOM</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">s</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id" title="var">f</span> : <span class="id" title="var">x</span> --&gt; <span class="id" title="var">z</span>} (<span class="id" title="var">LS1</span> : <span class="id" title="var">LocSqr1</span> <span class="id" title="var">SOM</span> <span class="id" title="var">s</span> <span class="id" title="var">e1</span> <span class="id" title="var">f</span>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">s</span> · (<span class="id" title="var">LocSqr1Mor1</span> <span class="id" title="var">LS1</span>) = <span class="id" title="var">f</span> · (<span class="id" title="var">LocSqr1Mor2</span> <span class="id" title="var">LS1</span>) := <span class="id" title="var">dirprod_pr2</span> (<span class="id" title="var">pr2</span> <span class="id" title="var">LS1</span>).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <span class="id" title="var">LocSqr2</span> (<span class="id" title="var">SOM</span> : <span class="id" title="var">SubsetsOfMors</span>) {<span class="id" title="var">y</span> <span class="id" title="var">z</span> <span class="id" title="var">w</span> : <span class="id" title="var">ob</span> <span class="id" title="var">C</span>} (<span class="id" title="var">s</span> : <span class="id" title="var">y</span> --&gt; <span class="id" title="var">w</span>) (<span class="id" title="var">e1</span> : <span class="id" title="var">SOM</span> <span class="id" title="var">y</span> <span class="id" title="var">w</span> <span class="id" title="var">s</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">f</span> : <span class="id" title="var">z</span> --&gt; <span class="id" title="var">w</span>) : <span class="id" title="var">UU</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;∑ <span class="id" title="var">D</span> : (∑ (<span class="id" title="var">x</span> : <span class="id" title="var">ob</span> <span class="id" title="var">C</span>), <span class="id" title="var">C</span>⟦<span class="id" title="var">x</span>, <span class="id" title="var">y</span>⟧ × <span class="id" title="var">C</span>⟦<span class="id" title="var">x</span>, <span class="id" title="var">z</span>⟧),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">SOM</span> (<span class="id" title="var">pr1</span> <span class="id" title="var">D</span>) <span class="id" title="var">z</span> (<span class="id" title="var">dirprod_pr2</span> (<span class="id" title="var">pr2</span> <span class="id" title="var">D</span>)))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;× ((<span class="id" title="var">dirprod_pr1</span> (<span class="id" title="var">pr2</span> <span class="id" title="var">D</span>)) · <span class="id" title="var">s</span> = (<span class="id" title="var">dirprod_pr2</span> (<span class="id" title="var">pr2</span> <span class="id" title="var">D</span>)) · <span class="id" title="var">f</span>).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <span class="id" title="var">LocSqr2Ob</span> {<span class="id" title="var">SOM</span> : <span class="id" title="var">SubsetsOfMors</span>} {<span class="id" title="var">y</span> <span class="id" title="var">z</span> <span class="id" title="var">w</span> : <span class="id" title="var">ob</span> <span class="id" title="var">C</span>} {<span class="id" title="var">s</span> : <span class="id" title="var">y</span> --&gt; <span class="id" title="var">w</span>} {<span class="id" title="var">e1</span> : <span class="id" title="var">SOM</span> <span class="id" title="var">y</span> <span class="id" title="var">w</span> <span class="id" title="var">s</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id" title="var">f</span> : <span class="id" title="var">z</span> --&gt; <span class="id" title="var">w</span>} (<span class="id" title="var">LS2</span> : <span class="id" title="var">LocSqr2</span> <span class="id" title="var">SOM</span> <span class="id" title="var">s</span> <span class="id" title="var">e1</span> <span class="id" title="var">f</span>) : <span class="id" title="var">ob</span> <span class="id" title="var">C</span> := <span class="id" title="var">pr1</span> (<span class="id" title="var">pr1</span> <span class="id" title="var">LS2</span>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Coercion</span> <span class="id" title="var">LocSqr2Ob</span> : <span class="id" title="var">LocSqr2</span> &gt;-&gt; <span class="id" title="var">ob</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <span class="id" title="var">LocSqr2Mor1</span> {<span class="id" title="var">SOM</span> : <span class="id" title="var">SubsetsOfMors</span>} {<span class="id" title="var">y</span> <span class="id" title="var">z</span> <span class="id" title="var">w</span> : <span class="id" title="var">ob</span> <span class="id" title="var">C</span>} {<span class="id" title="var">s</span> : <span class="id" title="var">y</span> --&gt; <span class="id" title="var">w</span>} {<span class="id" title="var">e1</span> : <span class="id" title="var">SOM</span> <span class="id" title="var">y</span> <span class="id" title="var">w</span> <span class="id" title="var">s</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id" title="var">f</span> : <span class="id" title="var">z</span> --&gt; <span class="id" title="var">w</span>} (<span class="id" title="var">LS2</span> : <span class="id" title="var">LocSqr2</span> <span class="id" title="var">SOM</span> <span class="id" title="var">s</span> <span class="id" title="var">e1</span> <span class="id" title="var">f</span>) : <span class="id" title="var">C</span>⟦<span class="id" title="var">LS2</span>, <span class="id" title="var">y</span>⟧ := <span class="id" title="var">dirprod_pr1</span> (<span class="id" title="var">pr2</span> (<span class="id" title="var">pr1</span> <span class="id" title="var">LS2</span>)).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <span class="id" title="var">LocSqr2Mor2</span> {<span class="id" title="var">SOM</span> : <span class="id" title="var">SubsetsOfMors</span>} {<span class="id" title="var">y</span> <span class="id" title="var">z</span> <span class="id" title="var">w</span> : <span class="id" title="var">ob</span> <span class="id" title="var">C</span>} {<span class="id" title="var">s</span> : <span class="id" title="var">y</span> --&gt; <span class="id" title="var">w</span>} {<span class="id" title="var">e1</span> : <span class="id" title="var">SOM</span> <span class="id" title="var">y</span> <span class="id" title="var">w</span> <span class="id" title="var">s</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id" title="var">f</span> : <span class="id" title="var">z</span> --&gt; <span class="id" title="var">w</span>} (<span class="id" title="var">LS2</span> : <span class="id" title="var">LocSqr2</span> <span class="id" title="var">SOM</span> <span class="id" title="var">s</span> <span class="id" title="var">e1</span> <span class="id" title="var">f</span>) : <span class="id" title="var">C</span>⟦<span class="id" title="var">LS2</span>, <span class="id" title="var">z</span>⟧ := <span class="id" title="var">dirprod_pr2</span> (<span class="id" title="var">pr2</span> (<span class="id" title="var">pr1</span> <span class="id" title="var">LS2</span>)).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <span class="id" title="var">LocSqr2Mor2Is</span> {<span class="id" title="var">SOM</span> : <span class="id" title="var">SubsetsOfMors</span>} {<span class="id" title="var">y</span> <span class="id" title="var">z</span> <span class="id" title="var">w</span> : <span class="id" title="var">ob</span> <span class="id" title="var">C</span>} {<span class="id" title="var">s</span> : <span class="id" title="var">y</span> --&gt; <span class="id" title="var">w</span>} {<span class="id" title="var">e1</span> : <span class="id" title="var">SOM</span> <span class="id" title="var">y</span> <span class="id" title="var">w</span> <span class="id" title="var">s</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id" title="var">f</span> : <span class="id" title="var">z</span> --&gt; <span class="id" title="var">w</span>} (<span class="id" title="var">LS2</span> : <span class="id" title="var">LocSqr2</span> <span class="id" title="var">SOM</span> <span class="id" title="var">s</span> <span class="id" title="var">e1</span> <span class="id" title="var">f</span>) : <span class="id" title="var">SOM</span> <span class="id" title="var">LS2</span> <span class="id" title="var">z</span> (<span class="id" title="var">LocSqr2Mor2</span> <span class="id" title="var">LS2</span>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">dirprod_pr1</span> (<span class="id" title="var">pr2</span> <span class="id" title="var">LS2</span>).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <span class="id" title="var">LocSqr2Comm</span> {<span class="id" title="var">SOM</span> : <span class="id" title="var">SubsetsOfMors</span>} {<span class="id" title="var">y</span> <span class="id" title="var">z</span> <span class="id" title="var">w</span> : <span class="id" title="var">ob</span> <span class="id" title="var">C</span>} {<span class="id" title="var">s</span> : <span class="id" title="var">y</span> --&gt; <span class="id" title="var">w</span>} {<span class="id" title="var">e1</span> : <span class="id" title="var">SOM</span> <span class="id" title="var">y</span> <span class="id" title="var">w</span> <span class="id" title="var">s</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id" title="var">f</span> : <span class="id" title="var">z</span> --&gt; <span class="id" title="var">w</span>} (<span class="id" title="var">LS2</span> : <span class="id" title="var">LocSqr2</span> <span class="id" title="var">SOM</span> <span class="id" title="var">s</span> <span class="id" title="var">e1</span> <span class="id" title="var">f</span>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">LocSqr2Mor1</span> <span class="id" title="var">LS2</span>) · <span class="id" title="var">s</span> = (<span class="id" title="var">LocSqr2Mor2</span> <span class="id" title="var">LS2</span>) · <span class="id" title="var">f</span> := <span class="id" title="var">dirprod_pr2</span> (<span class="id" title="var">pr2</span> <span class="id" title="var">LS2</span>).<br/>

<br/>
</div>

<div class="doc">
<a name="lab1238"></a><h3 class="section">Completion to squares</h3>

</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <span class="id" title="var">isLocalizingClass2</span> (<span class="id" title="var">SOM</span> : <span class="id" title="var">SubsetsOfMors</span>) : <span class="id" title="var">UU</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(∏ (<span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">z</span> : <span class="id" title="var">ob</span> <span class="id" title="var">C</span>) (<span class="id" title="var">s</span> : <span class="id" title="var">x</span> --&gt; <span class="id" title="var">y</span>) (<span class="id" title="var">e1</span> : <span class="id" title="var">SOM</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">s</span>) (<span class="id" title="var">f</span> : <span class="id" title="var">x</span> --&gt; <span class="id" title="var">z</span>), (<span class="id" title="var">LocSqr1</span> <span class="id" title="var">SOM</span> <span class="id" title="var">s</span> <span class="id" title="var">e1</span> <span class="id" title="var">f</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;× (∏ (<span class="id" title="var">y</span> <span class="id" title="var">z</span> <span class="id" title="var">w</span> : <span class="id" title="var">ob</span> <span class="id" title="var">C</span>) (<span class="id" title="var">s</span> : <span class="id" title="var">y</span> --&gt; <span class="id" title="var">w</span>) (<span class="id" title="var">e1</span> : <span class="id" title="var">SOM</span> <span class="id" title="var">y</span> <span class="id" title="var">w</span> <span class="id" title="var">s</span>) (<span class="id" title="var">f</span> : <span class="id" title="var">z</span> --&gt; <span class="id" title="var">w</span>), (<span class="id" title="var">LocSqr2</span> <span class="id" title="var">SOM</span> <span class="id" title="var">s</span> <span class="id" title="var">e1</span> <span class="id" title="var">f</span>)).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <span class="id" title="var">isLocClassSqr1</span> {<span class="id" title="var">SOM</span> : <span class="id" title="var">SubsetsOfMors</span>} (<span class="id" title="var">H</span> : <span class="id" title="var">isLocalizingClass2</span> <span class="id" title="var">SOM</span>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;∏ (<span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">z</span> : <span class="id" title="var">ob</span> <span class="id" title="var">C</span>) (<span class="id" title="var">s</span> : <span class="id" title="var">x</span> --&gt; <span class="id" title="var">y</span>) (<span class="id" title="var">e1</span> : <span class="id" title="var">SOM</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">s</span>) (<span class="id" title="var">f</span> : <span class="id" title="var">x</span> --&gt; <span class="id" title="var">z</span>), <span class="id" title="var">LocSqr1</span> <span class="id" title="var">SOM</span> <span class="id" title="var">s</span> <span class="id" title="var">e1</span> <span class="id" title="var">f</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">dirprod_pr1</span> <span class="id" title="var">H</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <span class="id" title="var">isLocClassSqr2</span> {<span class="id" title="var">SOM</span> : <span class="id" title="var">SubsetsOfMors</span>} (<span class="id" title="var">H</span> : <span class="id" title="var">isLocalizingClass2</span> <span class="id" title="var">SOM</span>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;∏ (<span class="id" title="var">y</span> <span class="id" title="var">z</span> <span class="id" title="var">w</span> : <span class="id" title="var">ob</span> <span class="id" title="var">C</span>) (<span class="id" title="var">s</span> : <span class="id" title="var">y</span> --&gt; <span class="id" title="var">w</span>) (<span class="id" title="var">e1</span> : <span class="id" title="var">SOM</span> <span class="id" title="var">y</span> <span class="id" title="var">w</span> <span class="id" title="var">s</span>) (<span class="id" title="var">f</span> : <span class="id" title="var">z</span> --&gt; <span class="id" title="var">w</span>), <span class="id" title="var">LocSqr2</span> <span class="id" title="var">SOM</span> <span class="id" title="var">s</span> <span class="id" title="var">e1</span> <span class="id" title="var">f</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">dirprod_pr2</span> <span class="id" title="var">H</span>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab1239"></a><h4 class="section">Pre- and post switch</h4>

</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <span class="id" title="var">PreSwitch</span> (<span class="id" title="var">SOM</span> : <span class="id" title="var">SubsetsOfMors</span>) {<span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">z</span> : <span class="id" title="var">ob</span> <span class="id" title="var">C</span>} (<span class="id" title="var">s</span> : <span class="id" title="var">x</span> --&gt; <span class="id" title="var">y</span>) (<span class="id" title="var">e</span> : <span class="id" title="var">SOM</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">s</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">f</span> <span class="id" title="var">g</span> : <span class="id" title="var">y</span> --&gt; <span class="id" title="var">z</span>) (<span class="id" title="var">H</span> : <span class="id" title="var">s</span> · <span class="id" title="var">f</span> = <span class="id" title="var">s</span> · <span class="id" title="var">g</span>) : <span class="id" title="var">UU</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;∑ <span class="id" title="var">D</span> : (∑ (<span class="id" title="var">w</span> : <span class="id" title="var">ob</span> <span class="id" title="var">C</span>), <span class="id" title="var">C</span>⟦<span class="id" title="var">z</span>, <span class="id" title="var">w</span>⟧), (<span class="id" title="var">SOM</span> <span class="id" title="var">z</span> (<span class="id" title="var">pr1</span> <span class="id" title="var">D</span>) (<span class="id" title="var">pr2</span> <span class="id" title="var">D</span>)) × (<span class="id" title="var">f</span> · (<span class="id" title="var">pr2</span> <span class="id" title="var">D</span>) = <span class="id" title="var">g</span> · (<span class="id" title="var">pr2</span> <span class="id" title="var">D</span>)).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <span class="id" title="var">PreSwitchOb</span> {<span class="id" title="var">SOM</span> : <span class="id" title="var">SubsetsOfMors</span>} {<span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">z</span> : <span class="id" title="var">ob</span> <span class="id" title="var">C</span>} {<span class="id" title="var">s</span> : <span class="id" title="var">x</span> --&gt; <span class="id" title="var">y</span>} {<span class="id" title="var">e</span> : <span class="id" title="var">SOM</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">s</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id" title="var">f</span> <span class="id" title="var">g</span> : <span class="id" title="var">y</span> --&gt; <span class="id" title="var">z</span>} {<span class="id" title="var">H</span> : <span class="id" title="var">s</span> · <span class="id" title="var">f</span> = <span class="id" title="var">s</span> · <span class="id" title="var">g</span>} (<span class="id" title="var">PreS</span> : <span class="id" title="var">PreSwitch</span> <span class="id" title="var">SOM</span> <span class="id" title="var">s</span> <span class="id" title="var">e</span> <span class="id" title="var">f</span> <span class="id" title="var">g</span> <span class="id" title="var">H</span>) : <span class="id" title="var">ob</span> <span class="id" title="var">C</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">pr1</span> (<span class="id" title="var">pr1</span> <span class="id" title="var">PreS</span>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Coercion</span> <span class="id" title="var">PreSwitchOb</span> : <span class="id" title="var">PreSwitch</span> &gt;-&gt; <span class="id" title="var">ob</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <span class="id" title="var">PreSwitchMor</span> {<span class="id" title="var">SOM</span> : <span class="id" title="var">SubsetsOfMors</span>} {<span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">z</span> : <span class="id" title="var">ob</span> <span class="id" title="var">C</span>} {<span class="id" title="var">s</span> : <span class="id" title="var">x</span> --&gt; <span class="id" title="var">y</span>} {<span class="id" title="var">e</span> : <span class="id" title="var">SOM</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">s</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id" title="var">f</span> <span class="id" title="var">g</span> : <span class="id" title="var">y</span> --&gt; <span class="id" title="var">z</span>} {<span class="id" title="var">H</span> : <span class="id" title="var">s</span> · <span class="id" title="var">f</span> = <span class="id" title="var">s</span> · <span class="id" title="var">g</span>} (<span class="id" title="var">PreS</span> : <span class="id" title="var">PreSwitch</span> <span class="id" title="var">SOM</span> <span class="id" title="var">s</span> <span class="id" title="var">e</span> <span class="id" title="var">f</span> <span class="id" title="var">g</span> <span class="id" title="var">H</span>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">C</span>⟦<span class="id" title="var">z</span>, <span class="id" title="var">PreS</span>⟧ := <span class="id" title="var">pr2</span> (<span class="id" title="var">pr1</span> <span class="id" title="var">PreS</span>).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <span class="id" title="var">PreSwitchMorIs</span> {<span class="id" title="var">SOM</span> : <span class="id" title="var">SubsetsOfMors</span>} {<span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">z</span> : <span class="id" title="var">ob</span> <span class="id" title="var">C</span>} {<span class="id" title="var">s</span> : <span class="id" title="var">x</span> --&gt; <span class="id" title="var">y</span>} {<span class="id" title="var">e</span> : <span class="id" title="var">SOM</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">s</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id" title="var">f</span> <span class="id" title="var">g</span> : <span class="id" title="var">y</span> --&gt; <span class="id" title="var">z</span>} {<span class="id" title="var">H</span> : <span class="id" title="var">s</span> · <span class="id" title="var">f</span> = <span class="id" title="var">s</span> · <span class="id" title="var">g</span>} (<span class="id" title="var">PreS</span> : <span class="id" title="var">PreSwitch</span> <span class="id" title="var">SOM</span> <span class="id" title="var">s</span> <span class="id" title="var">e</span> <span class="id" title="var">f</span> <span class="id" title="var">g</span> <span class="id" title="var">H</span>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">SOM</span> <span class="id" title="var">z</span> <span class="id" title="var">PreS</span> (<span class="id" title="var">PreSwitchMor</span> <span class="id" title="var">PreS</span>) := <span class="id" title="var">dirprod_pr1</span> (<span class="id" title="var">pr2</span> <span class="id" title="var">PreS</span>).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <span class="id" title="var">PreSwitchEq</span> {<span class="id" title="var">SOM</span> : <span class="id" title="var">SubsetsOfMors</span>} {<span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">z</span> : <span class="id" title="var">ob</span> <span class="id" title="var">C</span>} {<span class="id" title="var">s</span> : <span class="id" title="var">x</span> --&gt; <span class="id" title="var">y</span>} {<span class="id" title="var">e</span> : <span class="id" title="var">SOM</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">s</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id" title="var">f</span> <span class="id" title="var">g</span> : <span class="id" title="var">y</span> --&gt; <span class="id" title="var">z</span>} {<span class="id" title="var">H</span> : <span class="id" title="var">s</span> · <span class="id" title="var">f</span> = <span class="id" title="var">s</span> · <span class="id" title="var">g</span>} (<span class="id" title="var">PreS</span> : <span class="id" title="var">PreSwitch</span> <span class="id" title="var">SOM</span> <span class="id" title="var">s</span> <span class="id" title="var">e</span> <span class="id" title="var">f</span> <span class="id" title="var">g</span> <span class="id" title="var">H</span>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">f</span> · (<span class="id" title="var">PreSwitchMor</span> <span class="id" title="var">PreS</span>) = <span class="id" title="var">g</span> · (<span class="id" title="var">PreSwitchMor</span> <span class="id" title="var">PreS</span>) := <span class="id" title="var">dirprod_pr2</span> (<span class="id" title="var">pr2</span> <span class="id" title="var">PreS</span>).<br/>

<br/>
</div>

<div class="doc">
<a name="lab1240"></a><h4 class="section">Post switch</h4>

</div>
<div class="code">

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <span class="id" title="var">PostSwitch</span> (<span class="id" title="var">SOM</span> : <span class="id" title="var">SubsetsOfMors</span>) {<span class="id" title="var">y</span> <span class="id" title="var">z</span> <span class="id" title="var">w</span> : <span class="id" title="var">ob</span> <span class="id" title="var">C</span>} (<span class="id" title="var">f</span> <span class="id" title="var">g</span> : <span class="id" title="var">y</span> --&gt; <span class="id" title="var">z</span>) (<span class="id" title="var">s</span> : <span class="id" title="var">z</span> --&gt; <span class="id" title="var">w</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">e</span> : <span class="id" title="var">SOM</span> <span class="id" title="var">z</span> <span class="id" title="var">w</span> <span class="id" title="var">s</span>) (<span class="id" title="var">H</span> : <span class="id" title="var">f</span> · <span class="id" title="var">s</span> = <span class="id" title="var">g</span> · <span class="id" title="var">s</span>) : <span class="id" title="var">UU</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;∑ <span class="id" title="var">D</span> : (∑ (<span class="id" title="var">x</span> : <span class="id" title="var">ob</span> <span class="id" title="var">C</span>), <span class="id" title="var">C</span>⟦<span class="id" title="var">x</span>, <span class="id" title="var">y</span>⟧), (<span class="id" title="var">SOM</span> (<span class="id" title="var">pr1</span> <span class="id" title="var">D</span>) <span class="id" title="var">y</span> (<span class="id" title="var">pr2</span> <span class="id" title="var">D</span>)) × ((<span class="id" title="var">pr2</span> <span class="id" title="var">D</span>) · <span class="id" title="var">f</span> = (<span class="id" title="var">pr2</span> <span class="id" title="var">D</span>) · <span class="id" title="var">g</span>).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <span class="id" title="var">PostSwitchOb</span> {<span class="id" title="var">SOM</span> : <span class="id" title="var">SubsetsOfMors</span>} {<span class="id" title="var">y</span> <span class="id" title="var">z</span> <span class="id" title="var">w</span> : <span class="id" title="var">ob</span> <span class="id" title="var">C</span>} {<span class="id" title="var">f</span> <span class="id" title="var">g</span> : <span class="id" title="var">y</span> --&gt; <span class="id" title="var">z</span>} {<span class="id" title="var">s</span> : <span class="id" title="var">z</span> --&gt; <span class="id" title="var">w</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id" title="var">e</span> : <span class="id" title="var">SOM</span> <span class="id" title="var">z</span> <span class="id" title="var">w</span> <span class="id" title="var">s</span>} {<span class="id" title="var">H</span> : <span class="id" title="var">f</span> · <span class="id" title="var">s</span> = <span class="id" title="var">g</span> · <span class="id" title="var">s</span>} (<span class="id" title="var">PostS</span> : <span class="id" title="var">PostSwitch</span> <span class="id" title="var">SOM</span> <span class="id" title="var">f</span> <span class="id" title="var">g</span> <span class="id" title="var">s</span> <span class="id" title="var">e</span> <span class="id" title="var">H</span>) : <span class="id" title="var">ob</span> <span class="id" title="var">C</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">pr1</span> (<span class="id" title="var">pr1</span> <span class="id" title="var">PostS</span>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Coercion</span> <span class="id" title="var">PostSwitchOb</span> : <span class="id" title="var">PostSwitch</span> &gt;-&gt; <span class="id" title="var">ob</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <span class="id" title="var">PostSwitchMor</span> {<span class="id" title="var">SOM</span> : <span class="id" title="var">SubsetsOfMors</span>} {<span class="id" title="var">y</span> <span class="id" title="var">z</span> <span class="id" title="var">w</span> : <span class="id" title="var">ob</span> <span class="id" title="var">C</span>} {<span class="id" title="var">f</span> <span class="id" title="var">g</span> : <span class="id" title="var">y</span> --&gt; <span class="id" title="var">z</span>} {<span class="id" title="var">s</span> : <span class="id" title="var">z</span> --&gt; <span class="id" title="var">w</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id" title="var">e</span> : <span class="id" title="var">SOM</span> <span class="id" title="var">z</span> <span class="id" title="var">w</span> <span class="id" title="var">s</span>} {<span class="id" title="var">H</span> : <span class="id" title="var">f</span> · <span class="id" title="var">s</span> = <span class="id" title="var">g</span> · <span class="id" title="var">s</span>} (<span class="id" title="var">PostS</span> : <span class="id" title="var">PostSwitch</span> <span class="id" title="var">SOM</span> <span class="id" title="var">f</span> <span class="id" title="var">g</span> <span class="id" title="var">s</span> <span class="id" title="var">e</span> <span class="id" title="var">H</span>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">C</span>⟦<span class="id" title="var">PostS</span>, <span class="id" title="var">y</span>⟧ := <span class="id" title="var">pr2</span> (<span class="id" title="var">pr1</span> <span class="id" title="var">PostS</span>).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <span class="id" title="var">PostSwitchMorIs</span> {<span class="id" title="var">SOM</span> : <span class="id" title="var">SubsetsOfMors</span>} {<span class="id" title="var">y</span> <span class="id" title="var">z</span> <span class="id" title="var">w</span> : <span class="id" title="var">ob</span> <span class="id" title="var">C</span>} {<span class="id" title="var">f</span> <span class="id" title="var">g</span> : <span class="id" title="var">y</span> --&gt; <span class="id" title="var">z</span>} {<span class="id" title="var">s</span> : <span class="id" title="var">z</span> --&gt; <span class="id" title="var">w</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id" title="var">e</span> : <span class="id" title="var">SOM</span> <span class="id" title="var">z</span> <span class="id" title="var">w</span> <span class="id" title="var">s</span>} {<span class="id" title="var">H</span> : <span class="id" title="var">f</span> · <span class="id" title="var">s</span> = <span class="id" title="var">g</span> · <span class="id" title="var">s</span>} (<span class="id" title="var">PostS</span> : <span class="id" title="var">PostSwitch</span> <span class="id" title="var">SOM</span> <span class="id" title="var">f</span> <span class="id" title="var">g</span> <span class="id" title="var">s</span> <span class="id" title="var">e</span> <span class="id" title="var">H</span>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">SOM</span> <span class="id" title="var">PostS</span> <span class="id" title="var">y</span> (<span class="id" title="var">PostSwitchMor</span> <span class="id" title="var">PostS</span>) := <span class="id" title="var">dirprod_pr1</span> (<span class="id" title="var">pr2</span> <span class="id" title="var">PostS</span>).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <span class="id" title="var">PostSwitchEq</span> {<span class="id" title="var">SOM</span> : <span class="id" title="var">SubsetsOfMors</span>} {<span class="id" title="var">y</span> <span class="id" title="var">z</span> <span class="id" title="var">w</span> : <span class="id" title="var">ob</span> <span class="id" title="var">C</span>} {<span class="id" title="var">f</span> <span class="id" title="var">g</span> : <span class="id" title="var">y</span> --&gt; <span class="id" title="var">z</span>} {<span class="id" title="var">s</span> : <span class="id" title="var">z</span> --&gt; <span class="id" title="var">w</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id" title="var">e</span> : <span class="id" title="var">SOM</span> <span class="id" title="var">z</span> <span class="id" title="var">w</span> <span class="id" title="var">s</span>} {<span class="id" title="var">H</span> : <span class="id" title="var">f</span> · <span class="id" title="var">s</span> = <span class="id" title="var">g</span> · <span class="id" title="var">s</span>} (<span class="id" title="var">PostS</span> : <span class="id" title="var">PostSwitch</span> <span class="id" title="var">SOM</span> <span class="id" title="var">f</span> <span class="id" title="var">g</span> <span class="id" title="var">s</span> <span class="id" title="var">e</span> <span class="id" title="var">H</span>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">PostSwitchMor</span> <span class="id" title="var">PostS</span>) · <span class="id" title="var">f</span> = (<span class="id" title="var">PostSwitchMor</span> <span class="id" title="var">PostS</span>) · <span class="id" title="var">g</span> := <span class="id" title="var">dirprod_pr2</span> (<span class="id" title="var">pr2</span> <span class="id" title="var">PostS</span>).<br/>

<br/>
</div>

<div class="doc">
<a name="lab1241"></a><h3 class="section">Pre- and postcomposition with morphisms in the subset</h3>

</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <span class="id" title="var">isLocalizingClass3</span> (<span class="id" title="var">SOM</span> : <span class="id" title="var">SubsetsOfMors</span>) : <span class="id" title="var">UU</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(∏ (<span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">z</span> : <span class="id" title="var">ob</span> <span class="id" title="var">C</span>) (<span class="id" title="var">s</span> : <span class="id" title="var">x</span> --&gt; <span class="id" title="var">y</span>) (<span class="id" title="var">e</span> : <span class="id" title="var">SOM</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">s</span>) (<span class="id" title="var">f</span> <span class="id" title="var">g</span> : <span class="id" title="var">y</span> --&gt; <span class="id" title="var">z</span>) (<span class="id" title="var">H</span> : <span class="id" title="var">s</span> · <span class="id" title="var">f</span> = <span class="id" title="var">s</span> · <span class="id" title="var">g</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">PreSwitch</span> <span class="id" title="var">SOM</span> <span class="id" title="var">s</span> <span class="id" title="var">e</span> <span class="id" title="var">f</span> <span class="id" title="var">g</span> <span class="id" title="var">H</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;× (∏ (<span class="id" title="var">y</span> <span class="id" title="var">z</span> <span class="id" title="var">w</span> : <span class="id" title="var">ob</span> <span class="id" title="var">C</span>) (<span class="id" title="var">f</span> <span class="id" title="var">g</span> : <span class="id" title="var">y</span> --&gt; <span class="id" title="var">z</span>) (<span class="id" title="var">s</span> : <span class="id" title="var">z</span> --&gt; <span class="id" title="var">w</span>) (<span class="id" title="var">e</span> : <span class="id" title="var">SOM</span> <span class="id" title="var">z</span> <span class="id" title="var">w</span> <span class="id" title="var">s</span>) (<span class="id" title="var">H</span> : <span class="id" title="var">f</span> · <span class="id" title="var">s</span> = <span class="id" title="var">g</span> · <span class="id" title="var">s</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">PostSwitch</span> <span class="id" title="var">SOM</span> <span class="id" title="var">f</span> <span class="id" title="var">g</span> <span class="id" title="var">s</span> <span class="id" title="var">e</span> <span class="id" title="var">H</span>).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <span class="id" title="var">isLocClassPre</span> {<span class="id" title="var">SOM</span> : <span class="id" title="var">SubsetsOfMors</span>} (<span class="id" title="var">H</span> : <span class="id" title="var">isLocalizingClass3</span> <span class="id" title="var">SOM</span>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;∏ (<span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">z</span> : <span class="id" title="var">ob</span> <span class="id" title="var">C</span>) (<span class="id" title="var">s</span> : <span class="id" title="var">x</span> --&gt; <span class="id" title="var">y</span>) (<span class="id" title="var">e</span> : <span class="id" title="var">SOM</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">s</span>) (<span class="id" title="var">f</span> <span class="id" title="var">g</span> : <span class="id" title="var">y</span> --&gt; <span class="id" title="var">z</span>) (<span class="id" title="var">H</span> : <span class="id" title="var">s</span> · <span class="id" title="var">f</span> = <span class="id" title="var">s</span> · <span class="id" title="var">g</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">PreSwitch</span> <span class="id" title="var">SOM</span> <span class="id" title="var">s</span> <span class="id" title="var">e</span> <span class="id" title="var">f</span> <span class="id" title="var">g</span> <span class="id" title="var">H</span> := <span class="id" title="var">dirprod_pr1</span> <span class="id" title="var">H</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <span class="id" title="var">isLocClassPost</span> {<span class="id" title="var">SOM</span> : <span class="id" title="var">SubsetsOfMors</span>} (<span class="id" title="var">H</span> : <span class="id" title="var">isLocalizingClass3</span> <span class="id" title="var">SOM</span>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;∏ (<span class="id" title="var">y</span> <span class="id" title="var">z</span> <span class="id" title="var">w</span> : <span class="id" title="var">ob</span> <span class="id" title="var">C</span>) (<span class="id" title="var">f</span> <span class="id" title="var">g</span> : <span class="id" title="var">y</span> --&gt; <span class="id" title="var">z</span>) (<span class="id" title="var">s</span> : <span class="id" title="var">z</span> --&gt; <span class="id" title="var">w</span>) (<span class="id" title="var">e</span> : <span class="id" title="var">SOM</span> <span class="id" title="var">z</span> <span class="id" title="var">w</span> <span class="id" title="var">s</span>) (<span class="id" title="var">H</span> : <span class="id" title="var">f</span> · <span class="id" title="var">s</span> = <span class="id" title="var">g</span> · <span class="id" title="var">s</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">PostSwitch</span> <span class="id" title="var">SOM</span> <span class="id" title="var">f</span> <span class="id" title="var">g</span> <span class="id" title="var">s</span> <span class="id" title="var">e</span> <span class="id" title="var">H</span> := <span class="id" title="var">dirprod_pr2</span> <span class="id" title="var">H</span>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab1242"></a><h3 class="section">Localizing class</h3>

</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <span class="id" title="var">isLocalizingClass</span> (<span class="id" title="var">SOM</span> : <span class="id" title="var">SubsetsOfMors</span>) : <span class="id" title="var">UU</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">isLocalizingClass1</span> <span class="id" title="var">SOM</span>) × (<span class="id" title="var">isLocalizingClass2</span> <span class="id" title="var">SOM</span>) × (<span class="id" title="var">isLocalizingClass3</span> <span class="id" title="var">SOM</span>).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <span class="id" title="var">isLocalizingClass_isLocalizingClass1</span> {<span class="id" title="var">SOM</span> : <span class="id" title="var">SubsetsOfMors</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">H</span> : <span class="id" title="var">isLocalizingClass</span> <span class="id" title="var">SOM</span>) : <span class="id" title="var">isLocalizingClass1</span> <span class="id" title="var">SOM</span> := <span class="id" title="var">dirprod_pr1</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Coercion</span> <span class="id" title="var">isLocalizingClass_isLocalizingClass1</span> : <span class="id" title="var">isLocalizingClass</span> &gt;-&gt; <span class="id" title="var">isLocalizingClass1</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <span class="id" title="var">isLocalizingClass_isLocalizingClass2</span> {<span class="id" title="var">SOM</span> : <span class="id" title="var">SubsetsOfMors</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">H</span> : <span class="id" title="var">isLocalizingClass</span> <span class="id" title="var">SOM</span>) : <span class="id" title="var">isLocalizingClass2</span> <span class="id" title="var">SOM</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">dirprod_pr1</span> (<span class="id" title="var">dirprod_pr2</span> <span class="id" title="var">H</span>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Coercion</span> <span class="id" title="var">isLocalizingClass_isLocalizingClass2</span> : <span class="id" title="var">isLocalizingClass</span> &gt;-&gt; <span class="id" title="var">isLocalizingClass2</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <span class="id" title="var">isLocalizingClass_isLocalizingClass3</span> {<span class="id" title="var">SOM</span> : <span class="id" title="var">SubsetsOfMors</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">H</span> : <span class="id" title="var">isLocalizingClass</span> <span class="id" title="var">SOM</span>) : <span class="id" title="var">isLocalizingClass3</span> <span class="id" title="var">SOM</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">dirprod_pr2</span> (<span class="id" title="var">dirprod_pr2</span> <span class="id" title="var">H</span>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Coercion</span> <span class="id" title="var">isLocalizingClass_isLocalizingClass3</span> : <span class="id" title="var">isLocalizingClass</span> &gt;-&gt; <span class="id" title="var">isLocalizingClass3</span>.<br/>

<br/>
</div>

<div class="doc">
Collection of morphisms in C 
</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Variable</span> <span class="id" title="var">SOM</span> : <span class="id" title="var">SubsetsOfMors</span>.<br/>

<br/>
</div>

<div class="doc">
The above collection satisfies the conditions of localizin class. See the comment on top
      of this section. 
</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Hypothesis</span> <span class="id" title="var">iLC</span> : <span class="id" title="var">isLocalizingClass</span> <span class="id" title="var">SOM</span>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab1243"></a><h2 class="section">Roofs</h2>

</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <span class="id" title="var">Roof</span> (<span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">ob</span> <span class="id" title="var">C</span>) : <span class="id" title="var">UU</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;∑ <span class="id" title="var">D</span> : (∑ <span class="id" title="var">z</span> : <span class="id" title="var">ob</span> <span class="id" title="var">C</span>, <span class="id" title="var">C</span>⟦<span class="id" title="var">z</span>, <span class="id" title="var">x</span>⟧ × <span class="id" title="var">C</span>⟦<span class="id" title="var">z</span>, <span class="id" title="var">y</span>⟧), (<span class="id" title="var">SOM</span> (<span class="id" title="var">pr1</span> <span class="id" title="var">D</span>) <span class="id" title="var">x</span> (<span class="id" title="var">dirprod_pr1</span> (<span class="id" title="var">pr2</span> <span class="id" title="var">D</span>))).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <span class="id" title="var">mk_Roof</span> (<span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">z</span> : <span class="id" title="var">ob</span> <span class="id" title="var">C</span>) (<span class="id" title="var">s</span> : <span class="id" title="var">z</span> --&gt; <span class="id" title="var">x</span>) (<span class="id" title="var">f</span> : <span class="id" title="var">z</span> --&gt; <span class="id" title="var">y</span>) (<span class="id" title="var">e</span> : <span class="id" title="var">SOM</span> <span class="id" title="var">z</span> <span class="id" title="var">x</span> <span class="id" title="var">s</span>) : <span class="id" title="var">Roof</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">tpair</span> <span class="id" title="var">_</span> (<span class="id" title="var">tpair</span> <span class="id" title="var">_</span> <span class="id" title="var">z</span> (<span class="id" title="var">s</span>,,<span class="id" title="var">f</span>)) <span class="id" title="var">e</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <span class="id" title="var">RoofOb</span> {<span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">ob</span> <span class="id" title="var">C</span>} (<span class="id" title="var">R</span> : <span class="id" title="var">Roof</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>) : <span class="id" title="var">ob</span> <span class="id" title="var">C</span> := <span class="id" title="var">pr1</span> (<span class="id" title="var">pr1</span> <span class="id" title="var">R</span>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Coercion</span> <span class="id" title="var">RoofOb</span> : <span class="id" title="var">Roof</span> &gt;-&gt; <span class="id" title="var">ob</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <span class="id" title="var">RoofMor1</span> {<span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">ob</span> <span class="id" title="var">C</span>} (<span class="id" title="var">R</span> : <span class="id" title="var">Roof</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>) : <span class="id" title="var">C</span>⟦<span class="id" title="var">R</span>, <span class="id" title="var">x</span>⟧ := <span class="id" title="var">dirprod_pr1</span> (<span class="id" title="var">pr2</span> (<span class="id" title="var">pr1</span> <span class="id" title="var">R</span>)).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <span class="id" title="var">RoofMor1Is</span> {<span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">ob</span> <span class="id" title="var">C</span>} (<span class="id" title="var">R</span> : <span class="id" title="var">Roof</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>) : <span class="id" title="var">SOM</span> <span class="id" title="var">R</span> <span class="id" title="var">x</span> (<span class="id" title="var">RoofMor1</span> <span class="id" title="var">R</span>) := <span class="id" title="var">pr2</span> <span class="id" title="var">R</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <span class="id" title="var">RoofMor2</span> {<span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">ob</span> <span class="id" title="var">C</span>} (<span class="id" title="var">R</span> : <span class="id" title="var">Roof</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>) : <span class="id" title="var">C</span>⟦<span class="id" title="var">R</span>, <span class="id" title="var">y</span>⟧ := <span class="id" title="var">dirprod_pr2</span> (<span class="id" title="var">pr2</span> (<span class="id" title="var">pr1</span> <span class="id" title="var">R</span>)).<br/>

<br/>
</div>

<div class="doc">
<a name="lab1244"></a><h2 class="section">Coroofs</h2>

</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <span class="id" title="var">Coroof</span> (<span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">ob</span> <span class="id" title="var">C</span>) : <span class="id" title="var">UU</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;∑ <span class="id" title="var">D</span> : (∑ <span class="id" title="var">z</span> : <span class="id" title="var">ob</span> <span class="id" title="var">C</span>, <span class="id" title="var">C</span>⟦<span class="id" title="var">x</span>, <span class="id" title="var">z</span>⟧ × <span class="id" title="var">C</span>⟦<span class="id" title="var">y</span>, <span class="id" title="var">z</span>⟧), (<span class="id" title="var">SOM</span> <span class="id" title="var">y</span> (<span class="id" title="var">pr1</span> <span class="id" title="var">D</span>) (<span class="id" title="var">dirprod_pr2</span> (<span class="id" title="var">pr2</span> <span class="id" title="var">D</span>))).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <span class="id" title="var">mk_Coroof</span> (<span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">z</span> : <span class="id" title="var">ob</span> <span class="id" title="var">C</span>) (<span class="id" title="var">f</span> : <span class="id" title="var">x</span> --&gt; <span class="id" title="var">z</span>) (<span class="id" title="var">s</span> : <span class="id" title="var">y</span> --&gt; <span class="id" title="var">z</span>) (<span class="id" title="var">e</span> : <span class="id" title="var">SOM</span> <span class="id" title="var">y</span> <span class="id" title="var">z</span> <span class="id" title="var">s</span>) : <span class="id" title="var">Coroof</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">tpair</span> <span class="id" title="var">_</span> (<span class="id" title="var">tpair</span> <span class="id" title="var">_</span> <span class="id" title="var">z</span> (<span class="id" title="var">f</span>,,<span class="id" title="var">s</span>)) <span class="id" title="var">e</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <span class="id" title="var">CoroofOb</span> {<span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">ob</span> <span class="id" title="var">C</span>} (<span class="id" title="var">CR</span> : <span class="id" title="var">Coroof</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>) : <span class="id" title="var">ob</span> <span class="id" title="var">C</span> := <span class="id" title="var">pr1</span> (<span class="id" title="var">pr1</span> <span class="id" title="var">CR</span>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Coercion</span> <span class="id" title="var">CoroofOb</span> : <span class="id" title="var">Coroof</span> &gt;-&gt; <span class="id" title="var">ob</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <span class="id" title="var">CoroofMor1</span> {<span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">ob</span> <span class="id" title="var">C</span>} (<span class="id" title="var">CR</span> : <span class="id" title="var">Coroof</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>) : <span class="id" title="var">C</span>⟦<span class="id" title="var">x</span>, <span class="id" title="var">CR</span>⟧ := <span class="id" title="var">dirprod_pr1</span> (<span class="id" title="var">pr2</span> (<span class="id" title="var">pr1</span> <span class="id" title="var">CR</span>)).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <span class="id" title="var">CoroofMor2</span> {<span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">ob</span> <span class="id" title="var">C</span>} (<span class="id" title="var">CR</span> : <span class="id" title="var">Coroof</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>) : <span class="id" title="var">C</span>⟦<span class="id" title="var">y</span>, <span class="id" title="var">CR</span>⟧ := <span class="id" title="var">dirprod_pr2</span> (<span class="id" title="var">pr2</span> (<span class="id" title="var">pr1</span> <span class="id" title="var">CR</span>)).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <span class="id" title="var">CoroofMor2Is</span> {<span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">ob</span> <span class="id" title="var">C</span>} (<span class="id" title="var">CR</span> : <span class="id" title="var">Coroof</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>) : <span class="id" title="var">SOM</span> <span class="id" title="var">y</span> <span class="id" title="var">CR</span> (<span class="id" title="var">CoroofMor2</span> <span class="id" title="var">CR</span>) := <span class="id" title="var">pr2</span> <span class="id" title="var">CR</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <span class="id" title="var">RoofToCoroof</span> {<span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">ob</span> <span class="id" title="var">C</span>} (<span class="id" title="var">R</span> : <span class="id" title="var">Roof</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>) : <span class="id" title="var">Coroof</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>.<br/>
&nbsp;&nbsp;<a class="proof" href="#">Show proof.</a><br/><div class="proof">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">sqr</span> := <span class="id" title="var">isLocClassSqr1</span> <span class="id" title="var">iLC</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> (<span class="id" title="var">RoofMor1</span> <span class="id" title="var">R</span>) (<span class="id" title="var">RoofMor1Is</span> <span class="id" title="var">R</span>) (<span class="id" title="var">RoofMor2</span> <span class="id" title="var">R</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">use</span> <span class="id" title="var">mk_Coroof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">exact</span> <span class="id" title="var">sqr</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">exact</span> (<span class="id" title="var">LocSqr1Mor1</span> <span class="id" title="var">sqr</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">exact</span> (<span class="id" title="var">LocSqr1Mor2</span> <span class="id" title="var">sqr</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">exact</span> (<span class="id" title="var">LocSqr1Mor2Is</span> <span class="id" title="var">sqr</span>).<br/>
</div>

<br/>
</div>

<div class="doc">
<a name="lab1245"></a><h2 class="section">RoofTop</h2>
 These are used to define an equivalence relation between roofs 
</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <span class="id" title="var">RoofTop</span> {<span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">ob</span> <span class="id" title="var">C</span>} (<span class="id" title="var">R1</span> <span class="id" title="var">R2</span> : <span class="id" title="var">Roof</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>) : <span class="id" title="var">UU</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;∑ <span class="id" title="var">D</span> : (∑ <span class="id" title="var">w</span> : <span class="id" title="var">ob</span> <span class="id" title="var">C</span>, <span class="id" title="var">C</span>⟦<span class="id" title="var">w</span>, <span class="id" title="var">R1</span>⟧ × <span class="id" title="var">C</span>⟦<span class="id" title="var">w</span>, <span class="id" title="var">R2</span>⟧),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">SOM</span> (<span class="id" title="var">pr1</span> <span class="id" title="var">D</span>) <span class="id" title="var">x</span> ((<span class="id" title="var">dirprod_pr1</span> (<span class="id" title="var">pr2</span> <span class="id" title="var">D</span>)) · (<span class="id" title="var">RoofMor1</span> <span class="id" title="var">R1</span>)))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;× ((<span class="id" title="var">dirprod_pr1</span> (<span class="id" title="var">pr2</span> <span class="id" title="var">D</span>)) · (<span class="id" title="var">RoofMor1</span> <span class="id" title="var">R1</span>) = (<span class="id" title="var">dirprod_pr2</span> (<span class="id" title="var">pr2</span> <span class="id" title="var">D</span>)) · (<span class="id" title="var">RoofMor1</span> <span class="id" title="var">R2</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;× ((<span class="id" title="var">dirprod_pr1</span> (<span class="id" title="var">pr2</span> <span class="id" title="var">D</span>)) · (<span class="id" title="var">RoofMor2</span> <span class="id" title="var">R1</span>) = (<span class="id" title="var">dirprod_pr2</span> (<span class="id" title="var">pr2</span> <span class="id" title="var">D</span>)) · (<span class="id" title="var">RoofMor2</span> <span class="id" title="var">R2</span>)).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <span class="id" title="var">mk_RoofTop</span> {<span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">ob</span> <span class="id" title="var">C</span>} {<span class="id" title="var">R1</span> <span class="id" title="var">R2</span> : <span class="id" title="var">Roof</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>} (<span class="id" title="var">w</span> : <span class="id" title="var">ob</span> <span class="id" title="var">C</span>) (<span class="id" title="var">s</span> : <span class="id" title="var">w</span> --&gt; <span class="id" title="var">R1</span>) (<span class="id" title="var">f</span> : <span class="id" title="var">w</span> --&gt; <span class="id" title="var">R2</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">e</span> : <span class="id" title="var">SOM</span> <span class="id" title="var">w</span> <span class="id" title="var">x</span> (<span class="id" title="var">s</span> · <span class="id" title="var">RoofMor1</span> <span class="id" title="var">R1</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">H1</span> : <span class="id" title="var">s</span> · (<span class="id" title="var">RoofMor1</span> <span class="id" title="var">R1</span>) = <span class="id" title="var">f</span> · (<span class="id" title="var">RoofMor1</span> <span class="id" title="var">R2</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">H2</span> : <span class="id" title="var">s</span> · (<span class="id" title="var">RoofMor2</span> <span class="id" title="var">R1</span>) = <span class="id" title="var">f</span> · (<span class="id" title="var">RoofMor2</span> <span class="id" title="var">R2</span>)) : <span class="id" title="var">RoofTop</span> <span class="id" title="var">R1</span> <span class="id" title="var">R2</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">tpair</span> <span class="id" title="var">_</span> (<span class="id" title="var">tpair</span> <span class="id" title="var">_</span> <span class="id" title="var">w</span> (<span class="id" title="var">s</span>,,<span class="id" title="var">f</span>)) (<span class="id" title="var">e</span>,,(<span class="id" title="var">H1</span>,,<span class="id" title="var">H2</span>)).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <span class="id" title="var">RoofTopOb</span> {<span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">ob</span> <span class="id" title="var">C</span>} {<span class="id" title="var">R1</span> <span class="id" title="var">R2</span> : <span class="id" title="var">Roof</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>} (<span class="id" title="var">T</span> : <span class="id" title="var">RoofTop</span> <span class="id" title="var">R1</span> <span class="id" title="var">R2</span>) : <span class="id" title="var">ob</span> <span class="id" title="var">C</span> := <span class="id" title="var">pr1</span> (<span class="id" title="var">pr1</span> <span class="id" title="var">T</span>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Coercion</span> <span class="id" title="var">RoofTopOb</span> : <span class="id" title="var">RoofTop</span> &gt;-&gt; <span class="id" title="var">ob</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <span class="id" title="var">RoofTopMor1</span> {<span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">ob</span> <span class="id" title="var">C</span>} {<span class="id" title="var">R1</span> <span class="id" title="var">R2</span> : <span class="id" title="var">Roof</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>} (<span class="id" title="var">T</span> : <span class="id" title="var">RoofTop</span> <span class="id" title="var">R1</span> <span class="id" title="var">R2</span>) : <span class="id" title="var">C</span>⟦<span class="id" title="var">T</span>, <span class="id" title="var">R1</span>⟧ :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">dirprod_pr1</span> (<span class="id" title="var">pr2</span> (<span class="id" title="var">pr1</span> <span class="id" title="var">T</span>)).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <span class="id" title="var">RoofTopMor1Is</span> {<span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">ob</span> <span class="id" title="var">C</span>} {<span class="id" title="var">R1</span> <span class="id" title="var">R2</span> : <span class="id" title="var">Roof</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>} (<span class="id" title="var">T</span> : <span class="id" title="var">RoofTop</span> <span class="id" title="var">R1</span> <span class="id" title="var">R2</span>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">SOM</span> <span class="id" title="var">T</span> <span class="id" title="var">x</span> ((<span class="id" title="var">RoofTopMor1</span> <span class="id" title="var">T</span>) · (<span class="id" title="var">RoofMor1</span> <span class="id" title="var">R1</span>))) := (<span class="id" title="var">dirprod_pr1</span> (<span class="id" title="var">pr2</span> <span class="id" title="var">T</span>)).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <span class="id" title="var">RoofTopMor2</span> {<span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">ob</span> <span class="id" title="var">C</span>} {<span class="id" title="var">R1</span> <span class="id" title="var">R2</span> : <span class="id" title="var">Roof</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>} (<span class="id" title="var">T</span> : <span class="id" title="var">RoofTop</span> <span class="id" title="var">R1</span> <span class="id" title="var">R2</span>) : <span class="id" title="var">C</span>⟦<span class="id" title="var">T</span>, <span class="id" title="var">R2</span>⟧ :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">dirprod_pr2</span> (<span class="id" title="var">pr2</span> (<span class="id" title="var">pr1</span> <span class="id" title="var">T</span>)).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <span class="id" title="var">RoofTopEq1</span> {<span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">ob</span> <span class="id" title="var">C</span>} {<span class="id" title="var">R1</span> <span class="id" title="var">R2</span> : <span class="id" title="var">Roof</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>} (<span class="id" title="var">T</span> : <span class="id" title="var">RoofTop</span> <span class="id" title="var">R1</span> <span class="id" title="var">R2</span>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">RoofTopMor1</span> <span class="id" title="var">T</span>) · (<span class="id" title="var">RoofMor1</span> <span class="id" title="var">R1</span>) = (<span class="id" title="var">RoofTopMor2</span> <span class="id" title="var">T</span>) · (<span class="id" title="var">RoofMor1</span> <span class="id" title="var">R2</span>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">dirprod_pr1</span> (<span class="id" title="var">dirprod_pr2</span> (<span class="id" title="var">pr2</span> <span class="id" title="var">T</span>)).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <span class="id" title="var">RoofTopEq2</span> {<span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">ob</span> <span class="id" title="var">C</span>} {<span class="id" title="var">R1</span> <span class="id" title="var">R2</span> : <span class="id" title="var">Roof</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>} (<span class="id" title="var">T</span> : <span class="id" title="var">RoofTop</span> <span class="id" title="var">R1</span> <span class="id" title="var">R2</span>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">RoofTopMor1</span> <span class="id" title="var">T</span>) · (<span class="id" title="var">RoofMor2</span> <span class="id" title="var">R1</span>) = (<span class="id" title="var">RoofTopMor2</span> <span class="id" title="var">T</span>) · (<span class="id" title="var">RoofMor2</span> <span class="id" title="var">R2</span>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">dirprod_pr2</span> (<span class="id" title="var">dirprod_pr2</span> (<span class="id" title="var">pr2</span> <span class="id" title="var">T</span>)).<br/>

<br/>
</div>

<div class="doc">
We define an equivalence relation between the roofs 
</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <span class="id" title="var">RoofHrel'</span> {<span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">ob</span> <span class="id" title="var">C</span>} (<span class="id" title="var">R1</span> <span class="id" title="var">R2</span> : <span class="id" title="var">Roof</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>) : <span class="id" title="var">hProp</span> := <span class="id" title="var">ishinh</span> (<span class="id" title="var">RoofTop</span> <span class="id" title="var">R1</span> <span class="id" title="var">R2</span>).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <span class="id" title="var">RoofHrel</span> (<span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">ob</span> <span class="id" title="var">C</span>) : <span class="id" title="var">hrel</span> (<span class="id" title="var">Roof</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">λ</span> <span class="id" title="var">R1</span> : <span class="id" title="var">Roof</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>, <span class="id" title="var">λ</span> <span class="id" title="var">R2</span> : <span class="id" title="var">Roof</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>, <span class="id" title="var">RoofHrel'</span> <span class="id" title="var">R1</span> <span class="id" title="var">R2</span>).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">RoofEqrel</span> (<span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">ob</span> <span class="id" title="var">C</span>) : <span class="id" title="var">iseqrel</span> (<span class="id" title="var">RoofHrel</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>).<br/>
&nbsp;&nbsp;<a class="proof" href="#">Show proof.</a><br/><div class="proof">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">use</span> <span class="id" title="var">iseqrelconstr</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">R1</span> <span class="id" title="var">R2</span> <span class="id" title="var">R3</span> <span class="id" title="var">T1'</span> <span class="id" title="var">T2'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">use</span> (<span class="id" title="var">squash_to_prop</span> <span class="id" title="var">T1'</span>). <span class="id" title="tactic">apply</span> <span class="id" title="var">isapropishinh</span>. <span class="id" title="tactic">intros</span> <span class="id" title="var">T1</span>. <span class="id" title="tactic">clear</span> <span class="id" title="var">T1'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">use</span> (<span class="id" title="var">squash_to_prop</span> <span class="id" title="var">T2'</span>). <span class="id" title="tactic">apply</span> <span class="id" title="var">isapropishinh</span>. <span class="id" title="tactic">intros</span> <span class="id" title="var">T2</span>. <span class="id" title="tactic">clear</span> <span class="id" title="var">T2'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">tmp</span> := <span class="id" title="var">isLocClassSqr2</span> <span class="id" title="var">iLC</span> <span class="id" title="var">T2</span> <span class="id" title="var">T1</span> <span class="id" title="var">x</span> (<span class="id" title="var">RoofTopMor1</span> <span class="id" title="var">T2</span> · <span class="id" title="var">RoofMor1</span> <span class="id" title="var">R2</span>) (<span class="id" title="var">RoofTopMor1Is</span> <span class="id" title="var">T2</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">RoofTopMor2</span> <span class="id" title="var">T1</span> · <span class="id" title="var">RoofMor1</span> <span class="id" title="var">R2</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">tmp</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">D1</span> <span class="id" title="var">D2</span>]. <span class="id" title="tactic">induction</span> <span class="id" title="var">D1</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">w</span> <span class="id" title="var">m</span>]. <span class="id" title="tactic">induction</span> <span class="id" title="var">m</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">m1</span> <span class="id" title="var">m2</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">D2</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">D1</span> <span class="id" title="var">D2</span>]. <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">D1</span>, <span class="id" title="var">D2</span>. <span class="id" title="tactic">repeat</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="var">assoc</span> <span class="id" title="tactic">in</span> <span class="id" title="var">D2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">tmp</span> := <span class="id" title="var">isLocClassPost</span> <span class="id" title="var">iLC</span> <span class="id" title="var">w</span> <span class="id" title="var">R2</span> <span class="id" title="var">x</span> (<span class="id" title="var">m1</span> · <span class="id" title="var">RoofTopMor1</span> <span class="id" title="var">T2</span>) (<span class="id" title="var">m2</span> · <span class="id" title="var">RoofTopMor2</span> <span class="id" title="var">T1</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">RoofMor1</span> <span class="id" title="var">R2</span>) (<span class="id" title="var">RoofMor1Is</span> <span class="id" title="var">R2</span>) <span class="id" title="var">D2</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">tmp</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">t</span> <span class="id" title="var">p</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">P</span> <span class="id" title="var">X</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">X</span>. <span class="id" title="tactic">clear</span> <span class="id" title="var">X</span> <span class="id" title="var">P</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">use</span> <span class="id" title="var">mk_RoofTop</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">exact</span> (<span class="id" title="var">pr1</span> <span class="id" title="var">t</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">exact</span> ((<span class="id" title="var">pr2</span> <span class="id" title="var">t</span>) · <span class="id" title="var">m2</span> · <span class="id" title="var">RoofTopMor1</span> <span class="id" title="var">T1</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">exact</span> ((<span class="id" title="var">pr2</span> <span class="id" title="var">t</span>) · <span class="id" title="var">m1</span> · <span class="id" title="var">RoofTopMor2</span> <span class="id" title="var">T2</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">repeat</span> <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">assoc</span>. <span class="id" title="var">use</span> (<span class="id" title="var">isLocClassComp</span> <span class="id" title="var">iLC</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">exact</span> (<span class="id" title="var">dirprod_pr1</span> <span class="id" title="var">p</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="var">use</span> (<span class="id" title="var">isLocClassComp</span> <span class="id" title="var">iLC</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-- <span class="id" title="tactic">exact</span> <span class="id" title="var">D1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-- <span class="id" title="tactic">exact</span> (<span class="id" title="var">RoofTopMor1Is</span> <span class="id" title="var">T1</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">induction</span> <span class="id" title="var">p</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">p1</span> <span class="id" title="var">p2</span>]. <span class="id" title="tactic">repeat</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="var">assoc</span> <span class="id" title="tactic">in</span> <span class="id" title="var">p2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">tmp</span> := <span class="id" title="var">RoofTopEq1</span> <span class="id" title="var">T2</span>). <span class="id" title="tactic">repeat</span> <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">assoc</span>. <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">tmp</span>. <span class="id" title="tactic">clear</span> <span class="id" title="var">tmp</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="var">assoc</span>. <span class="id" title="tactic">repeat</span> <span class="id" title="tactic">rewrite</span> &lt;- (<span class="id" title="var">assoc</span> (<span class="id" title="var">pr2</span> <span class="id" title="var">t</span>)). <span class="id" title="tactic">rewrite</span> <span class="id" title="var">D2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">assoc</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">cancel_precomposition</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">cancel_precomposition</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exact</span> (<span class="id" title="var">RoofTopEq1</span> <span class="id" title="var">T1</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">induction</span> <span class="id" title="var">p</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">p1</span> <span class="id" title="var">p2</span>]. <span class="id" title="tactic">repeat</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="var">assoc</span> <span class="id" title="tactic">in</span> <span class="id" title="var">p2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">tmp</span> := <span class="id" title="var">RoofTopEq2</span> <span class="id" title="var">T2</span>). <span class="id" title="tactic">repeat</span> <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">assoc</span>. <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">tmp</span>. <span class="id" title="tactic">clear</span> <span class="id" title="var">tmp</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="var">assoc</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">p2</span>. <span class="id" title="tactic">repeat</span> <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">assoc</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">cancel_precomposition</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">cancel_precomposition</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exact</span> (<span class="id" title="var">RoofTopEq2</span> <span class="id" title="var">T1</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">R1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">P</span> <span class="id" title="var">X</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">X</span>. <span class="id" title="tactic">clear</span> <span class="id" title="var">X</span> <span class="id" title="var">P</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">use</span> <span class="id" title="var">mk_RoofTop</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">exact</span> <span class="id" title="var">R1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">exact</span> (<span class="id" title="var">identity</span> <span class="id" title="var">R1</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">exact</span> (<span class="id" title="var">identity</span> <span class="id" title="var">R1</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">rewrite</span> <span class="id" title="var">id_left</span>. <span class="id" title="tactic">exact</span> (<span class="id" title="var">RoofMor1Is</span> <span class="id" title="var">R1</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <span class="id" title="var">idpath</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <span class="id" title="var">idpath</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">R1</span> <span class="id" title="var">R2</span> <span class="id" title="var">T'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">use</span> (<span class="id" title="var">squash_to_prop</span> <span class="id" title="var">T'</span>). <span class="id" title="tactic">apply</span> <span class="id" title="var">isapropishinh</span>. <span class="id" title="tactic">intros</span> <span class="id" title="var">T</span>. <span class="id" title="tactic">clear</span> <span class="id" title="var">T'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">P</span> <span class="id" title="var">X</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">X</span>. <span class="id" title="tactic">clear</span> <span class="id" title="var">X</span> <span class="id" title="var">P</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">use</span> <span class="id" title="var">mk_RoofTop</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">exact</span> <span class="id" title="var">T</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">exact</span> (<span class="id" title="var">RoofTopMor2</span> <span class="id" title="var">T</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">exact</span> (<span class="id" title="var">RoofTopMor1</span> <span class="id" title="var">T</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">rewrite</span> &lt;- (<span class="id" title="var">RoofTopEq1</span> <span class="id" title="var">T</span>). <span class="id" title="tactic">exact</span> (<span class="id" title="var">RoofTopMor1Is</span> <span class="id" title="var">T</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">exact</span> (! (<span class="id" title="var">RoofTopEq1</span> <span class="id" title="var">T</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">exact</span> (! (<span class="id" title="var">RoofTopEq2</span> <span class="id" title="var">T</span>)).<br/>
</div>

<br/>
</div>

<div class="doc">
We are interested in the equivalence classes of roofs. 
</div>
<div class="code">

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <span class="id" title="var">RoofEqclass</span> (<span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">ob</span> <span class="id" title="var">C</span>) : <span class="id" title="var">UU</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;∑ <span class="id" title="var">A</span> : <span class="id" title="var">hsubtype</span> (<span class="id" title="var">Roof</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>), <span class="id" title="var">iseqclass</span> (<span class="id" title="var">eqrelpair</span> <span class="id" title="var">_</span> (<span class="id" title="var">RoofEqrel</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>)) <span class="id" title="var">A</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">isasetRoofEqclass</span> (<span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">ob</span> <span class="id" title="var">C</span>) : <span class="id" title="var">isaset</span> (<span class="id" title="var">RoofEqclass</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>).<br/>
&nbsp;&nbsp;<a class="proof" href="#">Show proof.</a><br/><div class="proof">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">isaset_total2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <span class="id" title="var">isasethsubtype</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">x0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">isasetaprop</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">isapropiseqclass</span>.<br/>
</div>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <span class="id" title="var">mk_RoofEqclass</span> {<span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">ob</span> <span class="id" title="var">C</span>} (<span class="id" title="var">A</span> : <span class="id" title="var">hsubtype</span> (<span class="id" title="var">Roof</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">H</span> : <span class="id" title="var">iseqclass</span> (<span class="id" title="var">eqrelpair</span> <span class="id" title="var">_</span> (<span class="id" title="var">RoofEqrel</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>)) <span class="id" title="var">A</span>) : <span class="id" title="var">RoofEqclass</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> := <span class="id" title="var">tpair</span> <span class="id" title="var">_</span> <span class="id" title="var">A</span> <span class="id" title="var">H</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <span class="id" title="var">RoofEqclassIn</span> {<span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">ob</span> <span class="id" title="var">C</span>} (<span class="id" title="var">RE</span> : <span class="id" title="var">RoofEqclass</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>) : <span class="id" title="var">hsubtype</span> (<span class="id" title="var">Roof</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>) := <span class="id" title="var">pr1</span> <span class="id" title="var">RE</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <span class="id" title="var">RoofEqclassIs</span> {<span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">ob</span> <span class="id" title="var">C</span>} (<span class="id" title="var">RE</span> : <span class="id" title="var">RoofEqclass</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iseqclass</span> (<span class="id" title="var">eqrelpair</span> <span class="id" title="var">_</span> (<span class="id" title="var">RoofEqrel</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>)) (<span class="id" title="var">RoofEqclassIn</span> <span class="id" title="var">RE</span>) := <span class="id" title="var">pr2</span> <span class="id" title="var">RE</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <span class="id" title="var">RoofEqclassEq</span> {<span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">ob</span> <span class="id" title="var">C</span>} (<span class="id" title="var">RE1</span> <span class="id" title="var">RE2</span> : <span class="id" title="var">RoofEqclass</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">H1</span> : ∏ (<span class="id" title="var">R</span> : <span class="id" title="var">Roof</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>) (<span class="id" title="var">H</span> : (<span class="id" title="var">pr1</span> <span class="id" title="var">RE1</span>) <span class="id" title="var">R</span>), (<span class="id" title="var">pr1</span> <span class="id" title="var">RE2</span>) <span class="id" title="var">R</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">H2</span> : ∏ (<span class="id" title="var">R</span> : <span class="id" title="var">Roof</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>) (<span class="id" title="var">H</span> : (<span class="id" title="var">pr1</span> <span class="id" title="var">RE2</span>) <span class="id" title="var">R</span>), (<span class="id" title="var">pr1</span> <span class="id" title="var">RE1</span>) <span class="id" title="var">R</span>) : <span class="id" title="var">RE1</span> = <span class="id" title="var">RE2</span>.<br/>
&nbsp;&nbsp;<a class="proof" href="#">Show proof.</a><br/><div class="proof">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">use</span> <span class="id" title="var">total2_paths_f</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">use</span> <span class="id" title="var">funextfun</span>. <span class="id" title="tactic">intros</span> <span class="id" title="var">g</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">hPropUnivalence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <span class="id" title="var">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <span class="id" title="var">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <span class="id" title="var">proofirrelevance</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">isapropiseqclass</span>.<br/>
</div>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <span class="id" title="var">RoofEqclassDisjoint</span> {<span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">ob</span> <span class="id" title="var">C</span>} (<span class="id" title="var">RE1</span> <span class="id" title="var">RE2</span> : <span class="id" title="var">RoofEqclass</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">R1</span> <span class="id" title="var">R2</span> : <span class="id" title="var">Roof</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>) (<span class="id" title="var">H1</span> : <span class="id" title="var">RoofEqclassIn</span> <span class="id" title="var">RE1</span> <span class="id" title="var">R1</span>) (<span class="id" title="var">H2</span> : <span class="id" title="var">RoofEqclassIn</span> <span class="id" title="var">RE2</span> <span class="id" title="var">R2</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">H</span> : (<span class="id" title="var">eqrelpair</span> <span class="id" title="var">_</span> (<span class="id" title="var">RoofEqrel</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>)) <span class="id" title="var">R1</span> <span class="id" title="var">R2</span>) : <span class="id" title="var">RE1</span> = <span class="id" title="var">RE2</span>.<br/>
&nbsp;&nbsp;<a class="proof" href="#">Show proof.</a><br/><div class="proof">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">use</span> <span class="id" title="var">RoofEqclassEq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">R</span> <span class="id" title="var">H'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">tmp</span> := <span class="id" title="var">eqax1</span> (<span class="id" title="var">pr2</span> <span class="id" title="var">RE1</span>) <span class="id" title="var">R1</span> <span class="id" title="var">R2</span> <span class="id" title="var">H</span> <span class="id" title="var">H1</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">tmp'</span> := <span class="id" title="var">eqax2</span> (<span class="id" title="var">pr2</span> <span class="id" title="var">RE1</span>) <span class="id" title="var">R</span> <span class="id" title="var">R2</span> <span class="id" title="var">H'</span> <span class="id" title="var">tmp</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">eqrelsymm</span> <span class="id" title="tactic">in</span> <span class="id" title="var">tmp'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">eqax1</span> (<span class="id" title="var">pr2</span> <span class="id" title="var">RE2</span>) <span class="id" title="var">R2</span> <span class="id" title="var">R</span> <span class="id" title="var">tmp'</span> <span class="id" title="var">H2</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">R</span> <span class="id" title="var">H'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">eqrelsymm</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">tmp</span> := <span class="id" title="var">eqax1</span> (<span class="id" title="var">pr2</span> <span class="id" title="var">RE2</span>) <span class="id" title="var">R2</span> <span class="id" title="var">R1</span> <span class="id" title="var">H</span> <span class="id" title="var">H2</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">tmp'</span> := <span class="id" title="var">eqax2</span> (<span class="id" title="var">pr2</span> <span class="id" title="var">RE2</span>) <span class="id" title="var">R1</span> <span class="id" title="var">R</span> <span class="id" title="var">tmp</span> <span class="id" title="var">H'</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">eqax1</span> (<span class="id" title="var">pr2</span> <span class="id" title="var">RE1</span>) <span class="id" title="var">R1</span> <span class="id" title="var">R</span> <span class="id" title="var">tmp'</span> <span class="id" title="var">H1</span>).<br/>
</div>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <span class="id" title="var">RoofEqclassFromRoof</span> {<span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">ob</span> <span class="id" title="var">C</span>} (<span class="id" title="var">R</span> : <span class="id" title="var">Roof</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>) : <span class="id" title="var">RoofEqclass</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>.<br/>
&nbsp;&nbsp;<a class="proof" href="#">Show proof.</a><br/><div class="proof">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">use</span> <span class="id" title="var">tpair</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">exact</span> (<span class="id" title="var">λ</span> <span class="id" title="var">RR</span> : <span class="id" title="var">Roof</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>, (<span class="id" title="var">eqrelpair</span> <span class="id" title="var">_</span> (<span class="id" title="var">RoofEqrel</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>)) <span class="id" title="var">RR</span> <span class="id" title="var">R</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">use</span> <span class="id" title="var">tpair</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">intros</span> <span class="id" title="var">P</span> <span class="id" title="var">X</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">X</span>. <span class="id" title="tactic">clear</span> <span class="id" title="var">X</span> <span class="id" title="var">P</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">use</span> <span class="id" title="var">tpair</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">exact</span> <span class="id" title="var">R</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">apply</span> <span class="id" title="var">eqrelrefl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">intros</span> <span class="id" title="var">x1</span> <span class="id" title="var">x2</span> <span class="id" title="var">X</span> <span class="id" title="var">X0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">use</span> <span class="id" title="var">eqreltrans</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-- <span class="id" title="tactic">exact</span> <span class="id" title="var">x1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-- <span class="id" title="tactic">apply</span> <span class="id" title="var">eqrelsymm</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">X</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-- <span class="id" title="tactic">apply</span> <span class="id" title="var">X0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">intros</span> <span class="id" title="var">x1</span> <span class="id" title="var">x2</span> <span class="id" title="var">X</span> <span class="id" title="var">X0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">use</span> <span class="id" title="var">eqreltrans</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-- <span class="id" title="tactic">exact</span> <span class="id" title="var">R</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-- <span class="id" title="tactic">exact</span> <span class="id" title="var">X</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-- <span class="id" title="tactic">apply</span> <span class="id" title="var">eqrelsymm</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">X0</span>.<br/>
</div>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <span class="id" title="var">RoofEqclassFromRoofIn</span> {<span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">ob</span> <span class="id" title="var">C</span>} (<span class="id" title="var">R</span> : <span class="id" title="var">Roof</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">RoofEqclassIn</span> (<span class="id" title="var">RoofEqclassFromRoof</span> <span class="id" title="var">R</span>) <span class="id" title="var">R</span>.<br/>
&nbsp;&nbsp;<a class="proof" href="#">Show proof.</a><br/><div class="proof">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">P</span> <span class="id" title="var">X</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">X</span>. <span class="id" title="tactic">clear</span> <span class="id" title="var">X</span> <span class="id" title="var">P</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">use</span> <span class="id" title="var">mk_RoofTop</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">exact</span> <span class="id" title="var">R</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">exact</span> (<span class="id" title="var">identity</span> <span class="id" title="var">R</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">exact</span> (<span class="id" title="var">identity</span> <span class="id" title="var">R</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">use</span> (<span class="id" title="var">isLocClassComp</span> <span class="id" title="var">iLC</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> (<span class="id" title="var">isLocClassIs</span> <span class="id" title="var">iLC</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> (<span class="id" title="var">RoofMor1Is</span> <span class="id" title="var">R</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <span class="id" title="var">idpath</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <span class="id" title="var">idpath</span>.<br/>
</div>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <span class="id" title="var">RoofEqclassEqRoof</span> {<span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">ob</span> <span class="id" title="var">C</span>} (<span class="id" title="var">RE</span> : <span class="id" title="var">RoofEqclass</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">R</span> : <span class="id" title="var">Roof</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>) (<span class="id" title="var">HR</span> : <span class="id" title="var">RoofEqclassIn</span> <span class="id" title="var">RE</span> <span class="id" title="var">R</span>) : <span class="id" title="var">RE</span> = <span class="id" title="var">RoofEqclassFromRoof</span> <span class="id" title="var">R</span>.<br/>
&nbsp;&nbsp;<a class="proof" href="#">Show proof.</a><br/><div class="proof">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">use</span> <span class="id" title="var">RoofEqclassEq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">R0</span> <span class="id" title="var">HR0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">use</span> (<span class="id" title="var">eqax1</span> (<span class="id" title="var">RoofEqclassIs</span> (<span class="id" title="var">RoofEqclassFromRoof</span> <span class="id" title="var">R</span>))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">exact</span> <span class="id" title="var">R</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">use</span> (<span class="id" title="var">eqax2</span> (<span class="id" title="var">RoofEqclassIs</span> <span class="id" title="var">RE</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">exact</span> <span class="id" title="var">HR</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">exact</span> <span class="id" title="var">HR0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <span class="id" title="var">RoofEqclassFromRoofIn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">R0</span> <span class="id" title="var">HR0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">use</span> (<span class="id" title="var">eqax1</span> (<span class="id" title="var">RoofEqclassIs</span> <span class="id" title="var">RE</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">exact</span> <span class="id" title="var">R</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">use</span> (<span class="id" title="var">eqax2</span> (<span class="id" title="var">RoofEqclassIs</span> (<span class="id" title="var">RoofEqclassFromRoof</span> <span class="id" title="var">R</span>))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">apply</span> <span class="id" title="var">RoofEqclassFromRoofIn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">exact</span> <span class="id" title="var">HR0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">exact</span> <span class="id" title="var">HR</span>.<br/>
</div>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <span class="id" title="var">RoofEqClassIn</span> {<span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">ob</span> <span class="id" title="var">C</span>} (<span class="id" title="var">R1</span> <span class="id" title="var">R2</span> <span class="id" title="var">R3</span> : <span class="id" title="var">Roof</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">H1</span> : <span class="id" title="var">RoofEqclassIn</span> (<span class="id" title="var">RoofEqclassFromRoof</span> <span class="id" title="var">R1</span>) <span class="id" title="var">R2</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">H2</span> : (<span class="id" title="var">eqrelpair</span> <span class="id" title="var">_</span> (<span class="id" title="var">RoofEqrel</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>)) <span class="id" title="var">R2</span> <span class="id" title="var">R3</span>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">RoofEqclassIn</span> (<span class="id" title="var">RoofEqclassFromRoof</span> <span class="id" title="var">R1</span>) <span class="id" title="var">R3</span>.<br/>
&nbsp;&nbsp;<a class="proof" href="#">Show proof.</a><br/><div class="proof">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exact</span> (<span class="id" title="var">eqax1</span> (<span class="id" title="var">RoofEqclassIs</span> (<span class="id" title="var">RoofEqclassFromRoof</span> <span class="id" title="var">R1</span>)) <span class="id" title="var">R2</span> <span class="id" title="var">R3</span> <span class="id" title="var">H2</span> <span class="id" title="var">H1</span>).<br/>
</div>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <span class="id" title="var">RoofEqClassIn2</span> {<span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">ob</span> <span class="id" title="var">C</span>} (<span class="id" title="var">RE</span> : <span class="id" title="var">RoofEqclass</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>) (<span class="id" title="var">R2</span> <span class="id" title="var">R3</span> : <span class="id" title="var">Roof</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">H1</span> : <span class="id" title="var">RoofEqclassIn</span> <span class="id" title="var">RE</span> <span class="id" title="var">R2</span>) (<span class="id" title="var">H2</span> : (<span class="id" title="var">eqrelpair</span> <span class="id" title="var">_</span> (<span class="id" title="var">RoofEqrel</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>)) <span class="id" title="var">R2</span> <span class="id" title="var">R3</span>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">RoofEqclassIn</span> <span class="id" title="var">RE</span> <span class="id" title="var">R3</span>.<br/>
&nbsp;&nbsp;<a class="proof" href="#">Show proof.</a><br/><div class="proof">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">use</span> (<span class="id" title="var">squash_to_prop</span> (<span class="id" title="var">pr1</span> (<span class="id" title="var">RoofEqclassIs</span> <span class="id" title="var">RE</span>))). <span class="id" title="tactic">apply</span> <span class="id" title="var">propproperty</span>. <span class="id" title="tactic">intros</span> <span class="id" title="var">RE1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">RE1</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">RE1</span> <span class="id" title="var">RE2</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">eqax1</span> (<span class="id" title="var">RoofEqclassIs</span> <span class="id" title="var">RE</span>) <span class="id" title="var">RE1</span> <span class="id" title="var">R3</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">use</span> <span class="id" title="var">eqreltrans</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">exact</span> <span class="id" title="var">R2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> (<span class="id" title="var">eqax2</span> (<span class="id" title="var">RoofEqclassIs</span> <span class="id" title="var">RE</span>) <span class="id" title="var">RE1</span> <span class="id" title="var">R2</span> <span class="id" title="var">RE2</span> <span class="id" title="var">H1</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <span class="id" title="var">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <span class="id" title="var">RE2</span>.<br/>
</div>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <span class="id" title="var">roof_comp</span> {<span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">z</span> : <span class="id" title="var">ob</span> <span class="id" title="var">C</span>} (<span class="id" title="var">R1</span> : <span class="id" title="var">Roof</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>) (<span class="id" title="var">R2</span> : <span class="id" title="var">Roof</span> <span class="id" title="var">y</span> <span class="id" title="var">z</span>) : <span class="id" title="var">Roof</span> <span class="id" title="var">x</span> <span class="id" title="var">z</span>.<br/>
&nbsp;&nbsp;<a class="proof" href="#">Show proof.</a><br/><div class="proof">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">LS2</span> := <span class="id" title="var">isLocClassSqr2</span> <span class="id" title="var">iLC</span> <span class="id" title="var">R2</span> <span class="id" title="var">R1</span> <span class="id" title="var">y</span> (<span class="id" title="var">RoofMor1</span> <span class="id" title="var">R2</span>) (<span class="id" title="var">RoofMor1Is</span> <span class="id" title="var">R2</span>) (<span class="id" title="var">RoofMor2</span> <span class="id" title="var">R1</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">use</span> <span class="id" title="var">mk_Roof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">exact</span> <span class="id" title="var">LS2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">exact</span> ((<span class="id" title="var">LocSqr2Mor2</span> <span class="id" title="var">LS2</span>) · (<span class="id" title="var">RoofMor1</span> <span class="id" title="var">R1</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">exact</span> ((<span class="id" title="var">LocSqr2Mor1</span> <span class="id" title="var">LS2</span>) · (<span class="id" title="var">RoofMor2</span> <span class="id" title="var">R2</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">use</span> (<span class="id" title="var">isLocClassComp</span> <span class="id" title="var">iLC</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">exact</span> (<span class="id" title="var">LocSqr2Mor2Is</span> <span class="id" title="var">LS2</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">exact</span> (<span class="id" title="var">RoofMor1Is</span> <span class="id" title="var">R1</span>).<br/>
</div>

<br/>
</div>

<div class="doc">
<a name="lab1246"></a><h2 class="section">Composition of roofs</h2>

<div class="paragraph"> </div>

 Construct a "commutative coroof" from RoofTop 
</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <span class="id" title="var">RoofTopToCoroof</span> {<span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">ob</span> <span class="id" title="var">C</span>} {<span class="id" title="var">R1</span> <span class="id" title="var">R2</span> : <span class="id" title="var">Roof</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>} (<span class="id" title="var">T</span> : <span class="id" title="var">RoofTop</span> <span class="id" title="var">R1</span> <span class="id" title="var">R2</span>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;∑ <span class="id" title="var">CR</span> : <span class="id" title="var">Coroof</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>, (<span class="id" title="var">RoofMor1</span> <span class="id" title="var">R1</span> · <span class="id" title="var">CoroofMor1</span> <span class="id" title="var">CR</span> = <span class="id" title="var">RoofMor2</span> <span class="id" title="var">R1</span> · <span class="id" title="var">CoroofMor2</span> <span class="id" title="var">CR</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;× (<span class="id" title="var">RoofMor1</span> <span class="id" title="var">R2</span> · <span class="id" title="var">CoroofMor1</span> <span class="id" title="var">CR</span> = <span class="id" title="var">RoofMor2</span> <span class="id" title="var">R2</span> · <span class="id" title="var">CoroofMor2</span> <span class="id" title="var">CR</span>).<br/>
&nbsp;&nbsp;<a class="proof" href="#">Show proof.</a><br/><div class="proof">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">sqr1</span> := <span class="id" title="var">isLocClassSqr1</span> <span class="id" title="var">iLC</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> (<span class="id" title="var">RoofMor1</span> <span class="id" title="var">R1</span>) (<span class="id" title="var">RoofMor1Is</span> <span class="id" title="var">R1</span>) (<span class="id" title="var">RoofMor2</span> <span class="id" title="var">R1</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">sqr2</span> := <span class="id" title="var">isLocClassSqr1</span> <span class="id" title="var">iLC</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> (<span class="id" title="var">RoofMor1</span> <span class="id" title="var">R2</span>) (<span class="id" title="var">RoofMor1Is</span> <span class="id" title="var">R2</span>) (<span class="id" title="var">RoofMor2</span> <span class="id" title="var">R2</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">sqr3</span> := <span class="id" title="var">isLocClassSqr1</span> <span class="id" title="var">iLC</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> (<span class="id" title="var">LocSqr1Mor2</span> <span class="id" title="var">sqr1</span>) (<span class="id" title="var">LocSqr1Mor2Is</span> <span class="id" title="var">sqr1</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">LocSqr1Mor2</span> <span class="id" title="var">sqr2</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">mor1</span> := <span class="id" title="var">RoofTopMor1</span> <span class="id" title="var">T</span> · <span class="id" title="var">RoofMor1</span> <span class="id" title="var">R1</span> · <span class="id" title="var">LocSqr1Mor1</span> <span class="id" title="var">sqr1</span> · <span class="id" title="var">LocSqr1Mor1</span> <span class="id" title="var">sqr3</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">mor2</span> := <span class="id" title="var">RoofTopMor1</span> <span class="id" title="var">T</span> · <span class="id" title="var">RoofMor1</span> <span class="id" title="var">R1</span> · <span class="id" title="var">LocSqr1Mor1</span> <span class="id" title="var">sqr2</span> · <span class="id" title="var">LocSqr1Mor2</span> <span class="id" title="var">sqr3</span>).<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">H</span> : <span class="id" title="var">RoofTopMor1</span> <span class="id" title="var">T</span> · <span class="id" title="var">RoofMor1</span> <span class="id" title="var">R1</span> · (<span class="id" title="var">LocSqr1Mor1</span> <span class="id" title="var">sqr1</span> · <span class="id" title="var">LocSqr1Mor1</span> <span class="id" title="var">sqr3</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;= <span class="id" title="var">RoofTopMor1</span> <span class="id" title="var">T</span> · <span class="id" title="var">RoofMor1</span> <span class="id" title="var">R1</span> · (<span class="id" title="var">LocSqr1Mor1</span> <span class="id" title="var">sqr2</span> · <span class="id" title="var">LocSqr1Mor2</span> <span class="id" title="var">sqr3</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">tmp1</span> := <span class="id" title="var">LocSqr1Comm</span> <span class="id" title="var">sqr1</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">tmp2</span> := <span class="id" title="var">LocSqr1Comm</span> <span class="id" title="var">sqr2</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">tmp3</span> := <span class="id" title="var">LocSqr1Comm</span> <span class="id" title="var">sqr3</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">assoc</span>. <span class="id" title="tactic">rewrite</span> &lt;- (<span class="id" title="var">assoc</span> <span class="id" title="var">_</span> (<span class="id" title="var">RoofMor1</span> <span class="id" title="var">R1</span>)). <span class="id" title="tactic">rewrite</span> <span class="id" title="var">tmp1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">assoc</span>. <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">assoc</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">tmp3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">assoc</span>. <span class="id" title="tactic">rewrite</span> (<span class="id" title="var">RoofTopEq2</span> <span class="id" title="var">T</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- (<span class="id" title="var">assoc</span> <span class="id" title="var">_</span> (<span class="id" title="var">RoofMor2</span> <span class="id" title="var">R2</span>)). <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">tmp2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">assoc</span>. <span class="id" title="tactic">rewrite</span> (<span class="id" title="var">RoofTopEq1</span> <span class="id" title="var">T</span>). <span class="id" title="tactic">rewrite</span> <span class="id" title="var">assoc</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">idpath</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">PreS</span> := <span class="id" title="var">isLocClassPre</span> <span class="id" title="var">iLC</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> (<span class="id" title="var">RoofTopMor1</span> <span class="id" title="var">T</span> · <span class="id" title="var">RoofMor1</span> <span class="id" title="var">R1</span>) (<span class="id" title="var">RoofTopMor1Is</span> <span class="id" title="var">T</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">LocSqr1Mor1</span> <span class="id" title="var">sqr1</span> · <span class="id" title="var">LocSqr1Mor1</span> <span class="id" title="var">sqr3</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">LocSqr1Mor1</span> <span class="id" title="var">sqr2</span> · <span class="id" title="var">LocSqr1Mor2</span> <span class="id" title="var">sqr3</span>) <span class="id" title="var">H</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">use</span> <span class="id" title="var">tpair</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">use</span> <span class="id" title="var">mk_Coroof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">exact</span> <span class="id" title="var">PreS</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">exact</span> (<span class="id" title="var">LocSqr1Mor1</span> <span class="id" title="var">sqr1</span> · <span class="id" title="var">LocSqr1Mor1</span> <span class="id" title="var">sqr3</span> · <span class="id" title="var">PreSwitchMor</span> <span class="id" title="var">PreS</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">exact</span> (<span class="id" title="var">LocSqr1Mor2</span> <span class="id" title="var">sqr2</span> · <span class="id" title="var">LocSqr1Mor2</span> <span class="id" title="var">sqr3</span> · <span class="id" title="var">PreSwitchMor</span> <span class="id" title="var">PreS</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">use</span> (<span class="id" title="var">isLocClassComp</span> <span class="id" title="var">iLC</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="var">use</span> (<span class="id" title="var">isLocClassComp</span> <span class="id" title="var">iLC</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-- <span class="id" title="tactic">exact</span> (<span class="id" title="var">LocSqr1Mor2Is</span> <span class="id" title="var">sqr2</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-- <span class="id" title="tactic">exact</span> (<span class="id" title="var">LocSqr1Mor2Is</span> <span class="id" title="var">sqr3</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">exact</span> (<span class="id" title="var">PreSwitchMorIs</span> <span class="id" title="var">PreS</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">cbn</span>. <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">rewrite</span> &lt;- (<span class="id" title="var">LocSqr1Comm</span> <span class="id" title="var">sqr3</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">assoc</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">assoc</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">assoc</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">assoc</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">cancel_postcomposition</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">cancel_postcomposition</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">LocSqr1Comm</span> <span class="id" title="var">sqr1</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">rewrite</span> (<span class="id" title="var">PreSwitchEq</span> <span class="id" title="var">PreS</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">assoc</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">assoc</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">assoc</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">assoc</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">cancel_postcomposition</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">cancel_postcomposition</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">LocSqr1Comm</span> <span class="id" title="var">sqr2</span>).<br/>
</div>
&nbsp;&nbsp;<span class="id" title="keyword">Opaque</span> <span class="id" title="var">RoofTopToCoroof</span>.<br/>

<br/>
</div>

<div class="doc">
Precomposition with equivalent roofs yield equivalent roofs. 
</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">roof_pre_comp</span> {<span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">z</span> : <span class="id" title="var">ob</span> <span class="id" title="var">C</span>} (<span class="id" title="var">R1</span> <span class="id" title="var">R2</span> : <span class="id" title="var">Roof</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">e</span> : (<span class="id" title="var">eqrelpair</span> (<span class="id" title="var">RoofHrel</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>) (<span class="id" title="var">RoofEqrel</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>)) <span class="id" title="var">R1</span> <span class="id" title="var">R2</span>) (<span class="id" title="var">R3</span> : <span class="id" title="var">Roof</span> <span class="id" title="var">y</span> <span class="id" title="var">z</span>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">eqrelpair</span> (<span class="id" title="var">RoofHrel</span> <span class="id" title="var">x</span> <span class="id" title="var">z</span>) (<span class="id" title="var">RoofEqrel</span> <span class="id" title="var">x</span> <span class="id" title="var">z</span>)) (<span class="id" title="var">roof_comp</span> <span class="id" title="var">R1</span> <span class="id" title="var">R3</span>) (<span class="id" title="var">roof_comp</span> <span class="id" title="var">R2</span> <span class="id" title="var">R3</span>).<br/>
&nbsp;&nbsp;<a class="proof" href="#">Show proof.</a><br/><div class="proof">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">use</span> (<span class="id" title="var">squash_to_prop</span> <span class="id" title="var">e</span>). <span class="id" title="tactic">apply</span> <span class="id" title="var">propproperty</span>. <span class="id" title="tactic">intros</span> <span class="id" title="var">T</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">T'</span> := <span class="id" title="var">RoofTopToCoroof</span> <span class="id" title="var">T</span>). <span class="id" title="tactic">induction</span> <span class="id" title="var">T'</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">CR</span> <span class="id" title="var">eq</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">P</span> <span class="id" title="var">X</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">X</span>. <span class="id" title="tactic">clear</span> <span class="id" title="var">X</span> <span class="id" title="var">P</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">R4</span> := <span class="id" title="var">roof_comp</span> <span class="id" title="var">R1</span> <span class="id" title="var">R3</span>). <span class="id" title="tactic">set</span> (<span class="id" title="var">R5</span> := <span class="id" title="var">roof_comp</span> <span class="id" title="var">R2</span> <span class="id" title="var">R3</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">roof_comp</span> <span class="id" title="tactic">in</span> <span class="id" title="var">R4</span>. <span class="id" title="tactic">unfold</span> <span class="id" title="var">roof_comp</span> <span class="id" title="tactic">in</span> <span class="id" title="var">R5</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">sqr4</span> := <span class="id" title="var">isLocClassSqr2</span> <span class="id" title="var">iLC</span> <span class="id" title="var">R3</span> <span class="id" title="var">R1</span> <span class="id" title="var">y</span> (<span class="id" title="var">RoofMor1</span> <span class="id" title="var">R3</span>) (<span class="id" title="var">RoofMor1Is</span> <span class="id" title="var">R3</span>) (<span class="id" title="var">RoofMor2</span> <span class="id" title="var">R1</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">sqr5</span> := <span class="id" title="var">isLocClassSqr2</span> <span class="id" title="var">iLC</span> <span class="id" title="var">R3</span> <span class="id" title="var">R2</span> <span class="id" title="var">y</span> (<span class="id" title="var">RoofMor1</span> <span class="id" title="var">R3</span>) (<span class="id" title="var">RoofMor1Is</span> <span class="id" title="var">R3</span>) (<span class="id" title="var">RoofMor2</span> <span class="id" title="var">R2</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">fold</span> <span class="id" title="var">sqr4</span> <span class="id" title="tactic">in</span> <span class="id" title="var">R4</span>. <span class="id" title="tactic">fold</span> <span class="id" title="var">sqr5</span> <span class="id" title="tactic">in</span> <span class="id" title="var">R5</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">sqr6</span> := <span class="id" title="var">isLocClassSqr2</span> <span class="id" title="var">iLC</span> <span class="id" title="var">R5</span> <span class="id" title="var">R4</span> <span class="id" title="var">x</span> (<span class="id" title="var">LocSqr2Mor2</span> <span class="id" title="var">sqr5</span> · <span class="id" title="var">RoofMor1</span> <span class="id" title="var">R2</span>) (<span class="id" title="var">RoofMor1Is</span> <span class="id" title="var">R5</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">LocSqr2Mor2</span> <span class="id" title="var">sqr4</span> · <span class="id" title="var">RoofMor1</span> <span class="id" title="var">R1</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">s</span> : <span class="id" title="var">SOM</span> <span class="id" title="var">R3</span> <span class="id" title="var">CR</span> (<span class="id" title="var">RoofMor1</span> <span class="id" title="var">R3</span> · <span class="id" title="var">CoroofMor2</span> <span class="id" title="var">CR</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">use</span> (<span class="id" title="var">isLocClassComp</span> <span class="id" title="var">iLC</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">exact</span> (<span class="id" title="var">RoofMor1Is</span> <span class="id" title="var">R3</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">exact</span> (<span class="id" title="var">CoroofMor2Is</span> <span class="id" title="var">CR</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">H</span> : <span class="id" title="var">LocSqr2Mor1</span> <span class="id" title="var">sqr6</span> · <span class="id" title="var">LocSqr2Mor1</span> <span class="id" title="var">sqr5</span> · (<span class="id" title="var">RoofMor1</span> <span class="id" title="var">R3</span> · <span class="id" title="var">CoroofMor2</span> <span class="id" title="var">CR</span>) =<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">LocSqr2Mor2</span> <span class="id" title="var">sqr6</span> · <span class="id" title="var">LocSqr2Mor1</span> <span class="id" title="var">sqr4</span> · (<span class="id" title="var">RoofMor1</span> <span class="id" title="var">R3</span> · <span class="id" title="var">CoroofMor2</span> <span class="id" title="var">CR</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">assoc</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">assoc</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- (<span class="id" title="var">assoc</span> <span class="id" title="var">_</span> (<span class="id" title="var">LocSqr2Mor1</span> <span class="id" title="var">sqr5</span>)). <span class="id" title="tactic">rewrite</span> (<span class="id" title="var">LocSqr2Comm</span> <span class="id" title="var">sqr5</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- (<span class="id" title="var">assoc</span> <span class="id" title="var">_</span> (<span class="id" title="var">LocSqr2Mor1</span> <span class="id" title="var">sqr4</span>)). <span class="id" title="tactic">rewrite</span> (<span class="id" title="var">LocSqr2Comm</span> <span class="id" title="var">sqr4</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">assoc</span>. <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">assoc</span>. <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">assoc</span>. <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">assoc</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- (<span class="id" title="var">dirprod_pr1</span> <span class="id" title="var">eq</span>). <span class="id" title="tactic">rewrite</span> &lt;- (<span class="id" title="var">dirprod_pr2</span> <span class="id" title="var">eq</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">assoc</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">assoc</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">assoc</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">assoc</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">cancel_postcomposition</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">tmp</span> := <span class="id" title="var">LocSqr2Comm</span> <span class="id" title="var">sqr6</span>). <span class="id" title="tactic">rewrite</span> <span class="id" title="var">assoc</span> <span class="id" title="tactic">in</span> <span class="id" title="var">tmp</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">assoc</span> <span class="id" title="tactic">in</span> <span class="id" title="var">tmp</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">tmp</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">PostS</span> := <span class="id" title="var">isLocClassPost</span> <span class="id" title="var">iLC</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">LocSqr2Mor1</span> <span class="id" title="var">sqr6</span> · <span class="id" title="var">LocSqr2Mor1</span> <span class="id" title="var">sqr5</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">LocSqr2Mor2</span> <span class="id" title="var">sqr6</span> · <span class="id" title="var">LocSqr2Mor1</span> <span class="id" title="var">sqr4</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">RoofMor1</span> <span class="id" title="var">R3</span> · <span class="id" title="var">CoroofMor2</span> <span class="id" title="var">CR</span>) <span class="id" title="var">s</span> <span class="id" title="var">H</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">use</span> <span class="id" title="var">mk_RoofTop</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">exact</span> <span class="id" title="var">PostS</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">exact</span> (<span class="id" title="var">PostSwitchMor</span> <span class="id" title="var">PostS</span> · <span class="id" title="var">LocSqr2Mor2</span> <span class="id" title="var">sqr6</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">exact</span> (<span class="id" title="var">PostSwitchMor</span> <span class="id" title="var">PostS</span> · <span class="id" title="var">LocSqr2Mor1</span> <span class="id" title="var">sqr6</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">use</span> (<span class="id" title="var">isLocClassComp</span> <span class="id" title="var">iLC</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">use</span> (<span class="id" title="var">isLocClassComp</span> <span class="id" title="var">iLC</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">exact</span> (<span class="id" title="var">PostSwitchMorIs</span> <span class="id" title="var">PostS</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">exact</span> (<span class="id" title="var">LocSqr2Mor2Is</span> <span class="id" title="var">sqr6</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">exact</span> (<span class="id" title="var">RoofMor1Is</span> <span class="id" title="var">R4</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">assoc</span>. <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">assoc</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">cancel_precomposition</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (! (<span class="id" title="var">LocSqr2Comm</span> <span class="id" title="var">sqr6</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">assoc</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">assoc</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">tmp</span> := ! (<span class="id" title="var">PostSwitchEq</span> <span class="id" title="var">PostS</span>)). <span class="id" title="tactic">rewrite</span> <span class="id" title="var">assoc</span> <span class="id" title="tactic">in</span> <span class="id" title="var">tmp</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">assoc</span> <span class="id" title="tactic">in</span> <span class="id" title="var">tmp</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">maponpaths</span> (<span class="id" title="var">λ</span> <span class="id" title="var">f</span> : <span class="id" title="var">_</span>, <span class="id" title="var">f</span> · <span class="id" title="var">RoofMor2</span> <span class="id" title="var">R3</span>)) <span class="id" title="tactic">in</span> <span class="id" title="var">tmp</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">tmp</span>.<br/>
</div>

<br/>
</div>

<div class="doc">
Postcomposition with equivalent roofs yield equivalent roofs. 
</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">roof_post_comp</span> {<span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">z</span> : <span class="id" title="var">ob</span> <span class="id" title="var">C</span>} (<span class="id" title="var">R1</span> : <span class="id" title="var">Roof</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>) (<span class="id" title="var">R2</span> <span class="id" title="var">R3</span> : <span class="id" title="var">Roof</span> <span class="id" title="var">y</span> <span class="id" title="var">z</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">e</span> : (<span class="id" title="var">eqrelpair</span> (<span class="id" title="var">RoofHrel</span> <span class="id" title="var">y</span> <span class="id" title="var">z</span>) (<span class="id" title="var">RoofEqrel</span> <span class="id" title="var">y</span> <span class="id" title="var">z</span>)) <span class="id" title="var">R2</span> <span class="id" title="var">R3</span>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">eqrelpair</span> (<span class="id" title="var">RoofHrel</span> <span class="id" title="var">x</span> <span class="id" title="var">z</span>) (<span class="id" title="var">RoofEqrel</span> <span class="id" title="var">x</span> <span class="id" title="var">z</span>)) (<span class="id" title="var">roof_comp</span> <span class="id" title="var">R1</span> <span class="id" title="var">R2</span>) (<span class="id" title="var">roof_comp</span> <span class="id" title="var">R1</span> <span class="id" title="var">R3</span>).<br/>
&nbsp;&nbsp;<a class="proof" href="#">Show proof.</a><br/><div class="proof">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">use</span> (<span class="id" title="var">squash_to_prop</span> <span class="id" title="var">e</span>). <span class="id" title="tactic">apply</span> <span class="id" title="var">propproperty</span>. <span class="id" title="tactic">intros</span> <span class="id" title="var">T</span>. <span class="id" title="tactic">clear</span> <span class="id" title="var">e</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">T'</span> := <span class="id" title="var">RoofTopToCoroof</span> <span class="id" title="var">T</span>). <span class="id" title="tactic">induction</span> <span class="id" title="var">T'</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">CR</span> <span class="id" title="var">eq</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">P</span> <span class="id" title="var">X</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">X</span>. <span class="id" title="tactic">clear</span> <span class="id" title="var">X</span> <span class="id" title="var">P</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">R4</span> := <span class="id" title="var">roof_comp</span> <span class="id" title="var">R1</span> <span class="id" title="var">R2</span>). <span class="id" title="tactic">set</span> (<span class="id" title="var">R5</span> := <span class="id" title="var">roof_comp</span> <span class="id" title="var">R1</span> <span class="id" title="var">R3</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">roof_comp</span> <span class="id" title="tactic">in</span> <span class="id" title="var">R4</span>. <span class="id" title="tactic">unfold</span> <span class="id" title="var">roof_comp</span> <span class="id" title="tactic">in</span> <span class="id" title="var">R5</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">sqr4</span> := <span class="id" title="var">isLocClassSqr2</span> <span class="id" title="var">iLC</span> <span class="id" title="var">R2</span> <span class="id" title="var">R1</span> <span class="id" title="var">y</span> (<span class="id" title="var">RoofMor1</span> <span class="id" title="var">R2</span>) (<span class="id" title="var">RoofMor1Is</span> <span class="id" title="var">R2</span>) (<span class="id" title="var">RoofMor2</span> <span class="id" title="var">R1</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">sqr5</span> := <span class="id" title="var">isLocClassSqr2</span> <span class="id" title="var">iLC</span> <span class="id" title="var">R3</span> <span class="id" title="var">R1</span> <span class="id" title="var">y</span> (<span class="id" title="var">RoofMor1</span> <span class="id" title="var">R3</span>) (<span class="id" title="var">RoofMor1Is</span> <span class="id" title="var">R3</span>) (<span class="id" title="var">RoofMor2</span> <span class="id" title="var">R1</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">fold</span> <span class="id" title="var">sqr4</span> <span class="id" title="tactic">in</span> <span class="id" title="var">R4</span>. <span class="id" title="tactic">fold</span> <span class="id" title="var">sqr5</span> <span class="id" title="tactic">in</span> <span class="id" title="var">R5</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">sqr6</span> := <span class="id" title="var">isLocClassSqr2</span> <span class="id" title="var">iLC</span> <span class="id" title="var">R5</span> <span class="id" title="var">R4</span> <span class="id" title="var">R1</span> (<span class="id" title="var">LocSqr2Mor2</span> <span class="id" title="var">sqr5</span>) (<span class="id" title="var">LocSqr2Mor2Is</span> <span class="id" title="var">sqr5</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">LocSqr2Mor2</span> <span class="id" title="var">sqr4</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">H</span> : <span class="id" title="var">LocSqr2Mor1</span> <span class="id" title="var">sqr6</span> · <span class="id" title="var">LocSqr2Mor1</span> <span class="id" title="var">sqr5</span> · <span class="id" title="var">RoofMor2</span> <span class="id" title="var">R3</span> · <span class="id" title="var">CoroofMor2</span> <span class="id" title="var">CR</span> =<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">LocSqr2Mor2</span> <span class="id" title="var">sqr6</span> · <span class="id" title="var">LocSqr2Mor1</span> <span class="id" title="var">sqr4</span> · <span class="id" title="var">RoofMor2</span> <span class="id" title="var">R2</span> · <span class="id" title="var">CoroofMor2</span> <span class="id" title="var">CR</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">assoc</span>. <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">assoc</span>. <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">assoc</span>. <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">assoc</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- (<span class="id" title="var">dirprod_pr1</span> <span class="id" title="var">eq</span>). <span class="id" title="tactic">rewrite</span> &lt;- (<span class="id" title="var">dirprod_pr2</span> <span class="id" title="var">eq</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">assoc</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">assoc</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">assoc</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">assoc</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- (<span class="id" title="var">assoc</span> <span class="id" title="var">_</span> (<span class="id" title="var">LocSqr2Mor1</span> <span class="id" title="var">sqr4</span>)). <span class="id" title="tactic">rewrite</span> (<span class="id" title="var">LocSqr2Comm</span> <span class="id" title="var">sqr4</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- (<span class="id" title="var">assoc</span> <span class="id" title="var">_</span> (<span class="id" title="var">LocSqr2Mor1</span> <span class="id" title="var">sqr5</span>)). <span class="id" title="tactic">rewrite</span> (<span class="id" title="var">LocSqr2Comm</span> <span class="id" title="var">sqr5</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">assoc</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">assoc</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">cancel_postcomposition</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">cancel_postcomposition</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">LocSqr2Comm</span> <span class="id" title="var">sqr6</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">PostS</span> := <span class="id" title="var">isLocClassPost</span> <span class="id" title="var">iLC</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">LocSqr2Mor1</span> <span class="id" title="var">sqr6</span> · <span class="id" title="var">LocSqr2Mor1</span> <span class="id" title="var">sqr5</span> · <span class="id" title="var">RoofMor2</span> <span class="id" title="var">R3</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">LocSqr2Mor2</span> <span class="id" title="var">sqr6</span> · <span class="id" title="var">LocSqr2Mor1</span> <span class="id" title="var">sqr4</span> · <span class="id" title="var">RoofMor2</span> <span class="id" title="var">R2</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">CoroofMor2</span> <span class="id" title="var">CR</span>) (<span class="id" title="var">CoroofMor2Is</span> <span class="id" title="var">CR</span>) <span class="id" title="var">H</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">use</span> <span class="id" title="var">mk_RoofTop</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">exact</span> <span class="id" title="var">PostS</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">exact</span> (<span class="id" title="var">PostSwitchMor</span> <span class="id" title="var">PostS</span> · <span class="id" title="var">LocSqr2Mor2</span> <span class="id" title="var">sqr6</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">exact</span> (<span class="id" title="var">PostSwitchMor</span> <span class="id" title="var">PostS</span> · <span class="id" title="var">LocSqr2Mor1</span> <span class="id" title="var">sqr6</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">use</span> (<span class="id" title="var">isLocClassComp</span> <span class="id" title="var">iLC</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">use</span> (<span class="id" title="var">isLocClassComp</span> <span class="id" title="var">iLC</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">exact</span> (<span class="id" title="var">PostSwitchMorIs</span> <span class="id" title="var">PostS</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">exact</span> (<span class="id" title="var">LocSqr2Mor2Is</span> <span class="id" title="var">sqr6</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">exact</span> (<span class="id" title="var">RoofMor1Is</span> <span class="id" title="var">R4</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">cbn</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">assoc</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">assoc</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">cancel_postcomposition</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">tmp</span> := ! (<span class="id" title="var">LocSqr2Comm</span> <span class="id" title="var">sqr6</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">maponpaths</span> (<span class="id" title="var">λ</span> <span class="id" title="var">f</span> : <span class="id" title="var">_</span>, <span class="id" title="var">PostSwitchMor</span> <span class="id" title="var">PostS</span> · <span class="id" title="var">f</span>)) <span class="id" title="tactic">in</span> <span class="id" title="var">tmp</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">assoc</span> <span class="id" title="tactic">in</span> <span class="id" title="var">tmp</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">assoc</span> <span class="id" title="tactic">in</span> <span class="id" title="var">tmp</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">tmp</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">cbn</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">pathsinv0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">assoc</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">assoc</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">tmp</span> := <span class="id" title="var">PostSwitchEq</span> <span class="id" title="var">PostS</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">assoc</span> <span class="id" title="tactic">in</span> <span class="id" title="var">tmp</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">assoc</span> <span class="id" title="tactic">in</span> <span class="id" title="var">tmp</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">assoc</span> <span class="id" title="tactic">in</span> <span class="id" title="var">tmp</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">assoc</span> <span class="id" title="tactic">in</span> <span class="id" title="var">tmp</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">tmp</span>.<br/>
</div>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">roof_comp_iscontr</span> (<span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">z</span> : <span class="id" title="var">ob</span> <span class="id" title="var">C</span>) (<span class="id" title="var">e1</span> : <span class="id" title="var">RoofEqclass</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>) (<span class="id" title="var">e2</span> : <span class="id" title="var">RoofEqclass</span> <span class="id" title="var">y</span> <span class="id" title="var">z</span>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iscontr</span> (∑ <span class="id" title="var">e3</span> : <span class="id" title="var">RoofEqclass</span> <span class="id" title="var">x</span> <span class="id" title="var">z</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;∏ (<span class="id" title="var">f</span> : <span class="id" title="var">Roof</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>) (<span class="id" title="var">s1</span> : (<span class="id" title="var">RoofEqclassIn</span> <span class="id" title="var">e1</span>) <span class="id" title="var">f</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">g</span> : <span class="id" title="var">Roof</span> <span class="id" title="var">y</span> <span class="id" title="var">z</span>) (<span class="id" title="var">s2</span> : (<span class="id" title="var">RoofEqclassIn</span> <span class="id" title="var">e2</span>) <span class="id" title="var">g</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">RoofEqclassIn</span> <span class="id" title="var">e3</span>) (<span class="id" title="var">roof_comp</span> <span class="id" title="var">f</span> <span class="id" title="var">g</span>)).<br/>
&nbsp;&nbsp;<a class="proof" href="#">Show proof.</a><br/><div class="proof">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">e1</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">e1</span> <span class="id" title="var">e1eq</span>]. <span class="id" title="tactic">induction</span> <span class="id" title="var">e2</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">e2</span> <span class="id" title="var">e2eq</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">use</span> (<span class="id" title="var">squash_to_prop</span> (<span class="id" title="var">dirprod_pr1</span> <span class="id" title="var">e1eq</span>)). <span class="id" title="tactic">apply</span> <span class="id" title="var">isapropiscontr</span>. <span class="id" title="tactic">intros</span> <span class="id" title="var">R1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">R1</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">R1</span> <span class="id" title="var">R1'</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">use</span> (<span class="id" title="var">squash_to_prop</span> (<span class="id" title="var">dirprod_pr1</span> <span class="id" title="var">e2eq</span>)). <span class="id" title="tactic">apply</span> <span class="id" title="var">isapropiscontr</span>. <span class="id" title="tactic">intros</span> <span class="id" title="var">R2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">R2</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">R2</span> <span class="id" title="var">R2'</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">use</span> <span class="id" title="var">tpair</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">use</span> <span class="id" title="var">tpair</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">use</span> <span class="id" title="var">mk_RoofEqclass</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">exact</span> (<span class="id" title="var">λ</span> <span class="id" title="var">RR</span> : (<span class="id" title="var">Roof</span> <span class="id" title="var">x</span> <span class="id" title="var">z</span>), (<span class="id" title="var">eqrelpair</span> <span class="id" title="var">_</span> (<span class="id" title="var">RoofEqrel</span> <span class="id" title="var">x</span> <span class="id" title="var">z</span>)) <span class="id" title="var">RR</span> (<span class="id" title="var">roof_comp</span> <span class="id" title="var">R1</span> <span class="id" title="var">R2</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="var">use</span> <span class="id" title="var">iseqclassconstr</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-- <span class="id" title="tactic">intros</span> <span class="id" title="var">P</span> <span class="id" title="var">X</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">X</span>. <span class="id" title="tactic">clear</span> <span class="id" title="var">X</span> <span class="id" title="var">P</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">use</span> <span class="id" title="var">tpair</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;++ <span class="id" title="tactic">exact</span> (<span class="id" title="var">roof_comp</span> <span class="id" title="var">R1</span> <span class="id" title="var">R2</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;++ <span class="id" title="var">use</span> <span class="id" title="var">eqrelrefl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-- <span class="id" title="tactic">intros</span> <span class="id" title="var">R3</span> <span class="id" title="var">R4</span> <span class="id" title="var">H1</span> <span class="id" title="var">H2</span>. <span class="id" title="var">cbn</span> <span class="id" title="keyword">beta</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H2</span>. <span class="id" title="var">cbn</span> <span class="id" title="keyword">beta</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">use</span> (<span class="id" title="var">squash_to_prop</span> <span class="id" title="var">H1</span>). <span class="id" title="tactic">apply</span> <span class="id" title="var">propproperty</span>. <span class="id" title="tactic">intros</span> <span class="id" title="var">T1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">use</span> (<span class="id" title="var">squash_to_prop</span> <span class="id" title="var">H2</span>). <span class="id" title="tactic">apply</span> <span class="id" title="var">propproperty</span>. <span class="id" title="tactic">intros</span> <span class="id" title="var">T2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">eqrelsymm</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">use</span> <span class="id" title="var">eqreltrans</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;++ <span class="id" title="tactic">exact</span> <span class="id" title="var">R3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;++ <span class="id" title="tactic">exact</span> <span class="id" title="var">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;++ <span class="id" title="tactic">exact</span> <span class="id" title="var">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-- <span class="id" title="tactic">intros</span> <span class="id" title="var">R3</span> <span class="id" title="var">R4</span> <span class="id" title="var">H1</span> <span class="id" title="var">H2</span>. <span class="id" title="var">cbn</span> <span class="id" title="keyword">beta</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H1</span>, <span class="id" title="var">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">eqrelsymm</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">use</span> <span class="id" title="var">eqreltrans</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;++ <span class="id" title="tactic">exact</span> (<span class="id" title="var">roof_comp</span> <span class="id" title="var">R1</span> <span class="id" title="var">R2</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;++ <span class="id" title="tactic">exact</span> <span class="id" title="var">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;++ <span class="id" title="tactic">exact</span> <span class="id" title="var">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">cbn</span>. <span class="id" title="tactic">intros</span> <span class="id" title="var">R3</span> <span class="id" title="var">R3'</span> <span class="id" title="var">R4</span> <span class="id" title="var">R4'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">tmp1</span> := <span class="id" title="var">eqax2</span> <span class="id" title="var">e1eq</span> <span class="id" title="var">R1</span> <span class="id" title="var">R3</span> <span class="id" title="var">R1'</span> <span class="id" title="var">R3'</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">tmp2</span> := <span class="id" title="var">eqax2</span> <span class="id" title="var">e2eq</span> <span class="id" title="var">R2</span> <span class="id" title="var">R4</span> <span class="id" title="var">R2'</span> <span class="id" title="var">R4'</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">tmp_pre</span> := <span class="id" title="var">roof_pre_comp</span> <span class="id" title="var">R1</span> <span class="id" title="var">R3</span> <span class="id" title="var">tmp1</span> <span class="id" title="var">R4</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">tmp_post</span> := <span class="id" title="var">roof_post_comp</span> <span class="id" title="var">R1</span> <span class="id" title="var">R2</span> <span class="id" title="var">R4</span> <span class="id" title="var">tmp2</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">X</span> : (<span class="id" title="var">eqrelpair</span> (<span class="id" title="var">RoofHrel</span> <span class="id" title="var">x</span> <span class="id" title="var">z</span>) (<span class="id" title="var">RoofEqrel</span> <span class="id" title="var">x</span> <span class="id" title="var">z</span>)) (<span class="id" title="var">roof_comp</span> <span class="id" title="var">R3</span> <span class="id" title="var">R4</span>) (<span class="id" title="var">roof_comp</span> <span class="id" title="var">R1</span> <span class="id" title="var">R2</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">eqrelsymm</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">use</span> <span class="id" title="var">eqreltrans</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">exact</span> (<span class="id" title="var">roof_comp</span> <span class="id" title="var">R1</span> <span class="id" title="var">R4</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">exact</span> <span class="id" title="var">tmp_post</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">exact</span> <span class="id" title="var">tmp_pre</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exact</span> <span class="id" title="var">X</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">t</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">use</span> <span class="id" title="var">total2_paths_f</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">use</span> <span class="id" title="var">RoofEqclassEq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">intros</span> <span class="id" title="var">R</span> <span class="id" title="var">HR</span>. <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">tmp1</span> := <span class="id" title="var">eqax2</span> (<span class="id" title="var">pr2</span> (<span class="id" title="var">pr1</span> <span class="id" title="var">t</span>))). <span class="id" title="tactic">apply</span> <span class="id" title="var">tmp1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-- <span class="id" title="tactic">exact</span> <span class="id" title="var">HR</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-- <span class="id" title="tactic">apply</span> (<span class="id" title="var">pr2</span> <span class="id" title="var">t</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;++ <span class="id" title="var">cbn</span>. <span class="id" title="tactic">exact</span> <span class="id" title="var">R1'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;++ <span class="id" title="var">cbn</span>. <span class="id" title="tactic">exact</span> <span class="id" title="var">R2'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">intros</span> <span class="id" title="var">R</span> <span class="id" title="var">HR</span>. <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">HR</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">tmp1</span> := <span class="id" title="var">eqax1</span> (<span class="id" title="var">pr2</span> (<span class="id" title="var">pr1</span> <span class="id" title="var">t</span>))). <span class="id" title="tactic">apply</span> (<span class="id" title="var">tmp1</span> (<span class="id" title="var">roof_comp</span> <span class="id" title="var">R1</span> <span class="id" title="var">R2</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-- <span class="id" title="tactic">apply</span> <span class="id" title="var">eqrelsymm</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">HR</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-- <span class="id" title="tactic">apply</span> (<span class="id" title="var">pr2</span> <span class="id" title="var">t</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;++ <span class="id" title="var">cbn</span>. <span class="id" title="tactic">exact</span> <span class="id" title="var">R1'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;++ <span class="id" title="var">cbn</span>. <span class="id" title="tactic">exact</span> <span class="id" title="var">R2'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <span class="id" title="var">proofirrelevance</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">impred_isaprop</span>. <span class="id" title="tactic">intros</span> <span class="id" title="var">t0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">impred_isaprop</span>. <span class="id" title="tactic">intros</span> <span class="id" title="var">t1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">impred_isaprop</span>. <span class="id" title="tactic">intros</span> <span class="id" title="var">t2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">impred_isaprop</span>. <span class="id" title="tactic">intros</span> <span class="id" title="var">t3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">impred_isaprop</span>. <span class="id" title="tactic">intros</span> <span class="id" title="var">t4</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">impred_isaprop</span>. <span class="id" title="tactic">intros</span> <span class="id" title="var">t5</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">propproperty</span>.<br/>
</div>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Local</span> <span class="id" title="keyword">Lemma</span> <span class="id" title="var">roof_comp_iscontr_in</span> (<span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">z</span> : <span class="id" title="var">ob</span> <span class="id" title="var">C</span>) (<span class="id" title="var">R1</span> : <span class="id" title="var">Roof</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>) (<span class="id" title="var">R2</span> : <span class="id" title="var">Roof</span> <span class="id" title="var">y</span> <span class="id" title="var">z</span>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">RoofEqclassIn</span> (<span class="id" title="var">pr1</span> (<span class="id" title="var">pr1</span> (<span class="id" title="var">roof_comp_iscontr</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> (<span class="id" title="var">RoofEqclassFromRoof</span> <span class="id" title="var">R1</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">RoofEqclassFromRoof</span> <span class="id" title="var">R2</span>))))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">roof_comp</span> <span class="id" title="var">R1</span> <span class="id" title="var">R2</span>).<br/>
&nbsp;&nbsp;<a class="proof" href="#">Show proof.</a><br/><div class="proof">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">use</span> (<span class="id" title="var">pr2</span> (<span class="id" title="var">pr1</span> (<span class="id" title="var">roof_comp_iscontr</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">z</span> (<span class="id" title="var">RoofEqclassFromRoof</span> <span class="id" title="var">R1</span>) (<span class="id" title="var">RoofEqclassFromRoof</span> <span class="id" title="var">R2</span>)))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <span class="id" title="var">RoofEqclassFromRoofIn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <span class="id" title="var">RoofEqclassFromRoofIn</span>.<br/>
</div>

<br/>
</div>

<div class="doc">
<a name="lab1247"></a><h2 class="section">Definition of the localization</h2>

</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <span class="id" title="var">loc_precategory_ob_mor</span> : <span class="id" title="var">precategory_ob_mor</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">tpair</span> (<span class="id" title="var">λ</span> <span class="id" title="var">ob</span> : <span class="id" title="var">UU</span>, <span class="id" title="var">ob</span> -&gt; <span class="id" title="var">ob</span> -&gt; <span class="id" title="var">UU</span>) (<span class="id" title="var">ob</span> <span class="id" title="var">C</span>) (<span class="id" title="var">λ</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">ob</span> <span class="id" title="var">C</span>, <span class="id" title="var">RoofEqclass</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <span class="id" title="var">IdRoof</span> (<span class="id" title="var">x</span> : <span class="id" title="var">ob</span> <span class="id" title="var">C</span>) : <span class="id" title="var">Roof</span> <span class="id" title="var">x</span> <span class="id" title="var">x</span>.<br/>
&nbsp;&nbsp;<a class="proof" href="#">Show proof.</a><br/><div class="proof">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">use</span> <span class="id" title="var">mk_Roof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">exact</span> <span class="id" title="var">x</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">exact</span> (<span class="id" title="var">identity</span> <span class="id" title="var">x</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">exact</span> (<span class="id" title="var">identity</span> <span class="id" title="var">x</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">exact</span> (<span class="id" title="var">isLocClassIs</span> <span class="id" title="var">iLC</span> <span class="id" title="var">x</span>).<br/>
</div>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">IdRoofEqrel_left</span> {<span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">ob</span> <span class="id" title="var">C</span>} (<span class="id" title="var">R1</span> : <span class="id" title="var">Roof</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">eqrelpair</span> (<span class="id" title="var">RoofHrel</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>) (<span class="id" title="var">RoofEqrel</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>)) <span class="id" title="var">R1</span> (<span class="id" title="var">roof_comp</span> (<span class="id" title="var">IdRoof</span> <span class="id" title="var">x</span>) <span class="id" title="var">R1</span>).<br/>
&nbsp;&nbsp;<a class="proof" href="#">Show proof.</a><br/><div class="proof">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">comp</span> := <span class="id" title="var">roof_comp</span> (<span class="id" title="var">IdRoof</span> <span class="id" title="var">x</span>) <span class="id" title="var">R1</span>). <span class="id" title="tactic">unfold</span> <span class="id" title="var">roof_comp</span> <span class="id" title="tactic">in</span> <span class="id" title="var">comp</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">sqr</span> := <span class="id" title="var">isLocClassSqr2</span> <span class="id" title="var">iLC</span> <span class="id" title="var">R1</span> (<span class="id" title="var">IdRoof</span> <span class="id" title="var">x</span>) <span class="id" title="var">x</span> (<span class="id" title="var">RoofMor1</span> <span class="id" title="var">R1</span>) (<span class="id" title="var">RoofMor1Is</span> <span class="id" title="var">R1</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">RoofMor2</span> (<span class="id" title="var">IdRoof</span> <span class="id" title="var">x</span>))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">fold</span> <span class="id" title="var">sqr</span> <span class="id" title="tactic">in</span> <span class="id" title="var">comp</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">eqrelsymm</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">P</span> <span class="id" title="var">X</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">X</span>. <span class="id" title="tactic">clear</span> <span class="id" title="var">X</span> <span class="id" title="var">P</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">use</span> <span class="id" title="var">mk_RoofTop</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">exact</span> <span class="id" title="var">comp</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">exact</span> (<span class="id" title="var">identity</span> <span class="id" title="var">comp</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">exact</span> (<span class="id" title="var">LocSqr2Mor1</span> <span class="id" title="var">sqr</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">use</span> (<span class="id" title="var">isLocClassComp</span> <span class="id" title="var">iLC</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> (<span class="id" title="var">isLocClassIs</span> <span class="id" title="var">iLC</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> (<span class="id" title="var">RoofMor1Is</span> <span class="id" title="var">comp</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> <span class="id" title="var">id_left</span>. <span class="id" title="var">cbn</span>. <span class="id" title="tactic">apply</span> (! (<span class="id" title="var">LocSqr2Comm</span> <span class="id" title="var">sqr</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">cbn</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">id_left</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">idpath</span>.<br/>
</div>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">IdRoofEqrel_right</span> {<span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">ob</span> <span class="id" title="var">C</span>} (<span class="id" title="var">R1</span> : <span class="id" title="var">Roof</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">eqrelpair</span> (<span class="id" title="var">RoofHrel</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>) (<span class="id" title="var">RoofEqrel</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>)) <span class="id" title="var">R1</span> (<span class="id" title="var">roof_comp</span> <span class="id" title="var">R1</span> (<span class="id" title="var">IdRoof</span> <span class="id" title="var">y</span>)).<br/>
&nbsp;&nbsp;<a class="proof" href="#">Show proof.</a><br/><div class="proof">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">comp</span> := <span class="id" title="var">roof_comp</span> <span class="id" title="var">R1</span> (<span class="id" title="var">IdRoof</span> <span class="id" title="var">y</span>)). <span class="id" title="tactic">unfold</span> <span class="id" title="var">roof_comp</span> <span class="id" title="tactic">in</span> <span class="id" title="var">comp</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">sqr</span> := <span class="id" title="var">isLocClassSqr2</span> <span class="id" title="var">iLC</span> (<span class="id" title="var">IdRoof</span> <span class="id" title="var">y</span>) <span class="id" title="var">R1</span> <span class="id" title="var">y</span> (<span class="id" title="var">RoofMor1</span> (<span class="id" title="var">IdRoof</span> <span class="id" title="var">y</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">RoofMor1Is</span> (<span class="id" title="var">IdRoof</span> <span class="id" title="var">y</span>)) (<span class="id" title="var">RoofMor2</span> <span class="id" title="var">R1</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">fold</span> <span class="id" title="var">sqr</span> <span class="id" title="tactic">in</span> <span class="id" title="var">comp</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">eqrelsymm</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">P</span> <span class="id" title="var">X</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">X</span>. <span class="id" title="tactic">clear</span> <span class="id" title="var">X</span> <span class="id" title="var">P</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">use</span> <span class="id" title="var">mk_RoofTop</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">exact</span> <span class="id" title="var">comp</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">exact</span> (<span class="id" title="var">identity</span> <span class="id" title="var">comp</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">exact</span> (<span class="id" title="var">LocSqr2Mor2</span> <span class="id" title="var">sqr</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">use</span> (<span class="id" title="var">isLocClassComp</span> <span class="id" title="var">iLC</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> (<span class="id" title="var">isLocClassIs</span> <span class="id" title="var">iLC</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> (<span class="id" title="var">RoofMor1Is</span> <span class="id" title="var">comp</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> <span class="id" title="var">id_left</span>. <span class="id" title="var">cbn</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">idpath</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> <span class="id" title="var">id_left</span>. <span class="id" title="var">cbn</span>. <span class="id" title="tactic">apply</span> (<span class="id" title="var">LocSqr2Comm</span> <span class="id" title="var">sqr</span>).<br/>
</div>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <span class="id" title="var">IdRoofEqclass</span> (<span class="id" title="var">x</span> : <span class="id" title="var">ob</span> <span class="id" title="var">C</span>) : <span class="id" title="var">RoofEqclass</span> <span class="id" title="var">x</span> <span class="id" title="var">x</span>.<br/>
&nbsp;&nbsp;<a class="proof" href="#">Show proof.</a><br/><div class="proof">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exact</span> (<span class="id" title="var">RoofEqclassFromRoof</span> (<span class="id" title="var">mk_Roof</span> <span class="id" title="var">x</span> <span class="id" title="var">x</span> <span class="id" title="var">x</span> (<span class="id" title="var">identity</span> <span class="id" title="var">x</span>) (<span class="id" title="var">identity</span> <span class="id" title="var">x</span>) (<span class="id" title="var">isLocClassIs</span> <span class="id" title="var">iLC</span> <span class="id" title="var">x</span>))).<br/>
</div>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <span class="id" title="var">loc_precategory_data</span> : <span class="id" title="var">precategory_data</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">precategory_data_pair</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">loc_precategory_ob_mor</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">λ</span> (<span class="id" title="var">x</span> : <span class="id" title="var">ob</span> <span class="id" title="var">C</span>), <span class="id" title="var">IdRoofEqclass</span> <span class="id" title="var">x</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">fun</span> (<span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">z</span> : <span class="id" title="var">ob</span> <span class="id" title="var">C</span>) (<span class="id" title="var">f</span> : <span class="id" title="var">RoofEqclass</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>) (<span class="id" title="var">g</span> : <span class="id" title="var">RoofEqclass</span> <span class="id" title="var">y</span> <span class="id" title="var">z</span>) =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">pr1</span> (<span class="id" title="var">pr1</span> (<span class="id" title="var">roof_comp_iscontr</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">z</span> <span class="id" title="var">f</span> <span class="id" title="var">g</span>))).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">loc_id_left_in</span> {<span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">loc_precategory_data</span>} (<span class="id" title="var">f</span> : <span class="id" title="var">loc_precategory_data</span>⟦<span class="id" title="var">x</span>, <span class="id" title="var">y</span>⟧)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">R1</span> : <span class="id" title="var">Roof</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>) (<span class="id" title="var">H1</span> : <span class="id" title="var">RoofEqclassIn</span> <span class="id" title="var">f</span> <span class="id" title="var">R1</span>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">pr1</span> (<span class="id" title="var">identity</span> <span class="id" title="var">x</span> · <span class="id" title="var">f</span>) (<span class="id" title="var">roof_comp</span> (<span class="id" title="var">IdRoof</span> <span class="id" title="var">x</span>) <span class="id" title="var">R1</span>).<br/>
&nbsp;&nbsp;<a class="proof" href="#">Show proof.</a><br/><div class="proof">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">pr2</span> (<span class="id" title="var">pr1</span> (<span class="id" title="var">roof_comp_iscontr</span> <span class="id" title="var">x</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> (<span class="id" title="var">IdRoofEqclass</span> <span class="id" title="var">x</span>) <span class="id" title="var">f</span>))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <span class="id" title="var">RoofEqclassFromRoofIn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <span class="id" title="var">H1</span>.<br/>
</div>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Local</span> <span class="id" title="keyword">Lemma</span> <span class="id" title="var">loc_id_left</span> {<span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">loc_precategory_data</span>} (<span class="id" title="var">f</span> : <span class="id" title="var">loc_precategory_data</span>⟦<span class="id" title="var">x</span>, <span class="id" title="var">y</span>⟧) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">identity</span> <span class="id" title="var">x</span> · <span class="id" title="var">f</span> = <span class="id" title="var">f</span>.<br/>
&nbsp;&nbsp;<a class="proof" href="#">Show proof.</a><br/><div class="proof">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">use</span> (<span class="id" title="var">squash_to_prop</span> (<span class="id" title="var">pr1</span> (<span class="id" title="var">RoofEqclassIs</span> <span class="id" title="var">f</span>))). <span class="id" title="tactic">apply</span> <span class="id" title="var">isasetRoofEqclass</span>. <span class="id" title="tactic">intros</span> <span class="id" title="var">f'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">f'</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">f1</span> <span class="id" title="var">f2</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">use</span> <span class="id" title="var">RoofEqclassEq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">R</span> <span class="id" title="var">HR</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">tmp</span> := <span class="id" title="var">IdRoofEqrel_left</span> <span class="id" title="var">R</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">e1</span> := <span class="id" title="var">eqax1</span> (<span class="id" title="var">RoofEqclassIs</span> (<span class="id" title="var">identity</span> <span class="id" title="var">x</span> · <span class="id" title="var">f</span>)) <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">tmp</span> <span class="id" title="var">HR</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">X</span> : <span class="id" title="var">RoofEqclassIn</span> (<span class="id" title="var">identity</span> <span class="id" title="var">x</span> · <span class="id" title="var">f</span>) (<span class="id" title="var">roof_comp</span> (<span class="id" title="var">IdRoof</span> <span class="id" title="var">x</span>) <span class="id" title="var">f1</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">pr2</span> (<span class="id" title="var">pr1</span> (<span class="id" title="var">roof_comp_iscontr</span> <span class="id" title="var">x</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> (<span class="id" title="var">IdRoofEqclass</span> <span class="id" title="var">x</span>) <span class="id" title="var">f</span>)) (<span class="id" title="var">IdRoof</span> <span class="id" title="var">x</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <span class="id" title="var">RoofEqclassFromRoofIn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <span class="id" title="var">f2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">e2</span> := <span class="id" title="var">eqax2</span> (<span class="id" title="var">RoofEqclassIs</span> (<span class="id" title="var">identity</span> <span class="id" title="var">x</span> · <span class="id" title="var">f</span>)) <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">e1</span> <span class="id" title="var">X</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">e3</span> := <span class="id" title="var">IdRoofEqrel_left</span> <span class="id" title="var">R</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">use</span> (<span class="id" title="var">eqax1</span> (<span class="id" title="var">RoofEqclassIs</span> <span class="id" title="var">f</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">exact</span> (<span class="id" title="var">roof_comp</span> (<span class="id" title="var">IdRoof</span> <span class="id" title="var">x</span>) <span class="id" title="var">f1</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">use</span> <span class="id" title="var">eqreltrans</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">exact</span> (<span class="id" title="var">roof_comp</span> (<span class="id" title="var">IdRoof</span> <span class="id" title="var">x</span>) <span class="id" title="var">R</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">apply</span> <span class="id" title="var">eqrelsymm</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">e2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">apply</span> <span class="id" title="var">eqrelsymm</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">e3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">set</span> (<span class="id" title="var">e4</span> := <span class="id" title="var">IdRoofEqrel_left</span> <span class="id" title="var">f1</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">use</span> (<span class="id" title="var">eqax1</span> (<span class="id" title="var">RoofEqclassIs</span> <span class="id" title="var">f</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-- <span class="id" title="tactic">exact</span> <span class="id" title="var">f1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-- <span class="id" title="tactic">exact</span> <span class="id" title="var">e4</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-- <span class="id" title="tactic">exact</span> <span class="id" title="var">f2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">R</span> <span class="id" title="var">HR</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">tmp</span> := <span class="id" title="var">IdRoofEqrel_left</span> <span class="id" title="var">R</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">use</span> (<span class="id" title="var">eqax1</span> (<span class="id" title="var">RoofEqclassIs</span> (<span class="id" title="var">identity</span> <span class="id" title="var">x</span> · <span class="id" title="var">f</span>))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">exact</span> (<span class="id" title="var">roof_comp</span> (<span class="id" title="var">IdRoof</span> <span class="id" title="var">x</span>) <span class="id" title="var">R</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <span class="id" title="var">eqrelsymm</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">tmp</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> (<span class="id" title="var">pr2</span> (<span class="id" title="var">pr1</span> (<span class="id" title="var">roof_comp_iscontr</span> <span class="id" title="var">x</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> (<span class="id" title="var">IdRoofEqclass</span> <span class="id" title="var">x</span>) <span class="id" title="var">f</span>))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">apply</span> <span class="id" title="var">RoofEqclassFromRoofIn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">apply</span> <span class="id" title="var">HR</span>.<br/>
</div>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Local</span> <span class="id" title="keyword">Lemma</span> <span class="id" title="var">loc_id_right</span> {<span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">loc_precategory_data</span>} (<span class="id" title="var">f</span> : <span class="id" title="var">loc_precategory_data</span>⟦<span class="id" title="var">x</span>, <span class="id" title="var">y</span>⟧) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">f</span> · <span class="id" title="var">identity</span> <span class="id" title="var">y</span> = <span class="id" title="var">f</span>.<br/>
&nbsp;&nbsp;<a class="proof" href="#">Show proof.</a><br/><div class="proof">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">use</span> (<span class="id" title="var">squash_to_prop</span> (<span class="id" title="var">pr1</span> (<span class="id" title="var">RoofEqclassIs</span> <span class="id" title="var">f</span>))). <span class="id" title="tactic">apply</span> <span class="id" title="var">isasetRoofEqclass</span>. <span class="id" title="tactic">intros</span> <span class="id" title="var">f'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">f'</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">f1</span> <span class="id" title="var">f2</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">use</span> <span class="id" title="var">RoofEqclassEq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">R</span> <span class="id" title="var">HR</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">tmp</span> := <span class="id" title="var">IdRoofEqrel_right</span> <span class="id" title="var">R</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">e1</span> := <span class="id" title="var">eqax1</span> (<span class="id" title="var">RoofEqclassIs</span> (<span class="id" title="var">f</span> · <span class="id" title="var">identity</span> <span class="id" title="var">y</span>)) <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">tmp</span> <span class="id" title="var">HR</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">X</span> : <span class="id" title="var">RoofEqclassIn</span> (<span class="id" title="var">f</span> · <span class="id" title="var">identity</span> <span class="id" title="var">y</span>) (<span class="id" title="var">roof_comp</span> <span class="id" title="var">f1</span> (<span class="id" title="var">IdRoof</span> <span class="id" title="var">y</span>))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">pr2</span> (<span class="id" title="var">pr1</span> (<span class="id" title="var">roof_comp_iscontr</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">y</span> <span class="id" title="var">f</span> (<span class="id" title="var">IdRoofEqclass</span> <span class="id" title="var">y</span>)))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <span class="id" title="var">f2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <span class="id" title="var">RoofEqclassFromRoofIn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">e2</span> := <span class="id" title="var">eqax2</span> (<span class="id" title="var">RoofEqclassIs</span> (<span class="id" title="var">f</span> · <span class="id" title="var">identity</span> <span class="id" title="var">y</span>)) <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">e1</span> <span class="id" title="var">X</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">use</span> (<span class="id" title="var">eqax1</span> (<span class="id" title="var">RoofEqclassIs</span> <span class="id" title="var">f</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">exact</span> (<span class="id" title="var">roof_comp</span> <span class="id" title="var">f1</span> (<span class="id" title="var">IdRoof</span> <span class="id" title="var">y</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">use</span> <span class="id" title="var">eqreltrans</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">exact</span> (<span class="id" title="var">roof_comp</span> <span class="id" title="var">R</span> (<span class="id" title="var">IdRoof</span> <span class="id" title="var">y</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">apply</span> <span class="id" title="var">eqrelsymm</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">e2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">apply</span> <span class="id" title="var">eqrelsymm</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">tmp</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">set</span> (<span class="id" title="var">e4</span> := <span class="id" title="var">IdRoofEqrel_right</span> <span class="id" title="var">f1</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">use</span> (<span class="id" title="var">eqax1</span> (<span class="id" title="var">RoofEqclassIs</span> <span class="id" title="var">f</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-- <span class="id" title="tactic">exact</span> <span class="id" title="var">f1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-- <span class="id" title="tactic">exact</span> <span class="id" title="var">e4</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-- <span class="id" title="tactic">exact</span> <span class="id" title="var">f2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">R</span> <span class="id" title="var">HR</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">tmp</span> := <span class="id" title="var">IdRoofEqrel_right</span> <span class="id" title="var">R</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">use</span> (<span class="id" title="var">eqax1</span> (<span class="id" title="var">RoofEqclassIs</span> (<span class="id" title="var">f</span> · <span class="id" title="var">identity</span> <span class="id" title="var">y</span>))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">exact</span> (<span class="id" title="var">roof_comp</span> <span class="id" title="var">R</span> (<span class="id" title="var">IdRoof</span> <span class="id" title="var">y</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <span class="id" title="var">eqrelsymm</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">tmp</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> (<span class="id" title="var">pr2</span> (<span class="id" title="var">pr1</span> (<span class="id" title="var">roof_comp_iscontr</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">y</span> <span class="id" title="var">f</span> (<span class="id" title="var">IdRoofEqclass</span> <span class="id" title="var">y</span>)))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">apply</span> <span class="id" title="var">HR</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">apply</span> <span class="id" title="var">RoofEqclassFromRoofIn</span>.<br/>
</div>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Local</span> <span class="id" title="keyword">Definition</span> <span class="id" title="var">loc_precategory_assoc_Roof</span> (<span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">z</span> <span class="id" title="var">w</span> : <span class="id" title="var">loc_precategory_data</span>) (<span class="id" title="var">R1</span> : <span class="id" title="var">Roof</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">R2</span> : <span class="id" title="var">Roof</span> <span class="id" title="var">y</span> <span class="id" title="var">z</span>) (<span class="id" title="var">R3</span> : <span class="id" title="var">Roof</span> <span class="id" title="var">z</span> <span class="id" title="var">w</span>) : <span class="id" title="var">Roof</span> <span class="id" title="var">x</span> <span class="id" title="var">w</span>.<br/>
&nbsp;&nbsp;<a class="proof" href="#">Show proof.</a><br/><div class="proof">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">sqr1</span> := <span class="id" title="var">isLocClassSqr2</span> <span class="id" title="var">iLC</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> (<span class="id" title="var">RoofMor1</span> <span class="id" title="var">R2</span>) (<span class="id" title="var">RoofMor1Is</span> <span class="id" title="var">R2</span>) (<span class="id" title="var">RoofMor2</span> <span class="id" title="var">R1</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">sqr2</span> := <span class="id" title="var">isLocClassSqr2</span> <span class="id" title="var">iLC</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> (<span class="id" title="var">RoofMor1</span> <span class="id" title="var">R3</span>) (<span class="id" title="var">RoofMor1Is</span> <span class="id" title="var">R3</span>) (<span class="id" title="var">RoofMor2</span> <span class="id" title="var">R2</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">sqr3</span> := <span class="id" title="var">isLocClassSqr2</span> <span class="id" title="var">iLC</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> (<span class="id" title="var">LocSqr2Mor2</span> <span class="id" title="var">sqr2</span>) (<span class="id" title="var">LocSqr2Mor2Is</span> <span class="id" title="var">sqr2</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">LocSqr2Mor1</span> <span class="id" title="var">sqr1</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">use</span> <span class="id" title="var">mk_Roof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">exact</span> <span class="id" title="var">sqr3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">exact</span> (<span class="id" title="var">LocSqr2Mor2</span> <span class="id" title="var">sqr3</span> · <span class="id" title="var">LocSqr2Mor2</span> <span class="id" title="var">sqr1</span> · <span class="id" title="var">RoofMor1</span> <span class="id" title="var">R1</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">exact</span> (<span class="id" title="var">LocSqr2Mor1</span> <span class="id" title="var">sqr3</span> · <span class="id" title="var">LocSqr2Mor1</span> <span class="id" title="var">sqr2</span> · <span class="id" title="var">RoofMor2</span> <span class="id" title="var">R3</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">use</span> (<span class="id" title="var">isLocClassComp</span> <span class="id" title="var">iLC</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">use</span> (<span class="id" title="var">isLocClassComp</span> <span class="id" title="var">iLC</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">exact</span> (<span class="id" title="var">LocSqr2Mor2Is</span> <span class="id" title="var">sqr3</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">exact</span> (<span class="id" title="var">LocSqr2Mor2Is</span> <span class="id" title="var">sqr1</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">exact</span> (<span class="id" title="var">RoofMor1Is</span> <span class="id" title="var">R1</span>).<br/>
</div>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Local</span> <span class="id" title="keyword">Lemma</span> <span class="id" title="var">loc_precategory_assoc_eqrel1</span> {<span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">z</span> <span class="id" title="var">w</span> : <span class="id" title="var">loc_precategory_data</span>} (<span class="id" title="var">R1</span> : <span class="id" title="var">Roof</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">R2</span> : <span class="id" title="var">Roof</span> <span class="id" title="var">y</span> <span class="id" title="var">z</span>) (<span class="id" title="var">R3</span> : <span class="id" title="var">Roof</span> <span class="id" title="var">z</span> <span class="id" title="var">w</span>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">eqrelpair</span> (<span class="id" title="var">RoofHrel</span> <span class="id" title="var">x</span> <span class="id" title="var">w</span>) (<span class="id" title="var">RoofEqrel</span> <span class="id" title="var">x</span> <span class="id" title="var">w</span>)) (<span class="id" title="var">roof_comp</span> (<span class="id" title="var">roof_comp</span> <span class="id" title="var">R1</span> <span class="id" title="var">R2</span>) <span class="id" title="var">R3</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">loc_precategory_assoc_Roof</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">z</span> <span class="id" title="var">w</span> <span class="id" title="var">R1</span> <span class="id" title="var">R2</span> <span class="id" title="var">R3</span>).<br/>
&nbsp;&nbsp;<a class="proof" href="#">Show proof.</a><br/><div class="proof">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">R4</span> := <span class="id" title="var">roof_comp</span> <span class="id" title="var">R1</span> <span class="id" title="var">R2</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">R5</span> := <span class="id" title="var">roof_comp</span> <span class="id" title="var">R2</span> <span class="id" title="var">R3</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">R6</span> := <span class="id" title="var">loc_precategory_assoc_Roof</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">z</span> <span class="id" title="var">w</span> <span class="id" title="var">R1</span> <span class="id" title="var">R2</span> <span class="id" title="var">R3</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">R6'</span> := <span class="id" title="var">roof_comp</span> <span class="id" title="var">R4</span> <span class="id" title="var">R3</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">CR</span> := <span class="id" title="var">RoofToCoroof</span> <span class="id" title="var">R3</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">sqrop</span> := <span class="id" title="var">isLocClassSqr1</span> <span class="id" title="var">iLC</span> <span class="id" title="var">R3</span> <span class="id" title="var">z</span> <span class="id" title="var">w</span> (<span class="id" title="var">RoofMor1</span> <span class="id" title="var">R3</span>) (<span class="id" title="var">RoofMor1Is</span> <span class="id" title="var">R3</span>) (<span class="id" title="var">RoofMor2</span> <span class="id" title="var">R3</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">sqr1</span> := <span class="id" title="var">isLocClassSqr2</span> <span class="id" title="var">iLC</span> <span class="id" title="var">R2</span> <span class="id" title="var">R1</span> <span class="id" title="var">y</span> (<span class="id" title="var">RoofMor1</span> <span class="id" title="var">R2</span>) (<span class="id" title="var">RoofMor1Is</span> <span class="id" title="var">R2</span>) (<span class="id" title="var">RoofMor2</span> <span class="id" title="var">R1</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">sqr2</span> := <span class="id" title="var">isLocClassSqr2</span> <span class="id" title="var">iLC</span> <span class="id" title="var">R3</span> <span class="id" title="var">R2</span> <span class="id" title="var">z</span> (<span class="id" title="var">RoofMor1</span> <span class="id" title="var">R3</span>) (<span class="id" title="var">RoofMor1Is</span> <span class="id" title="var">R3</span>) (<span class="id" title="var">RoofMor2</span> <span class="id" title="var">R2</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">sqr3</span> := <span class="id" title="var">isLocClassSqr2</span> <span class="id" title="var">iLC</span> <span class="id" title="var">sqr2</span> <span class="id" title="var">sqr1</span> <span class="id" title="var">R2</span> (<span class="id" title="var">LocSqr2Mor2</span> <span class="id" title="var">sqr2</span>) (<span class="id" title="var">LocSqr2Mor2Is</span> <span class="id" title="var">sqr2</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">LocSqr2Mor1</span> <span class="id" title="var">sqr1</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">sqr4</span> := <span class="id" title="var">isLocClassSqr2</span> <span class="id" title="var">iLC</span> <span class="id" title="var">R3</span> <span class="id" title="var">sqr1</span> <span class="id" title="var">z</span> (<span class="id" title="var">RoofMor1</span> <span class="id" title="var">R3</span>) (<span class="id" title="var">RoofMor1Is</span> <span class="id" title="var">R3</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">LocSqr2Mor1</span> <span class="id" title="var">sqr1</span> · <span class="id" title="var">RoofMor2</span> <span class="id" title="var">R2</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">sqr</span> := <span class="id" title="var">isLocClassSqr2</span> <span class="id" title="var">iLC</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> (<span class="id" title="var">LocSqr2Mor2</span> <span class="id" title="var">sqr3</span>) (<span class="id" title="var">LocSqr2Mor2Is</span> <span class="id" title="var">sqr3</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">LocSqr2Mor2</span> <span class="id" title="var">sqr4</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">H</span> : <span class="id" title="var">LocSqr2Mor2</span> <span class="id" title="var">sqr</span> · <span class="id" title="var">RoofMor2</span> <span class="id" title="var">R6'</span> · <span class="id" title="var">CoroofMor2</span> <span class="id" title="var">CR</span> =<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">LocSqr2Mor1</span> <span class="id" title="var">sqr</span> · <span class="id" title="var">RoofMor2</span> <span class="id" title="var">R6</span> · <span class="id" title="var">CoroofMor2</span> <span class="id" title="var">CR</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cbn</span>. <span class="id" title="tactic">fold</span> <span class="id" title="var">sqrop</span>. <span class="id" title="tactic">fold</span> <span class="id" title="var">sqr1</span>. <span class="id" title="tactic">fold</span> <span class="id" title="var">sqr2</span>. <span class="id" title="tactic">fold</span> <span class="id" title="var">sqr3</span>. <span class="id" title="tactic">fold</span> <span class="id" title="var">sqr4</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">assoc</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">assoc</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">assoc</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">assoc</span>. <span class="id" title="tactic">rewrite</span> &lt;- (<span class="id" title="var">LocSqr1Comm</span> <span class="id" title="var">sqrop</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- (<span class="id" title="var">assoc</span> <span class="id" title="var">_</span> (<span class="id" title="var">RoofMor2</span> <span class="id" title="var">R3</span>)). <span class="id" title="tactic">rewrite</span> &lt;- (<span class="id" title="var">LocSqr1Comm</span> <span class="id" title="var">sqrop</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">assoc</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">assoc</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- (<span class="id" title="var">assoc</span> <span class="id" title="var">_</span> (<span class="id" title="var">LocSqr2Mor1</span> <span class="id" title="var">sqr4</span>)). <span class="id" title="tactic">rewrite</span> (<span class="id" title="var">LocSqr2Comm</span> <span class="id" title="var">sqr4</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">assoc</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">assoc</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- (<span class="id" title="var">assoc</span> <span class="id" title="var">_</span> (<span class="id" title="var">LocSqr2Mor1</span> <span class="id" title="var">sqr2</span>)). <span class="id" title="tactic">rewrite</span> (<span class="id" title="var">LocSqr2Comm</span> <span class="id" title="var">sqr2</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">assoc</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">cancel_postcomposition</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">cancel_postcomposition</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- (<span class="id" title="var">LocSqr2Comm</span> <span class="id" title="var">sqr</span>). <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">assoc</span>. <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">assoc</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">cancel_precomposition</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (! (<span class="id" title="var">LocSqr2Comm</span> <span class="id" title="var">sqr3</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">PostS</span> := <span class="id" title="var">isLocClassPost</span> <span class="id" title="var">iLC</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> (<span class="id" title="var">LocSqr2Mor2</span> <span class="id" title="var">sqr</span> · <span class="id" title="var">RoofMor2</span> <span class="id" title="var">R6'</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">LocSqr2Mor1</span> <span class="id" title="var">sqr</span> ·  <span class="id" title="var">RoofMor2</span> <span class="id" title="var">R6</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">CoroofMor2</span> <span class="id" title="var">CR</span>) (<span class="id" title="var">CoroofMor2Is</span> <span class="id" title="var">CR</span>) <span class="id" title="var">H</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">P</span> <span class="id" title="var">X</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">X</span>. <span class="id" title="tactic">clear</span> <span class="id" title="var">X</span> <span class="id" title="var">P</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">use</span> <span class="id" title="var">mk_RoofTop</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">exact</span> (<span class="id" title="var">PostS</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">exact</span> (<span class="id" title="var">PostSwitchMor</span> <span class="id" title="var">PostS</span> · <span class="id" title="var">LocSqr2Mor2</span> <span class="id" title="var">sqr</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">exact</span> (<span class="id" title="var">PostSwitchMor</span> <span class="id" title="var">PostS</span> · <span class="id" title="var">LocSqr2Mor1</span> <span class="id" title="var">sqr</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">use</span> (<span class="id" title="var">isLocClassComp</span> <span class="id" title="var">iLC</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">use</span> (<span class="id" title="var">isLocClassComp</span> <span class="id" title="var">iLC</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">exact</span> (<span class="id" title="var">PostSwitchMorIs</span> <span class="id" title="var">PostS</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">exact</span> (<span class="id" title="var">LocSqr2Mor2Is</span> <span class="id" title="var">sqr</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">exact</span> (<span class="id" title="var">RoofMor1Is</span> <span class="id" title="var">R6'</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">assoc</span>. <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">assoc</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">cancel_precomposition</span>. <span class="id" title="var">cbn</span>. <span class="id" title="tactic">fold</span> <span class="id" title="var">sqr1</span>. <span class="id" title="tactic">fold</span> <span class="id" title="var">sqr2</span>. <span class="id" title="tactic">fold</span> <span class="id" title="var">sqr3</span>. <span class="id" title="tactic">fold</span> <span class="id" title="var">sqr4</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">assoc</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">assoc</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">assoc</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">assoc</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">cancel_postcomposition</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">cancel_postcomposition</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exact</span> (! (<span class="id" title="var">LocSqr2Comm</span> <span class="id" title="var">sqr</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">assoc</span>. <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">assoc</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exact</span> (<span class="id" title="var">PostSwitchEq</span> <span class="id" title="var">PostS</span>).<br/>
</div>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Local</span> <span class="id" title="keyword">Lemma</span> <span class="id" title="var">loc_precategory_assoc_eqrel2</span> (<span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">z</span> <span class="id" title="var">w</span> : <span class="id" title="var">loc_precategory_data</span>) (<span class="id" title="var">R1</span> : <span class="id" title="var">Roof</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">R2</span> : <span class="id" title="var">Roof</span> <span class="id" title="var">y</span> <span class="id" title="var">z</span>) (<span class="id" title="var">R3</span> : <span class="id" title="var">Roof</span> <span class="id" title="var">z</span> <span class="id" title="var">w</span>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">eqrelpair</span> (<span class="id" title="var">RoofHrel</span> <span class="id" title="var">x</span> <span class="id" title="var">w</span>) (<span class="id" title="var">RoofEqrel</span> <span class="id" title="var">x</span> <span class="id" title="var">w</span>)) (<span class="id" title="var">roof_comp</span> <span class="id" title="var">R1</span> (<span class="id" title="var">roof_comp</span> <span class="id" title="var">R2</span> <span class="id" title="var">R3</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">loc_precategory_assoc_Roof</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">z</span> <span class="id" title="var">w</span> <span class="id" title="var">R1</span> <span class="id" title="var">R2</span> <span class="id" title="var">R3</span>).<br/>
&nbsp;&nbsp;<a class="proof" href="#">Show proof.</a><br/><div class="proof">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">R4</span> := <span class="id" title="var">roof_comp</span> <span class="id" title="var">R1</span> <span class="id" title="var">R2</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">R5</span> := <span class="id" title="var">roof_comp</span> <span class="id" title="var">R2</span> <span class="id" title="var">R3</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">R6</span> := <span class="id" title="var">loc_precategory_assoc_Roof</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">z</span> <span class="id" title="var">w</span> <span class="id" title="var">R1</span> <span class="id" title="var">R2</span> <span class="id" title="var">R3</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">R6'</span> := <span class="id" title="var">roof_comp</span> <span class="id" title="var">R1</span> <span class="id" title="var">R5</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">CR</span> := <span class="id" title="var">RoofToCoroof</span> <span class="id" title="var">R2</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">sqrop</span> := <span class="id" title="var">isLocClassSqr1</span> <span class="id" title="var">iLC</span> <span class="id" title="var">R2</span> <span class="id" title="var">y</span> <span class="id" title="var">z</span> (<span class="id" title="var">RoofMor1</span> <span class="id" title="var">R2</span>) (<span class="id" title="var">RoofMor1Is</span> <span class="id" title="var">R2</span>) (<span class="id" title="var">RoofMor2</span> <span class="id" title="var">R2</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">sqr1</span> := <span class="id" title="var">isLocClassSqr2</span> <span class="id" title="var">iLC</span> <span class="id" title="var">R2</span> <span class="id" title="var">R1</span> <span class="id" title="var">y</span> (<span class="id" title="var">RoofMor1</span> <span class="id" title="var">R2</span>) (<span class="id" title="var">RoofMor1Is</span> <span class="id" title="var">R2</span>) (<span class="id" title="var">RoofMor2</span> <span class="id" title="var">R1</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">sqr2</span> := <span class="id" title="var">isLocClassSqr2</span> <span class="id" title="var">iLC</span> <span class="id" title="var">R3</span> <span class="id" title="var">R2</span> <span class="id" title="var">z</span> (<span class="id" title="var">RoofMor1</span> <span class="id" title="var">R3</span>) (<span class="id" title="var">RoofMor1Is</span> <span class="id" title="var">R3</span>) (<span class="id" title="var">RoofMor2</span> <span class="id" title="var">R2</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">sqr3</span> := <span class="id" title="var">isLocClassSqr2</span> <span class="id" title="var">iLC</span> <span class="id" title="var">sqr2</span> <span class="id" title="var">sqr1</span> <span class="id" title="var">R2</span> (<span class="id" title="var">LocSqr2Mor2</span> <span class="id" title="var">sqr2</span>) (<span class="id" title="var">LocSqr2Mor2Is</span> <span class="id" title="var">sqr2</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">LocSqr2Mor1</span> <span class="id" title="var">sqr1</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">sqr4</span> := <span class="id" title="var">isLocClassSqr2</span> <span class="id" title="var">iLC</span> <span class="id" title="var">sqr2</span> <span class="id" title="var">R1</span> <span class="id" title="var">y</span> (<span class="id" title="var">LocSqr2Mor2</span> <span class="id" title="var">sqr2</span> · <span class="id" title="var">RoofMor1</span> <span class="id" title="var">R2</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">isLocClassComp</span> <span class="id" title="var">iLC</span> <span class="id" title="var">sqr2</span> <span class="id" title="var">R2</span> <span class="id" title="var">y</span> (<span class="id" title="var">LocSqr2Mor2</span> <span class="id" title="var">sqr2</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">LocSqr2Mor2Is</span> <span class="id" title="var">sqr2</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">RoofMor1</span> <span class="id" title="var">R2</span>) (<span class="id" title="var">RoofMor1Is</span> <span class="id" title="var">R2</span>)) (<span class="id" title="var">RoofMor2</span> <span class="id" title="var">R1</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">e0</span> : <span class="id" title="var">SOM</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> (<span class="id" title="var">LocSqr2Mor2</span> <span class="id" title="var">sqr3</span> · <span class="id" title="var">LocSqr2Mor2</span> <span class="id" title="var">sqr1</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">use</span> (<span class="id" title="var">isLocClassComp</span> <span class="id" title="var">iLC</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">exact</span> (<span class="id" title="var">LocSqr2Mor2Is</span> <span class="id" title="var">sqr3</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">exact</span> (<span class="id" title="var">LocSqr2Mor2Is</span> <span class="id" title="var">sqr1</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">sqr</span> := <span class="id" title="var">isLocClassSqr2</span> <span class="id" title="var">iLC</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> (<span class="id" title="var">LocSqr2Mor2</span> <span class="id" title="var">sqr3</span> · <span class="id" title="var">LocSqr2Mor2</span> <span class="id" title="var">sqr1</span>) <span class="id" title="var">e0</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">LocSqr2Mor2</span> <span class="id" title="var">sqr4</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">e</span> : <span class="id" title="var">SOM</span> <span class="id" title="var">R3</span> <span class="id" title="var">CR</span> (<span class="id" title="var">RoofMor1</span> <span class="id" title="var">R3</span> · <span class="id" title="var">CoroofMor2</span> <span class="id" title="var">CR</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">use</span> (<span class="id" title="var">isLocClassComp</span> <span class="id" title="var">iLC</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">exact</span> (<span class="id" title="var">RoofMor1Is</span> <span class="id" title="var">R3</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">exact</span> (<span class="id" title="var">CoroofMor2Is</span> <span class="id" title="var">CR</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">H</span> : <span class="id" title="var">LocSqr2Mor2</span> <span class="id" title="var">sqr</span> · <span class="id" title="var">LocSqr2Mor1</span> <span class="id" title="var">sqr4</span> · <span class="id" title="var">LocSqr2Mor1</span> <span class="id" title="var">sqr2</span> ·<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">RoofMor1</span> <span class="id" title="var">R3</span> · <span class="id" title="var">LocSqr1Mor2</span> <span class="id" title="var">sqrop</span>) =<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">LocSqr2Mor1</span> <span class="id" title="var">sqr</span> · <span class="id" title="var">LocSqr2Mor1</span> <span class="id" title="var">sqr3</span> · <span class="id" title="var">LocSqr2Mor1</span> <span class="id" title="var">sqr2</span> ·<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">RoofMor1</span> <span class="id" title="var">R3</span> · <span class="id" title="var">LocSqr1Mor2</span> <span class="id" title="var">sqrop</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">assoc</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">assoc</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- (<span class="id" title="var">assoc</span> <span class="id" title="var">_</span> (<span class="id" title="var">LocSqr2Mor1</span> <span class="id" title="var">sqr2</span>)). <span class="id" title="tactic">rewrite</span> (<span class="id" title="var">LocSqr2Comm</span> <span class="id" title="var">sqr2</span>). <span class="id" title="tactic">rewrite</span> <span class="id" title="var">assoc</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- (<span class="id" title="var">assoc</span> <span class="id" title="var">_</span> (<span class="id" title="var">LocSqr2Mor1</span> <span class="id" title="var">sqr2</span>)). <span class="id" title="tactic">rewrite</span> (<span class="id" title="var">LocSqr2Comm</span> <span class="id" title="var">sqr2</span>). <span class="id" title="tactic">rewrite</span> <span class="id" title="var">assoc</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">assoc</span>. <span class="id" title="tactic">rewrite</span> &lt;- (<span class="id" title="var">LocSqr1Comm</span> <span class="id" title="var">sqrop</span>). <span class="id" title="tactic">rewrite</span> <span class="id" title="var">assoc</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- (<span class="id" title="var">assoc</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> (<span class="id" title="var">LocSqr1Mor2</span> <span class="id" title="var">sqrop</span>)). <span class="id" title="tactic">rewrite</span> &lt;- (<span class="id" title="var">LocSqr1Comm</span> <span class="id" title="var">sqrop</span>). <span class="id" title="tactic">rewrite</span> <span class="id" title="var">assoc</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">cancel_postcomposition</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- (<span class="id" title="var">assoc</span> <span class="id" title="var">_</span> (<span class="id" title="var">LocSqr2Mor1</span> <span class="id" title="var">sqr3</span>)). <span class="id" title="tactic">rewrite</span> (<span class="id" title="var">LocSqr2Comm</span> <span class="id" title="var">sqr3</span>). <span class="id" title="tactic">rewrite</span> <span class="id" title="var">assoc</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">assoc</span>. <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">assoc</span>. <span class="id" title="tactic">rewrite</span> (<span class="id" title="var">LocSqr2Comm</span> <span class="id" title="var">sqr4</span>). <span class="id" title="tactic">rewrite</span> <span class="id" title="var">assoc</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- (<span class="id" title="var">LocSqr2Comm</span> <span class="id" title="var">sqr</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">assoc</span>. <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">assoc</span>. <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">assoc</span>. <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">assoc</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">cancel_precomposition</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">cancel_precomposition</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (! (<span class="id" title="var">LocSqr2Comm</span> <span class="id" title="var">sqr1</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">PostS</span> := <span class="id" title="var">isLocClassPost</span> <span class="id" title="var">iLC</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> (<span class="id" title="var">LocSqr2Mor2</span> <span class="id" title="var">sqr</span> · <span class="id" title="var">LocSqr2Mor1</span> <span class="id" title="var">sqr4</span> · <span class="id" title="var">LocSqr2Mor1</span> <span class="id" title="var">sqr2</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">LocSqr2Mor1</span> <span class="id" title="var">sqr</span> · <span class="id" title="var">LocSqr2Mor1</span> <span class="id" title="var">sqr3</span> · <span class="id" title="var">LocSqr2Mor1</span> <span class="id" title="var">sqr2</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">RoofMor1</span> <span class="id" title="var">R3</span> · <span class="id" title="var">CoroofMor2</span> <span class="id" title="var">CR</span>) <span class="id" title="var">e</span> <span class="id" title="var">H</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">P</span> <span class="id" title="var">X</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">X</span>. <span class="id" title="tactic">clear</span> <span class="id" title="var">X</span> <span class="id" title="var">P</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">use</span> <span class="id" title="var">mk_RoofTop</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">exact</span> <span class="id" title="var">PostS</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">exact</span> (<span class="id" title="var">PostSwitchMor</span> <span class="id" title="var">PostS</span> · <span class="id" title="var">LocSqr2Mor2</span> <span class="id" title="var">sqr</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">exact</span> (<span class="id" title="var">PostSwitchMor</span> <span class="id" title="var">PostS</span> · <span class="id" title="var">LocSqr2Mor1</span> <span class="id" title="var">sqr</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">use</span> (<span class="id" title="var">isLocClassComp</span> <span class="id" title="var">iLC</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">use</span> (<span class="id" title="var">isLocClassComp</span> <span class="id" title="var">iLC</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">exact</span> (<span class="id" title="var">PostSwitchMorIs</span> <span class="id" title="var">PostS</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">exact</span> (<span class="id" title="var">LocSqr2Mor2Is</span> <span class="id" title="var">sqr</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">exact</span> (<span class="id" title="var">RoofMor1Is</span> <span class="id" title="var">R6'</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">cbn</span>. <span class="id" title="tactic">fold</span> <span class="id" title="var">sqr1</span>. <span class="id" title="tactic">fold</span> <span class="id" title="var">sqr2</span>. <span class="id" title="tactic">fold</span> <span class="id" title="var">sqr3</span>. <span class="id" title="tactic">fold</span> <span class="id" title="var">sqr4</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">assoc</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">pathsinv0</span>. <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">assoc</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">cancel_precomposition</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">assoc</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">assoc</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">assoc</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">cancel_postcomposition</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">assoc</span>. <span class="id" title="tactic">apply</span> (<span class="id" title="var">LocSqr2Comm</span> <span class="id" title="var">sqr</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">cbn</span>. <span class="id" title="tactic">fold</span> <span class="id" title="var">sqr1</span>. <span class="id" title="tactic">fold</span> <span class="id" title="var">sqr2</span>. <span class="id" title="tactic">fold</span> <span class="id" title="var">sqr3</span>. <span class="id" title="tactic">fold</span> <span class="id" title="var">sqr4</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">assoc</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">assoc</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">assoc</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">assoc</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">cancel_postcomposition</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">tmp</span> := <span class="id" title="var">PostSwitchEq</span> <span class="id" title="var">PostS</span>). <span class="id" title="tactic">rewrite</span> <span class="id" title="var">assoc</span> <span class="id" title="tactic">in</span> <span class="id" title="var">tmp</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">assoc</span> <span class="id" title="tactic">in</span> <span class="id" title="var">tmp</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">assoc</span> <span class="id" title="tactic">in</span> <span class="id" title="var">tmp</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">assoc</span> <span class="id" title="tactic">in</span> <span class="id" title="var">tmp</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exact</span> <span class="id" title="var">tmp</span>.<br/>
</div>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Local</span> <span class="id" title="keyword">Lemma</span> <span class="id" title="var">loc_precategory_assoc_eqrel</span> (<span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">z</span> <span class="id" title="var">w</span> : <span class="id" title="var">loc_precategory_data</span>) (<span class="id" title="var">R1</span> : <span class="id" title="var">Roof</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">R2</span> : <span class="id" title="var">Roof</span> <span class="id" title="var">y</span> <span class="id" title="var">z</span>) (<span class="id" title="var">R3</span> : <span class="id" title="var">Roof</span> <span class="id" title="var">z</span> <span class="id" title="var">w</span>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">eqrelpair</span> (<span class="id" title="var">RoofHrel</span> <span class="id" title="var">x</span> <span class="id" title="var">w</span>) (<span class="id" title="var">RoofEqrel</span> <span class="id" title="var">x</span> <span class="id" title="var">w</span>)) (<span class="id" title="var">roof_comp</span> <span class="id" title="var">R1</span> (<span class="id" title="var">roof_comp</span> <span class="id" title="var">R2</span> <span class="id" title="var">R3</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">roof_comp</span> (<span class="id" title="var">roof_comp</span> <span class="id" title="var">R1</span> <span class="id" title="var">R2</span>) <span class="id" title="var">R3</span>).<br/>
&nbsp;&nbsp;<a class="proof" href="#">Show proof.</a><br/><div class="proof">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">use</span> <span class="id" title="var">eqreltrans</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">exact</span> (<span class="id" title="var">loc_precategory_assoc_Roof</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">z</span> <span class="id" title="var">w</span> <span class="id" title="var">R1</span> <span class="id" title="var">R2</span> <span class="id" title="var">R3</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">exact</span> (<span class="id" title="var">loc_precategory_assoc_eqrel2</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">z</span> <span class="id" title="var">w</span> <span class="id" title="var">R1</span> <span class="id" title="var">R2</span> <span class="id" title="var">R3</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <span class="id" title="var">eqrelsymm</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exact</span> (<span class="id" title="var">loc_precategory_assoc_eqrel1</span> <span class="id" title="var">R1</span> <span class="id" title="var">R2</span> <span class="id" title="var">R3</span>).<br/>
</div>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Local</span> <span class="id" title="keyword">Lemma</span> <span class="id" title="var">loc_precategory_assoc</span> (<span class="id" title="var">a</span> <span class="id" title="var">b</span> <span class="id" title="var">c</span> <span class="id" title="var">d</span> : <span class="id" title="var">loc_precategory_data</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">f</span> : <span class="id" title="var">loc_precategory_data</span> ⟦<span class="id" title="var">a</span>, <span class="id" title="var">b</span>⟧) (<span class="id" title="var">g</span> : <span class="id" title="var">loc_precategory_data</span> ⟦<span class="id" title="var">b</span>, <span class="id" title="var">c</span>⟧)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">h</span> : <span class="id" title="var">loc_precategory_data</span> ⟦<span class="id" title="var">c</span>, <span class="id" title="var">d</span>⟧) : <span class="id" title="var">f</span> · (<span class="id" title="var">g</span> · <span class="id" title="var">h</span>) = <span class="id" title="var">f</span> · <span class="id" title="var">g</span> · <span class="id" title="var">h</span>.<br/>
&nbsp;&nbsp;<a class="proof" href="#">Show proof.</a><br/><div class="proof">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">use</span> (<span class="id" title="var">squash_to_prop</span> (<span class="id" title="var">pr1</span> (<span class="id" title="var">RoofEqclassIs</span> <span class="id" title="var">f</span>))). <span class="id" title="tactic">apply</span> <span class="id" title="var">isasetRoofEqclass</span>. <span class="id" title="tactic">intros</span> <span class="id" title="var">f'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">use</span> (<span class="id" title="var">squash_to_prop</span> (<span class="id" title="var">pr1</span> (<span class="id" title="var">RoofEqclassIs</span> <span class="id" title="var">g</span>))). <span class="id" title="tactic">apply</span> <span class="id" title="var">isasetRoofEqclass</span>. <span class="id" title="tactic">intros</span> <span class="id" title="var">g'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">use</span> (<span class="id" title="var">squash_to_prop</span> (<span class="id" title="var">pr1</span> (<span class="id" title="var">RoofEqclassIs</span> <span class="id" title="var">h</span>))). <span class="id" title="tactic">apply</span> <span class="id" title="var">isasetRoofEqclass</span>. <span class="id" title="tactic">intros</span> <span class="id" title="var">h'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">f'</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">f1</span> <span class="id" title="var">f2</span>]. <span class="id" title="tactic">induction</span> <span class="id" title="var">g'</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">g1</span> <span class="id" title="var">g2</span>]. <span class="id" title="tactic">induction</span> <span class="id" title="var">h'</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">h1</span> <span class="id" title="var">h2</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">use</span> <span class="id" title="var">RoofEqclassEq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">R</span> <span class="id" title="var">HR</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">X1</span> : <span class="id" title="var">pr1</span> (<span class="id" title="var">f</span> · (<span class="id" title="var">g</span> · <span class="id" title="var">h</span>)) (<span class="id" title="var">roof_comp</span> <span class="id" title="var">f1</span> (<span class="id" title="var">roof_comp</span> <span class="id" title="var">g1</span> <span class="id" title="var">h1</span>))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">pr2</span> (<span class="id" title="var">pr1</span> (<span class="id" title="var">roof_comp_iscontr</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span> <span class="id" title="var">d</span> <span class="id" title="var">f</span> (<span class="id" title="var">pr1</span> (<span class="id" title="var">pr1</span> (<span class="id" title="var">roof_comp_iscontr</span> <span class="id" title="var">b</span> <span class="id" title="var">c</span> <span class="id" title="var">d</span> <span class="id" title="var">g</span> <span class="id" title="var">h</span>)))))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <span class="id" title="var">f2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> (<span class="id" title="var">pr2</span> (<span class="id" title="var">pr1</span> (<span class="id" title="var">roof_comp_iscontr</span> <span class="id" title="var">b</span> <span class="id" title="var">c</span> <span class="id" title="var">d</span> <span class="id" title="var">g</span> <span class="id" title="var">h</span>))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <span class="id" title="var">g2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <span class="id" title="var">h2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">X2</span> : <span class="id" title="var">pr1</span> (<span class="id" title="var">f</span> · <span class="id" title="var">g</span> · <span class="id" title="var">h</span>) (<span class="id" title="var">roof_comp</span> (<span class="id" title="var">roof_comp</span> <span class="id" title="var">f1</span> <span class="id" title="var">g1</span>) <span class="id" title="var">h1</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">pr2</span> (<span class="id" title="var">pr1</span> (<span class="id" title="var">roof_comp_iscontr</span> <span class="id" title="var">a</span> <span class="id" title="var">c</span> <span class="id" title="var">d</span> (<span class="id" title="var">pr1</span> (<span class="id" title="var">pr1</span> (<span class="id" title="var">roof_comp_iscontr</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span> <span class="id" title="var">c</span> <span class="id" title="var">f</span> <span class="id" title="var">g</span>))) <span class="id" title="var">h</span>))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> (<span class="id" title="var">pr2</span> (<span class="id" title="var">pr1</span> (<span class="id" title="var">roof_comp_iscontr</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span> <span class="id" title="var">c</span> <span class="id" title="var">f</span> <span class="id" title="var">g</span>))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <span class="id" title="var">f2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <span class="id" title="var">g2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <span class="id" title="var">h2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">X3</span> := <span class="id" title="var">loc_precategory_assoc_eqrel</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span> <span class="id" title="var">c</span> <span class="id" title="var">d</span> <span class="id" title="var">f1</span> <span class="id" title="var">g1</span> <span class="id" title="var">h1</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">use</span> (<span class="id" title="var">eqax1</span> (<span class="id" title="var">RoofEqclassIs</span> (<span class="id" title="var">f</span> · <span class="id" title="var">g</span> · <span class="id" title="var">h</span>))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">exact</span> (<span class="id" title="var">roof_comp</span> <span class="id" title="var">f1</span> (<span class="id" title="var">roof_comp</span> <span class="id" title="var">g1</span> <span class="id" title="var">h1</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">use</span> (<span class="id" title="var">eqax2</span> (<span class="id" title="var">RoofEqclassIs</span> (<span class="id" title="var">f</span> · (<span class="id" title="var">g</span> · <span class="id" title="var">h</span>)))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">exact</span> <span class="id" title="var">X1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">exact</span> <span class="id" title="var">HR</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">use</span> (<span class="id" title="var">eqax1</span> (<span class="id" title="var">RoofEqclassIs</span> (<span class="id" title="var">f</span> · <span class="id" title="var">g</span> · <span class="id" title="var">h</span>))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">exact</span> (<span class="id" title="var">roof_comp</span> (<span class="id" title="var">roof_comp</span> <span class="id" title="var">f1</span> <span class="id" title="var">g1</span>) <span class="id" title="var">h1</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">apply</span> <span class="id" title="var">eqrelsymm</span>. <span class="id" title="tactic">exact</span> <span class="id" title="var">X3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">exact</span> <span class="id" title="var">X2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">R</span> <span class="id" title="var">HR</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">X1</span> : <span class="id" title="var">pr1</span> (<span class="id" title="var">f</span> · (<span class="id" title="var">g</span> · <span class="id" title="var">h</span>)) (<span class="id" title="var">roof_comp</span> <span class="id" title="var">f1</span> (<span class="id" title="var">roof_comp</span> <span class="id" title="var">g1</span> <span class="id" title="var">h1</span>))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">pr2</span> (<span class="id" title="var">pr1</span> (<span class="id" title="var">roof_comp_iscontr</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span> <span class="id" title="var">d</span> <span class="id" title="var">f</span> (<span class="id" title="var">pr1</span> (<span class="id" title="var">pr1</span> (<span class="id" title="var">roof_comp_iscontr</span> <span class="id" title="var">b</span> <span class="id" title="var">c</span> <span class="id" title="var">d</span> <span class="id" title="var">g</span> <span class="id" title="var">h</span>)))))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <span class="id" title="var">f2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> (<span class="id" title="var">pr2</span> (<span class="id" title="var">pr1</span> (<span class="id" title="var">roof_comp_iscontr</span> <span class="id" title="var">b</span> <span class="id" title="var">c</span> <span class="id" title="var">d</span> <span class="id" title="var">g</span> <span class="id" title="var">h</span>))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <span class="id" title="var">g2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <span class="id" title="var">h2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">X2</span> : <span class="id" title="var">pr1</span> (<span class="id" title="var">f</span> · <span class="id" title="var">g</span> · <span class="id" title="var">h</span>) (<span class="id" title="var">roof_comp</span> (<span class="id" title="var">roof_comp</span> <span class="id" title="var">f1</span> <span class="id" title="var">g1</span>) <span class="id" title="var">h1</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">pr2</span> (<span class="id" title="var">pr1</span> (<span class="id" title="var">roof_comp_iscontr</span> <span class="id" title="var">a</span> <span class="id" title="var">c</span> <span class="id" title="var">d</span> (<span class="id" title="var">pr1</span> (<span class="id" title="var">pr1</span> (<span class="id" title="var">roof_comp_iscontr</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span> <span class="id" title="var">c</span> <span class="id" title="var">f</span> <span class="id" title="var">g</span>))) <span class="id" title="var">h</span>))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> (<span class="id" title="var">pr2</span> (<span class="id" title="var">pr1</span> (<span class="id" title="var">roof_comp_iscontr</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span> <span class="id" title="var">c</span> <span class="id" title="var">f</span> <span class="id" title="var">g</span>))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <span class="id" title="var">f2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <span class="id" title="var">g2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <span class="id" title="var">h2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">X3</span> := <span class="id" title="var">loc_precategory_assoc_eqrel</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span> <span class="id" title="var">c</span> <span class="id" title="var">d</span> <span class="id" title="var">f1</span> <span class="id" title="var">g1</span> <span class="id" title="var">h1</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">use</span> (<span class="id" title="var">eqax1</span> (<span class="id" title="var">RoofEqclassIs</span> (<span class="id" title="var">f</span> · (<span class="id" title="var">g</span> · <span class="id" title="var">h</span>)))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">exact</span> (<span class="id" title="var">roof_comp</span> <span class="id" title="var">f1</span> (<span class="id" title="var">roof_comp</span> <span class="id" title="var">g1</span> <span class="id" title="var">h1</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">use</span> <span class="id" title="var">eqreltrans</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">exact</span> (<span class="id" title="var">roof_comp</span> (<span class="id" title="var">roof_comp</span> <span class="id" title="var">f1</span> <span class="id" title="var">g1</span>) <span class="id" title="var">h1</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">exact</span> <span class="id" title="var">X3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="var">use</span> (<span class="id" title="var">eqax2</span> (<span class="id" title="var">RoofEqclassIs</span> (<span class="id" title="var">f</span> · <span class="id" title="var">g</span> · <span class="id" title="var">h</span>))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-- <span class="id" title="tactic">exact</span> <span class="id" title="var">X2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-- <span class="id" title="tactic">exact</span> <span class="id" title="var">HR</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">exact</span> <span class="id" title="var">X1</span>.<br/>
</div>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">is_precategory_loc_precategory_data</span> : <span class="id" title="var">is_precategory</span> <span class="id" title="var">loc_precategory_data</span>.<br/>
&nbsp;&nbsp;<a class="proof" href="#">Show proof.</a><br/><div class="proof">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">is_precategory_one_assoc_to_two</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">intros</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span> <span class="id" title="var">f</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">loc_id_left</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">intros</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span> <span class="id" title="var">f</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">loc_id_right</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span> <span class="id" title="var">c</span> <span class="id" title="var">d</span> <span class="id" title="var">f</span> <span class="id" title="var">g</span> <span class="id" title="var">h</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">loc_precategory_assoc</span>.<br/>
</div>

<br/>
</div>

<div class="doc">
The category of roofs under the correct equivalence relation 
</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <span class="id" title="var">loc_precategory</span> : <span class="id" title="var">precategory</span> := <span class="id" title="var">tpair</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">is_precategory_loc_precategory_data</span>.<br/>

<br/>
</div>

<div class="doc">
In particular, loc_precategory has homsets. 
</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">has_homsets_loc_precategory</span> : <span class="id" title="var">has_homsets</span> <span class="id" title="var">loc_precategory</span>.<br/>
&nbsp;&nbsp;<a class="proof" href="#">Show proof.</a><br/><div class="proof">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">R1</span> <span class="id" title="var">R2</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">isasetRoofEqclass</span>.<br/>
</div>

<br/>
</div>

<div class="doc">
<a name="lab1248"></a><h2 class="section">Universal property</h2>
 We verify that loc_precategory satisfies the universal property required for localization
      of categories. Universal property: Suppose F : C -&gt; D is a functor which maps the
      morphisms in SOM to isomorphisms in D. Then there exists a unique functor H : loc_precategory
<ul class="doclist">
<li>&gt; D such that functor_composite <span class="inlinecode"><span class="id" title="var">FunctorToLocalization</span></span> H = F, where FunctorToLocalization

</li>
</ul>
      is the natural inclusion functor C -&gt; loc_precategory.

<div class="paragraph"> </div>

      The unique functor H is constructed in <span class="inlinecode"><span class="id" title="var">LocalizationUniversalFunctor</span></span>, commutativity is
      proved in <span class="inlinecode"><span class="id" title="var">LocalizationUniversalFunctorComm</span></span>, and uniqueness of the functor is proved in
      <span class="inlinecode"><span class="id" title="var">LocalizationUniversalFunctorUnique</span></span>. In case the objects of D satisfy isaset, then we also
      show that commutativity is unique. This means that the type
      "functor_composite <span class="inlinecode"><span class="id" title="var">FunctorToLocalization</span></span> H = F" has only one term.
   
<div class="paragraph"> </div>

 Maps a morphism to roofs 
</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <span class="id" title="var">MorToRoof</span> {<span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">ob</span> <span class="id" title="var">C</span>} (<span class="id" title="var">f</span> : <span class="id" title="var">x</span> --&gt; <span class="id" title="var">y</span>) : <span class="id" title="var">Roof</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>.<br/>
&nbsp;&nbsp;<a class="proof" href="#">Show proof.</a><br/><div class="proof">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">use</span> <span class="id" title="var">mk_Roof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">exact</span> <span class="id" title="var">x</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">exact</span> (<span class="id" title="var">identity</span> <span class="id" title="var">x</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">exact</span> <span class="id" title="var">f</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">exact</span> (<span class="id" title="var">isLocClassIs</span> <span class="id" title="var">iLC</span> <span class="id" title="var">x</span>).<br/>
</div>

<br/>
</div>

<div class="doc">
MorToRoof is linear with respect to composition in C. 
</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">MorphismCompEqrel</span> {<span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">z</span> : <span class="id" title="var">ob</span> <span class="id" title="var">C</span>} (<span class="id" title="var">f</span> : <span class="id" title="var">x</span> --&gt; <span class="id" title="var">y</span>) (<span class="id" title="var">g</span> : <span class="id" title="var">y</span> --&gt; <span class="id" title="var">z</span>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">eqrelpair</span> <span class="id" title="var">_</span> (<span class="id" title="var">RoofEqrel</span> <span class="id" title="var">x</span> <span class="id" title="var">z</span>)) (<span class="id" title="var">MorToRoof</span> (<span class="id" title="var">f</span> · <span class="id" title="var">g</span>)) (<span class="id" title="var">roof_comp</span> (<span class="id" title="var">MorToRoof</span> <span class="id" title="var">f</span>) (<span class="id" title="var">MorToRoof</span> <span class="id" title="var">g</span>)).<br/>
&nbsp;&nbsp;<a class="proof" href="#">Show proof.</a><br/><div class="proof">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">Rf</span> := <span class="id" title="var">MorToRoof</span> <span class="id" title="var">f</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">Rg</span> := <span class="id" title="var">MorToRoof</span> <span class="id" title="var">g</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">Rfg</span> := <span class="id" title="var">MorToRoof</span> (<span class="id" title="var">f</span> · <span class="id" title="var">g</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">roof_comp</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">sqr1</span> := <span class="id" title="var">isLocClassSqr2</span> <span class="id" title="var">iLC</span> <span class="id" title="var">Rg</span> <span class="id" title="var">Rf</span> <span class="id" title="var">y</span> (<span class="id" title="var">RoofMor1</span> <span class="id" title="var">Rg</span>) (<span class="id" title="var">RoofMor1Is</span> <span class="id" title="var">Rg</span>) (<span class="id" title="var">RoofMor2</span> <span class="id" title="var">Rf</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">CR</span> := <span class="id" title="var">RoofToCoroof</span> (<span class="id" title="var">MorToRoof</span> <span class="id" title="var">g</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">sqrop</span> := <span class="id" title="var">isLocClassSqr1</span> <span class="id" title="var">iLC</span> <span class="id" title="var">y</span> <span class="id" title="var">y</span> <span class="id" title="var">z</span> (<span class="id" title="var">identity</span> <span class="id" title="var">y</span>) (<span class="id" title="var">isLocClassIs</span> <span class="id" title="var">iLC</span> <span class="id" title="var">y</span>) <span class="id" title="var">g</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">H</span> : <span class="id" title="var">LocSqr2Mor1</span> <span class="id" title="var">sqr1</span> · <span class="id" title="var">RoofMor2</span> <span class="id" title="var">Rg</span> · <span class="id" title="var">CoroofMor2</span> <span class="id" title="var">CR</span> =<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">LocSqr2Mor2</span> <span class="id" title="var">sqr1</span> · <span class="id" title="var">f</span> · <span class="id" title="var">g</span> · <span class="id" title="var">CoroofMor2</span> <span class="id" title="var">CR</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cbn</span>. <span class="id" title="tactic">fold</span> <span class="id" title="var">sqrop</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">assoc</span>. <span class="id" title="tactic">rewrite</span> &lt;- (<span class="id" title="var">LocSqr1Comm</span> <span class="id" title="var">sqrop</span>). <span class="id" title="tactic">rewrite</span> <span class="id" title="var">id_left</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">assoc</span>. <span class="id" title="tactic">rewrite</span> &lt;- (<span class="id" title="var">LocSqr1Comm</span> <span class="id" title="var">sqrop</span>). <span class="id" title="tactic">rewrite</span> <span class="id" title="var">id_left</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">cancel_postcomposition</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">tmp</span> := <span class="id" title="var">LocSqr2Comm</span> <span class="id" title="var">sqr1</span>). <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">tmp</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">id_right</span> <span class="id" title="tactic">in</span> <span class="id" title="var">tmp</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exact</span> <span class="id" title="var">tmp</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">PostS</span> := <span class="id" title="var">isLocClassPost</span> <span class="id" title="var">iLC</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> (<span class="id" title="var">LocSqr2Mor1</span> <span class="id" title="var">sqr1</span> · <span class="id" title="var">RoofMor2</span> <span class="id" title="var">Rg</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">LocSqr2Mor2</span> <span class="id" title="var">sqr1</span> · <span class="id" title="var">f</span> · <span class="id" title="var">g</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">CoroofMor2</span> <span class="id" title="var">CR</span>) (<span class="id" title="var">CoroofMor2Is</span> <span class="id" title="var">CR</span>) <span class="id" title="var">H</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">P</span> <span class="id" title="var">X</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">X</span>. <span class="id" title="tactic">clear</span> <span class="id" title="var">X</span> <span class="id" title="var">P</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">use</span> <span class="id" title="var">mk_RoofTop</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">exact</span> <span class="id" title="var">PostS</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">exact</span> (<span class="id" title="var">PostSwitchMor</span> <span class="id" title="var">PostS</span> · (<span class="id" title="var">LocSqr2Mor2</span> <span class="id" title="var">sqr1</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">exact</span> (<span class="id" title="var">PostSwitchMor</span> <span class="id" title="var">PostS</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">use</span> (<span class="id" title="var">isLocClassComp</span> <span class="id" title="var">iLC</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">use</span> (<span class="id" title="var">isLocClassComp</span> <span class="id" title="var">iLC</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">exact</span> (<span class="id" title="var">PostSwitchMorIs</span> <span class="id" title="var">PostS</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">exact</span> (<span class="id" title="var">LocSqr2Mor2Is</span> <span class="id" title="var">sqr1</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">exact</span> (<span class="id" title="var">RoofMor1Is</span> <span class="id" title="var">Rfg</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">cbn</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">assoc</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">idpath</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">tmp</span> := <span class="id" title="var">PostSwitchEq</span> <span class="id" title="var">PostS</span>). <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">tmp</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">assoc</span> <span class="id" title="tactic">in</span> <span class="id" title="var">tmp</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">assoc</span> <span class="id" title="tactic">in</span> <span class="id" title="var">tmp</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">assoc</span> <span class="id" title="tactic">in</span> <span class="id" title="var">tmp</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">assoc</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">assoc</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exact</span> (! (<span class="id" title="var">tmp</span>)).<br/>
</div>

<br/>
</div>

<div class="doc">
This is used to show that the natural inclusion functor C --&gt; loc_precategory
      respects composition. See <span class="inlinecode"><span class="id" title="var">FunctorToLocalization</span></span>. 
</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">FunctorToLocalization_comp</span> {<span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">z</span> : <span class="id" title="var">ob</span> <span class="id" title="var">C</span>} (<span class="id" title="var">f</span> : <span class="id" title="var">x</span> --&gt; <span class="id" title="var">y</span>) (<span class="id" title="var">g</span> : <span class="id" title="var">y</span> --&gt; <span class="id" title="var">z</span>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">RoofEqclassFromRoof</span> (<span class="id" title="var">MorToRoof</span> (<span class="id" title="var">f</span> · <span class="id" title="var">g</span>)) =<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">pr1</span> (<span class="id" title="var">pr1</span> (<span class="id" title="var">roof_comp_iscontr</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">z</span> (<span class="id" title="var">RoofEqclassFromRoof</span> (<span class="id" title="var">MorToRoof</span> <span class="id" title="var">f</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">RoofEqclassFromRoof</span> (<span class="id" title="var">MorToRoof</span> <span class="id" title="var">g</span>)))).<br/>
&nbsp;&nbsp;<a class="proof" href="#">Show proof.</a><br/><div class="proof">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">tmpp</span> := <span class="id" title="var">roof_comp_iscontr_in</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">z</span> (<span class="id" title="var">MorToRoof</span> <span class="id" title="var">f</span>) (<span class="id" title="var">MorToRoof</span> <span class="id" title="var">g</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">eqclass</span> := <span class="id" title="var">pr1</span> (<span class="id" title="var">pr1</span> (<span class="id" title="var">roof_comp_iscontr</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">z</span> (<span class="id" title="var">RoofEqclassFromRoof</span> (<span class="id" title="var">MorToRoof</span> <span class="id" title="var">f</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">RoofEqclassFromRoof</span> (<span class="id" title="var">MorToRoof</span> <span class="id" title="var">g</span>))))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">fold</span> <span class="id" title="var">eqclass</span> <span class="id" title="tactic">in</span> <span class="id" title="var">tmpp</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">cont</span> := <span class="id" title="var">pr1</span> (<span class="id" title="var">roof_comp_iscontr</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">z</span> (<span class="id" title="var">RoofEqclassFromRoof</span> (<span class="id" title="var">MorToRoof</span> <span class="id" title="var">f</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">RoofEqclassFromRoof</span> (<span class="id" title="var">MorToRoof</span> <span class="id" title="var">g</span>)))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">cont'</span> := <span class="id" title="var">pr2</span> <span class="id" title="var">cont</span>). <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">cont</span>, <span class="id" title="var">cont'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">use</span> <span class="id" title="var">RoofEqclassEq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">R</span> <span class="id" title="var">HR</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">RoofEqclassIn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">tmpp</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">use</span> (<span class="id" title="var">eqax1</span> (<span class="id" title="var">RoofEqclassIs</span> <span class="id" title="var">eqclass</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">exact</span> (<span class="id" title="var">roof_comp</span> (<span class="id" title="var">MorToRoof</span> <span class="id" title="var">f</span>) (<span class="id" title="var">MorToRoof</span> <span class="id" title="var">g</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">use</span> <span class="id" title="var">eqreltrans</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">exact</span> (<span class="id" title="var">MorToRoof</span> (<span class="id" title="var">f</span> · <span class="id" title="var">g</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">apply</span> <span class="id" title="var">eqrelsymm</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">MorphismCompEqrel</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">set</span> (<span class="id" title="var">HR'</span> := <span class="id" title="var">RoofEqclassFromRoofIn</span> (<span class="id" title="var">MorToRoof</span> (<span class="id" title="var">f</span> · <span class="id" title="var">g</span>))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">use</span> (<span class="id" title="var">eqax2</span> (<span class="id" title="var">RoofEqclassIs</span> (<span class="id" title="var">RoofEqclassFromRoof</span> (<span class="id" title="var">MorToRoof</span> (<span class="id" title="var">f</span> · <span class="id" title="var">g</span>))))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-- <span class="id" title="tactic">exact</span> <span class="id" title="var">HR'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-- <span class="id" title="tactic">exact</span> <span class="id" title="var">HR</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">exact</span> <span class="id" title="var">tmpp</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">R</span> <span class="id" title="var">HR</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">use</span> (<span class="id" title="var">eqax1</span> (<span class="id" title="var">RoofEqclassIs</span> (<span class="id" title="var">RoofEqclassFromRoof</span> (<span class="id" title="var">MorToRoof</span> (<span class="id" title="var">f</span> · <span class="id" title="var">g</span>))))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">exact</span> (<span class="id" title="var">MorToRoof</span> (<span class="id" title="var">f</span> · <span class="id" title="var">g</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">use</span> <span class="id" title="var">eqreltrans</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">exact</span> (<span class="id" title="var">roof_comp</span> (<span class="id" title="var">MorToRoof</span> <span class="id" title="var">f</span>) (<span class="id" title="var">MorToRoof</span> <span class="id" title="var">g</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">apply</span> <span class="id" title="var">MorphismCompEqrel</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="var">use</span> (<span class="id" title="var">eqax2</span> (<span class="id" title="var">RoofEqclassIs</span> <span class="id" title="var">eqclass</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-- <span class="id" title="tactic">exact</span> <span class="id" title="var">tmpp</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-- <span class="id" title="tactic">exact</span> <span class="id" title="var">HR</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <span class="id" title="var">RoofEqclassFromRoofIn</span>.<br/>
</div>

<br/>
</div>

<div class="doc">
This is the natural inclusion functor from C to loc_precategory. It is identity on objects
      and sends a morphisms f : X --&gt; Y to a roof (id_X, f). 
</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <span class="id" title="var">FunctorToLocalization</span> : <span class="id" title="var">functor</span> <span class="id" title="var">C</span> <span class="id" title="var">loc_precategory</span>.<br/>
&nbsp;&nbsp;<a class="proof" href="#">Show proof.</a><br/><div class="proof">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">use</span> <span class="id" title="var">tpair</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">use</span> <span class="id" title="var">functor_data_constr</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">intros</span> <span class="id" title="var">x</span>. <span class="id" title="tactic">exact</span> <span class="id" title="var">x</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">intros</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">f</span>. <span class="id" title="tactic">exact</span> (<span class="id" title="var">RoofEqclassFromRoof</span> (<span class="id" title="var">MorToRoof</span> <span class="id" title="var">f</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">intros</span> <span class="id" title="var">x</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">idpath</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">intros</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">z</span> <span class="id" title="var">f</span> <span class="id" title="var">g</span>. <span class="id" title="tactic">exact</span> (<span class="id" title="var">FunctorToLocalization_comp</span> <span class="id" title="var">f</span> <span class="id" title="var">g</span>).<br/>
</div>

<br/>
</div>

<div class="doc">
This definition is the map used by the unique localization functor to map morphisms.
      It sends a roof (s, f) to the composite ( F s)^{-1} · ( F f). 
</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <span class="id" title="var">MorMap</span> (<span class="id" title="var">D</span> : <span class="id" title="var">precategory</span>) (<span class="id" title="var">hsD</span> : <span class="id" title="var">has_homsets</span> <span class="id" title="var">D</span>) (<span class="id" title="var">F</span> : <span class="id" title="var">functor</span> <span class="id" title="var">C</span> <span class="id" title="var">D</span>) (<span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">ob</span> <span class="id" title="var">C</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">H</span> : ∏ (<span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">C</span>) (<span class="id" title="var">f</span> : <span class="id" title="var">x</span> --&gt; <span class="id" title="var">y</span>) (<span class="id" title="var">s</span> : <span class="id" title="var">SOM</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">f</span>), <span class="id" title="var">is_iso</span> (# <span class="id" title="var">F</span> <span class="id" title="var">f</span>)) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">Roof</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> -&gt; <span class="id" title="var">D</span>⟦<span class="id" title="var">F</span> <span class="id" title="var">x</span>, <span class="id" title="var">F</span> <span class="id" title="var">y</span>⟧.<br/>
&nbsp;&nbsp;<a class="proof" href="#">Show proof.</a><br/><div class="proof">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">R</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exact</span> (<span class="id" title="var">inv_from_iso</span> (<span class="id" title="var">isopair</span> <span class="id" title="var">_</span> (<span class="id" title="var">H</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>(<span class="id" title="var">RoofMor1</span> <span class="id" title="var">R</span>) (<span class="id" title="var">RoofMor1Is</span> <span class="id" title="var">R</span>))) · (# <span class="id" title="var">F</span> (<span class="id" title="var">RoofMor2</span> <span class="id" title="var">R</span>))).<br/>
</div>

<br/>
</div>

<div class="doc">
One of the 2-out-of-3 properties for isomorphisms. 
</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">is_iso_pre</span> {<span class="id" title="var">D</span> : <span class="id" title="var">precategory</span>} {<span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">z</span> : <span class="id" title="var">D</span>} (<span class="id" title="var">f</span> : <span class="id" title="var">x</span> --&gt; <span class="id" title="var">y</span>) (<span class="id" title="var">g</span> : <span class="id" title="var">y</span> --&gt; <span class="id" title="var">z</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">H1</span> : <span class="id" title="var">is_iso</span> (<span class="id" title="var">f</span> · <span class="id" title="var">g</span>)) (<span class="id" title="var">H2</span> : <span class="id" title="var">is_iso</span> <span class="id" title="var">g</span>) : <span class="id" title="var">is_iso</span> <span class="id" title="var">f</span>.<br/>
&nbsp;&nbsp;<a class="proof" href="#">Show proof.</a><br/><div class="proof">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">iso1</span> := <span class="id" title="var">isopair</span> <span class="id" title="var">_</span> <span class="id" title="var">H1</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">iso2</span> := <span class="id" title="var">isopair</span> <span class="id" title="var">_</span> <span class="id" title="var">H2</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">inv1</span> := <span class="id" title="var">inv_from_iso</span> <span class="id" title="var">iso1</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">inv2</span> := <span class="id" title="var">inv_from_iso</span> <span class="id" title="var">iso2</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">use</span> <span class="id" title="var">is_iso_qinv</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">exact</span> (<span class="id" title="var">g</span> · <span class="id" title="var">inv1</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">rewrite</span> <span class="id" title="var">assoc</span>. <span class="id" title="tactic">unfold</span> <span class="id" title="var">inv1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">tmp</span> := <span class="id" title="var">iso_inv_after_iso</span> <span class="id" title="var">iso1</span>). <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">tmp</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">tmp</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">set</span> (<span class="id" title="var">tmp</span> := <span class="id" title="var">iso_inv_after_iso</span> <span class="id" title="var">iso2</span>). <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">tmp</span>. <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">tmp</span>. <span class="id" title="tactic">clear</span> <span class="id" title="var">tmp</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">assoc</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">cancel_precomposition</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">post_comp_with_iso_is_inj</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">g</span> <span class="id" title="var">H2</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">tmp</span> := <span class="id" title="var">iso_after_iso_inv</span> <span class="id" title="var">iso2</span>). <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">tmp</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">tmp</span>. <span class="id" title="tactic">clear</span> <span class="id" title="var">tmp</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">assoc</span>. <span class="id" title="tactic">set</span> (<span class="id" title="var">tmp</span> := <span class="id" title="var">iso_after_iso_inv</span> <span class="id" title="var">iso1</span>). <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">tmp</span>. <span class="id" title="tactic">exact</span> <span class="id" title="var">tmp</span>.<br/>
</div>

<br/>
</div>

<div class="doc">
These two lemmas are used in the proof of <span class="inlinecode"><span class="id" title="var">MorMap_iscomprelfun</span></span>. 
</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">MorMap_top_mor1_is_iso</span> (<span class="id" title="var">D</span> : <span class="id" title="var">precategory</span>) (<span class="id" title="var">hsD</span> : <span class="id" title="var">has_homsets</span> <span class="id" title="var">D</span>) (<span class="id" title="var">F</span> : <span class="id" title="var">functor</span> <span class="id" title="var">C</span> <span class="id" title="var">D</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">ob</span> <span class="id" title="var">C</span>) (<span class="id" title="var">H</span> : ∏ (<span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">C</span>) (<span class="id" title="var">f</span> : <span class="id" title="var">x</span> --&gt; <span class="id" title="var">y</span>) (<span class="id" title="var">s</span> : <span class="id" title="var">SOM</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">f</span>), <span class="id" title="var">is_iso</span> (# <span class="id" title="var">F</span> <span class="id" title="var">f</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">R1</span> <span class="id" title="var">R2</span> : <span class="id" title="var">Roof</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>) (<span class="id" title="var">T</span> : <span class="id" title="var">RoofTop</span> <span class="id" title="var">R1</span> <span class="id" title="var">R2</span>) : <span class="id" title="var">is_iso</span> (# <span class="id" title="var">F</span> (<span class="id" title="var">RoofTopMor1</span> <span class="id" title="var">T</span>)).<br/>
&nbsp;&nbsp;<a class="proof" href="#">Show proof.</a><br/><div class="proof">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">use</span> (@<span class="id" title="var">is_iso_pre</span> <span class="id" title="var">D</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">exact</span> (<span class="id" title="var">F</span> <span class="id" title="var">x</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">exact</span> (# <span class="id" title="var">F</span> (<span class="id" title="var">RoofMor1</span> <span class="id" title="var">R1</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">functor_comp</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">apply</span> (<span class="id" title="var">RoofTopMor1Is</span> <span class="id" title="var">T</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">apply</span> (<span class="id" title="var">RoofMor1Is</span> <span class="id" title="var">R1</span>).<br/>
</div>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">MorMap_top_mor2_is_iso</span> (<span class="id" title="var">D</span> : <span class="id" title="var">precategory</span>) (<span class="id" title="var">hsD</span> : <span class="id" title="var">has_homsets</span> <span class="id" title="var">D</span>) (<span class="id" title="var">F</span> : <span class="id" title="var">functor</span> <span class="id" title="var">C</span> <span class="id" title="var">D</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">ob</span> <span class="id" title="var">C</span>) (<span class="id" title="var">H</span> : ∏ (<span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">C</span>) (<span class="id" title="var">f</span> : <span class="id" title="var">x</span> --&gt; <span class="id" title="var">y</span>) (<span class="id" title="var">s</span> : <span class="id" title="var">SOM</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">f</span>), <span class="id" title="var">is_iso</span> (# <span class="id" title="var">F</span> <span class="id" title="var">f</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">R1</span> <span class="id" title="var">R2</span> : <span class="id" title="var">Roof</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>) (<span class="id" title="var">T</span> : <span class="id" title="var">RoofTop</span> <span class="id" title="var">R1</span> <span class="id" title="var">R2</span>) : <span class="id" title="var">is_iso</span> (# <span class="id" title="var">F</span> (<span class="id" title="var">RoofTopMor2</span> <span class="id" title="var">T</span>)).<br/>
&nbsp;&nbsp;<a class="proof" href="#">Show proof.</a><br/><div class="proof">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">use</span> (@<span class="id" title="var">is_iso_pre</span> <span class="id" title="var">D</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">exact</span> (<span class="id" title="var">F</span> <span class="id" title="var">x</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">exact</span> (# <span class="id" title="var">F</span> (<span class="id" title="var">RoofMor1</span> <span class="id" title="var">R2</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">functor_comp</span>. <span class="id" title="tactic">rewrite</span> &lt;- (<span class="id" title="var">RoofTopEq1</span> <span class="id" title="var">T</span>). <span class="id" title="tactic">apply</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">apply</span> (<span class="id" title="var">RoofTopMor1Is</span> <span class="id" title="var">T</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">apply</span> (<span class="id" title="var">RoofMor1Is</span> <span class="id" title="var">R2</span>).<br/>
</div>

<br/>
</div>

<div class="doc">
Equation for compositions of inverses 
</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">inv_from_iso_comp</span> {<span class="id" title="var">D</span> : <span class="id" title="var">precategory</span>} {<span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">z</span> : <span class="id" title="var">D</span>} (<span class="id" title="var">f</span> : <span class="id" title="var">iso</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>) (<span class="id" title="var">g</span> : <span class="id" title="var">iso</span> <span class="id" title="var">y</span> <span class="id" title="var">z</span>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">inv_from_iso</span> (<span class="id" title="var">iso_comp</span> <span class="id" title="var">f</span> <span class="id" title="var">g</span>) = <span class="id" title="var">inv_from_iso</span> <span class="id" title="var">g</span> · <span class="id" title="var">inv_from_iso</span> <span class="id" title="var">f</span>.<br/>
&nbsp;&nbsp;<a class="proof" href="#">Show proof.</a><br/><div class="proof">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">pathsinv0</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">inv_iso_unique'</span>. <span class="id" title="tactic">unfold</span> <span class="id" title="var">precomp_with</span>. <span class="id" title="tactic">unfold</span> <span class="id" title="var">iso_comp</span>. <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">assoc</span>. <span class="id" title="tactic">rewrite</span> &lt;- (<span class="id" title="var">assoc</span> <span class="id" title="var">_</span> <span class="id" title="var">g</span>). <span class="id" title="tactic">rewrite</span> <span class="id" title="var">iso_inv_after_iso</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">id_right</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">iso_inv_after_iso</span>.<br/>
</div>

<br/>
</div>

<div class="doc">
MorMap is compatible with equivalence relation of roofs when one assumes that all the
      morpsisms in SOM are mapped to isomorphisms. 
</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">MorMap_iscomprelfun</span> (<span class="id" title="var">D</span> : <span class="id" title="var">precategory</span>) (<span class="id" title="var">hsD</span> : <span class="id" title="var">has_homsets</span> <span class="id" title="var">D</span>) (<span class="id" title="var">F</span> : <span class="id" title="var">functor</span> <span class="id" title="var">C</span> <span class="id" title="var">D</span>) (<span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">ob</span> <span class="id" title="var">C</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">H</span> : ∏ (<span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">C</span>) (<span class="id" title="var">f</span> : <span class="id" title="var">x</span> --&gt; <span class="id" title="var">y</span>) (<span class="id" title="var">s</span> : <span class="id" title="var">SOM</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">f</span>), <span class="id" title="var">is_iso</span> (# <span class="id" title="var">F</span> <span class="id" title="var">f</span>)) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iscomprelfun</span> (<span class="id" title="var">eqrelpair</span> <span class="id" title="var">_</span> (<span class="id" title="var">RoofEqrel</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>)) (<span class="id" title="var">MorMap</span> <span class="id" title="var">D</span> <span class="id" title="var">hsD</span> <span class="id" title="var">F</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">H</span>).<br/>
&nbsp;&nbsp;<a class="proof" href="#">Show proof.</a><br/><div class="proof">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">R1</span> <span class="id" title="var">R2</span> <span class="id" title="var">T'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">use</span> (<span class="id" title="var">squash_to_prop</span> <span class="id" title="var">T'</span>). <span class="id" title="tactic">apply</span> <span class="id" title="var">hsD</span>. <span class="id" title="tactic">intros</span> <span class="id" title="var">T</span>. <span class="id" title="tactic">clear</span> <span class="id" title="var">T'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">iso1</span> := <span class="id" title="var">isopair</span> <span class="id" title="var">_</span> (<span class="id" title="var">H</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> (<span class="id" title="var">RoofMor1Is</span> <span class="id" title="var">R1</span>))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">iso2</span> := <span class="id" title="var">isopair</span> <span class="id" title="var">_</span> (<span class="id" title="var">H</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> (<span class="id" title="var">RoofMor1Is</span> <span class="id" title="var">R2</span>))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">iso3</span> := <span class="id" title="var">isopair</span> <span class="id" title="var">_</span> (<span class="id" title="var">MorMap_top_mor1_is_iso</span> <span class="id" title="var">D</span> <span class="id" title="var">hsD</span> <span class="id" title="var">F</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">H</span> <span class="id" title="var">R1</span> <span class="id" title="var">R2</span> <span class="id" title="var">T</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">iso4</span> := <span class="id" title="var">isopair</span> <span class="id" title="var">_</span> (<span class="id" title="var">MorMap_top_mor2_is_iso</span> <span class="id" title="var">D</span> <span class="id" title="var">hsD</span> <span class="id" title="var">F</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">H</span> <span class="id" title="var">R1</span> <span class="id" title="var">R2</span> <span class="id" title="var">T</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">MorMap</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- (<span class="id" title="var">id_left</span> (# <span class="id" title="var">F</span> (<span class="id" title="var">RoofMor2</span> <span class="id" title="var">R1</span>))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- (<span class="id" title="var">iso_after_iso_inv</span> (<span class="id" title="var">iso3</span>)). <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">assoc</span>. <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">functor_comp</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">assoc</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">inv_from_iso_comp</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="var">RoofTopEq2</span> <span class="id" title="var">T</span>). <span class="id" title="tactic">rewrite</span> <span class="id" title="var">functor_comp</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">fold</span> <span class="id" title="var">iso1</span> <span class="id" title="var">iso2</span> <span class="id" title="var">iso3</span> <span class="id" title="var">iso4</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">X</span> : <span class="id" title="var">iso_comp</span> <span class="id" title="var">iso3</span> <span class="id" title="var">iso1</span> = <span class="id" title="var">iso_comp</span> <span class="id" title="var">iso4</span> <span class="id" title="var">iso2</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">eq_iso</span>. <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">functor_comp</span>. <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">functor_comp</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">maponpaths</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">RoofTopEq1</span> <span class="id" title="var">T</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">X</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">inv_from_iso_comp</span>. <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">assoc</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">cancel_precomposition</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">assoc</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">tmp</span> := <span class="id" title="var">iso_after_iso_inv</span> <span class="id" title="var">iso4</span>). <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">tmp</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">tmp</span>. <span class="id" title="tactic">clear</span> <span class="id" title="var">tmp</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">id_left</span>.<br/>
</div>

<br/>
</div>

<div class="doc">
There is a unique morphism in D such that all the roofs R which are in equivalence class
      eqclass are mapped to. This uses the assumption H' which says that all morphisms in SOM
      are mapped to isomorphisms in D. 
</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">MorMap_iscontr</span> (<span class="id" title="var">D</span> : <span class="id" title="var">precategory</span>) (<span class="id" title="var">hsD</span> : <span class="id" title="var">has_homsets</span> <span class="id" title="var">D</span>) (<span class="id" title="var">F</span> : <span class="id" title="var">functor</span> <span class="id" title="var">C</span> <span class="id" title="var">D</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">H'</span> : ∏ (<span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">C</span>) (<span class="id" title="var">f</span> : <span class="id" title="var">x</span> --&gt; <span class="id" title="var">y</span>) (<span class="id" title="var">s</span> : <span class="id" title="var">SOM</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">f</span>), <span class="id" title="var">is_iso</span> (# <span class="id" title="var">F</span> <span class="id" title="var">f</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">C</span>) (<span class="id" title="var">eqclass</span> : <span class="id" title="var">RoofEqclass</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iscontr</span> (∑ <span class="id" title="var">g</span> : <span class="id" title="var">D</span>⟦<span class="id" title="var">F</span> <span class="id" title="var">x</span>, <span class="id" title="var">F</span> <span class="id" title="var">y</span>⟧,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;∏ (<span class="id" title="var">R</span> : <span class="id" title="var">Roof</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>) (<span class="id" title="var">H1</span> : <span class="id" title="var">RoofEqclassIn</span> (<span class="id" title="var">eqclass</span>) <span class="id" title="var">R</span>), <span class="id" title="var">g</span> = <span class="id" title="var">MorMap</span> <span class="id" title="var">D</span> <span class="id" title="var">hsD</span> <span class="id" title="var">F</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">H'</span> <span class="id" title="var">R</span>).<br/>
&nbsp;&nbsp;<a class="proof" href="#">Show proof.</a><br/><div class="proof">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">use</span> (<span class="id" title="var">squash_to_prop</span> (<span class="id" title="var">pr1</span> (<span class="id" title="var">RoofEqclassIs</span> <span class="id" title="var">eqclass</span>))). <span class="id" title="tactic">apply</span> <span class="id" title="var">isapropiscontr</span>. <span class="id" title="tactic">intros</span> <span class="id" title="var">R</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">R</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">R1</span> <span class="id" title="var">R2</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">tmp</span> := <span class="id" title="var">MorMap_iscomprelfun</span> <span class="id" title="var">D</span> <span class="id" title="var">hsD</span> <span class="id" title="var">F</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">H'</span>). <span class="id" title="tactic">unfold</span> <span class="id" title="var">iscomprelfun</span> <span class="id" title="tactic">in</span> <span class="id" title="var">tmp</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">use</span> <span class="id" title="var">unique_exists</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">exact</span> (<span class="id" title="var">MorMap</span> <span class="id" title="var">D</span> <span class="id" title="var">hsD</span> <span class="id" title="var">F</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">H'</span> <span class="id" title="var">R1</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">cbn</span>. <span class="id" title="tactic">intros</span> <span class="id" title="var">R'</span> <span class="id" title="var">HR'</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">tmp</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">use</span> (<span class="id" title="var">eqax2</span> (<span class="id" title="var">RoofEqclassIs</span> <span class="id" title="var">eqclass</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">exact</span> <span class="id" title="var">R2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">exact</span> <span class="id" title="var">HR'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">y0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">impred_isaprop</span>. <span class="id" title="tactic">intros</span> <span class="id" title="var">t</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">impred_isaprop</span>. <span class="id" title="tactic">intros</span> <span class="id" title="var">t0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">hsD</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">y0</span> <span class="id" title="var">T</span>. <span class="id" title="var">cbn</span> <span class="id" title="keyword">beta</span> <span class="id" title="tactic">in</span> <span class="id" title="var">T</span>. <span class="id" title="tactic">exact</span> (<span class="id" title="var">T</span> <span class="id" title="var">R1</span> <span class="id" title="var">R2</span>).<br/>
</div>

<br/>
</div>

<div class="doc">
MorMap equality from MorMap_iscontr 
</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">MorMap_iscontr_eq</span> (<span class="id" title="var">D</span> : <span class="id" title="var">precategory</span>) (<span class="id" title="var">hsD</span> : <span class="id" title="var">has_homsets</span> <span class="id" title="var">D</span>) (<span class="id" title="var">F</span> : <span class="id" title="var">functor</span> <span class="id" title="var">C</span> <span class="id" title="var">D</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">H'</span> : ∏ (<span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">C</span>) (<span class="id" title="var">f</span> : <span class="id" title="var">x</span> --&gt; <span class="id" title="var">y</span>) (<span class="id" title="var">s</span> : <span class="id" title="var">SOM</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">f</span>), <span class="id" title="var">is_iso</span> (# <span class="id" title="var">F</span> <span class="id" title="var">f</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">C</span>) (<span class="id" title="var">eqclass</span> : <span class="id" title="var">RoofEqclass</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>) (<span class="id" title="var">R</span> : <span class="id" title="var">Roof</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>) (<span class="id" title="var">H1</span> : <span class="id" title="var">RoofEqclassIn</span> <span class="id" title="var">eqclass</span> <span class="id" title="var">R</span>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">pr1</span> (<span class="id" title="var">pr1</span> (<span class="id" title="var">MorMap_iscontr</span> <span class="id" title="var">D</span> <span class="id" title="var">hsD</span> <span class="id" title="var">F</span> <span class="id" title="var">H'</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">eqclass</span>)) = <span class="id" title="var">MorMap</span> <span class="id" title="var">D</span> <span class="id" title="var">hsD</span> <span class="id" title="var">F</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">H'</span> <span class="id" title="var">R</span>.<br/>
&nbsp;&nbsp;<a class="proof" href="#">Show proof.</a><br/><div class="proof">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">pr2</span> (<span class="id" title="var">pr1</span> (<span class="id" title="var">MorMap_iscontr</span> <span class="id" title="var">D</span> <span class="id" title="var">hsD</span> <span class="id" title="var">F</span> <span class="id" title="var">H'</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">eqclass</span>))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exact</span> <span class="id" title="var">H1</span>.<br/>
</div>

<br/>
</div>

<div class="doc">
Equivalence class equality of roof_comp_iscontr with roof_comp's using R1'' and R2'' 
</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">roof_comp_iscontr_eqclass</span> {<span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">z</span> : <span class="id" title="var">ob</span> <span class="id" title="var">C</span>} (<span class="id" title="var">R1</span> : <span class="id" title="var">RoofEqclass</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>) (<span class="id" title="var">R2</span> : <span class="id" title="var">RoofEqclass</span> <span class="id" title="var">y</span> <span class="id" title="var">z</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">R1'</span> : <span class="id" title="var">Roof</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>) (<span class="id" title="var">R1''</span> : <span class="id" title="var">RoofEqclassIn</span> <span class="id" title="var">R1</span> <span class="id" title="var">R1'</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">R2'</span> : <span class="id" title="var">Roof</span> <span class="id" title="var">y</span> <span class="id" title="var">z</span>) (<span class="id" title="var">R2''</span> : <span class="id" title="var">RoofEqclassIn</span> <span class="id" title="var">R2</span> <span class="id" title="var">R2'</span>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">pr1</span> (<span class="id" title="var">pr1</span> (<span class="id" title="var">roof_comp_iscontr</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">z</span> <span class="id" title="var">R1</span> <span class="id" title="var">R2</span>)) = <span class="id" title="var">RoofEqclassFromRoof</span> (<span class="id" title="var">roof_comp</span> <span class="id" title="var">R1'</span> <span class="id" title="var">R2'</span>).<br/>
&nbsp;&nbsp;<a class="proof" href="#">Show proof.</a><br/><div class="proof">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">tmp</span> := <span class="id" title="var">pr2</span> (<span class="id" title="var">pr1</span> (<span class="id" title="var">roof_comp_iscontr</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">z</span> <span class="id" title="var">R1</span> <span class="id" title="var">R2</span>)) <span class="id" title="var">R1'</span> <span class="id" title="var">R1''</span> <span class="id" title="var">R2'</span> <span class="id" title="var">R2''</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">use</span> <span class="id" title="var">RoofEqclassEq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">R3</span> <span class="id" title="var">HR3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">use</span> (<span class="id" title="var">eqax1</span> (<span class="id" title="var">RoofEqclassIs</span> (<span class="id" title="var">RoofEqclassFromRoof</span> (<span class="id" title="var">roof_comp</span> <span class="id" title="var">R1'</span> <span class="id" title="var">R2'</span>)))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">exact</span> (<span class="id" title="var">roof_comp</span> <span class="id" title="var">R1'</span> <span class="id" title="var">R2'</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">use</span> (<span class="id" title="var">eqax2</span> (<span class="id" title="var">RoofEqclassIs</span> (<span class="id" title="var">pr1</span> (<span class="id" title="var">pr1</span> (<span class="id" title="var">roof_comp_iscontr</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">z</span> <span class="id" title="var">R1</span> <span class="id" title="var">R2</span>))))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">exact</span> <span class="id" title="var">tmp</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">exact</span> <span class="id" title="var">HR3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <span class="id" title="var">RoofEqclassFromRoofIn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">R3</span> <span class="id" title="var">HR3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">use</span> (<span class="id" title="var">eqax1</span> (<span class="id" title="var">RoofEqclassIs</span> (<span class="id" title="var">pr1</span> (<span class="id" title="var">pr1</span> (<span class="id" title="var">roof_comp_iscontr</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">z</span> <span class="id" title="var">R1</span> <span class="id" title="var">R2</span>))))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">exact</span> (<span class="id" title="var">roof_comp</span> <span class="id" title="var">R1'</span> <span class="id" title="var">R2'</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">use</span> (<span class="id" title="var">eqax2</span> (<span class="id" title="var">RoofEqclassIs</span> (<span class="id" title="var">RoofEqclassFromRoof</span> (<span class="id" title="var">roof_comp</span> <span class="id" title="var">R1'</span> <span class="id" title="var">R2'</span>)))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">apply</span> <span class="id" title="var">RoofEqclassFromRoofIn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">exact</span> <span class="id" title="var">HR3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <span class="id" title="var">tmp</span>.<br/>
</div>

<br/>
</div>

<div class="doc">
MorMap is linear with respect to composition in D 
</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">MorMap_compose</span> (<span class="id" title="var">D</span> : <span class="id" title="var">precategory</span>) (<span class="id" title="var">hsD</span> : <span class="id" title="var">has_homsets</span> <span class="id" title="var">D</span>) (<span class="id" title="var">F</span> : <span class="id" title="var">functor</span> <span class="id" title="var">C</span> <span class="id" title="var">D</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">H'</span> : ∏ (<span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">C</span>) (<span class="id" title="var">f</span> : <span class="id" title="var">x</span> --&gt; <span class="id" title="var">y</span>) (<span class="id" title="var">s</span> : <span class="id" title="var">SOM</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">f</span>), <span class="id" title="var">is_iso</span> (# <span class="id" title="var">F</span> <span class="id" title="var">f</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">z</span> : <span class="id" title="var">ob</span> <span class="id" title="var">C</span>} (<span class="id" title="var">R1</span> : <span class="id" title="var">Roof</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>) (<span class="id" title="var">R2</span> : <span class="id" title="var">Roof</span> <span class="id" title="var">y</span> <span class="id" title="var">z</span>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">MorMap</span> <span class="id" title="var">D</span> <span class="id" title="var">hsD</span> <span class="id" title="var">F</span> <span class="id" title="var">x</span> <span class="id" title="var">z</span> <span class="id" title="var">H'</span> (<span class="id" title="var">roof_comp</span> <span class="id" title="var">R1</span> <span class="id" title="var">R2</span>) = <span class="id" title="var">MorMap</span> <span class="id" title="var">D</span> <span class="id" title="var">hsD</span> <span class="id" title="var">F</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">H'</span> <span class="id" title="var">R1</span> · <span class="id" title="var">MorMap</span> <span class="id" title="var">D</span> <span class="id" title="var">hsD</span> <span class="id" title="var">F</span> <span class="id" title="var">y</span> <span class="id" title="var">z</span> <span class="id" title="var">H'</span> <span class="id" title="var">R2</span>.<br/>
&nbsp;&nbsp;<a class="proof" href="#">Show proof.</a><br/><div class="proof">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">sqr</span> := <span class="id" title="var">isLocClassSqr2</span> <span class="id" title="var">iLC</span> <span class="id" title="var">R2</span> <span class="id" title="var">R1</span> <span class="id" title="var">y</span> (<span class="id" title="var">RoofMor1</span> <span class="id" title="var">R2</span>) (<span class="id" title="var">RoofMor1Is</span> <span class="id" title="var">R2</span>) (<span class="id" title="var">RoofMor2</span> <span class="id" title="var">R1</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">roof_comp</span>. <span class="id" title="tactic">fold</span> <span class="id" title="var">sqr</span>. <span class="id" title="tactic">unfold</span> <span class="id" title="var">MorMap</span> <span class="id" title="tactic">at</span> 1. <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">iso1</span> := <span class="id" title="var">isopair</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(# <span class="id" title="var">F</span> (<span class="id" title="var">LocSqr2Mor2</span> <span class="id" title="var">sqr</span> · <span class="id" title="var">RoofMor1</span> <span class="id" title="var">R1</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">H'</span> <span class="id" title="var">sqr</span> <span class="id" title="var">x</span> (<span class="id" title="var">LocSqr2Mor2</span> <span class="id" title="var">sqr</span> · <span class="id" title="var">RoofMor1</span> <span class="id" title="var">R1</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">isLocClassComp</span> <span class="id" title="var">iLC</span> <span class="id" title="var">sqr</span> <span class="id" title="var">R1</span> <span class="id" title="var">x</span> (<span class="id" title="var">LocSqr2Mor2</span> <span class="id" title="var">sqr</span>) (<span class="id" title="var">LocSqr2Mor2Is</span> <span class="id" title="var">sqr</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">RoofMor1</span> <span class="id" title="var">R1</span>) (<span class="id" title="var">RoofMor1Is</span> <span class="id" title="var">R1</span>)))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">iso2</span> := <span class="id" title="var">isopair</span> <span class="id" title="var">_</span> (<span class="id" title="var">H'</span> <span class="id" title="var">sqr</span> <span class="id" title="var">R1</span> (<span class="id" title="var">LocSqr2Mor2</span> <span class="id" title="var">sqr</span>) (<span class="id" title="var">LocSqr2Mor2Is</span> <span class="id" title="var">sqr</span>))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">iso3</span> := <span class="id" title="var">isopair</span> <span class="id" title="var">_</span> (<span class="id" title="var">H'</span> <span class="id" title="var">R1</span> <span class="id" title="var">x</span> (<span class="id" title="var">RoofMor1</span> <span class="id" title="var">R1</span>) (<span class="id" title="var">RoofMor1Is</span> <span class="id" title="var">R1</span>))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">iso4</span> := <span class="id" title="var">isopair</span> <span class="id" title="var">_</span> (<span class="id" title="var">H'</span> <span class="id" title="var">R2</span> <span class="id" title="var">y</span> (<span class="id" title="var">RoofMor1</span> <span class="id" title="var">R2</span>) (<span class="id" title="var">RoofMor1Is</span> <span class="id" title="var">R2</span>))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">X</span> : <span class="id" title="var">iso1</span> = <span class="id" title="var">iso_comp</span> <span class="id" title="var">iso2</span> <span class="id" title="var">iso3</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">use</span> <span class="id" title="var">eq_iso</span>. <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">functor_comp</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">idpath</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">X</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">inv_from_iso_comp</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">functor_comp</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">assoc</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">MorMap</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">assoc</span>. <span class="id" title="tactic">fold</span> <span class="id" title="var">iso3</span> <span class="id" title="var">iso4</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">cancel_postcomposition</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">assoc</span>. <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">assoc</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">cancel_precomposition</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">tmp</span> := <span class="id" title="var">LocSqr2Comm</span> <span class="id" title="var">sqr</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">pre_comp_with_iso_is_inj</span> <span class="id" title="var">D</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> (<span class="id" title="var">pr2</span> <span class="id" title="var">iso2</span>)). <span class="id" title="tactic">rewrite</span> <span class="id" title="var">assoc</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">tmp2</span> := <span class="id" title="var">iso_inv_after_iso</span> <span class="id" title="var">iso2</span>). <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">tmp2</span>. <span class="id" title="var">cbn</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">tmp2</span>. <span class="id" title="tactic">clear</span> <span class="id" title="var">tmp2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">id_left</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">post_comp_with_iso_is_inj</span> <span class="id" title="var">D</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> (<span class="id" title="var">pr2</span> <span class="id" title="var">iso4</span>)). <span class="id" title="var">cbn</span>. <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">functor_comp</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">tmp</span>. <span class="id" title="tactic">clear</span> <span class="id" title="var">tmp</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">functor_comp</span>. <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">assoc</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">cancel_precomposition</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">assoc</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">tmp2</span> := <span class="id" title="var">iso_after_iso_inv</span> <span class="id" title="var">iso4</span>). <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">tmp2</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">tmp2</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">id_right</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">idpath</span>.<br/>
</div>

<br/>
</div>

<div class="doc">
Construct a roof representing s^{-1} from a morphism s in SOM 
</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <span class="id" title="var">InvRoofFromMorInSom</span> {<span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">C</span>} (<span class="id" title="var">s</span> : <span class="id" title="var">y</span> --&gt; <span class="id" title="var">x</span>) (<span class="id" title="var">S</span> : <span class="id" title="var">SOM</span> <span class="id" title="var">y</span> <span class="id" title="var">x</span> <span class="id" title="var">s</span>) : <span class="id" title="var">Roof</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>.<br/>
&nbsp;&nbsp;<a class="proof" href="#">Show proof.</a><br/><div class="proof">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">use</span> <span class="id" title="var">mk_Roof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">exact</span> <span class="id" title="var">y</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">exact</span> <span class="id" title="var">s</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">exact</span> (<span class="id" title="var">identity</span> <span class="id" title="var">y</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">exact</span> <span class="id" title="var">S</span>.<br/>
</div>

<br/>
</div>

<div class="doc">
Roof is equivalent to composition of its "components". 
</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <span class="id" title="var">RoofDecomposeEqrel</span> {<span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">C</span>} (<span class="id" title="var">R</span> : <span class="id" title="var">Roof</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">eqrelpair</span> <span class="id" title="var">_</span> (<span class="id" title="var">RoofEqrel</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>)) <span class="id" title="var">R</span> (<span class="id" title="var">roof_comp</span> (<span class="id" title="var">InvRoofFromMorInSom</span> (<span class="id" title="var">RoofMor1</span> <span class="id" title="var">R</span>) (<span class="id" title="var">RoofMor1Is</span> <span class="id" title="var">R</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">MorToRoof</span> (<span class="id" title="var">RoofMor2</span> <span class="id" title="var">R</span>))).<br/>
&nbsp;&nbsp;<a class="proof" href="#">Show proof.</a><br/><div class="proof">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">roof_comp</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">sqr</span> := <span class="id" title="var">isLocClassSqr2</span> <span class="id" title="var">iLC</span> (<span class="id" title="var">MorToRoof</span> (<span class="id" title="var">RoofMor2</span> <span class="id" title="var">R</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">InvRoofFromMorInSom</span> (<span class="id" title="var">RoofMor1</span> <span class="id" title="var">R</span>) (<span class="id" title="var">RoofMor1Is</span> <span class="id" title="var">R</span>)) <span class="id" title="var">R</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">RoofMor1</span> (<span class="id" title="var">MorToRoof</span> (<span class="id" title="var">RoofMor2</span> <span class="id" title="var">R</span>)))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">RoofMor1Is</span> (<span class="id" title="var">MorToRoof</span> (<span class="id" title="var">RoofMor2</span> <span class="id" title="var">R</span>)))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">RoofMor2</span> (<span class="id" title="var">InvRoofFromMorInSom</span> (<span class="id" title="var">RoofMor1</span> <span class="id" title="var">R</span>) (<span class="id" title="var">RoofMor1Is</span> <span class="id" title="var">R</span>)))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">fold</span> <span class="id" title="var">sqr</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">P</span> <span class="id" title="var">X</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">X</span>. <span class="id" title="tactic">clear</span> <span class="id" title="var">X</span> <span class="id" title="var">P</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">use</span> <span class="id" title="var">mk_RoofTop</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">exact</span> <span class="id" title="var">sqr</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">exact</span> (<span class="id" title="var">LocSqr2Mor2</span> <span class="id" title="var">sqr</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">exact</span> (<span class="id" title="var">identity</span> (<span class="id" title="var">sqr</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">use</span> (<span class="id" title="var">isLocClassComp</span> <span class="id" title="var">iLC</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">exact</span> (<span class="id" title="var">LocSqr2Mor2Is</span> <span class="id" title="var">sqr</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">exact</span> (<span class="id" title="var">RoofMor1Is</span> <span class="id" title="var">R</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> <span class="id" title="var">id_left</span>. <span class="id" title="var">cbn</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">idpath</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">cbn</span>. <span class="id" title="tactic">set</span> (<span class="id" title="var">tmp</span> := <span class="id" title="var">LocSqr2Comm</span> <span class="id" title="var">sqr</span>). <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">tmp</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">id_right</span> <span class="id" title="tactic">in</span> <span class="id" title="var">tmp</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">id_right</span> <span class="id" title="tactic">in</span> <span class="id" title="var">tmp</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">id_left</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">tmp</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">idpath</span>.<br/>
</div>

<br/>
</div>

<div class="doc">
Composition of RoofEqclasses is the same as the equivalence class of composition of the
      roofs. 
</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">RoofEqclassCompToRoofComp</span> {<span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">z</span> : <span class="id" title="var">C</span>} (<span class="id" title="var">R1</span> : <span class="id" title="var">Roof</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>) (<span class="id" title="var">R2</span> : <span class="id" title="var">Roof</span> <span class="id" title="var">y</span> <span class="id" title="var">z</span>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;@<span class="id" title="var">compose</span> <span class="id" title="var">loc_precategory</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">z</span> (<span class="id" title="var">RoofEqclassFromRoof</span> <span class="id" title="var">R1</span>) (<span class="id" title="var">RoofEqclassFromRoof</span> <span class="id" title="var">R2</span>) =<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">RoofEqclassFromRoof</span> (<span class="id" title="var">roof_comp</span> <span class="id" title="var">R1</span> <span class="id" title="var">R2</span>)).<br/>
&nbsp;&nbsp;<a class="proof" href="#">Show proof.</a><br/><div class="proof">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">RoofEqclassEqRoof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">pr2</span> (<span class="id" title="var">pr1</span> (<span class="id" title="var">roof_comp_iscontr</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">z</span> (<span class="id" title="var">RoofEqclassFromRoof</span> <span class="id" title="var">R1</span>) (<span class="id" title="var">RoofEqclassFromRoof</span> <span class="id" title="var">R2</span>)))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <span class="id" title="var">RoofEqclassFromRoofIn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <span class="id" title="var">RoofEqclassFromRoofIn</span>.<br/>
</div>

<br/>
</div>

<div class="doc">
Equivalent roofs give rise to the same equivalence class. 
</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">RoofEqClassEq1</span> {<span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">ob</span> <span class="id" title="var">C</span>} (<span class="id" title="var">R1</span> <span class="id" title="var">R2</span> : <span class="id" title="var">Roof</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>) (<span class="id" title="var">H</span> : (<span class="id" title="var">eqrelpair</span> <span class="id" title="var">_</span> (<span class="id" title="var">RoofEqrel</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>)) <span class="id" title="var">R1</span> <span class="id" title="var">R2</span>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">RoofEqclassFromRoof</span> <span class="id" title="var">R1</span>) = (<span class="id" title="var">RoofEqclassFromRoof</span> <span class="id" title="var">R2</span>).<br/>
&nbsp;&nbsp;<a class="proof" href="#">Show proof.</a><br/><div class="proof">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">use</span> <span class="id" title="var">RoofEqclassEq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">R</span> <span class="id" title="var">HR</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">use</span> (<span class="id" title="var">eqax1</span> (<span class="id" title="var">RoofEqclassIs</span> (<span class="id" title="var">RoofEqclassFromRoof</span> <span class="id" title="var">R2</span>))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">exact</span> <span class="id" title="var">R1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">use</span> (<span class="id" title="var">eqax2</span> (<span class="id" title="var">RoofEqclassIs</span> (<span class="id" title="var">RoofEqclassFromRoof</span> <span class="id" title="var">R1</span>))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">exact</span> (<span class="id" title="var">RoofEqclassFromRoofIn</span> <span class="id" title="var">R1</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">exact</span> <span class="id" title="var">HR</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">use</span> (<span class="id" title="var">eqax2</span> (<span class="id" title="var">RoofEqclassIs</span> (<span class="id" title="var">RoofEqclassFromRoof</span> <span class="id" title="var">R2</span>))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">exact</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">exact</span> (<span class="id" title="var">RoofEqclassFromRoofIn</span> <span class="id" title="var">R2</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">R</span> <span class="id" title="var">HR</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">use</span> (<span class="id" title="var">eqax1</span> (<span class="id" title="var">RoofEqclassIs</span> (<span class="id" title="var">RoofEqclassFromRoof</span> <span class="id" title="var">R1</span>))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">exact</span> <span class="id" title="var">R2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">use</span> (<span class="id" title="var">eqax2</span> (<span class="id" title="var">RoofEqclassIs</span> (<span class="id" title="var">RoofEqclassFromRoof</span> <span class="id" title="var">R2</span>))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">exact</span> (<span class="id" title="var">RoofEqclassFromRoofIn</span> <span class="id" title="var">R2</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">exact</span> <span class="id" title="var">HR</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">use</span> (<span class="id" title="var">eqax1</span> (<span class="id" title="var">RoofEqclassIs</span> (<span class="id" title="var">RoofEqclassFromRoof</span> <span class="id" title="var">R1</span>))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">exact</span> <span class="id" title="var">R1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">exact</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">exact</span> (<span class="id" title="var">RoofEqclassFromRoofIn</span> <span class="id" title="var">R1</span>).<br/>
</div>

<br/>
</div>

<div class="doc">
This lemma is used to show that inverse roof composed with roof gives the same equivalence
      class as the IdRoof. 
</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">RoofEqclassCompInvRToId</span> {<span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">ob</span> <span class="id" title="var">C</span>} (<span class="id" title="var">f1</span> : <span class="id" title="var">Roof</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;@<span class="id" title="var">compose</span> <span class="id" title="var">loc_precategory</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">RoofEqclassFromRoof</span> (<span class="id" title="var">InvRoofFromMorInSom</span> (<span class="id" title="var">RoofMor1</span> <span class="id" title="var">f1</span>) (<span class="id" title="var">RoofMor1Is</span> <span class="id" title="var">f1</span>)))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">RoofEqclassFromRoof</span> (<span class="id" title="var">MorToRoof</span> (<span class="id" title="var">RoofMor1</span> <span class="id" title="var">f1</span>))) = (<span class="id" title="var">RoofEqclassFromRoof</span> (<span class="id" title="var">IdRoof</span> <span class="id" title="var">x</span>)).<br/>
&nbsp;&nbsp;<a class="proof" href="#">Show proof.</a><br/><div class="proof">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">R1</span> := (<span class="id" title="var">InvRoofFromMorInSom</span> (<span class="id" title="var">RoofMor1</span> <span class="id" title="var">f1</span>) (<span class="id" title="var">RoofMor1Is</span> <span class="id" title="var">f1</span>))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">R2</span> := (<span class="id" title="var">MorToRoof</span> (<span class="id" title="var">RoofMor1</span> <span class="id" title="var">f1</span>))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">tmp</span> := <span class="id" title="var">pr2</span> (<span class="id" title="var">pr1</span> (<span class="id" title="var">roof_comp_iscontr</span> <span class="id" title="var">x</span> <span class="id" title="var">f1</span> <span class="id" title="var">x</span> (<span class="id" title="var">RoofEqclassFromRoof</span> <span class="id" title="var">R1</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">RoofEqclassFromRoof</span> <span class="id" title="var">R2</span>)))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">tmp</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">use</span> <span class="id" title="var">pathscomp0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">exact</span> (<span class="id" title="var">RoofEqclassFromRoof</span> (<span class="id" title="var">roof_comp</span> <span class="id" title="var">R1</span> <span class="id" title="var">R2</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">use</span> <span class="id" title="var">RoofEqclassEqRoof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">tmp</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <span class="id" title="var">RoofEqclassFromRoofIn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <span class="id" title="var">RoofEqclassFromRoofIn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <span class="id" title="var">RoofEqClassEq1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">P</span> <span class="id" title="var">X</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">X</span>. <span class="id" title="tactic">clear</span> <span class="id" title="var">X</span> <span class="id" title="var">P</span>. <span class="id" title="tactic">clear</span> <span class="id" title="var">tmp</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">roof_comp</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">sqr</span> := (<span class="id" title="var">isLocClassSqr2</span> <span class="id" title="var">iLC</span> <span class="id" title="var">R2</span> <span class="id" title="var">R1</span> <span class="id" title="var">f1</span> (<span class="id" title="var">RoofMor1</span> <span class="id" title="var">R2</span>) (<span class="id" title="var">RoofMor1Is</span> <span class="id" title="var">R2</span>) (<span class="id" title="var">RoofMor2</span> <span class="id" title="var">R1</span>))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">use</span> <span class="id" title="var">mk_RoofTop</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">exact</span> <span class="id" title="var">sqr</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">cbn</span>. <span class="id" title="tactic">exact</span> (<span class="id" title="var">identity</span> <span class="id" title="var">sqr</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">exact</span> (<span class="id" title="var">LocSqr2Mor2</span> <span class="id" title="var">sqr</span> · (<span class="id" title="var">RoofMor1</span> <span class="id" title="var">f1</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">use</span> (<span class="id" title="var">isLocClassComp</span> <span class="id" title="var">iLC</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">exact</span> (<span class="id" title="var">isLocClassIs</span> <span class="id" title="var">iLC</span> <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">exact</span> (<span class="id" title="var">RoofMor1Is</span> <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">rewrite</span> <span class="id" title="var">id_left</span>. <span class="id" title="var">cbn</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">id_right</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">idpath</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">rewrite</span> <span class="id" title="var">id_left</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">id_right</span>. <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">tmp</span> := <span class="id" title="var">LocSqr2Comm</span> <span class="id" title="var">sqr</span>). <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">tmp</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">id_right</span> <span class="id" title="tactic">in</span> <span class="id" title="var">tmp</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">id_right</span> <span class="id" title="tactic">in</span> <span class="id" title="var">tmp</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">tmp</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">idpath</span>.<br/>
</div>

<br/>
</div>

<div class="doc">
This lemma shows that the equivalence class of roofs induced by a roof R is equal to the
      equivalence class of roofs induced by composition of roofs (InvRoof (RoofMor1 R)) and
      (MorToRoof (RoofMor2 R)) 
</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">RoofEqclassToRoofComp</span> {<span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">ob</span> <span class="id" title="var">C</span>} (<span class="id" title="var">R</span> : <span class="id" title="var">Roof</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">RoofEqclassFromRoof</span> <span class="id" title="var">R</span> =<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">RoofEqclassFromRoof</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">roof_comp</span> (<span class="id" title="var">InvRoofFromMorInSom</span> (<span class="id" title="var">RoofMor1</span> <span class="id" title="var">R</span>) (<span class="id" title="var">RoofMor1Is</span> <span class="id" title="var">R</span>)) (<span class="id" title="var">MorToRoof</span> (<span class="id" title="var">RoofMor2</span> <span class="id" title="var">R</span>))).<br/>
&nbsp;&nbsp;<a class="proof" href="#">Show proof.</a><br/><div class="proof">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">use</span> <span class="id" title="var">RoofEqclassEqRoof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">use</span> (<span class="id" title="var">eqax1</span> (<span class="id" title="var">RoofEqclassIs</span> (<span class="id" title="var">RoofEqclassFromRoof</span> <span class="id" title="var">R</span>))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">exact</span> <span class="id" title="var">R</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">exact</span> (<span class="id" title="var">RoofDecomposeEqrel</span> <span class="id" title="var">R</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <span class="id" title="var">RoofEqclassFromRoofIn</span>.<br/>
</div>
&nbsp;&nbsp;<span class="id" title="keyword">Opaque</span> <span class="id" title="var">RoofEqclassToRoofComp</span>.<br/>

<br/>
</div>

<div class="doc">
This lemma is used to show that the localization functor <span class="inlinecode"><span class="id" title="var">LocalizationUniversalFunctor</span></span> is
      indeed a functor. 
</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">LocalizationUniversalFunctor_isfunctor</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">D</span> : <span class="id" title="var">precategory</span>) (<span class="id" title="var">hsD</span> : <span class="id" title="var">has_homsets</span> <span class="id" title="var">D</span>) (<span class="id" title="var">F</span> : <span class="id" title="var">functor</span> <span class="id" title="var">C</span> <span class="id" title="var">D</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">H'</span> : ∏ (<span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">C</span>) (<span class="id" title="var">f</span> : <span class="id" title="var">x</span> --&gt; <span class="id" title="var">y</span>) (<span class="id" title="var">s</span> : <span class="id" title="var">SOM</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">f</span>), <span class="id" title="var">is_iso</span> (# <span class="id" title="var">F</span> <span class="id" title="var">f</span>)) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;@<span class="id" title="var">is_functor</span> <span class="id" title="var">loc_precategory_data</span> <span class="id" title="var">D</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">functor_data_constr</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">loc_precategory_ob_mor</span> <span class="id" title="var">D</span> (<span class="id" title="var">λ</span> <span class="id" title="var">x</span> : <span class="id" title="var">C</span>, <span class="id" title="var">F</span> <span class="id" title="var">x</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">λ</span> (<span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">C</span>) (<span class="id" title="var">eqclass</span> : <span class="id" title="var">RoofEqclass</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">pr1</span> (<span class="id" title="var">pr1</span> (<span class="id" title="var">MorMap_iscontr</span> <span class="id" title="var">D</span> <span class="id" title="var">hsD</span> <span class="id" title="var">F</span> <span class="id" title="var">H'</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">eqclass</span>)))).<br/>
&nbsp;&nbsp;<a class="proof" href="#">Show proof.</a><br/><div class="proof">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">x</span>. <span class="id" title="var">cbn</span>. <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">tmp</span> := <span class="id" title="var">pr2</span> (<span class="id" title="var">pr1</span> (<span class="id" title="var">MorMap_iscontr</span> <span class="id" title="var">D</span> <span class="id" title="var">hsD</span> <span class="id" title="var">F</span> <span class="id" title="var">H'</span> <span class="id" title="var">x</span> <span class="id" title="var">x</span> (<span class="id" title="var">IdRoofEqclass</span> <span class="id" title="var">x</span>))) (<span class="id" title="var">IdRoof</span> <span class="id" title="var">x</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">H2</span> : <span class="id" title="var">MorMap</span> <span class="id" title="var">D</span> <span class="id" title="var">hsD</span> <span class="id" title="var">F</span> <span class="id" title="var">x</span> <span class="id" title="var">x</span> <span class="id" title="var">H'</span> (<span class="id" title="var">IdRoof</span> <span class="id" title="var">x</span>) = <span class="id" title="var">identity</span> (<span class="id" title="var">F</span> <span class="id" title="var">x</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">MorMap</span>. <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">iso</span> := <span class="id" title="var">isopair</span> <span class="id" title="var">_</span> (<span class="id" title="var">H'</span> <span class="id" title="var">x</span> <span class="id" title="var">x</span> (<span class="id" title="var">identity</span> <span class="id" title="var">x</span>) (<span class="id" title="var">isLocClassIs</span> <span class="id" title="var">iLC</span> <span class="id" title="var">x</span>))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">tmpp</span> := <span class="id" title="var">iso_after_iso_inv</span> <span class="id" title="var">iso</span>). <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">tmpp</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">tmpp</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">use</span> (<span class="id" title="var">pathscomp0</span> <span class="id" title="var">_</span> <span class="id" title="var">H2</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">tmp</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">RoofEqclassFromRoofIn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">z</span> <span class="id" title="var">R1</span> <span class="id" title="var">R2</span>. <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">use</span> (<span class="id" title="var">squash_to_prop</span> (<span class="id" title="var">pr1</span> (<span class="id" title="var">RoofEqclassIs</span> <span class="id" title="var">R1</span>))). <span class="id" title="tactic">apply</span> <span class="id" title="var">hsD</span>. <span class="id" title="tactic">intros</span> <span class="id" title="var">R1'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">R1'</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">R1'</span> <span class="id" title="var">R1''</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">use</span> (<span class="id" title="var">squash_to_prop</span> (<span class="id" title="var">pr1</span> (<span class="id" title="var">RoofEqclassIs</span> <span class="id" title="var">R2</span>))). <span class="id" title="tactic">apply</span> <span class="id" title="var">hsD</span>. <span class="id" title="tactic">intros</span> <span class="id" title="var">R2'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">R2'</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">R2'</span> <span class="id" title="var">R2''</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="var">MorMap_iscontr_eq</span> <span class="id" title="var">D</span> <span class="id" title="var">hsD</span> <span class="id" title="var">F</span> <span class="id" title="var">H'</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">R1</span> <span class="id" title="var">R1'</span> <span class="id" title="var">R1''</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="var">MorMap_iscontr_eq</span> <span class="id" title="var">D</span> <span class="id" title="var">hsD</span> <span class="id" title="var">F</span> <span class="id" title="var">H'</span> <span class="id" title="var">y</span> <span class="id" title="var">z</span> <span class="id" title="var">R2</span> <span class="id" title="var">R2'</span> <span class="id" title="var">R2''</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="var">roof_comp_iscontr_eqclass</span> <span class="id" title="var">R1</span> <span class="id" title="var">R2</span> <span class="id" title="var">R1'</span> <span class="id" title="var">R1''</span> <span class="id" title="var">R2'</span> <span class="id" title="var">R2''</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">tmp</span> := <span class="id" title="var">pr2</span> (<span class="id" title="var">pr1</span> (<span class="id" title="var">MorMap_iscontr</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">D</span> <span class="id" title="var">hsD</span> <span class="id" title="var">F</span> <span class="id" title="var">H'</span> <span class="id" title="var">x</span> <span class="id" title="var">z</span> (<span class="id" title="var">RoofEqclassFromRoof</span> (<span class="id" title="var">roof_comp</span> <span class="id" title="var">R1'</span> <span class="id" title="var">R2'</span>))))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">roof_comp</span> <span class="id" title="var">R1'</span> <span class="id" title="var">R2'</span>) (<span class="id" title="var">RoofEqclassFromRoofIn</span> (<span class="id" title="var">roof_comp</span> <span class="id" title="var">R1'</span> <span class="id" title="var">R2'</span>))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">tmp</span>. <span class="id" title="tactic">clear</span> <span class="id" title="var">tmp</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">MorMap_compose</span>.<br/>
</div>

<br/>
</div>

<div class="doc">
The universal functor which we use to factor F through loc_precategory 
</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <span class="id" title="var">LocalizationUniversalFunctor</span> (<span class="id" title="var">D</span> : <span class="id" title="var">precategory</span>) (<span class="id" title="var">hsD</span> : <span class="id" title="var">has_homsets</span> <span class="id" title="var">D</span>) (<span class="id" title="var">F</span> : <span class="id" title="var">functor</span> <span class="id" title="var">C</span> <span class="id" title="var">D</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">H'</span> : ∏ (<span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">C</span>) (<span class="id" title="var">f</span> : <span class="id" title="var">x</span> --&gt; <span class="id" title="var">y</span>) (<span class="id" title="var">s</span> : <span class="id" title="var">SOM</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">f</span>), <span class="id" title="var">is_iso</span> (# <span class="id" title="var">F</span> <span class="id" title="var">f</span>)) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">functor</span> <span class="id" title="var">loc_precategory</span> <span class="id" title="var">D</span>.<br/>
&nbsp;&nbsp;<a class="proof" href="#">Show proof.</a><br/><div class="proof">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">use</span> <span class="id" title="var">mk_functor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">use</span> <span class="id" title="var">functor_data_constr</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">intros</span> <span class="id" title="var">x</span>. <span class="id" title="tactic">exact</span> (<span class="id" title="var">F</span> <span class="id" title="var">x</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">intros</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">eqclass</span>. <span class="id" title="tactic">apply</span> (<span class="id" title="var">pr1</span> (<span class="id" title="var">pr1</span> (<span class="id" title="var">MorMap_iscontr</span> <span class="id" title="var">D</span> <span class="id" title="var">hsD</span> <span class="id" title="var">F</span> <span class="id" title="var">H'</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">eqclass</span>))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">exact</span> (<span class="id" title="var">LocalizationUniversalFunctor_isfunctor</span> <span class="id" title="var">D</span> <span class="id" title="var">hsD</span> <span class="id" title="var">F</span> <span class="id" title="var">H'</span>).<br/>
</div>

<br/>
</div>

<div class="doc">
We show that LocalizationUniversalFunctor satisfies the commutativity required for the
      universal functor. 
</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <span class="id" title="var">LocalizationUniversalFunctorComm</span> (<span class="id" title="var">D</span> : <span class="id" title="var">precategory</span>) (<span class="id" title="var">hsD</span> : <span class="id" title="var">has_homsets</span> <span class="id" title="var">D</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">F</span> : <span class="id" title="var">functor</span> <span class="id" title="var">C</span> <span class="id" title="var">D</span>) (<span class="id" title="var">H'</span> : ∏ (<span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">C</span>) (<span class="id" title="var">f</span> : <span class="id" title="var">x</span> --&gt; <span class="id" title="var">y</span>) (<span class="id" title="var">s</span> : <span class="id" title="var">SOM</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">f</span>), <span class="id" title="var">is_iso</span> (# <span class="id" title="var">F</span> <span class="id" title="var">f</span>)) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">functor_composite</span> <span class="id" title="var">FunctorToLocalization</span> (<span class="id" title="var">LocalizationUniversalFunctor</span> <span class="id" title="var">D</span> <span class="id" title="var">hsD</span> <span class="id" title="var">F</span> <span class="id" title="var">H'</span>) = <span class="id" title="var">F</span>.<br/>
&nbsp;&nbsp;<a class="proof" href="#">Show proof.</a><br/><div class="proof">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">use</span> (<span class="id" title="var">functor_eq</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">hsD</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">use</span> <span class="id" title="var">total2_paths_f</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <span class="id" title="var">idpath</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">use</span> <span class="id" title="var">funextsec</span>. <span class="id" title="tactic">intros</span> <span class="id" title="var">a</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">use</span> <span class="id" title="var">funextsec</span>. <span class="id" title="tactic">intros</span> <span class="id" title="var">b</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">use</span> <span class="id" title="var">funextsec</span>. <span class="id" title="tactic">intros</span> <span class="id" title="var">f</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">use</span> (<span class="id" title="var">pathscomp0</span> (<span class="id" title="var">MorMap_iscontr_eq</span> <span class="id" title="var">D</span> <span class="id" title="var">hsD</span> <span class="id" title="var">F</span> <span class="id" title="var">H'</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span> (<span class="id" title="var">RoofEqclassFromRoof</span> (<span class="id" title="var">MorToRoof</span> <span class="id" title="var">f</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">MorToRoof</span> <span class="id" title="var">f</span>) (<span class="id" title="var">RoofEqclassFromRoofIn</span> <span class="id" title="var">_</span>))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">MorToRoof</span>. <span class="id" title="tactic">unfold</span> <span class="id" title="var">MorMap</span>. <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">iso</span> := (<span class="id" title="var">isopair</span> (# <span class="id" title="var">F</span> (<span class="id" title="var">identity</span> <span class="id" title="var">a</span>)) (<span class="id" title="var">H'</span> <span class="id" title="var">a</span> <span class="id" title="var">a</span> (<span class="id" title="var">identity</span> <span class="id" title="var">a</span>) (<span class="id" title="var">isLocClassIs</span> <span class="id" title="var">iLC</span> <span class="id" title="var">a</span>)))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">X</span> : <span class="id" title="var">iso</span> = <span class="id" title="var">identity_iso</span> (<span class="id" title="var">F</span> <span class="id" title="var">a</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">use</span> <span class="id" title="var">eq_iso</span>. <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">functor_id</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">idpath</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">X</span>. <span class="id" title="var">cbn</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">id_left</span>.<br/>
</div>

<br/>
</div>

<div class="doc">
This lemma shows uniqueness of the functor LocalizationUniversalFunctor 
</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">LocalizationUniversalFunctorUnique</span> (<span class="id" title="var">D</span> : <span class="id" title="var">precategory</span>) (<span class="id" title="var">hsD</span> : <span class="id" title="var">has_homsets</span> <span class="id" title="var">D</span>) (<span class="id" title="var">F</span> : <span class="id" title="var">functor</span> <span class="id" title="var">C</span> <span class="id" title="var">D</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">H'</span> : ∏ (<span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">C</span>) (<span class="id" title="var">f</span> : <span class="id" title="var">C</span> ⟦ <span class="id" title="var">x</span>, <span class="id" title="var">y</span> ⟧), <span class="id" title="var">SOM</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">f</span> → <span class="id" title="var">is_iso</span> (# <span class="id" title="var">F</span> <span class="id" title="var">f</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">y</span> : <span class="id" title="var">functor</span> <span class="id" title="var">loc_precategory</span> <span class="id" title="var">D</span>) (<span class="id" title="var">T</span> : <span class="id" title="var">functor_composite</span> <span class="id" title="var">FunctorToLocalization</span> <span class="id" title="var">y</span> = <span class="id" title="var">F</span>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">y</span> = (<span class="id" title="var">LocalizationUniversalFunctor</span> <span class="id" title="var">D</span> <span class="id" title="var">hsD</span> <span class="id" title="var">F</span> <span class="id" title="var">H'</span>).<br/>
&nbsp;&nbsp;<a class="proof" href="#">Show proof.</a><br/><div class="proof">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">use</span> (<span class="id" title="var">functor_eq</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">hsD</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">use</span> <span class="id" title="var">total2_paths_f</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">induction</span> <span class="id" title="var">T</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">idpath</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">use</span> <span class="id" title="var">funextsec</span>. <span class="id" title="tactic">intros</span> <span class="id" title="var">a</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">use</span> <span class="id" title="var">funextsec</span>. <span class="id" title="tactic">intros</span> <span class="id" title="var">b</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">use</span> <span class="id" title="var">funextsec</span>. <span class="id" title="tactic">intros</span> <span class="id" title="var">f</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">T</span>. <span class="id" title="var">cbn</span>. <span class="id" title="tactic">unfold</span> <span class="id" title="var">idfun</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">use</span> (<span class="id" title="var">squash_to_prop</span> (<span class="id" title="var">pr1</span> (<span class="id" title="var">RoofEqclassIs</span> <span class="id" title="var">f</span>))). <span class="id" title="tactic">apply</span> <span class="id" title="var">hsD</span>. <span class="id" title="tactic">intros</span> <span class="id" title="var">f'</span>. <span class="id" title="tactic">induction</span> <span class="id" title="var">f'</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">f1</span> <span class="id" title="var">f2</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="var">RoofEqclassEqRoof</span> <span class="id" title="var">f</span> <span class="id" title="var">f1</span> <span class="id" title="var">f2</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">use</span> (<span class="id" title="var">pathscomp0</span> <span class="id" title="var">_</span> (! (<span class="id" title="var">pr2</span> (<span class="id" title="var">pr1</span> (<span class="id" title="var">MorMap_iscontr</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">D</span> <span class="id" title="var">hsD</span> (<span class="id" title="var">functor_composite</span> <span class="id" title="var">FunctorToLocalization</span> <span class="id" title="var">y</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">H'</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span> (<span class="id" title="var">RoofEqclassFromRoof</span> <span class="id" title="var">f1</span>)))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">f1</span> (<span class="id" title="var">RoofEqclassFromRoofIn</span> <span class="id" title="var">f1</span>)))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="var">RoofEqclassToRoofComp</span> <span class="id" title="var">f1</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- (<span class="id" title="var">RoofEqclassCompToRoofComp</span> (<span class="id" title="var">InvRoofFromMorInSom</span> (<span class="id" title="var">RoofMor1</span> <span class="id" title="var">f1</span>) (<span class="id" title="var">RoofMor1Is</span> <span class="id" title="var">f1</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">MorToRoof</span> (<span class="id" title="var">RoofMor2</span> <span class="id" title="var">f1</span>))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">use</span> (<span class="id" title="var">pathscomp0</span> (@<span class="id" title="var">functor_comp</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">loc_precategory</span> <span class="id" title="var">D</span> <span class="id" title="var">y</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">RoofEqclassFromRoof</span> (<span class="id" title="var">InvRoofFromMorInSom</span> (<span class="id" title="var">RoofMor1</span> <span class="id" title="var">f1</span>) (<span class="id" title="var">RoofMor1Is</span> <span class="id" title="var">f1</span>)))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">RoofEqclassFromRoof</span> (<span class="id" title="var">MorToRoof</span> (<span class="id" title="var">RoofMor2</span> <span class="id" title="var">f1</span>))))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">functor_composite</span>. <span class="id" title="var">cbn</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">cancel_postcomposition</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">iso1</span> := <span class="id" title="var">isopair</span> <span class="id" title="var">_</span> (<span class="id" title="var">H'</span> <span class="id" title="var">f1</span> <span class="id" title="var">a</span> (<span class="id" title="var">RoofMor1</span> <span class="id" title="var">f1</span>) (<span class="id" title="var">RoofMor1Is</span> <span class="id" title="var">f1</span>))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">post_comp_with_iso_is_inj</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> (<span class="id" title="var">pr2</span> <span class="id" title="var">iso1</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">use</span> (<span class="id" title="var">pathscomp0</span> <span class="id" title="var">_</span> (! (<span class="id" title="var">iso_after_iso_inv</span> <span class="id" title="var">iso1</span>))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">iso1</span>. <span class="id" title="tactic">clear</span> <span class="id" title="var">iso1</span>. <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">tmp</span> := @<span class="id" title="var">functor_comp</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">loc_precategory</span> <span class="id" title="var">D</span> <span class="id" title="var">y</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">RoofEqclassFromRoof</span> (<span class="id" title="var">InvRoofFromMorInSom</span> (<span class="id" title="var">RoofMor1</span> <span class="id" title="var">f1</span>) (<span class="id" title="var">RoofMor1Is</span> <span class="id" title="var">f1</span>)))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">RoofEqclassFromRoof</span> (<span class="id" title="var">MorToRoof</span> (<span class="id" title="var">RoofMor1</span> <span class="id" title="var">f1</span>)))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">functor_on_morphisms</span> <span class="id" title="tactic">in</span> <span class="id" title="var">tmp</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">pathsinv0</span> <span class="id" title="tactic">in</span> <span class="id" title="var">tmp</span>. <span class="id" title="var">use</span> (<span class="id" title="var">pathscomp0</span> <span class="id" title="var">tmp</span>). <span class="id" title="tactic">clear</span> <span class="id" title="var">tmp</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">RoofEqclassCompInvRToId</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (@<span class="id" title="var">functor_id</span> <span class="id" title="var">loc_precategory</span> <span class="id" title="var">D</span> <span class="id" title="var">y</span>).<br/>
</div>

<br/>
</div>

<div class="doc">
The following lemma only applies when the objects of D satisfy isaset. 
</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">LocalizationUniversalProperty</span> (<span class="id" title="var">D</span> : <span class="id" title="var">precategory</span>) (<span class="id" title="var">hsD</span> : <span class="id" title="var">has_homsets</span> <span class="id" title="var">D</span>) (<span class="id" title="var">hssD</span> : <span class="id" title="var">isaset</span> <span class="id" title="var">D</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">F</span> : <span class="id" title="var">functor</span> <span class="id" title="var">C</span> <span class="id" title="var">D</span>) (<span class="id" title="var">H'</span> : ∏ (<span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">C</span>) (<span class="id" title="var">f</span> : <span class="id" title="var">x</span> --&gt; <span class="id" title="var">y</span>) (<span class="id" title="var">s</span> : <span class="id" title="var">SOM</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">f</span>), <span class="id" title="var">is_iso</span> (# <span class="id" title="var">F</span> <span class="id" title="var">f</span>)) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iscontr</span> (∑ <span class="id" title="var">H</span> : <span class="id" title="var">functor</span> <span class="id" title="var">loc_precategory</span> <span class="id" title="var">D</span>, <span class="id" title="var">functor_composite</span> <span class="id" title="var">FunctorToLocalization</span> <span class="id" title="var">H</span> = <span class="id" title="var">F</span>).<br/>
&nbsp;&nbsp;<a class="proof" href="#">Show proof.</a><br/><div class="proof">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">use</span> <span class="id" title="var">unique_exists</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">exact</span> (<span class="id" title="var">LocalizationUniversalFunctor</span> <span class="id" title="var">D</span> <span class="id" title="var">hsD</span> <span class="id" title="var">F</span> <span class="id" title="var">H'</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">exact</span> (<span class="id" title="var">LocalizationUniversalFunctorComm</span> <span class="id" title="var">D</span> <span class="id" title="var">hsD</span> <span class="id" title="var">F</span> <span class="id" title="var">H'</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">y</span>. <span class="id" title="tactic">apply</span> (<span class="id" title="var">functor_isaset</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">hsD</span> <span class="id" title="var">hssD</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">exact</span> (<span class="id" title="var">LocalizationUniversalFunctorUnique</span> <span class="id" title="var">D</span> <span class="id" title="var">hsD</span> <span class="id" title="var">F</span> <span class="id" title="var">H'</span>).<br/>
</div>
&nbsp;&nbsp;<span class="id" title="keyword">Opaque</span> <span class="id" title="var">LocalizationUniversalProperty</span>.<br/>

<br/>
</div>

<div class="doc">
The functor FunctorToLocalization maps morphisms in SOM to isomorphisms 
</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <span class="id" title="var">FunctorToLocalization_is_iso</span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;∏ (<span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">C</span>) (<span class="id" title="var">f</span> : <span class="id" title="var">x</span> --&gt; <span class="id" title="var">y</span>) (<span class="id" title="var">s</span> : <span class="id" title="var">SOM</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">f</span>), <span class="id" title="var">is_iso</span> (# <span class="id" title="var">FunctorToLocalization</span> <span class="id" title="var">f</span>).<br/>
&nbsp;&nbsp;<a class="proof" href="#">Show proof.</a><br/><div class="proof">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">f</span> <span class="id" title="var">s</span>. <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">use</span> (@<span class="id" title="var">is_iso_qinv</span> <span class="id" title="var">loc_precategory</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">exact</span> (<span class="id" title="var">RoofEqclassFromRoof</span> (<span class="id" title="var">InvRoofFromMorInSom</span> <span class="id" title="var">f</span> <span class="id" title="var">s</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">set</span> (<span class="id" title="var">sqr</span> := <span class="id" title="var">isLocClassSqr2</span> <span class="id" title="var">iLC</span> (<span class="id" title="var">InvRoofFromMorInSom</span> <span class="id" title="var">f</span> <span class="id" title="var">s</span>) (<span class="id" title="var">MorToRoof</span> <span class="id" title="var">f</span>) <span class="id" title="var">y</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">RoofMor1</span> (<span class="id" title="var">InvRoofFromMorInSom</span> <span class="id" title="var">f</span> <span class="id" title="var">s</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">RoofMor1Is</span> (<span class="id" title="var">InvRoofFromMorInSom</span> <span class="id" title="var">f</span> <span class="id" title="var">s</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">RoofMor2</span> (<span class="id" title="var">MorToRoof</span> <span class="id" title="var">f</span>))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">PostS</span> := <span class="id" title="var">isLocClassPost</span> <span class="id" title="var">iLC</span> <span class="id" title="var">sqr</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> (<span class="id" title="var">LocSqr2Mor2</span> <span class="id" title="var">sqr</span>) (<span class="id" title="var">LocSqr2Mor1</span> <span class="id" title="var">sqr</span>) <span class="id" title="var">f</span> <span class="id" title="var">s</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(! (<span class="id" title="var">LocSqr2Comm</span> <span class="id" title="var">sqr</span>))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">RoofEqclassCompToRoofComp</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">use</span> <span class="id" title="var">RoofEqClassEq1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">P</span> <span class="id" title="var">X</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">X</span>. <span class="id" title="tactic">clear</span> <span class="id" title="var">X</span> <span class="id" title="var">P</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">roof_comp</span>. <span class="id" title="tactic">fold</span> <span class="id" title="var">sqr</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">use</span> <span class="id" title="var">mk_RoofTop</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">exact</span> <span class="id" title="var">PostS</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">exact</span> (<span class="id" title="var">PostSwitchMor</span> <span class="id" title="var">PostS</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">exact</span> (<span class="id" title="var">PostSwitchMor</span> <span class="id" title="var">PostS</span> · <span class="id" title="var">LocSqr2Mor2</span> <span class="id" title="var">sqr</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="var">use</span> (<span class="id" title="var">isLocClassComp</span> <span class="id" title="var">iLC</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-- <span class="id" title="tactic">exact</span> (<span class="id" title="var">PostSwitchMorIs</span> <span class="id" title="var">PostS</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-- <span class="id" title="var">use</span> (<span class="id" title="var">isLocClassComp</span> <span class="id" title="var">iLC</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;++ <span class="id" title="tactic">exact</span> (<span class="id" title="var">LocSqr2Mor2Is</span> <span class="id" title="var">sqr</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;++ <span class="id" title="tactic">exact</span> (<span class="id" title="var">isLocClassIs</span> <span class="id" title="var">iLC</span> <span class="id" title="var">x</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="var">cbn</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">assoc</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">idpath</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="var">cbn</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">assoc</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">id_right</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">id_right</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exact</span> (! (<span class="id" title="var">PostSwitchEq</span> <span class="id" title="var">PostS</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">set</span> (<span class="id" title="var">sqr</span> := <span class="id" title="var">isLocClassSqr2</span> <span class="id" title="var">iLC</span> (<span class="id" title="var">MorToRoof</span> <span class="id" title="var">f</span>) (<span class="id" title="var">InvRoofFromMorInSom</span> <span class="id" title="var">f</span> <span class="id" title="var">s</span>) <span class="id" title="var">x</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">RoofMor1</span> (<span class="id" title="var">MorToRoof</span> <span class="id" title="var">f</span>)) (<span class="id" title="var">RoofMor1Is</span> (<span class="id" title="var">MorToRoof</span> <span class="id" title="var">f</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">RoofMor2</span> (<span class="id" title="var">InvRoofFromMorInSom</span> <span class="id" title="var">f</span> <span class="id" title="var">s</span>))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">RoofEqclassCompToRoofComp</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">use</span> <span class="id" title="var">RoofEqClassEq1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">P</span> <span class="id" title="var">X</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">X</span>. <span class="id" title="tactic">clear</span> <span class="id" title="var">X</span> <span class="id" title="var">P</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">roof_comp</span>. <span class="id" title="tactic">fold</span> <span class="id" title="var">sqr</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">use</span> <span class="id" title="var">mk_RoofTop</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">exact</span> <span class="id" title="var">sqr</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">exact</span> (<span class="id" title="var">identity</span> <span class="id" title="var">sqr</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">exact</span> (<span class="id" title="var">LocSqr2Mor2</span> <span class="id" title="var">sqr</span> · <span class="id" title="var">f</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="var">use</span> (<span class="id" title="var">isLocClassComp</span> <span class="id" title="var">iLC</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-- <span class="id" title="tactic">exact</span> (<span class="id" title="var">isLocClassIs</span> <span class="id" title="var">iLC</span> <span class="id" title="var">sqr</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-- <span class="id" title="var">use</span> (<span class="id" title="var">isLocClassComp</span> <span class="id" title="var">iLC</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;++ <span class="id" title="tactic">exact</span> (<span class="id" title="var">LocSqr2Mor2Is</span> <span class="id" title="var">sqr</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;++ <span class="id" title="tactic">exact</span> <span class="id" title="var">s</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">rewrite</span> <span class="id" title="var">id_left</span>. <span class="id" title="var">cbn</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">id_right</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">idpath</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">rewrite</span> <span class="id" title="var">id_left</span>. <span class="id" title="var">cbn</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">id_right</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">tmp</span> := <span class="id" title="var">LocSqr2Comm</span> <span class="id" title="var">sqr</span>). <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">tmp</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">id_right</span> <span class="id" title="tactic">in</span> <span class="id" title="var">tmp</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">id_right</span> <span class="id" title="tactic">in</span> <span class="id" title="var">tmp</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">tmp</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">idpath</span>.<br/>
</div>

<br/>
</div>

<div class="doc">
Localization of categories is unique up to isomorphism of categories and loc_precategory is
      one such precategory. 
</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">LocalizationUniversalCategory</span> (<span class="id" title="var">CC</span> : <span class="id" title="var">precategory</span>) (<span class="id" title="var">hss</span> : <span class="id" title="var">has_homsets</span> <span class="id" title="var">CC</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">In</span> : <span class="id" title="var">functor</span> <span class="id" title="var">C</span> <span class="id" title="var">CC</span>) (<span class="id" title="var">H'</span> : ∏ (<span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">C</span>) (<span class="id" title="var">f</span> : <span class="id" title="var">x</span> --&gt; <span class="id" title="var">y</span>) (<span class="id" title="var">s</span> : <span class="id" title="var">SOM</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">f</span>), <span class="id" title="var">is_iso</span> (# <span class="id" title="var">In</span> <span class="id" title="var">f</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">HH</span> : ∏ (<span class="id" title="var">D</span> : <span class="id" title="var">precategory</span>) (<span class="id" title="var">hsD</span> : <span class="id" title="var">has_homsets</span> <span class="id" title="var">D</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">F</span> : <span class="id" title="var">functor</span> <span class="id" title="var">C</span> <span class="id" title="var">D</span>) (<span class="id" title="var">H'</span> : ∏ (<span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">C</span>) (<span class="id" title="var">f</span> : <span class="id" title="var">x</span> --&gt; <span class="id" title="var">y</span>) (<span class="id" title="var">s</span> : <span class="id" title="var">SOM</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">f</span>), <span class="id" title="var">is_iso</span> (# <span class="id" title="var">F</span> <span class="id" title="var">f</span>)),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;∑ <span class="id" title="var">HH</span> : <span class="id" title="var">functor</span> <span class="id" title="var">CC</span> <span class="id" title="var">D</span>, (<span class="id" title="var">functor_composite</span> <span class="id" title="var">In</span> <span class="id" title="var">HH</span> = <span class="id" title="var">F</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;× (∏ (<span class="id" title="var">yy</span> : <span class="id" title="var">functor</span> <span class="id" title="var">CC</span> <span class="id" title="var">D</span>) (<span class="id" title="var">comm</span> : <span class="id" title="var">functor_composite</span> <span class="id" title="var">In</span> <span class="id" title="var">yy</span> = <span class="id" title="var">F</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">yy</span> = <span class="id" title="var">HH</span>)) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;∑ <span class="id" title="var">D</span> : (<span class="id" title="var">functor</span> <span class="id" title="var">CC</span> <span class="id" title="var">loc_precategory</span> × <span class="id" title="var">functor</span> <span class="id" title="var">loc_precategory</span> <span class="id" title="var">CC</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">functor_composite</span> (<span class="id" title="var">dirprod_pr1</span> <span class="id" title="var">D</span>) (<span class="id" title="var">dirprod_pr2</span> <span class="id" title="var">D</span>) = (<span class="id" title="var">functor_identity</span> <span class="id" title="var">_</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;× (<span class="id" title="var">functor_composite</span> (<span class="id" title="var">dirprod_pr2</span> <span class="id" title="var">D</span>) (<span class="id" title="var">dirprod_pr1</span> <span class="id" title="var">D</span>) = (<span class="id" title="var">functor_identity</span> <span class="id" title="var">_</span>)).<br/>
&nbsp;&nbsp;<a class="proof" href="#">Show proof.</a><br/><div class="proof">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">comm1</span> := <span class="id" title="var">LocalizationUniversalFunctorComm</span> <span class="id" title="var">CC</span> <span class="id" title="var">hss</span> <span class="id" title="var">In</span> <span class="id" title="var">H'</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">tmp</span> := <span class="id" title="var">HH</span> <span class="id" title="var">loc_precategory</span> <span class="id" title="var">has_homsets_loc_precategory</span> <span class="id" title="var">FunctorToLocalization</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">FunctorToLocalization_is_iso</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">tmp</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">inv1</span> <span class="id" title="var">p</span>]. <span class="id" title="tactic">induction</span> <span class="id" title="var">p</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">comm2</span> <span class="id" title="var">unique2</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">inv2</span> := (<span class="id" title="var">LocalizationUniversalFunctor</span> <span class="id" title="var">CC</span> <span class="id" title="var">hss</span> <span class="id" title="var">In</span> <span class="id" title="var">H'</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">use</span> <span class="id" title="var">tpair</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">use</span> <span class="id" title="var">dirprodpair</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">exact</span> <span class="id" title="var">inv1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">exact</span> <span class="id" title="var">inv2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">use</span> <span class="id" title="var">dirprodpair</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">comm2</span> <span class="id" title="tactic">in</span> <span class="id" title="var">comm1</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">functor_assoc</span> <span class="id" title="tactic">in</span> <span class="id" title="var">comm1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">tmp</span> := <span class="id" title="var">HH</span> <span class="id" title="var">CC</span> <span class="id" title="var">hss</span> <span class="id" title="var">In</span> <span class="id" title="var">H'</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">tmp</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">F'</span> <span class="id" title="var">CC2</span>]. <span class="id" title="tactic">induction</span> <span class="id" title="var">CC2</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">comm3</span> <span class="id" title="var">unique3</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">tmp1</span> := <span class="id" title="var">unique3</span> (<span class="id" title="var">functor_identity</span> <span class="id" title="var">CC</span>) (<span class="id" title="var">functor_identity_right</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">tmp2</span> := <span class="id" title="var">unique3</span> (<span class="id" title="var">functor_composite</span> <span class="id" title="var">inv1</span> (<span class="id" title="var">LocalizationUniversalFunctor</span> <span class="id" title="var">CC</span> <span class="id" title="var">hss</span> <span class="id" title="var">In</span> <span class="id" title="var">H'</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">comm1</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">tmp1</span> <span class="id" title="tactic">in</span> <span class="id" title="var">tmp2</span>. <span class="id" title="tactic">exact</span> <span class="id" title="var">tmp2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">comm1</span> <span class="id" title="tactic">in</span> <span class="id" title="var">comm2</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">functor_assoc</span> <span class="id" title="tactic">in</span> <span class="id" title="var">comm2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">tmp</span> := <span class="id" title="var">LocalizationUniversalFunctorUnique</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">loc_precategory</span> <span class="id" title="var">has_homsets_loc_precategory</span> <span class="id" title="var">FunctorToLocalization</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">FunctorToLocalization_is_iso</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">tmp1</span> := <span class="id" title="var">tmp</span> <span class="id" title="var">_</span> <span class="id" title="var">comm2</span>). <span class="id" title="tactic">fold</span> <span class="id" title="var">inv2</span> <span class="id" title="tactic">in</span> <span class="id" title="var">tmp1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">tmp2</span> := <span class="id" title="var">tmp</span> (<span class="id" title="var">functor_identity</span> <span class="id" title="var">_</span>) (<span class="id" title="var">functor_identity_right</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">tmp2</span> <span class="id" title="tactic">in</span> <span class="id" title="var">tmp1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exact</span> <span class="id" title="var">tmp1</span>.<br/>
</div>
&nbsp;&nbsp;<span class="id" title="keyword">Opaque</span> <span class="id" title="var">LocalizationUniversalCategory</span>.<br/>

<br/>
<span class="id" title="keyword">End</span> <span class="id" title="var">def_roofs</span>.<br/>
</div>
</div>

<div id="footer">
<hr/><a href="index.html">Index</a><hr/>This page has been generated by <a href="http://coq.inria.fr/">coqdoc</a>
</div>

</div>

</body>
</html>